"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[44827,79906,91411],{6135:(e,t,n)=>{n.d(t,{$4:()=>M,O0:()=>_,O1:()=>I,Sw:()=>w,eH:()=>g,rc:()=>b});var r=n(21772),o=n(88102),i=n(23060),s=n(76612),a=n(16804),l=n(44827);const c="picture-fill",u="simple-fill",h="simple-line",d="simple-marker",f="text",p="cim",y=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),m=new s.q(1e3);function g(e){const t=e.style;let n=null;if(e)switch(e.type){case d:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):n=e.color;break;case c:n={type:"pattern",src:e.url,width:(0,a.Lz)(e.width)*e.xscale,height:(0,a.Lz)(e.height)*e.yscale,x:(0,a.Lz)(e.xoffset),y:(0,a.Lz)(e.yoffset)};break;case f:n=e.color;break;case p:n=(0,l.getCIMSymbolColor)(e)}return n}function b(e,t){const n=e+"-"+t;return void 0!==m.get(n)?Promise.resolve(m.get(n)):(0,i.default)(e,{responseType:"image"}).then((e=>{const r=e.data,o=r.naturalWidth,i=r.naturalHeight,s=document.createElement("canvas");s.width=o,s.height=i;const a=s.getContext("2d");a.fillStyle=t,a.fillRect(0,0,o,i),a.globalCompositeOperation="destination-in",a.drawImage(r,0,0);const l=s.toDataURL();return m.put(n,l),l}))}function M(e){if(!e)return null;let t=null;switch(e.type){case u:case c:case d:t=M(e.outline);break;case h:{const n=(0,a.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:I(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,a.Lz)(e.miterLimit):e.join},t.dashArray=_(t).join(",")||"none");break}default:t=null}return t}function _(e){if(!e?.style)return[];const{dashArray:t,style:n,width:r}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const o=r??0,i=y.has(n)?y.get(n).map((e=>e*o)):[];if("butt"!==e.cap)for(const[s,a]of i.entries())i[s]=s%2==1?a+o:Math.max(a-o,1);return i}const I=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),w=new o.default([128,128,128])},13803:(e,t,n)=>{n.d(t,{MY:()=>m,Td:()=>p,UT:()=>y,e$:()=>b,iW:()=>g,qN:()=>h});var r=n(88102),o=n(56808),i=n(24280),s=n(59858),a=n(14360),l=n(89320);const c={initializeLayersFromClientData:async(e,t,n)=>{if(t||(t=[...e.layers,...e.tables].map((e=>e.graphTypeName))),0===t?.length)return;const r=new Map;for(const i of t)r.set(i,u(e,i));const o=await(0,s.fetchClientDataAtKeys)(e.dataManager.knowledgeGraph,Array.from(r.values()),{requestOptions:{signal:n?.signal}});for(const i of[...e.layers,...e.tables]){const t=i.objectType.name;if(null==t)continue;const n=o.get(u(e,t));if(n){const e=JSON.parse(n);null===e||"object"!=typeof e||e.hasOwnProperty("showLabels")||(e.showLabels=!1),i.read(e,{origin:"service"})}}}},u=(e,t)=>"knowledge-graph"===e.type?`${t}/Map`:`${t}/LinkChart/LinkChartSubLayer`;async function h(e,t,n){return c.initializeLayersFromClientData(e,t,n)}const d=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],f="#8f8f82";function p(e){return e<0||e>=d.length?new r.default(f):new r.default(d[e])}function y(e){const t=e.toArray();return new a.default({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:t},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:t}]}}]}]}}})}function m(e){let t="ESRI__ID",n=4;for(const r of e)if(r.name){if("name"===r.name.toLowerCase()){t=r.name;break}r.name.toLowerCase().includes("name")?(t=r.name,n=2):"esriFieldTypeString"===r.fieldType&&n>3&&(t=r.name,n=3)}return t}function g(e,t,n){const r={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},s=new o.default({labelExpressionInfo:new i.A({expression:"ESRI__ID"===n?`${t}`:`$feature.${n}`}),labelPlacement:"above-center",symbol:new l.default(r)}),a=new o.default({labelExpressionInfo:new i.A({expression:`'${t}' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')`}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new l.default({...r,yoffset:"12px"})});return"entity"===e?[s]:[a]}function b(e,t,n){const r={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},s="ESRI__ID"===n?`${e}`:`$feature.${n}`;return"point"===t?[new o.default({labelExpressionInfo:new i.A({expression:s}),labelPlacement:"above-center",symbol:new l.default(r)})]:"polyline"===t?[new o.default({labelExpressionInfo:new i.A({expression:s}),labelPlacement:"center-along",repeatLabel:!0,symbol:new l.default(r)})]:"polygon"===t?[new o.default({labelExpressionInfo:new i.A({expression:s}),labelPlacement:"always-horizontal",symbol:new l.default(r)})]:null}},42347:(e,t,n)=>{n.d(t,{F:()=>l});var r=n(21265),o=n(95984),i=n(90772);const s={minX:0,minY:0,maxX:0,maxY:0};function a(e,t,n){(function(e){s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3]})(t),e.search(s,n)}class l{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new o.w(9,(0,r.A)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,r)=>{e[t++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,i.Ie)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),a(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},44827:(e,t,n)=>{n.r(t),n.d(t,{applyCIMSymbolColor:()=>f,applyCIMSymbolRotation:()=>m,getCIMSymbolColor:()=>u,getCIMSymbolRotation:()=>y,getCIMSymbolSize:()=>i,getCIMSymbolType:()=>g,scaleCIMMarker:()=>l,scaleCIMSymbol:()=>a,scaleCIMSymbolTo:()=>s});var r=n(88102),o=n(61154);function i(e){const t=(0,o.lW)(e);if("CIMTextSymbol"===t?.type)return t.height??0;let n=0;if(t?.symbolLayers)for(const r of t.symbolLayers)(0,o.MM)(r)&&null!=r.size&&r.size>n?n=r.size:(0,o.mA)(r)&&null!=r.width&&r.width>n?n=r.width:(0,o.jn)(r);return n}function s(e,t,n){if(!e)return;const r=(0,o.lW)(e),s=i(e);0!==s?a(r,t/s,!1,n):function(e,t){if(e)if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":n.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":n.width=t}}else e.height=t}(r,t)}function a(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)c(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":l(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":a(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const e of n.effects)c(e,t)}}else null!=e.height&&(e.height*=t)}function l(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,o.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||a(r.symbol,t,!0,n)}function c(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function u(e){const t=[];return h((0,o.lW)(e),t),t.length?new r.default((0,o.e6)(t[0])):null}function h(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const i of n.symbolLayers)if(!(i.colorLocked||r&&((0,o.mA)(i)||(0,o.MM)(i)&&i.markerPlacement&&(0,o.zr)(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor&&d(t,i.tintColor);break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{h(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":d(t,i.color);break;case"CIMHatchFill":h(i.lineSymbol,t)}}function d(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function f(e,t,n){t instanceof r.default||(t=new r.default(t));const i=(0,o.lW)(e);i&&p(i,t,n)}function p(e,t,n){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const i="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const s of r.symbolLayers){if(s.colorLocked)continue;if(i)if(n){const{layersToColor:e}=n;if(((0,o.mA)(s)||(0,o.MM)(s)&&s.markerPlacement&&(0,o.zr)(s.markerPlacement))&&"fill"===e||(0,o.jn)(s)&&"outline"===e)continue}else if((0,o.mA)(s)||(0,o.MM)(s)&&s.markerPlacement&&(0,o.zr)(s.markerPlacement))continue;const e=t.toArray();switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor=e;break;case"CIMVectorMarker":s.markerGraphics?.forEach((e=>{p(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":s.color=e;break;case"CIMHatchFill":p(s.lineSymbol,t,n)}}}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,o.lW)(e);if("CIMTextSymbol"===n?.type||"CIMPointSymbol"===n?.type){const e=n.angle;return null!=e&&t?360-e:e??0}return 0}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,o.lW)(e);if(n&&(t=360-t),"CIMTextSymbol"!==r?.type){if("CIMPointSymbol"===r?.type&&r.symbolLayers){const e=t-(r.angle||0);for(const t of r.symbolLayers)if((0,o.MM)(t)){let n=t.rotation||0;t.rotateClockwise?n-=e:n+=e,t.rotation=n}r.angle=t}}else r.angle=t}function g(e){const t=(0,o.lW)(e);if(!t)return null;switch(t.type){case"CIMPointSymbol":return"CIMPointSymbol";case"CIMLineSymbol":return"CIMLineSymbol";case"CIMPolygonSymbol":return"CIMPolygonSymbol";case"CIMTextSymbol":return"CIMTextSymbol";case"CIMMeshSymbol":return"CIMMeshSymbol";default:return null}}},48047:(e,t,n)=>{n.r(t),n.d(t,{default:()=>re});var r=n(93800),o=n(35377),i=n(82301),s=n(50925),a=n(59321),l=(n(34037),n(48602)),c=(n(21265),n(75269)),u=n(15484),h=n(70605),d=n(12560),f=n(75400),p=n(65920),y=n(54824),m=n(96913),g=n(93321),b=n(70576),M=n(54723),_=n(57457),I=n(78670),w=n(13791),x=n(97495),C=n(39244);n(14746);const S=(0,n(14365).p)(),v=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,r._)([(0,l.MZ)(S.fields)],t.prototype,"fields",void 0),(0,r._)([(0,l.MZ)(S.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,r._)([(0,c.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],t),t};var k=n(13803),T=n(24203),L=n(48853),E=n(30851),B=n(59155),P=n(78941),O=n(52954),A=n(75215),F=n(39936),j=n(75238),Z=n(96328),Y=n(50616),z=n(95011),X=n(56808),N=n(51496),R=n(89243),G=n(99181),Q=n(72117),D=n(86899),J=n(87520),$=n(53512),q=n(1802),W=n(79906),U=n(82224);function V(e){if(!e.json)return e;e.json.write=H(e.json.write);const t=e.json.origins;if(!t)return e;let n;for(n in t){const e=t[n];e&&(e.write=H(e.write))}return e}function H(e){return"object"==typeof e&&e?(!1!==e.enabled&&(e.overridePolicy=function(e){const{target:t,writer:n,overridePolicy:r,...o}=e;return function(e,t){const n=ee.call(this,e,t);return n.enabled?{...o,...n}:n}}(e)),e):!0===e?K():e}function K(){return{overridePolicy:ee}}function ee(e,t){const n=!!this.geometryType;let r={enabled:n};return n&&(r={...r,...te.call(this,e,t)}),r}function te(e,t){return{ignoreOrigin:this.originIdOf(t)>h.Gr.DEFAULTS}}let ne=class extends(v((0,L.FJ)((0,B.J)((0,E.F)((0,T.dM)((0,P.fY)((0,F.e)((0,A.j)((0,O.J)((0,a.P)(_.default))))))))))){constructor(e){var t;super(e),t=this,this.blendMode="normal",this.capabilities=(0,x.f)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=C.dr,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new U.A(e.port1,{channel:e,client:{queryFeatures:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=$.default.fromJSON(e);return t.queryFeaturesJSON(r,n)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}get fields(){const e=[];return this.objectType?.properties?.forEach((t=>{const n="esriFieldTypeOID"===t.fieldType?"esriFieldTypeInteger":t.fieldType;e.push(Y.default.fromJSON({name:t.name,type:n,alias:t.alias,defaultValue:t.defaultValue,editable:t.editable,nullable:t.nullable}))})),e.push(Y.default.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),Y.default.fromJSON({name:C.M1,type:"esriFieldTypeInteger",alias:C.M1,editable:!1}),Y.default.fromJSON({name:C.BL,type:"esriFieldTypeInteger",alias:C.BL,editable:!1})),e}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.geometryType;return t&&"esriGeometryNull"!==t?M.gy.fromJSON(t):null}get geometryFieldName(){if("link-chart"===this.parentCompositeLayer?.type)return C.T1;const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name);return e?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,n=t?this.objectType?.properties?.[t]:null;return n?.hasM??!1}get hasZ(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,n=t?this.objectType?.properties?.[t]:null;return n?.hasZ??!1}set labelingInfo(e){this._set("labelingInfo",e)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");const e=this.objectType.properties?(0,k.MY)(this.objectType.properties):"ESRI__ID";return"link-chart"===this.parentCompositeLayer.type?(0,k.iW)(this.graphType,this.graphTypeName,e):(0,k.e$)(this.graphTypeName,this.geometryType,e)}set renderer(e){(0,z.fixRendererFields)(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const e=this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel,t=[...e?.entityTypes??[],...e?.relationshipTypes??[]].map((e=>e.name)).indexOf(this.graphTypeName),n=(0,k.Td)(t);if("link-chart"===this.parentCompositeLayer?.type){if("relationship"===this.graphType)return new G.default({type:"simple",symbol:(0,k.UT)(n)});const e=(0,Q.fromJSON)((0,x.F0)(M.gy.toJSON("point")).renderer);return(0,W.dt)(e.symbol,n),e}const r=(0,Q.fromJSON)((0,x.F0)(M.gy.toJSON(this.geometryType)).renderer);return(0,W.dt)(r.symbol,n),r}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??g.default.WGS84}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,t){t.title=e??"Layer"}createPopupTemplate(e){return(0,q.createPopupTemplate)(this,e)}createQuery(){return new $.default({where:"1=1",outFields:["*"]})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){return null}async queryFeatures(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e),o=J.default.fromJSON(await r.executeQuery(n.toJSON(),t?.signal));return o.features.forEach((e=>{e.sourceLayer=this})),o}async queryFeaturesJSON(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return await r.executeQuery(n.toJSON(),t?.signal)}async queryFeatureCount(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return r.executeQueryForCount(n.toJSON(),t?.signal)}async queryExtent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;await this.load();const n={...e,returnGeometry:!0},{resolvedQuery:r,queryEngine:o}=await this._setupQueryObjects(n),i=await o.executeQueryForExtent(r.toJSON(),t?.signal);let s;return s=null!=i.extent?.xmin&&null!=i.extent?.xmax&&null!=i.extent?.ymin&&null!=i.extent?.ymax?new d.default(i.extent):new d.default,{count:i.count,extent:s}}async queryObjectIds(e,t){await this.load();const n=$.default.from(e);let r;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)r=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);r=this.loadQueryEngine(e)}return await r.executeQueryForIds(n.toJSON(),t?.signal)}loadQueryEngine(e){const t=new I.A({geometryType:M.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),n=new w.do({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:M.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:t});return n.featureStore.addMany(e),n}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new $.default({where:"1=1",outFields:[C.dr]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then((()=>(0,z.fixTimeInfoFields)(this.timeInfo,this.fieldsIndex)))),Promise.resolve(this)}async _setupQueryObjects(e,t){const n=$.default.from(e),r=n.geometry;if(r&&!r.spatialReference?.isWGS84&&(await(0,m.initializeProjection)(r.spatialReference,b.KK),n.geometry=(0,m.project)(r instanceof p.default||r instanceof y.default||r instanceof f.default?r:r.extent,b.KK)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)return{resolvedQuery:n,queryEngine:this._cachedQueryEngine};const o=await this.parentCompositeLayer.dataManager.getData(n,this,t);return{resolvedQuery:n,queryEngine:this.loadQueryEngine(o)}}};(0,r._)([(0,l.MZ)(V((0,i.clone)(T.sU)))],ne.prototype,"blendMode",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"capabilities",void 0),(0,r._)([(0,l.MZ)({json:{origins:{"web-scene":{write:!1}},write:K()}})],ne.prototype,"charts",void 0),(0,r._)([(0,l.MZ)({readOnly:!0})],ne.prototype,"defaultPopupTemplate",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],ne.prototype,"definitionExpression",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"displayField",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(L.Dp)))],ne.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(L.KV)))],ne.prototype,"displayFilterInfo",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(T.LF)))],ne.prototype,"effect",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"elevationInfo",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(E.Y)))],ne.prototype,"featureEffect",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(Z.d)))],ne.prototype,"featureReduction",null),(0,r._)([(0,l.MZ)()],ne.prototype,"fields",null),(0,r._)([(0,l.MZ)()],ne.prototype,"geometryType",null),(0,r._)([(0,l.MZ)()],ne.prototype,"geometryFieldName",null),(0,r._)([(0,l.MZ)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ne.prototype,"graphType",void 0),(0,r._)([(0,l.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ne.prototype,"graphTypeName",null),(0,r._)([(0,l.MZ)()],ne.prototype,"hasM",null),(0,r._)([(0,l.MZ)()],ne.prototype,"hasZ",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],ne.prototype,"id",void 0),(0,r._)([(0,l.MZ)({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],ne.prototype,"labelsVisible",void 0),(0,r._)([(0,l.MZ)({type:[X.default],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:function(e,t,n){const r=[["ESRI__AGGREGATION_COUNT",C.M1],["ESRI__ORIGIN_ID",C.Cz],["ESRI__DESTINATION_ID",C.KQ],["ESRI__LAYOUT_GEOMETRY",C.T1]];try{for(const t of e)for(const[e,n]of r)t.labelExpression=t.labelExpression?.replaceAll(e,n),t.labelExpressionInfo?.expression&&(t.labelExpressionInfo.expression=t.labelExpressionInfo.expression.replaceAll(e,n))}catch(o){s.A.getLogger(this).warn("Error updating labelingInfo",o)}return(0,N.w)(e,t,n)},write:K()}})],ne.prototype,"labelingInfo",null),(0,r._)([(0,l.MZ)({readOnly:!0,json:{read:!1,write:{writer(e,t){switch(this.parentCompositeLayer?.type){case"link-chart":t.layerType="LinkChartSubLayer";break;case"knowledge-graph":t.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ne.prototype,"layerType",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(j.fV)))],ne.prototype,"legendEnabled",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(j.hG)))],ne.prototype,"maxScale",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(j.hn)))],ne.prototype,"minScale",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"objectIdField",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"objectType",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(j.ke)))],ne.prototype,"opacity",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(P.ne)))],ne.prototype,"orderBy",void 0),(0,r._)([(0,l.MZ)({clonable:!1})],ne.prototype,"parent",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"parentCompositeLayer",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(j.M6)))],ne.prototype,"popupEnabled",void 0),(0,r._)([(0,l.MZ)({type:o.default,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],ne.prototype,"popupTemplate",void 0),(0,r._)([(0,l.MZ)({type:Number,json:{write:{overridePolicy:te}}})],ne.prototype,"refreshInterval",void 0),(0,r._)([(0,l.MZ)({types:D.Hg,json:{name:"layerDefinition.drawingInfo.renderer",write:K()}})],ne.prototype,"renderer",null),(0,r._)([(0,l.MZ)()],ne.prototype,"source",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"spatialReference",null),(0,r._)([(0,l.MZ)({type:R.default,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],ne.prototype,"timeInfo",null),(0,r._)([(0,l.MZ)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ne.prototype,"title",null),(0,r._)([(0,u.K)("title")],ne.prototype,"writeTitle",null),(0,r._)([(0,l.MZ)({json:{read:!1}})],ne.prototype,"type",void 0),(0,r._)([(0,l.MZ)(V((0,i.clone)(F.B)))],ne.prototype,"useViewTime",void 0),(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"visibility",write:K()}})],ne.prototype,"visible",void 0),ne=(0,r._)([(0,c.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],ne);const re=ne},73532:(e,t,n)=>{n.d(t,{$X:()=>L,B2:()=>s,Gy:()=>C,IE:()=>i,P5:()=>E,Q1:()=>o,QE:()=>v,SW:()=>k,Tr:()=>T,VV:()=>r,wp:()=>S});n(78629);function r(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function o(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:n,translate:r}=e,o=n[0]??1,i=n[1]??1;return{originPosition:"lowerLeft",scale:[o,"lowerLeft"===t?i:-i,n[2]??1,n[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function i(e,t){let{scale:n,translate:r}=e;return Math.round((t-r[0])/n[0])}function s(e,t){let{scale:n,translate:r}=e;return Math.round((t-r[1])/n[1])}function a(e,t){let{scale:n,translate:r}=e;return Math.round(((t??0)-r[2])/n[2])}function l(e,t){let{scale:n,translate:r}=e;return t?Math.round((t-r[3])/n[3]):0}function c(e,t){return e&&t?f:e&&!t?h:!e&&t?d:u}const u=(e,t)=>{const n=[];if(!t.length)return null;const r=t[0];let o=i(e,r[0]),a=s(e,r[1]);n.push([o,a]);for(let l=1;l<t.length;l++){const[r,c]=t[l],u=i(e,r),h=s(e,c);u===o&&h===a||n.push([u-o,h-a]),o=u,a=h}return n},h=(e,t)=>{const n=[];if(!t.length)return null;const r=t[0];let o=i(e,r[0]),l=s(e,r[1]),c=a(e,r[2]);n.push([o,l,c]);for(let u=1;u<t.length;u++){const[r,h,d]=t[u],f=i(e,r),p=s(e,h),y=a(e,d);f===o&&p===l&&y===c||n.push([f-o,p-l,y]),o=f,l=p,c=y}return n},d=(e,t)=>{const n=[];if(!t.length)return null;const r=t[0];let o=i(e,r[0]),a=s(e,r[1]),c=l(e,r[2]);n.push([o,a,c]);for(let u=1;u<t.length;u++){const[r,h,d]=t[u],f=i(e,r),p=s(e,h),y=l(e,d);f===o&&p===a&&y===c||n.push([f-o,p-a,y]),o=f,a=p,c=y}return n},f=(e,t)=>{const n=[];if(!t.length)return null;const r=t[0];let o=i(e,r[0]),c=s(e,r[1]),u=a(e,r[2]),h=l(e,r[3]);n.push([o,c,u,h]);for(let d=1;d<t.length;d++){const[r,f,p,y]=t[d],m=i(e,r),g=s(e,f),b=a(e,p),M=l(e,y);m===o&&g===c&&b===u&&M===h||n.push([m-o,g-c,b,M]),o=m,c=g,u=b,h=M}return n};function p(e,t){let{scale:n,translate:r}=e;return t*n[0]+r[0]}function y(e,t){let{scale:n,translate:r}=e;return t*n[1]+r[1]}function m(e,t){let{scale:n,translate:r}=e;return(t??0)*n[2]+r[2]}function g(e,t){let{scale:n,translate:r}=e;return t?t*n[3]+r[3]:0}function b(e,t){return e&&t?w:e&&!t?_:!e&&t?I:M}const M=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=p(e,r[0]),i=y(e,r[1]);n[0]=[o,i];const{scale:s,originPosition:a}=e,l=s[0],c="lowerLeft"===a?s[1]:-s[1];for(let u=1;u<t.length;u++){const[e,r]=t[u];o+=l*e,i+=c*r,n[u]=[o,i]}return n},_=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=p(e,r[0]),i=y(e,r[1]);n[0]=[o,i,m(e,r[2])];const{scale:s,originPosition:a}=e,l=s[0],c="lowerLeft"===a?s[1]:-s[1];for(let u=1;u<t.length;u++){const[r,s,a]=t[u];o+=l*r,i+=c*s,n[u]=[o,i,m(e,a)]}return n},I=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=p(e,r[0]),i=y(e,r[1]);n[0]=[o,i,g(e,r[2])];const{scale:s,originPosition:a}=e,l=s[0],c="lowerLeft"===a?s[1]:-s[1];for(let u=1;u<t.length;u++){const[r,s,a]=t[u];o+=l*r,i+=c*s,n[u]=[o,i,g(e,a)]}return n},w=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=p(e,r[0]),i=y(e,r[1]);n[0]=[o,i,m(e,r[2]),g(e,r[3])];const{scale:s,originPosition:a}=e,l=s[0],c="lowerLeft"===a?s[1]:-s[1];for(let u=1;u<t.length;u++){const[r,s,a,h]=t[u];o+=l*r,i+=c*s,n[u]=[o,i,m(e,a),g(e,h)]}return n};function x(e,t,n){const r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=t(e,n[o]);return r}function C(e,t,n){const r=o(e);return t.x=i(r,n.x),t.y=s(r,n.y),null!=n.z&&(t.z=a(r,n.z)),null!=n.m&&(t.m=l(r,n.m)),t}function S(e,t,n){const r=function(e,t,n,r){const o=[],i=c(n,r);for(let s=0;s<t.length;s++){const n=i(e,t[s]);n&&n.length>=3&&o.push(n)}return o.length?o:null}(o(e),n.rings,n.hasZ,n.hasM);return r?(t.rings=r,t.hasZ=n.hasZ??!1,t.hasM=n.hasM??!1,t):null}function v(e,t,n){const r=function(e,t,n,r){const o=[],i=c(n,r);for(let s=0;s<t.length;s++){const n=i(e,t[s]);n&&n.length>=2&&o.push(n)}return o.length?o:null}(o(e),n.paths,n.hasZ,n.hasM);return r?(t.paths=r,t.hasZ=n.hasZ??!1,t.hasM=n.hasM??!1,t):null}function k(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n?.hasZ??!1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n?.hasM??!1;if(null!=n){const s=o(e);t.points=b(r,i)(s,n.points),t.hasZ=r,t.hasM=i}return t}function T(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!=n?.z,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!=n?.m;if(null==n)return t;const s=o(e);return t.x=p(s,n.x),t.y=y(s,n.y),r&&(t.z=m(s,n.z)),i&&(t.m=g(s,n.m)),t}function L(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n?.hasZ??!1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n?.hasM??!1;if(null!=n){const s=o(e);t.rings=x(s,b(r,i),n.rings),t.hasZ=r,t.hasM=i}return t}function E(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n?.hasZ??!1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n?.hasM??!1;if(null!=n){const s=o(e);t.paths=x(s,b(r,i),n.paths),t.hasZ=r,t.hasM=i}return t}},78670:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(62631),o=n(74719),i=n(58448),s=n(50925),a=n(4309),l=n(90772),c=n(81765),u=n(42347),h=n(63904),d=n(79801);const f=(0,a.vt)();class p{constructor(e){this.geometryInfo=e,this._boundsStore=new u.F,this._featuresById=new Map,this._usedMemory=0,this.events=new i.A,this.featureAdapter=d.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,n,r,o]=this.fullBounds;return{xmin:t,ymin:n,xmax:r,ymax:o,spatialReference:(0,h.ag)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map((e=>this._upsert(e)));return this._emitChanged(),t.filter(r.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t((0,a.Jt)(f,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void s.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new o.default("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let r;if(n?(e.displayId=n.displayId,r=this._boundsStore.get(t),this._boundsStore.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=(0,c.jQ)(null!=r?r:(0,l.vt)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=r&&this._boundsStore.set(t,r),this._featuresById.set(t,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){const t=e?.objectId;if(null==t)return s.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new o.default("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const n=this._featuresById.get(t);if(!n)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0;const{geometry:r,attributes:i}=e;for(const o in i)n.attributes[o]=i[o];return r&&(n.geometry=r,this._boundsStore.set(t,(0,c.jQ)((0,l.vt)(),r,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(n)??0,n}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}},79801:(e,t,n)=>{n.d(t,{T:()=>o});var r=n(67011);const o={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new r.Om(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>e.ensureCentroid(t)}},79906:(e,t,n)=>{n.d(t,{$d:()=>p,GG:()=>C,N7:()=>y,Sx:()=>m,UQ:()=>x,cJ:()=>g,di:()=>S,dt:()=>b,f3:()=>v,k_:()=>f});var r=n(88102),o=n(58828),i=(n(21265),n(16804)),s=n(28473),a=n(22250),l=n(44827),c=n(6135),u=n(76945),h=n(38602);const d=new r.default("white");function f(e){if(!e)return 0;if((0,h.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,i.PN)((0,c.$4)(e)?.width)}function p(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function y(e){return e.resource?.href??""}function m(e,t){if(!e)return null;let n=null;return(0,h.wk)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.default(n):null}(e):(0,h.$y)(e)&&(n="cim"===e.type?(0,l.getCIMSymbolColor)(e):e.color?new r.default(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.default(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.default(t)),(0,h.wk)(e)?function(e,t,n){const r=e.symbolLayers;if(!r)return;const o=e=>g(t=t??e??(null!=n?d:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=o(e.color);else{const t=null!=e.material?e.material.color:null,r=o(t);null==e.material?e.material=new u.N({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n))}}))}(e,t,n):(0,h.$y)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function M(e,t){const r=e.symbolLayers;r&&await(0,o.jJ)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=_(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=I(t,s.Un,[e.width,void 0,e.height]);e.width=w(t[0],e.width,1,n),e.height=w(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:o}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(28897).then(n.bind(n,28897)),r=await t(e,10),{width:o,height:i,depth:s}=e,a=[o,s,i];let l=1;for(let n=0;n<3;n++){const e=a[n];if(null!=e){l=e/r[n];break}}for(let n=0;n<3;n++)null==a[n]&&(a[n]=r[n]*l);return{resourceSize:r,symbolSize:a}}(e),i=I(t,r,o);e.width=w(t[0],o[0],r[0],i),e.depth=w(t[1],o[1],r[1],i),e.height=w(t[2],o[2],r[2],i)}(e,t)}}(e,t)))}function _(e){for(const t of e)if("number"==typeof t)return t;return null}function I(e,t,n){for(let r=0;r<3;r++){const o=e[r];switch(o){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(o&&t[r])return o/t[r]}}return 1}function w(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}async function x(e,t){if(e&&t)return(0,h.wk)(e)?M(e,t):void((0,h.$y)(e)&&function(e,t){const n=_(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function C(e,t,n){if(e&&null!=t)if((0,h.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if("object"===e.type)switch(n){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,h.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function S(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.zu)(t)}function v(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}},90684:(e,t,n)=>{function r(e,t,n){return{objectId:e,target:t,distance:n,type:"vertex"}}function o(e,t,n,r,o){return{objectId:e,target:t,distance:n,type:"edge",start:r,end:o,draped:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}n.d(t,{P:()=>o,k:()=>r})},95984:(e,t,n)=>{n.d(t,{E:()=>S,w:()=>a});var r=n(62631),o=n(7951),i=(n(21265),n(15899)),s=n(95735);class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,t=arguments.length>1?arguments[1]:void 0;this._compareMinX=d,this._compareMinY=f,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),I.prune(),w.prune(),x.prune(),C.prune()}all(e){l(this._data,e)}search(e,t){let n=this._data;const r=this._toBBox;if(M(e,n))for(I.clear();n;){for(let o=0,i=n.children.length;o<i;o++){const i=n.children[o],s=n.leaf?r(i):i;M(e,s)&&(n.leaf?t(i):b(e,s)?l(i,t):I.push(i))}n=I.pop()}}collides(e){let t=this._data;const n=this._toBBox;if(!M(e,t))return!1;for(I.clear();t;){for(let r=0,o=t.children.length;r<o;r++){const o=t.children[r],i=t.leaf?n(o):o;if(M(e,i)){if(t.leaf||b(e,i))return!0;I.push(o)}}t=I.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new k([]),this}remove(e){if(!e)return this;let t,n=this._data,i=null,s=0,a=!1;const l=this._toBBox(e);for(x.clear(),C.clear();n||x.length>0;){if(n||(n=x.pop(),i=x.data[x.length-1],s=C.pop()??0,a=!0),n.leaf&&(t=(0,r.qh)(n.children,(0,o.zI)(e),n.children.length,n.indexHint),-1!==t))return n.children.splice(t,1),x.push(n),this._condense(x),this;a||n.leaf||!b(n,l)?i?(s++,n=i.children[s],a=!1):n=null:(x.push(n),C.push(s),s=0,i=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_build(e,t,n,r){const o=n-t+1;let i=this._maxEntries;if(o<=i){const r=new k(e.slice(t,n+1));return c(r,this._toBBox),r}r||(r=Math.ceil(Math.log(o)/Math.log(i)),i=Math.ceil(o/i**(r-1)));const s=new T([]);s.height=r;const a=Math.ceil(o/i),l=a*Math.ceil(Math.sqrt(i));_(e,t,n,l,this._compareMinX);for(let c=t;c<=n;c+=l){const t=Math.min(c+l-1,n);_(e,c,t,a,this._compareMinY);for(let n=c;n<=t;n+=a){const o=Math.min(n+a-1,t);s.children.push(this._build(e,n,o,r-1))}}return c(s,this._toBBox),s}_insert(e,t,n){const r=this._toBBox,o=n?e:r(e);x.clear();const i=function(e,t,n,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==n;){let n,r=1/0,o=1/0;for(let i=0,s=t.children.length;i<s;i++){const s=t.children[i],a=p(s),l=m(e,s)-a;l<o?(o=l,r=a<r?a:r,n=s):l===o&&a<r&&(r=a,n=s)}t=n||t.children[0]}return t}(o,this._data,t,x);for(i.children.push(e),h(i,o);t>=0&&x.data[t].children.length>this._maxEntries;)this._split(x,t),t--;!function(e,t,n){for(let r=n;r>=0;r--)h(t.data[r],e)}(o,x,t)}_split(e,t){const n=e.data[t],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const i=this._chooseSplitIndex(n,o,r);if(!i)return;const s=n.children.splice(i,n.children.length-i),a=n.leaf?new k(s):new T(s);a.height=n.height,c(n,this._toBBox),c(a,this._toBBox),t?e.data[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this._data=new T([e,t]),this._data.height=e.height+1,c(this._data,this._toBBox)}_chooseSplitIndex(e,t,n){let r,o,i;r=o=1/0;for(let s=t;s<=n-t;s++){const t=u(e,0,s,this._toBBox),a=u(e,s,n,this._toBBox),l=g(t,a),c=p(t)+p(a);l<r?(r=l,i=s,o=c<o?c:o):l===r&&c<o&&(o=c,i=s)}return i}_chooseSplitAxis(e,t,n){const r=e.leaf?this._compareMinX:d,o=e.leaf?this._compareMinY:f;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,o)&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const o=this._toBBox,i=u(e,0,t,o),s=u(e,n-t,n,o);let a=y(i)+y(s);for(let l=t;l<n-t;l++){const t=e.children[l];h(i,e.leaf?o(t):t),a+=y(i)}for(let l=n-t-1;l>=t;l--){const t=e.children[l];h(s,e.leaf?o(t):t),a+=y(s)}return a}_condense(e){for(let t=e.length-1;t>=0;t--){const n=e.data[t];if(0===n.children.length)if(t>0){const o=e.data[t-1],i=o.children;i.splice((0,r.qh)(i,n,i.length,o.indexHint),1)}else this.clear();else c(n,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){let n=e;for(w.clear();n;){if(!0===n.leaf)for(const e of n.children)t((0,o.zI)(e));else w.pushArray(n.children);n=w.pop()??null}}function c(e,t){u(e,0,e.children.length,t,e)}function u(e,t,n,r,o){o||(o=new k([])),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let i,s=t;s<n;s++)i=e.children[s],h(o,e.leaf?r(i):i);return o}function h(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function d(e,t){return e.minX-t.minX}function f(e,t){return e.minY-t.minY}function p(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function y(e){return e.maxX-e.minX+(e.maxY-e.minY)}function m(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function g(e,t){const n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),o=Math.min(e.maxX,t.maxX),i=Math.min(e.maxY,t.maxY);return Math.max(0,o-n)*Math.max(0,i-r)}function b(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function M(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function _(e,t,n,r,o){const i=[t,n];for(;i.length;){const t=i.pop(),n=i.pop();if(t-n<=r)continue;const a=n+Math.ceil((t-n)/r/2)*r;(0,s.q)(e,a,n,t,o),i.push(n,a,a,t)}}const I=new i.A,w=new i.A,x=new i.A,C=new i.A({deallocator:void 0});class S{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class v extends S{constructor(){super(...arguments),this.height=1,this.indexHint=new r.vW}}class k extends v{constructor(e){super(),this.children=e,this.leaf=!0}}class T extends v{constructor(e){super(),this.children=e,this.leaf=!1}}},97495:(e,t,n)=>{n.d(t,{F0:()=>a,Vx:()=>u,e2:()=>d,f:()=>f});var r=n(21265),o=n(82301),i=n(3133),s=n(46575);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.Cb:"esriGeometryPolyline"===e?s.yM:s.WR}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let c=1;function u(e,t){if((0,r.A)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this${h(t)} = null;`;for(const t in e)n+=`this${h(t)} = ${JSON.stringify(e[t])};`;const r=new Function(`\n      return class AttributesClass$${c++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `)();return()=>new r}catch(n){return()=>({[t]:null,...e})}}function h(e){return l.test(e)?`.${e}`:`["${e}"]`}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,o.clone)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:i.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:i.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}}}]);