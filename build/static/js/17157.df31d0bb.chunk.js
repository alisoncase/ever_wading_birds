"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[10963,17157,50258,66201,88582],{17157:(t,e,i)=>{i.r(e),i.d(e,{default:()=>C});var n=i(93800),s=i(62631),l=i(7951),a=i(79953),o=i(87431),r=i(48602),u=(i(50925),i(75269)),m=i(66845),d=i(73210),c=i(61695),h=i(35255),p=i(27811),v=i(49403),_=i(50821),f=i(52353),y=i(79304),g=i(76697),x=i(66201),w=i(87118),b=i(17745),T=i(5619);const E="esri-time-slider",M={timeSlider:`${E}`,timeSliderOutOfBounds:`${E}--out-of-bounds`,timeSliderMode:`${E}__mode--`,timeSliderLayout:`${E}__layout--`,timeSliderRow:`${E}__row`,animation:`${E}__animation`,animationButton:`${E}__animation-button`,timeExtent:`${E}__time-extent`,timeExtentGroup:`${E}__time-extent-group`,timeExtentDate:`${E}__time-extent-date`,timeExtentTime:`${E}__time-extent-time`,timeExtentSeparator:`${E}__time-extent-separator`,playbackControls:`${E}__playback-controls`,min:`${E}__min`,minDate:`${E}__min-date`,minTime:`${E}__min-time`,slider:`${E}__slider`,sliderMajorTick:"majorTick",sliderMinorTick:"minorTick",max:`${E}__max`,maxDate:`${E}__max-date`,maxTime:`${E}__max-time`,previous:`${E}__previous`,previousButton:`${E}__previous-button`,next:`${E}__next`,nextButton:`${E}__next-button`,warning:`${E}__warning`,warningText:`${E}__warning-text`,hasActions:`${E}--has-actions`,actions:`${E}__actions`,actionsButton:`${E}__actions-button`};var k=i(50258);const Z=[{minor:{value:100,unit:"milliseconds"},major:{value:1,unit:"seconds"},format:{second:"numeric"}},{minor:{value:500,unit:"milliseconds"},major:{value:5,unit:"seconds"},format:{second:"numeric"}},{minor:{value:1,unit:"seconds"},major:{value:20,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:2,unit:"seconds"},major:{value:30,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:10,unit:"seconds"},major:{value:1,unit:"minutes"},format:{minute:"numeric"}},{minor:{value:15,unit:"seconds"},major:{value:5,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"minutes"},major:{value:20,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:5,unit:"minutes"},major:{value:2,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:15,unit:"minutes"},major:{value:6,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"hours"},major:{value:1,unit:"days"},format:{day:"numeric",month:"short"}},{minor:{value:6,unit:"hours"},major:{value:1,unit:"weeks"},format:{day:"numeric",month:"short"}},{minor:{value:1,unit:"days"},major:{value:1,unit:"months"},format:{month:"long"}},{minor:{value:2,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:3,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:4,unit:"days"},major:{value:3,unit:"months"},format:{month:"short",year:"numeric"}},{minor:{value:1,unit:"weeks"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"months"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:2,unit:"months"},major:{value:2,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"years"},major:{value:1,unit:"decades"},format:{year:"numeric"}},{minor:{value:2,unit:"years"},major:{value:5,unit:"decades"},format:{year:"numeric"}},{minor:{value:5,unit:"decades"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1,unit:"centuries"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:2,unit:"centuries"},major:{value:20,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:5,unit:"centuries"},major:{value:50,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:10,unit:"centuries"},major:{value:100,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:20,unit:"centuries"},major:{value:200,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:50,unit:"centuries"},major:{value:500,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:100,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:200,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:500,unit:"centuries"},major:{value:5e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1e3,unit:"centuries"},major:{value:1e4,unit:"centuries"},format:{era:"short",year:"numeric"}}];let S=class extends p.default{constructor(t,e){super(t,e),this._ignoreNextSliderUpdate=!1,this._slider=new h.default({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1,thumbsConstrained:!1}),this._tickFormat=null,this.disabled=!1,this.labelFormatFunction=null,this.messages=null,this.messagesCommon=null,this.tickConfigs=null,this.timeVisible=!1,this.viewModel=new k.default}initialize(){this.addHandles([(0,a.watch)((()=>this._slider.values),(t=>{if(this._ignoreNextSliderUpdate)return void(this._ignoreNextSliderUpdate=!1);const e=this.viewModel.valuesToTimeExtent(t);null!=this.timeExtent?null!=e?this.timeExtent.equals(e)||(this.timeExtent=e):this.timeExtent=null:null!=e&&(this.timeExtent=e)})),(0,a.watch)((()=>this.effectiveStops),(()=>this._updateSliderSteps()),a.initial)])}loadDependencies(){return(0,v.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-menu":()=>Promise.all([i.e(86290),i.e(74597),i.e(71564)]).then(i.bind(i,71564))})}destroy(){this._slider.destroy(),this._tickFormat=null}get _dateFormat(){return this._getIntlOptions("short-date")}get _timeFormat(){return this._getIntlOptions("long-time")}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get effectiveStops(){return this.viewModel.effectiveStops}get fullTimeExtent(){return this.viewModel.fullTimeExtent}set fullTimeExtent(t){this.viewModel.fullTimeExtent=t}get icon(){return"clock"}set icon(t){this._overrideIfSome("icon",t)}get interactive(){return!(this.disabled||"disabled"===this.viewModel.state||this.timeZone===d.L5)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){["auto","compact","wide"].includes(t)||(t="auto"),this._set("layout",t)}get loop(){return this.viewModel.loop}set loop(t){this.viewModel.loop=t}get mode(){return this.viewModel.mode}set mode(t){this.viewModel.mode=t}get playRate(){return this.viewModel.playRate}set playRate(t){this.viewModel.playRate=t}get stops(){return this.viewModel.stops}set stops(t){this.viewModel.stops=t}get tickFormats(){const{timeZone:t}=this;return Z.map((e=>{let{minor:i,major:n,format:s}=e;return{minor:new c.default(i),major:new c.default(n),format:{...s,timeZone:t}}}))}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(t){this.viewModel.timeExtent=t}get timeZone(){return this.viewModel.view?.timeZone??d.qU}set timeZone(t){this._overrideIfSome("timeZone",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}next(){return this.viewModel.next()}play(){return this.viewModel.play()}previous(){return this.viewModel.previous()}stop(){return this.viewModel.stop()}render(){const{_slider:t,actions:e,domNode:i,effectiveStops:n,fullTimeExtent:l,interactive:a,messages:o,messagesCommon:r,mode:u,tickConfigs:d,timeExtent:c,timeVisible:h,viewModel:{state:p,timeExtentValues:v}}=this;if(null!=l){const{start:e,end:i}=l;if(null!=e&&null!=i){const n=e.getTime(),s=i.getTime(),l=t.min!==n||t.max!==s;if(l&&(t.min=n,t.max=s),null!=d)t.tickConfigs!==d&&(t.tickConfigs=d);else{const e=(s-n)/(t.trackElement?.offsetWidth||400),i=this.tickFormats.find((t=>t.minor.toMilliseconds()>3*e))??this.tickFormats.at(-1),a=this._tickFormat!==i&&null!=i;if(a&&(this._tickFormat=i),l||a){const e={mode:"position",values:this._getTickPositions(i.minor),labelsVisible:!1,tickCreatedFunction:(t,e)=>{e?.classList.add(M.sliderMinorTick)}},n={mode:"position",values:this._getTickPositions(i.major),labelsVisible:!0,tickCreatedFunction:(t,e)=>{e?.classList.add(M.sliderMajorTick)},labelFormatFunction:t=>(0,m.Yq)(t,i.format)};t.tickConfigs=[e,n]}}}}const y=null==this.fullTimeExtent?.start||null==this.fullTimeExtent.end||null==this.timeExtent||this.timeExtent.isAllTime||this.timeExtent.isEmpty||null!=this.timeExtent.start&&(this.timeExtent.start<this.fullTimeExtent.start||this.timeExtent.start>this.fullTimeExtent.end)||null!=this.timeExtent.end&&(this.timeExtent.end>this.fullTimeExtent.end||this.timeExtent.end<this.fullTimeExtent.start);if(y)switch(this._ignoreNextSliderUpdate=!0,u){case"time-window":t.values=[t.min,t.max];break;case"instant":case"cumulative-from-end":t.values=[t.min];break;case"cumulative-from-start":t.values=[t.max]}else null!=v?(0,s.aI)(t.values,v)||(t.values=v):t.values=null;t.disabled=!a;const g="ready"===p,x="playing"===p,E=y||!a||null==n||0===n.length,k="auto"===this.layout?i.clientWidth<858?"compact":"wide":this.layout,Z=(0,w.K)("div",{class:M.animation},(0,w.K)("button",{"aria-disabled":E?"true":"false","aria-label":x?r.control.stop:r.control.play,bind:this,class:this.classes(_.D.widgetButton,M.animationButton,E&&_.D.buttonDisabled),disabled:E,onclick:this._playOrStopClick,title:x?r.control.stop:r.control.play,type:"button"},(0,w.K)("div",{class:this.classes((g||E)&&f.T.play,x&&f.T.pause)}))),S=null!=this.labelFormatFunction?(0,w.K)("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:M.timeExtentDate,"data-date":c?[c.start,c.end]:null,"data-layout":k,"data-type":"extent",key:"extent"}):null==c||null!=c&&c.isAllTime?[(0,w.K)("div",{class:this.classes(M.warning,f.T.noticeTriangle)}),(0,w.K)("div",{class:M.warningText,key:"warning-text"},o.noTimeExtent)]:c.isEmpty?[(0,w.K)("div",{class:this.classes(M.warning,f.T.noticeTriangle)}),(0,w.K)("div",{class:M.warningText,key:"warning-text"},o.emptyTimeExtent)]:[null!=c.start&&(0,w.K)("div",{class:M.timeExtentGroup,key:"start-date-group"},(0,w.K)("div",{class:M.timeExtentDate,key:"start-date"},this._formatDate(c.start)),h?(0,w.K)("div",{class:M.timeExtentTime,key:"start-time"},this._formatTime(c.start)):null),null!=c.start&&null!=c.end&&c.start.getTime()!==c.end.getTime()&&(0,w.K)("div",{class:M.timeExtentSeparator,key:"separator"},"\u2013"),null!=c.end&&(null==c.start||c.start.getTime()!==c.end.getTime())&&(0,w.K)("div",{class:M.timeExtentGroup,key:"end-date-group"},(0,w.K)("div",{class:M.timeExtentDate,key:"end-date"},this._formatDate(c.end)),h?(0,w.K)("div",{class:M.timeExtentTime,key:"end-time"},this._formatTime(c.end)):null)],C=(0,w.K)("div",{class:this.classes(M.timeExtent,!a&&_.D.buttonDisabled)},[S]),D=null!=this.labelFormatFunction?(0,w.K)("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:M.minDate,"data-date":l?.start,"data-layout":k,"data-type":"min",key:"min-date"}):null!=l?.start&&[(0,w.K)("div",{class:M.minDate,key:"min-date"},this._formatDate(l.start)),h&&(0,w.K)("div",{class:M.minTime,key:"min-time"},this._formatTime(l.start))],K=(0,w.K)("div",{class:this.classes(M.min,!a&&_.D.buttonDisabled)},[D]),$=(0,w.K)("div",{class:M.slider},t.render()),j=null!=this.labelFormatFunction?(0,w.K)("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:M.maxDate,"data-date":l?.end,"data-layout":k,"data-type":"max",key:"max-date"}):null!=l?.end&&[(0,w.K)("div",{class:M.maxDate,key:"max-date"},this._formatDate(l.end)),h&&(0,w.K)("div",{class:M.maxTime,key:"max-time"},this._formatTime(l.end))],F=(0,w.K)("div",{class:this.classes(M.max,!a&&_.D.buttonDisabled)},[j]),A=(0,w.K)("div",{class:M.previous},(0,w.K)("button",{"aria-disabled":E?"true":"false","aria-label":r.pagination.previous,bind:this,class:this.classes(_.D.widgetButton,M.previousButton,(x||E)&&_.D.buttonDisabled),disabled:E,onclick:this._previousClick,title:r.pagination.previous,type:"button"},(0,w.K)("div",{class:f.T.reverse}))),R=(0,w.K)("div",{class:M.next},(0,w.K)("button",{"aria-disabled":E?"true":"false","aria-label":r.pagination.next,bind:this,class:this.classes(_.D.widgetButton,M.nextButton,(x||E)&&_.D.buttonDisabled),disabled:E,onclick:this._nextClick,title:r.pagination.next,type:"button"},(0,w.K)("div",{class:f.T.forward}))),I=e?.length>0,B=I&&(0,w.K)("div",{class:M.actions,title:r.options},(0,w.K)("calcite-action-menu",{class:M.actionsButton,label:r.options},e.toArray().map((t=>(0,w.K)("calcite-action",{bind:this,icon:t.icon,id:t.id,onclick:()=>this.viewModel.triggerAction(t),text:t.title,textEnabled:!0,title:t.title})))));return(0,w.K)("div",{afterCreate:t=>{this.addHandles((0,b.EV)(t,(()=>this.scheduleRender())))},"aria-label":o.widgetLabel,class:this.classes(M.timeSlider,_.D.widget,`${M.timeSliderMode}${u}`,`${M.timeSliderLayout}${k}`,!a&&_.D.disabled,y&&M.timeSliderOutOfBounds,I&&M.hasActions,(0,T.fJ)())},"wide"===k&&(0,w.K)("div",{class:M.timeSliderRow},(0,w.K)("div",{class:M.playbackControls},[Z,C,K,$,F,A,R]),B),"compact"===k&&[(0,w.K)("div",{class:M.timeSliderRow,key:"time-slider-row-1"},[C,B]),(0,w.K)("div",{class:M.timeSliderRow,key:"time-slider-row-2"},[$]),(0,w.K)("div",{class:M.timeSliderRow,key:"time-slider-row-3"},[K,A,Z,R,F])])}updateWebDocument(t){this.viewModel?.updateWebDocument(t)}_createLabel(t){if(null==this.labelFormatFunction)return;const e=t.getAttribute("data-type"),i=t.getAttribute("data-layout"),n=t["data-date"];this.labelFormatFunction(n,e,t,i)}_formatDate(t){return(0,m.Yq)(t,this._dateFormat)}_formatTime(t){return(0,m.Yq)(t,this._timeFormat)}_getIntlOptions(t){const{timeZone:e}=this;return{...(0,m.J2)(t),timeZone:e}}_getTickPositions(t){const{fullTimeExtent:e}=this;if(null==e?.start||null==e.end)return[];const{start:i,end:n}=e,s=[],{value:l,unit:a}=t;let r=(0,o.lL)(i,a,this.timeZone);for(;r.getTime()<=n.getTime();)r.getTime()>=i.getTime()&&s.push(r.getTime()),r=(0,o.S1)(r,l,a,this.timeZone);return s}_updateSliderSteps(){this._slider.steps=null!=this.effectiveStops&&this.effectiveStops.length>0?this.effectiveStops.map((t=>t.getTime())):null}_playOrStopClick(){switch(this.viewModel.state){case"ready":this.viewModel.play();break;case"playing":this.viewModel.stop();break;case"disabled":break;default:(0,l.Xb)(this.viewModel.state)}}_previousClick(){this.viewModel.previous()}_nextClick(){this.viewModel.next()}};(0,n._)([(0,r.MZ)()],S.prototype,"_dateFormat",null),(0,n._)([(0,r.MZ)()],S.prototype,"_timeFormat",null),(0,n._)([(0,r.MZ)()],S.prototype,"actions",null),(0,n._)([(0,r.MZ)()],S.prototype,"disabled",void 0),(0,n._)([(0,r.MZ)()],S.prototype,"effectiveStops",null),(0,n._)([(0,r.MZ)()],S.prototype,"fullTimeExtent",null),(0,n._)([(0,r.MZ)()],S.prototype,"icon",null),(0,n._)([(0,r.MZ)({readOnly:!0})],S.prototype,"interactive",null),(0,n._)([(0,r.MZ)()],S.prototype,"label",null),(0,n._)([(0,r.MZ)()],S.prototype,"labelFormatFunction",void 0),(0,n._)([(0,r.MZ)({value:"auto"})],S.prototype,"layout",null),(0,n._)([(0,r.MZ)()],S.prototype,"loop",null),(0,n._)([(0,r.MZ)(),(0,g.G)("esri/widgets/TimeSlider/t9n/TimeSlider")],S.prototype,"messages",void 0),(0,n._)([(0,r.MZ)(),(0,g.G)("esri/t9n/common")],S.prototype,"messagesCommon",void 0),(0,n._)([(0,r.MZ)()],S.prototype,"mode",null),(0,n._)([(0,r.MZ)()],S.prototype,"playRate",null),(0,n._)([(0,r.MZ)()],S.prototype,"stops",null),(0,n._)([(0,r.MZ)()],S.prototype,"tickConfigs",void 0),(0,n._)([(0,r.MZ)()],S.prototype,"tickFormats",null),(0,n._)([(0,r.MZ)()],S.prototype,"timeExtent",null),(0,n._)([(0,r.MZ)({nonNullable:!0})],S.prototype,"timeVisible",void 0),(0,n._)([(0,r.MZ)()],S.prototype,"timeZone",null),(0,n._)([(0,r.MZ)()],S.prototype,"view",null),(0,n._)([(0,r.MZ)({type:k.default}),(0,x.U)("trigger-action")],S.prototype,"viewModel",void 0),(0,n._)([(0,y.$)()],S.prototype,"_playOrStopClick",null),(0,n._)([(0,y.$)()],S.prototype,"_previousClick",null),(0,n._)([(0,y.$)()],S.prototype,"_nextClick",null),S=(0,n._)([(0,u.$)("esri.widgets.TimeSlider")],S);const C=S},50258:(t,e,i)=>{i.r(e),i.d(e,{default:()=>w});var n=i(93800),s=i(89129),l=i(58448),a=i(50925),o=i(49959),r=i(79953),u=i(87431),m=i(48602),d=i(80556),c=(i(21265),i(14746),i(75269)),h=i(32474),p=i(61695),v=i(99982),_=i(15926);function f(t){return null!=t&&void 0!==t.count}function y(t){return null!=t&&void 0!==t.interval}function g(t){return null!=t&&void 0!==t.dates}let x=class extends l.A.EventedAccessor{constructor(t){super(t),this._animationController=null,this._isViewTimeExtentInitialized=!1,this._timerId=null,this.actions=new s.default,this.fullTimeExtent=null,this.loop=!1,this.mode="time-window",this.stops={count:10},this.timeExtent=null,this.view=null}initialize(){this.addHandles([(0,r.watch)((()=>this.effectiveStops),(()=>{null==this.timeExtent&&(this.timeExtent=this._getDefaultTimeExtent())}),r.initial),(0,r.watch)((()=>this.view),((t,e)=>{this._unregisterWidget(e),this._registerWidget(t)}),r.syncAndInitial),(0,r.watch)((()=>this.timeExtent),(t=>{if(null==this.view)return;const e=this.view.timeExtent;(null!=t&&!t.isAllTime||null!=e&&!e.isAllTime)&&(null!=t&&null!=e&&t.equals(e)||(this.view.timeExtent=t))}),r.initial),(0,r.watch)((()=>this.view?.timeExtent),(t=>{this._isViewTimeExtentInitialized?(null!=t&&!t.isAllTime||null!=this.timeExtent&&!this.timeExtent.isAllTime)&&(null!=t&&null!=this.timeExtent&&t.equals(this.timeExtent)||(this.timeExtent=t)):this._isViewTimeExtentInitialized=!0}))])}destroy(){null!=this._timerId&&(clearInterval(this._timerId),this._timerId=null),this._unregisterWidget(this.view),this.view=null,null!=this._animationController&&(this._animationController.abort(),this._animationController=null)}get effectiveStops(){const{fullTimeExtent:t,stops:e}=this;if(g(e)){const{dates:i}=e;if(null==i||0===i.length)return null;const n=i.sort(((t,e)=>t.getTime()-e.getTime()));if(null==t)return n;const{start:s,end:l}=t;return null==s||null==l?n:n.filter((t=>!(t.getTime()<s.getTime()||t.getTime()>l.getTime())))}if(f(e)){const i=e.timeExtent??t;return this._divideTimeExtentByCount(i,e.count)}if(y(e)){const i=e.timeExtent??t;return this._divideTimeExtentByInterval(i,e.interval)}return[]}set playRate(t){t<=0||t>36e5||("playing"===this.state&&this._startAnimation(),this._set("playRate",t))}get state(){return null==this.fullTimeExtent?"disabled":null!=this._animationController?"playing":"ready"}get timeExtentValues(){const{mode:t,timeExtent:e}=this;if(null==e||e.isAllTime||e.isEmpty)return null;const{start:i,end:n}=e;switch(t){case"cumulative-from-end":case"instant":return null!=i?[i.getTime()]:null;case"cumulative-from-start":return null!=n?[n.getTime()]:null;case"time-window":return null!=i&&null!=n?[i.getTime(),n.getTime()]:null}}next(){this._step({forward:!0,allowRestart:!1})}play(){this._startAnimation()}previous(){this._step({forward:!1,allowRestart:!1})}stop(){this._stopAnimation()}triggerAction(t){this.emit("trigger-action",{action:t})}updateWebDocument(t){const e=new _.default({currentTimeExtent:this.timeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:f(this.stops)?this.stops.count:null,numThumbs:"time-window"===this.mode?2:1,stopDelay:this.playRate,stopInterval:y(this.stops)?this.stops.interval:null,stops:g(this.stops)?this.stops.dates:null});t.widgets?t.widgets.timeSlider=e:t.widgets=new v.A({timeSlider:e})}valuesToTimeExtent(t){if(null==t)return null;const e=t.sort(((t,e)=>t-e)).map((t=>new Date(t))),i=e.length>0?e[0]:null,n=e.length>1?e[1]:null;switch(this.mode){case"time-window":return new h.default({start:i,end:n});case"instant":return new h.default({start:i,end:i});case"cumulative-from-start":return new h.default({start:null,end:i});case"cumulative-from-end":return new h.default({start:i,end:null});default:return h.default.allTime}}async _animate(){try{const t=this.view,e=this._animationController?.signal;await Promise.all([(0,o.after)(this.playRate,null,e),null!=t&&(0,r.whenOnce)((()=>!1===t.updating),e)])}catch(t){return(0,o.isAbortError)(t)||a.A.getLogger(this).error(t),void(this._animationController=null)}this._step({forward:!0,allowRestart:!1}),null!=this._animationController&&this._animate()}_divideTimeExtentByCount(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!t||!e)return[];const{start:i,end:n}=t;if(null==i||null==n)return[];if(e>1e4)return this._divideTimeExtentByCount(t);const s=[],l=i.getTime(),a=n.getTime()-l;for(let o=0;o<=e;o++)s.push(new Date(l+o/e*a));return s}_divideTimeExtentByInterval(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;if(!t||!e)return[];const{start:n,end:s}=t;if(null==n||null==s)return[];const l=s.getTime()-n.getTime(),a=e.toMilliseconds();if(a<=0||l/a>i)return this._divideTimeExtentByCount(t);const o=[],{value:r,unit:m}=e;let d=n;for(;d.getTime()<=s.getTime();)o.push(new Date(d.getTime())),d=(0,u.S1)(d,r,m);return o}_getDefaultTimeExtent(){const{effectiveStops:t,mode:e}=this;if(null==t||!e)return null;switch(e){case"time-window":return t.length>1?new h.default({start:t[0],end:t[1]}):null;case"cumulative-from-start":return t.length>0?new h.default({start:null,end:t[0]}):null;case"cumulative-from-end":return t.length>0?new h.default({start:t[0],end:null}):null;case"instant":return t.length>0?new h.default({start:t[0],end:t[0]}):null;default:return null}}_registerWidget(t){null!=t&&(t.persistableViewModels.includes(this)||t.persistableViewModels.add(this))}_startAnimation(){this._stopAnimation(),this._animationController=new AbortController,this._step({forward:!0,allowRestart:!0}),this._animate()}_step(t){const{forward:e,allowRestart:i}=t,{effectiveStops:n}=this;if(null==this.timeExtentValues||null==n)return;const s=n.map((t=>t.getTime())),l=this.timeExtentValues.map((t=>{const e=s.indexOf(t);if(-1!==e)return e;const i=s.reduce(((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e));return s.indexOf(i)})),a=l.map((t=>t+(e?1:-1))),o=a.some((t=>t<0||t>s.length-1)),{loop:r,state:u}=this;if(o)if(r||i){const t=Math.min(...l),i=Math.max(...l),n=(e?l.map((e=>e-t)):l.map((t=>t+(s.length-1-i)))).map((t=>s[t]));this.timeExtent=this.valuesToTimeExtent(n)}else"playing"===u&&this.stop();else{const t=a.map((t=>s[t]));this.timeExtent=this.valuesToTimeExtent(t)}}_stopAnimation(){null!=this._animationController&&(this._animationController.abort(),this._animationController=null)}_unregisterWidget(t){null!=t&&t.persistableViewModels.remove(this)}};(0,n._)([(0,m.MZ)()],x.prototype,"_animationController",void 0),(0,n._)([(0,m.MZ)({type:s.default})],x.prototype,"actions",void 0),(0,n._)([(0,m.MZ)({readOnly:!0})],x.prototype,"effectiveStops",null),(0,n._)([(0,m.MZ)({type:h.default})],x.prototype,"fullTimeExtent",void 0),(0,n._)([(0,m.MZ)({nonNullable:!0})],x.prototype,"loop",void 0),(0,n._)([(0,m.MZ)({nonNullable:!0})],x.prototype,"mode",void 0),(0,n._)([(0,m.MZ)({nonNullable:!0,value:1e3})],x.prototype,"playRate",null),(0,n._)([(0,m.MZ)({readOnly:!0})],x.prototype,"state",null),(0,n._)([(0,m.MZ)({cast:t=>null==t?null:(y(t)&&(t.interval=(0,d.dp)(p.default,t.interval)),(y(t)||f(t))&&(t.timeExtent=(0,d.dp)(h.default,t.timeExtent)),t)})],x.prototype,"stops",void 0),(0,n._)([(0,m.MZ)({type:h.default})],x.prototype,"timeExtent",void 0),(0,n._)([(0,m.MZ)({readOnly:!0})],x.prototype,"timeExtentValues",null),(0,n._)([(0,m.MZ)()],x.prototype,"view",void 0),(0,n._)([(0,m.MZ)()],x.prototype,"next",null),(0,n._)([(0,m.MZ)()],x.prototype,"play",null),(0,n._)([(0,m.MZ)()],x.prototype,"previous",null),(0,n._)([(0,m.MZ)()],x.prototype,"stop",null),(0,n._)([(0,m.MZ)()],x.prototype,"updateWebDocument",null),x=(0,n._)([(0,c.$)("esri.widgets.TimeSlider.TimeSliderViewModel")],x);const w=x},66201:(t,e,i)=>{function n(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,n=Array.isArray(t)?t:function(t){return t.split(",").map((t=>t.trim()))}(t);i.push(...n)}}i.d(e,{U:()=>n})}}]);