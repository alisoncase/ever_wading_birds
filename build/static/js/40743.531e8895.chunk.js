"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[25084,40743,88824],{605:(t,e,n)=>{n.d(e,{_:()=>r});class r{constructor(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=t,this.count=e,this.type=n,this.offset=r,this.stride=i,this.normalized=o,this.divisor=s}}},1277:(t,e,n)=>{n.d(e,{C:()=>l,Cr:()=>d,H6:()=>A,LV:()=>u,_I:()=>g,dz:()=>E,fA:()=>f,kb:()=>h,ld:()=>T,sd:()=>p,vt:()=>a});var r=n(64682),i=n(32636),o=n(89227),s=n(28473),c=n(1696);function a(t){return t?{origin:(0,s.o8)(t.origin),vector:(0,s.o8)(t.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function u(t,e){const n=y.get();return n.origin=t,n.vector=e,n}function l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return f(t.origin,t.vector,e)}function f(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return(0,o.c)(n.origin,t),(0,o.c)(n.vector,e),n}function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return(0,o.c)(n.origin,t),(0,o.d)(n.vector,e,t),n}function h(t,e){const n=(0,o.d)(c.rq.get(),e,t.origin),i=(0,o.f)(t.vector,n),s=(0,o.f)(t.vector,t.vector),a=(0,r.qE)(i/s,0,1),u=(0,o.d)(c.rq.get(),(0,o.h)(c.rq.get(),t.vector,a),n);return(0,o.f)(u,u)}function g(t,e,n){return A(t,e,0,1,n)}function p(t,e,n){return(0,o.g)(n,t.origin,(0,o.h)(n,t.vector,e))}function A(t,e,n,i,s){const{vector:a,origin:u}=t,l=(0,o.d)(c.rq.get(),e,u),f=(0,o.f)(a,l)/(0,o.k)(a);return(0,o.h)(s,a,(0,r.qE)(f,n,i)),(0,o.g)(s,s,t.origin)}function E(t,e){if(N(t,u(e.origin,e.direction),!1,I)){const{tA:e,pB:n,distance2:r}=I;if(e>=0&&e<=1)return r;if(e<0)return(0,o.s)(t.origin,n);if(e>1)return(0,o.s)((0,o.g)(c.rq.get(),t.origin,t.vector),n)}return null}function T(t,e,n){return!!N(t,e,!0,I)&&((0,o.c)(n,I.pA),!0)}function N(t,e,n,i){const s=1e-6,a=t.origin,u=(0,o.g)(c.rq.get(),a,t.vector),l=e.origin,f=(0,o.g)(c.rq.get(),l,e.vector),d=c.rq.get(),h=c.rq.get();if(d[0]=a[0]-l[0],d[1]=a[1]-l[1],d[2]=a[2]-l[2],h[0]=f[0]-l[0],h[1]=f[1]-l[1],h[2]=f[2]-l[2],Math.abs(h[0])<s&&Math.abs(h[1])<s&&Math.abs(h[2])<s)return!1;const g=c.rq.get();if(g[0]=u[0]-a[0],g[1]=u[1]-a[1],g[2]=u[2]-a[2],Math.abs(g[0])<s&&Math.abs(g[1])<s&&Math.abs(g[2])<s)return!1;const p=d[0]*h[0]+d[1]*h[1]+d[2]*h[2],A=h[0]*g[0]+h[1]*g[1]+h[2]*g[2],E=d[0]*g[0]+d[1]*g[1]+d[2]*g[2],T=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],N=(g[0]*g[0]+g[1]*g[1]+g[2]*g[2])*T-A*A;if(Math.abs(N)<s)return!1;let I=(p*A-E*T)/N,y=(p+A*I)/T;n&&(I=(0,r.qE)(I,0,1),y=(0,r.qE)(y,0,1));const v=c.rq.get(),m=c.rq.get();return v[0]=a[0]+I*g[0],v[1]=a[1]+I*g[1],v[2]=a[2]+I*g[2],m[0]=l[0]+y*h[0],m[1]=l[1]+y*h[1],m[2]=l[2]+y*h[2],i.tA=I,i.tB=y,i.pA=v,i.pB=m,i.distance2=(0,o.s)(v,m),!0}const I={tA:0,tB:0,pA:(0,s.vt)(),pB:(0,s.vt)(),distance2:0},y=new i.I((()=>a()))},13473:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function o(t,e,n,r,i,o,s,c,a){return[t,e,n,r,i,o,s,c,a]}n.d(e,{fA:()=>o,o8:()=>i,vt:()=>r,zK:()=>s});const s=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:r,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},22131:(t,e,n)=>{var r;function i(t){return t===r.POSITION}n.d(e,{b:()=>i,r:()=>r}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.ROTATION="rotation",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.START_UP="startUp",t.END_UP="endUp",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},25084:(t,e,n)=>{n.d(e,{EdgeInputBufferLayout:()=>s,In:()=>l,gr:()=>u,vG:()=>f,vJ:()=>c,wO:()=>a});var r=n(66458),i=n(98876),o=n(22131);const s=(0,i.BP)().vec3f(o.r.POSITION).u16(o.r.COMPONENTINDEX).freeze(),c=(0,i.BP)().vec2u8(o.r.SIDENESS).freeze(),a=(0,r.U)(c),u=(0,i.BP)().vec3f(o.r.POSITION0).vec3f(o.r.POSITION1).vec2i16(o.r.NORMALCOMPRESSED).u16(o.r.COMPONENTINDEX).u8(o.r.VARIANTOFFSET,{glNormalized:!0}).u8(o.r.VARIANTSTROKE).u8(o.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),l=(0,i.BP)().vec3f(o.r.POSITION0).vec3f(o.r.POSITION1).vec2i16(o.r.NORMALCOMPRESSED).vec2i16(o.r.NORMAL2COMPRESSED).u16(o.r.COMPONENTINDEX).u8(o.r.VARIANTOFFSET,{glNormalized:!0}).u8(o.r.VARIANTSTROKE).u8(o.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),f=new Map([[o.r.POSITION0,0],[o.r.POSITION1,1],[o.r.COMPONENTINDEX,2],[o.r.VARIANTOFFSET,3],[o.r.VARIANTSTROKE,4],[o.r.VARIANTEXTENSION,5],[o.r.NORMALCOMPRESSED,6],[o.r.NORMAL2COMPRESSED,7],[o.r.SIDENESS,8]])},28983:(t,e,n)=>{n.d(e,{b:()=>o});var r=n(64682),i=n(55239);function o(t,e,n){const o=Array.isArray(t),l=o?t.length/e:t.byteLength/(4*e),f=o?t:new Uint32Array(t,0,l*e),d=n?.minReduction??0,h=n?.originalIndices||null,g=h?h.length:0,p=n?.componentOffsets||null;let A=0;if(p)for(let r=0;r<p.length-1;r++){const t=p[r+1]-p[r];t>A&&(A=t)}else A=l;const E=Math.floor(1.1*A)+1;(null==u||u.length<2*E)&&(u=new Uint32Array((0,r.cU)(2*E)));for(let r=0;r<2*E;r++)u[r]=0;let T=0;const N=!!p&&!!h,I=N?g:l;let y=(0,i.my)(l);const v=new Uint32Array(g),m=1.96;let O=0!==d?Math.ceil(4*m*m/(d*d)*d*(1-d)):I,S=1,w=p?p[1]:I;for(let r=0;r<I;r++){if(r===O){const t=1-T/r;if(t+m*Math.sqrt(t*(1-t)/r)<d)return null;O*=2}if(r===w){for(let t=0;t<2*E;t++)u[t]=0;if(h)for(let t=p[S-1];t<p[S];t++)v[t]=y[h[t]];w=p[++S]}const t=N?h[r]:r,n=t*e,i=a(f,n,e);let o=i%E,c=T;for(;0!==u[2*o+1];){if(u[2*o]===i){const t=u[2*o+1]-1;if(s(f,n,t*e,e)){c=y[t];break}}o++,o>=E&&(o-=E)}c===T&&(u[2*o]=i,u[2*o+1]=t+1,T++),y[t]=c}if(0!==d&&1-T/l<d)return null;if(N){for(let t=p[S-1];t<v.length;t++)v[t]=y[h[t]];y=(0,i.Dg)(v)}const _=o?new Array(T):new Uint32Array(T*e);T=0;for(let r=0;r<I;r++)y[r]===T&&(c(f,(N?h[r]:r)*e,_,T*e,e),T++);if(h&&!N){const t=new Uint32Array(g);for(let e=0;e<t.length;e++)t[e]=y[h[e]];y=(0,i.Dg)(t)}return{buffer:Array.isArray(_)?_:_.buffer,indices:y,uniqueCount:T}}function s(t,e,n,r){for(let i=0;i<r;i++)if(t[e+i]!==t[n+i])return!1;return!0}function c(t,e,n,r,i){for(let o=0;o<i;o++)n[r+o]=t[e+o]}function a(t,e,n){let r=0;for(let i=0;i<n;i++)r=t[e+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let u=null},46576:(t,e,n)=>{n.d(e,{AK:()=>c,Wz:()=>s,oe:()=>i,p_:()=>o});var r=n(25048);function i(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t<=r.y9?e?new Array(t).fill(0):new Array(t):new Float32Array(t)}function o(t){return Array.isArray(t)?t.length<r.y9?t:new Float32Array(t):t.length<r.y9?Array.from(t):t}function s(t){return(Array.isArray(t)?t.length:t.byteLength/8)<=r.y9?Array.from(t):new Float32Array(t)}function c(t,e,n){return Array.isArray(t)?t.slice(e,e+n):t.subarray(e,e+n)}},55239:(t,e,n)=>{n.d(e,{BF:()=>g,Dg:()=>i,EH:()=>h,JH:()=>s,my:()=>o,tM:()=>l});var r=n(25048);function i(t){if(Array.isArray(t)){if(t.length<r.y9)return t}else if(t.length<r.y9)return Array.from(t);let e=!0,n=!0;return t.some(((t,r)=>(e=e&&0===t,n=n&&t===r,!e&&!n))),e?h(t.length):n?l(t.length):(0,r.iu)(t)&&t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?t:function(t){let e=!0;for(const n of t){if(n>=65536)return(0,r.iu)(t)?t:new Uint32Array(t);n>=256&&(e=!1)}return e?new Uint8Array(t):new Uint16Array(t)}(t)}function o(t){return t<=r.y9?new Array(t):t<=65536?new Uint16Array(t):new Uint32Array(t)}function s(t){return t<=r.y9?new Array(t):new Uint32Array(t)}let c=f(131072);const a=[0],u=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function l(t){return 1===t?a:t<r.y9?Array.from(new Uint16Array(u.buffer,0,t)):t<u.length?new Uint16Array(u.buffer,0,t):(t>c.length&&(c=f(Math.max(2*c.length,t))),new Uint32Array(c.buffer,0,t))}function f(t){const e=new Uint32Array(t);for(let n=0;n<e.length;n++)e[n]=n;return e}let d=new Uint8Array(65536);function h(t){if(1===t)return a;if(t<r.y9)return new Array(t).fill(0);if(t>d.length){const e=Math.max(2*d.length,t);d=new Uint8Array(e)}return new Uint8Array(d.buffer,0,t)}function g(){c=f(131072),d=new Uint8Array(65536)}},62749:(t,e,n)=>{n.d(e,{K:()=>a});var r=n(64682),i=n(15899),o=n(89227),s=n(28473);const c=-1;function a(t,e,n){const r=t.vertices.position,i=t.vertices.componentIndex,s=p.position0,a=p.position1,f=p.faceNormal0,h=p.faceNormal1,{edges:g,normals:A}=l(t),E=g.length/4,T=e.allocate(E);let N=0;const I=E,m=n?.allocate(I);let S=0,w=0,_=0;d.length=0;for(let c=0;c<E;++c){const t=4*c;r.getVec(g.data[t],s),r.getVec(g.data[t+1],a);const e=d.pushNew();e.index=4*c,e.length=(0,o.j)(s,a)}d.sort(((t,e)=>e.length-t.length));const b=new Array,R=new Array;d.forAll((t=>{let{length:l,index:d}=t;const E=g.data[d],I=g.data[d+1],L=g.data[d+2],M=g.data[d+3],C=M===c;if(r.getVec(E,s),r.getVec(I,a),C){const t=3*L;(0,o.i)(f,A.data[t],A.data[t+1],A.data[t+2]),(0,o.c)(h,f),p.componentIndex=i.get(E),p.cosAngle=(0,o.f)(f,h)}else{let t=3*L;if((0,o.i)(f,A.data[t],A.data[t+1],A.data[t+2]),t=3*M,(0,o.i)(h,A.data[t],A.data[t+1],A.data[t+2]),p.componentIndex=i.get(E),p.cosAngle=(0,o.f)(f,h),function(t,e){return t.cosAngle>e}(p,v))return;p.cosAngle<-.9999&&(0,o.c)(h,f)}w+=l,_++,C||function(t,e){return t.cosAngle<e}(p,O)?(e.write(T,N++,p),b.push(l)):u(p,y)&&(m&&n&&n.write(m,S++,p),R.push(l))}));const L=new Float32Array(b.reverse()),M=new Float32Array(R.reverse()),C=m&&n?{instancesData:m.slice(0,S),lodInfo:{lengths:M}}:void 0;return{regular:{instancesData:T.slice(0,N),lodInfo:{lengths:L}},silhouette:C,averageEdgeLength:w/_}}function u(t,e){const n=(0,r.XM)(t.cosAngle);return(0,o.o)(E,t.position1,t.position0),n*((0,o.f)((0,o.e)(A,t.faceNormal0,t.faceNormal1),E)>0?-1:1)>e}function l(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors,i=t.vertices.position;h.length=g.length=0;for(let s=0;s<e;s++){const t=3*s,e=r[t],a=r[t+1],u=r[t+2],l=n[t],f=n[t+1],d=n[t+2];i.getVec(l,T),i.getVec(f,N),i.getVec(d,I),(0,o.d)(N,N,T),(0,o.d)(I,I,T),(0,o.e)(T,N,I),(0,o.n)(T,T),g.pushArray(T),(e===c||l<f)&&(h.push(l),h.push(f),h.push(s),h.push(e)),(a===c||f<d)&&(h.push(f),h.push(d),h.push(s),h.push(a)),(u===c||d<l)&&(h.push(d),h.push(l),h.push(s),h.push(u))}return{edges:h,normals:g}}class f{constructor(){this.index=0,this.length=0}}const d=new i.A({allocator:t=>t||new f,deallocator:null}),h=new i.A({deallocator:null}),g=new i.A({deallocator:null}),p=new class{constructor(){this.position0=(0,s.vt)(),this.position1=(0,s.vt)(),this.faceNormal0=(0,s.vt)(),this.faceNormal1=(0,s.vt)(),this.componentIndex=0,this.cosAngle=0}},A=(0,s.vt)(),E=(0,s.vt)(),T=(0,s.vt)(),N=(0,s.vt)(),I=(0,s.vt)(),y=(0,r.kU)(4),v=Math.cos(y),m=(0,r.kU)(35),O=Math.cos(m)},65496:(t,e,n)=>{n.d(e,{T:()=>E,k:()=>T});var r=n(14746),i=n(89227),o=n(28473),s=n(66458),c=n(75093),a=n(25084);class u{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?g:h}write(t,e,n){I.seed=this._edgeHashFunction(n);const r=I.getIntRange(0,255),i=I.getIntRange(0,this.settings.variants-1),o=I.getFloat(),s=255*(.5*function(t,e){return Math.abs(t)**e*Math.sign(t)}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7),1.2)+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,r),t.variantStroke.set(e,i),t.variantExtension.set(e,s)}}const l=new Float32Array(6),f=new Uint32Array(l.buffer),d=new Uint32Array(1);function h(t){return l[0]=t.position0[0],l[1]=t.position0[1],l[2]=t.position0[2],l[3]=t.position1[0],l[4]=t.position1[1],l[5]=t.position1[2],d[0]=31*(31*(31*(31*(31*(166811+f[0])+f[1])+f[2])+f[3])+f[4])+f[5],d[0]}function g(t){const e=l;e[0]=A(t.position0[0]),e[1]=A(t.position0[1]),e[2]=A(t.position0[2]),e[3]=A(t.position1[0]),e[4]=A(t.position1[1]),e[5]=A(t.position1[2]),d[0]=5381;for(let n=0;n<f.length;n++)d[0]=31*d[0]+f[n];return d[0]}const p=1e4;function A(t){return Math.round(t*p)/p}class E{constructor(){this._commonWriter=new u}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return a.gr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,i.g)(N,n.faceNormal0,n.faceNormal1),(0,i.n)(N,N);const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;(0,c.aT)(r,e,N[0],N[1],N[2],o)}}E.Layout=a.gr,E.glLayout=(0,s.U)(a.gr,1);class T{constructor(){this._commonWriter=new u}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return a.In.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n);{const{typedBuffer:r,typedBufferStride:i}=t.normalCompressed;(0,c.aT)(r,e,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],i)}{const{typedBuffer:r,typedBufferStride:i}=t.normal2Compressed;(0,c.aT)(r,e,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],i)}}}T.Layout=a.In,T.glLayout=(0,s.U)(a.In,1);const N=(0,o.vt)(),I=new r.A},66458:(t,e,n)=>{n.d(e,{U:()=>o});var r=n(92156),i=n(605);function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=t.stride;return Array.from(t.fields.keys()).map((r=>{const o=t.fields.get(r),c=o.constructor.ElementCount,a=s(o.constructor.ElementType),u=o.offset,l=o.optional?.glNormalized??!1;return new i._(r,c,a,u,n,l,e)}))}function s(t){const e=c[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}const c={u8:r.pe.UNSIGNED_BYTE,u16:r.pe.UNSIGNED_SHORT,u32:r.pe.UNSIGNED_INT,i8:r.pe.BYTE,i16:r.pe.SHORT,i32:r.pe.INT,f32:r.pe.FLOAT}},66951:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var r=n(93800),i=n(49959),o=(n(50925),n(21265),n(14746),n(74719),n(75269)),s=n(89227),c=n(28473),a=n(1277),u=n(89476),l=n(51255),f=n(88824);function d(t,e,n){const r=(0,u.c)(),i=(0,u.a)(r);return(0,s.b)(i,i,t,.5),(0,s.b)(i,i,e,.5),r[3]=(0,s.j)(i,t),(0,s.g)(i,i,n),r}let h=class{constructor(){this._idToComponent=new Map,this._components=new l.A((t=>t.bounds)),this._edges=new l.A((t=>t.bounds)),this._tmpLineSegment=(0,a.vt)(),this._tmpP1=(0,c.vt)(),this._tmpP2=(0,c.vt)(),this._tmpP3=(0,c.vt)(),this.remoteClient=null}async fetchCandidates(t,e){await Promise.resolve(),(0,i.throwIfAborted)(e),await this._ensureEdgeLocations(t,e);const n=[];return this._edges.forEachNeighbor((e=>(this._addCandidates(t,e,n),n.length<1e3)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const n=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:e,uid:r}=t;n.push({id:e,uid:r})}return!0}),t.bounds),!n.length)return;const r={components:n},i=await this.remoteClient.invoke("fetchAllEdgeLocations",r,e??{});for(const o of i.components)this._setFetchEdgeLocations(o)}async add(t){const e=new A(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((n=>(n.component===e&&t.push(n),!0)),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if(null==e||t.uid!==e.uid)return;const n=f.extractComponentsEdgeLocationsLayout.createView(t.locations),r=new Array(n.count),i=(0,c.vt)(),o=(0,c.vt)();for(let c=0;c<n.count;c++){n.position0.getVec(c,i),n.position1.getVec(c,o);const s=d(i,o,t.origin),a=new E(e,c,s);r[c]=a}this._edges.add(r);const{objectIds:s,origin:a}=t;e.info={locations:n,objectIds:s,origin:a}}_addCandidates(t,e,n){const{info:r}=e.component,{origin:i,objectIds:o}=r,c=r.locations,a=c.position0.getVec(e.index,this._tmpP1),u=c.position1.getVec(e.index,this._tmpP2);(0,s.g)(a,a,i),(0,s.g)(u,u,i);const l=o[c.componentIndex.get(e.index)];this._addEdgeCandidate(t,l,a,u,n),p(t,l,a,n),p(t,l,u,n)}_addEdgeCandidate(t,e,n,r,i){if(!t.returnEdge)return;const o=(0,u.a)(t.bounds),l=(0,a.Cr)(n,r,this._tmpLineSegment),f=(0,a._I)(l,o,this._tmpP3);(0,u.o)(t.bounds,f)&&i.push({type:"edge",objectId:e,target:(0,c.o8)(f),distance:(0,s.j)(o,f),start:(0,c.o8)(n),end:(0,c.o8)(r)})}};h=(0,r._)([(0,o.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],h);const g=h;function p(t,e,n,r){if(!t.returnVertex||!(0,u.o)(t.bounds,n))return;const i=(0,u.a)(t.bounds);r.push({type:"vertex",objectId:e,target:(0,c.o8)(n),distance:(0,s.j)(i,n)})}class A{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++A.uid}}A.uid=0;class E{constructor(t,e,n){this.component=t,this.index=e,this.bounds=n}}},75093:(t,e,n)=>{n.d(e,{Tz:()=>u,_l:()=>a,aT:()=>s,fA:()=>c});var r=n(64682),i=n(89227),o=n(28473);n(46576);function s(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;const s=1/(Math.abs(n)+Math.abs(r)+Math.abs(i)),c=n*s,a=r*s,u=i<=0?(c>=0?1:-1)*(1-Math.abs(a)):c,f=i<=0?(a>=0?1:-1)*(1-Math.abs(c)):a,d=e*o;t[d]=l(u),t[d+1]=l(f)}function c(t){const e=t.length/3,n=new Int16Array(2*e);let r=0;for(let i=0;i<e;++i)s(n,i,t[r++],t[r++],t[r++]);return n}function a(t,e){const n=t.length/3,r=new Int16Array(2*n);let c=0;const a=(0,o.vt)();for(let o=0;o<n;++o)a[0]=t[c++],a[1]=t[c++],a[2]=t[c++],(0,i.q)(a,a,e),s(r,o,a[0],a[1],a[2]);return r}function u(t,e,n){const r=n*(arguments.length>3&&void 0!==arguments[3]?arguments[3]:2),o=f(e[r]),s=f(e[r+1]),c=1-Math.abs(o)-Math.abs(s);t[2]=c,c<0?(t[0]=(o>=0?1:-1)*(1-Math.abs(s)),t[1]=(s>=0?1:-1)*(1-Math.abs(o))):(t[0]=o,t[1]=s),(0,i.n)(t,t)}function l(t){return(0,r.qE)(Math.round(32767*t),-32767,32767)}function f(t){return(0,r.qE)(t/32767,-1,1)}},88824:(t,e,n)=>{n.d(e,{o6:()=>l,extractComponentsEdgeLocationsLayout:()=>A,hx:()=>f,Jb:()=>p});var r=n(28983);function i(t,e,n){const r=e/3,i=new Uint32Array(n+1),o=new Uint32Array(n+1),s=(t,e)=>{t<e?i[t+1]++:o[e+1]++};for(let E=0;E<r;E++){const e=t[3*E],n=t[3*E+1],r=t[3*E+2];s(e,n),s(n,r),s(r,e)}let c=0,a=0;for(let E=0;E<n;E++){const t=i[E+1],e=o[E+1];i[E+1]=c,o[E+1]=a,c+=t,a+=e}const u=new Uint32Array(6*r),l=i[n],f=(t,e,n)=>{if(t<e){const r=i[t+1]++;u[2*r]=e,u[2*r+1]=n}else{const r=o[e+1]++;u[2*l+2*r]=t,u[2*l+2*r+1]=n}};for(let E=0;E<r;E++){const e=t[3*E],n=t[3*E+1],r=t[3*E+2];f(e,n,E),f(n,r,E),f(r,e,E)}const d=(t,e)=>{const n=2*t,r=e-t;for(let i=1;i<r;i++){const t=u[n+2*i],e=u[n+2*i+1];let r=i-1;for(;r>=0&&u[n+2*r]>t;r--)u[n+2*r+2]=u[n+2*r],u[n+2*r+3]=u[n+2*r+1];u[n+2*r+2]=t,u[n+2*r+3]=e}};for(let E=0;E<n;E++)d(i[E],i[E+1]),d(l+o[E],l+o[E+1]);const h=new Int32Array(3*r),g=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,p=(t,e)=>{const n=g(t,e);h[3*e+n]=-1},A=(t,e,n,r)=>{const i=g(t,e);h[3*e+i]=r;const o=g(n,r);h[3*r+o]=e};for(let E=0;E<n;E++){let t=i[E];const e=i[E+1];let n=o[E];const r=o[E+1];for(;t<e&&n<r;){const e=u[2*t],r=u[2*l+2*n];e===r?(A(E,u[2*t+1],r,u[2*l+2*n+1]),t++,n++):e<r?(p(E,u[2*t+1]),t++):(p(r,u[2*l+2*n+1]),n++)}for(;t<e;)p(E,u[2*t+1]),t++;for(;n<r;)p(u[2*l+2*n],u[2*l+2*n+1]),n++}return h}var o=n(98876),s=n(22131),c=n(25084),a=n(65496),u=n(62749);function l(t){const e=f(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return h.updateSettings(t.writerSettings),g.updateSettings(t.writerSettings),(0,u.K)(e,h,g)}function f(t,e,n,o){if(e){const e=i(n,o,t.count);return new d(n,o,e,t)}const s=(0,r.b)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:o}),a=i(s.indices,o,s.uniqueCount);return{faces:s.indices,facesLength:s.indices.length,neighbors:a,vertices:c.EdgeInputBufferLayout.createView(s.buffer)}}class d{constructor(t,e,n,r){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=r}}const h=new a.T,g=new a.k,p=(0,o.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1),A=(0,o.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).u16(s.r.COMPONENTINDEX)},89893:(t,e,n)=>{n.d(e,{Cv:()=>f,L:()=>l,MX:()=>a,O_:()=>u,kL:()=>d,vA:()=>c,zH:()=>h});var r=n(98080),i=n(60548);const o=(0,n(24646).vt)();class s{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion";if(!t){const t=new Error(e).stack;throw new s(`${e} at ${t}`)}}function a(t,e){t||(e=e||"",console.warn("Verify failed: "+e+"\n"+new Error("verify").stack))}function u(t,e,n,r){let i,o=(n[0]-t[0])/e[0],s=(r[0]-t[0])/e[0];o>s&&(i=o,o=s,s=i);let c=(n[1]-t[1])/e[1],a=(r[1]-t[1])/e[1];if(c>a&&(i=c,c=a,a=i),o>a||c>s)return!1;c>o&&(o=c),a<s&&(s=a);let u=(n[2]-t[2])/e[2],l=(r[2]-t[2])/e[2];return u>l&&(i=u,u=l,l=i),!(o>l||u>s)&&(l<s&&(s=l),!(s<0))}function l(t,e,n,i,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,r.vt)();const c=(i[o]-n[o])*(e[0]-t[0])-(i[0]-n[0])*(e[o]-t[o]),a=(i[0]-n[0])*(t[o]-n[o])-(i[o]-n[o])*(t[0]-n[0]);if(0===c)return!1;const u=a/c;return s[0]=t[0]+u*(e[0]-t[0]),s[1]=t[o]+u*(e[o]-t[o]),!0}function f(t,e,n,r,s){o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=1,(0,i.t)(o,o,e),s.length>2&&(s[2]=-o[2]),(0,i.t)(o,o,n),c(0!==o[3]),s[0]=o[0]/o[3],s[1]=o[1]/o[3],s[2]=o[2]/o[3],s[0]=(.5*s[0]+.5)*r[2]+r[0],s[1]=(.5*s[1]+.5)*r[3]+r[1]}function d(t,e){return Math.log(t)/Math.log(e)}function h(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}},97928:(t,e,n)=>{function r(t){switch(t){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}n.d(e,{GJ:()=>r})},98876:(t,e,n)=>{n.d(e,{BP:()=>a,l5:()=>u,q3:()=>c});var r=n(76517),i=n(97928),o=n(89893);class s{constructor(t,e){this.layout=t,this.buffer="number"==typeof e?new ArrayBuffer(e*t.stride):e;for(const n of t.fields.keys()){const e=t.fields.get(n);this[n]=new e.constructor(this.buffer,e.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(t,e){const n=this[t];return n&&n.elementCount===e.ElementCount&&n.elementType===e.ElementType?n:null}slice(t,e){return new s(this.layout,this.buffer.slice(t*this.stride,e*this.stride))}copyFrom(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.count;const i=this.stride;if(i%4==0){const o=new Uint32Array(t.buffer,e*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(o)}else{const o=new Uint8Array(t.buffer,e*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(o)}return this}get cachedMemory(){return this.byteLength}dispose(){}}class c{constructor(t){this._stride=0,this._lastAligned=0,this._fields=new Map,t&&(this._stride=t.stride,t.fields.forEach((t=>this._fields.set(t[0],{...t[1],constructor:d(t[1].constructor)}))))}freeze(){return this}vec2f(t,e){return this._appendField(t,r.gH,e),this}vec2f64(t,e){return this._appendField(t,r.si,e),this}vec3f(t,e){return this._appendField(t,r.xs,e),this}vec3f64(t,e){return this._appendField(t,r.Xm,e),this}vec4f(t,e){return this._appendField(t,r.Eq,e),this}vec4f64(t,e){return this._appendField(t,r.Aj,e),this}mat3f(t,e){return this._appendField(t,r.jZ,e),this}mat3f64(t,e){return this._appendField(t,r.j0,e),this}mat4f(t,e){return this._appendField(t,r.Sx,e),this}mat4f64(t,e){return this._appendField(t,r.E$,e),this}vec4u8(t,e){return this._appendField(t,r.XP,e),this}f32(t,e){return this._appendField(t,r.Y$,e),this}f64(t,e){return this._appendField(t,r.qB,e),this}u8(t,e){return this._appendField(t,r.SL,e),this}u16(t,e){return this._appendField(t,r.h,e),this}i8(t,e){return this._appendField(t,r.bf,e),this}vec2i8(t,e){return this._appendField(t,r.D6,e),this}vec2i16(t,e){return this._appendField(t,r.mJ,e),this}vec2u8(t,e){return this._appendField(t,r.LC,e),this}vec4u16(t,e){return this._appendField(t,r.Uz,e),this}u32(t,e){return this._appendField(t,r.P,e),this}_appendField(t,e,n){if(this._fields.has(t))return void(0,o.vA)(!1,`${t} already added to vertex buffer layout`);const r=e.ElementCount*(0,i.GJ)(e.ElementType),s=this._stride;this._stride+=r,this._fields.set(t,{size:r,constructor:e,offset:s,optional:n})}createBuffer(t){return new s(this,t)}createView(t){return new s(this,t)}clone(){const t=new c;return t._stride=this._stride,t._fields=new Map,this._fields.forEach(((e,n)=>t._fields.set(n,e))),t.BufferType=this.BufferType,t}get stride(){if(this._lastAligned!==this._fields.size){let t=1;this._fields.forEach((e=>t=Math.max(t,(0,i.GJ)(e.constructor.ElementType)))),this._stride=Math.floor((this._stride+t-1)/t)*t,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}function a(){return new c}class u{constructor(t){this.fields=new Array,t.fields.forEach(((t,e)=>{const n={...t,constructor:f(t.constructor)};this.fields.push([e,n])})),this.stride=t.stride}}const l=[r.Y$,r.gH,r.xs,r.Eq,r.jZ,r.Sx,r.qB,r.si,r.Xm,r.Aj,r.j0,r.E$,r.SL,r.LC,r.eI,r.XP,r.h,r.Yi,r.nS,r.Uz,r.P,r.An,r.H$,r.ml,r.bf,r.D6,r.m8,r.TX,r.Qt,r.mJ,r.Vp,r.E7,r.My,r.UL,r.zD,r.Y4];function f(t){return`${t.ElementType}_${t.ElementCount}`}function d(t){return h.get(t)}const h=new Map;l.forEach((t=>h.set(f(t),t)))}}]);