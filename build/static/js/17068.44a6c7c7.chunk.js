"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[3482,11564,17068],{3482:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var i=s(93800),n=s(85715),r=s(5839),o=s(19455),a=s(17741),l=s(48602),c=s(32980),u=(s(21265),s(14746),s(75269)),p=s(80556),d=s(46751),h=s(75400);let y=class extends(n.A.ClonableMixin(o.A)){constructor(e){super(e),this.type="plane",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}equals(e){return this.heading===e.heading&&this.tilt===e.tilt&&(0,a.CM)(this.position,e.position)&&this.width===e.width&&this.height===e.height}};(0,i._)([(0,l.MZ)({readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:h.default}),(0,d.P)()],y.prototype,"position",void 0),(0,i._)([(0,l.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,d.P)(),(0,c.w)((e=>r.ie.normalize((0,p.GB)(e),0,!0)))],y.prototype,"heading",void 0),(0,i._)([(0,l.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,d.P)(),(0,c.w)((e=>r.ie.normalize((0,p.GB)(e),0,!0)))],y.prototype,"tilt",void 0),(0,i._)([(0,l.MZ)({type:Number,nonNullable:!0}),(0,d.P)()],y.prototype,"width",void 0),(0,i._)([(0,l.MZ)({type:Number,nonNullable:!0}),(0,d.P)()],y.prototype,"height",void 0),y=(0,i._)([(0,u.$)("esri.analysis.SlicePlane")],y);const w=y},10876:(e,t,s)=>{function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}s.d(t,{H:()=>i})},11564:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var i=s(93800),n=s(38432),r=s(3482),o=s(89129),a=s(40736),l=s(48602),c=(s(21265),s(50925),s(14746),s(75269));let u=class extends n.A{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new o.default}set excludedLayers(e){this._set("excludedLayers",(0,a.V)(e,this._get("excludedLayers")))}get requiredPropertiesForEditing(){return[this.shape?.position]}clear(){this.shape=null}};(0,i._)([(0,l.MZ)({type:["slice"]})],u.prototype,"type",void 0),(0,i._)([(0,l.MZ)()],u.prototype,"tiltEnabled",void 0),(0,i._)([(0,l.MZ)({types:{key:"type",base:null,typeMap:{plane:r.default},defaultKeyValue:"plane"}})],u.prototype,"shape",void 0),(0,i._)([(0,l.MZ)({cast:a.H,clonable:e=>e.slice()})],u.prototype,"excludedLayers",null),(0,i._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"excludeGroundSurface",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],u.prototype,"requiredPropertiesForEditing",null),u=(0,i._)([(0,c.$)("esri.analysis.SliceAnalysis")],u);const p=u},17068:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var i=s(93800),n=s(11564),r=s(89129),o=s(48602),a=(s(21265),s(50925),s(14746),s(75269)),l=s(60319);const c=new Set;let u=class extends l.D{constructor(e){super(e),this.analysis=null,this.supportedViewType="3d",this.unsupportedErrorMessage="SliceViewModel is only supported in 3D views.",c.add(this)}destroy(){c.delete(this)}get state(){return this.disabled||!this.ready?"disabled":null==this.tool?"ready":this.tool.state}get shape(){return this.analysis.shape}set shape(e){this.analysis.shape=e}get tiltEnabled(){return this.analysis.tiltEnabled}set tiltEnabled(e){this.analysis.tiltEnabled=e}get layersMode(){return this.tool?.layersMode??"none"}get excludedLayers(){return this.analysis.excludedLayers}set excludedLayers(e){this.analysis.excludedLayers=r.default.isCollection(e)?e:new r.default(e)}get excludeGroundSurface(){return this.analysis.excludeGroundSurface}set excludeGroundSurface(e){this.analysis.excludeGroundSurface=e}async start(){await super.start(),c.forEach((e=>{e.view===this.view&&e!==this&&e.clear()})),null!=this.analysisView&&(this.analysisView.active=!0)}enterExcludeLayerMode(){null!=this.tool&&this.tool.enterExcludeLayerMode()}exitExcludeLayerMode(){null!=this.tool&&this.tool.exitExcludeLayerMode()}onConnectToAnalysisView(e){e.active=!0}constructAnalysis(){return new n.default}};(0,i._)([(0,o.MZ)({type:n.default})],u.prototype,"analysis",void 0),(0,i._)([(0,o.MZ)({readOnly:!0})],u.prototype,"state",null),(0,i._)([(0,o.MZ)()],u.prototype,"shape",null),(0,i._)([(0,o.MZ)()],u.prototype,"tiltEnabled",null),(0,i._)([(0,o.MZ)()],u.prototype,"layersMode",null),(0,i._)([(0,o.MZ)()],u.prototype,"excludedLayers",null),(0,i._)([(0,o.MZ)({nonNullable:!0})],u.prototype,"excludeGroundSurface",null),u=(0,i._)([(0,a.$)("esri.widgets.Slice.SliceViewModel")],u);const p=u},24589:(e,t,s)=>{s.d(t,{n:()=>n});var i=s(43103);function n(e){return r[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const t=(0,i.getPathExtension)(e);return l[t]||o}(e.url)}(e)]||a}const r={},o="text/plain",a=r[o],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const c in l)r[l[c]]=c},38432:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(93800),n=s(6946),r=s(62631),o=s(85715),a=s(93633),l=s(19455),c=s(48602),u=(s(21265),s(50925),s(75269));let p=0,d=class extends(l.A.JSONSupportMixin(o.A.ClonableMixin(a.A.IdentifiableMixin(n.default)))){constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${p++}`,this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":case"viewshed":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(r.Ru)}};(0,i._)([(0,c.MZ)({type:String,constructOnly:!0,clonable:!1})],d.prototype,"id",void 0),(0,i._)([(0,c.MZ)({type:String})],d.prototype,"title",void 0),(0,i._)([(0,c.MZ)({clonable:!1,value:null})],d.prototype,"parent",null),(0,i._)([(0,c.MZ)({readOnly:!0})],d.prototype,"isEditable",null),d=(0,i._)([(0,u.$)("esri.analysis.Analysis")],d);const h=d},46751:(e,t,s)=>{s.d(t,{P:()=>h});var i=s(74719),n=s(99521),r=s(10876),o=s(43103),a=s(12130),l=s(54391),c=s(70605),u=s(48602),p=s(24589),d=s(85042);function h(e){const t=e?.origins??[void 0];return(s,i)=>{const n=function(e,t,s){if("resource"===e?.type)return function(e,t,s){const i=(0,l.z4)(t,s);return{type:String,read:(e,t,s)=>{const n=(0,d.r)(e,t,s);return i.type===String?n:"function"==typeof i.type?new i.type({url:n}):void 0},write:{isRequired:i.json?.write?.isRequired,writer(t,n,a,l){if(!l?.resources)return"string"==typeof t?void(n[a]=(0,d.t)(t,l)):void(n[a]=t.write({},l));const u=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),h=(0,d.t)(u,{...l,verifyItemRelativeUrls:l?.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},d.M.NO),g=i.type!==String&&(!(0,r.H)(this)||l?.origin&&this.originIdOf(s)>(0,c.aB)(l.origin)),_={object:this,propertyName:s,value:t,targetUrl:h,dest:n,targetPropertyName:a,context:l,params:e};l?.portalItem&&h&&!(0,o.isAbsolute)(h)?g&&e?.contentAddressed?y(_):g?function(e){const{context:t,targetUrl:s,params:i,value:n,dest:r,targetPropertyName:a}=e;if(!t.portalItem)return;const l=t.portalItem.resourceFromPath(s),c=v(n,s,t),u=(0,p.n)(c),d=(0,o.getPathExtension)(l.path),h=i?.compress??!1;u===d?(t.resources&&w({...e,resource:l,content:c,compress:h,updates:t.resources.toUpdate}),r[a]=s):y(e)}(_):function(e){let{context:t,targetUrl:s,dest:i,targetPropertyName:n}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s),compress:!1}),i[n]=s)}(_):l?.portalItem&&(null==h||null!=(0,d.i)(h)||(0,o.isBlobProtocol)(h)||g)?y(_):n[a]=h}}}}(e,t,s);switch(e?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=d.b;return{read:e,write:t}}}}(e,s,i);for(const e of t){const t=(0,u.rM)(s,e,i);for(const e in n)t[e]=n[e]}}}function y(e){const{targetUrl:t,params:s,value:r,context:l,dest:c,targetPropertyName:u}=e;if(!l.portalItem)return;const h=(0,d.p)(t),y=v(r,t,l);if(s?.contentAddressed&&"json"!==y.type)return void l.messages?.push(new i.default("persistable:contentAddressingUnsupported",`Property "${u}" is trying to serializing a resource with content of type ${y.type} with content addressing. Content addressing is only supported for json resources.`,{content:y}));const g=s?.contentAddressed&&"json"===y.type?(0,n.d)(y.jsonString):h?.filename??(0,a.lk)(),_=(0,o.join)(s?.prefix??h?.prefix,g),f=`${_}.${(0,p.n)(y)}`;if(s?.contentAddressed&&l.resources&&"json"===y.type){const e=l.resources.toKeep.find((e=>{let{resource:t}=e;return t.path===f}))??l.resources.toAdd.find((e=>{let{resource:t}=e;return t.path===f}));if(e)return void(c[u]=e.resource.itemRelativeUrl)}const b=l.portalItem.resourceFromPath(f);(0,o.isBlobProtocol)(t)&&l.resources&&l.resources.pendingOperations.push((0,o.blobUrlToBlob)(t).then((e=>{b.path=`${_}.${(0,p.n)({type:"blob",blob:e})}`,c[u]=b.itemRelativeUrl})).catch((()=>{})));const m=s?.compress??!1;l.resources&&w({...e,resource:b,content:y,compress:m,updates:l.resources.toAdd}),c[u]=b.itemRelativeUrl}function w(e){let{object:t,propertyName:s,updates:i,resource:n,content:r,compress:o}=e;i.push({resource:n,content:r,compress:o,finish:e=>{!function(e,t,s){"string"==typeof e[t]?e[t]=s.url:e[t].url=s.url}(t,s,e)}})}function v(e,t,s){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(s))}}},60319:(e,t,s)=>{s.d(t,{D:()=>y});var i,n,r=s(93800),o=s(6946),a=s(58828),l=(s(21265),s(50925)),c=s(17741),u=s(49959),p=s(79953),d=s(48602),h=(s(14746),s(75269));(n=i||(i={}))[n.PENDING=0]="PENDING",n[n.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",n[n.RUNNING=2]="RUNNING";let y=class extends o.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.view=null,this.analysisView=null,this._reconnectViewTask=null,this._forceInteractiveHandle=null,this._parentChangeFromReconnect=!1,this._startUserOperation=null;const t=e?.analysis;null!=t?this.analysis=t:(this._set("analysis",this.constructAnalysis()),this._set("isAnalysisOwner",!0)),null!=e?.visible&&(this.visible=e.visible)}normalizeCtorArgs(e){const{analysis:t,...s}=e;return s}initialize(){this.addHandles([(0,p.watch)((()=>({readyAndNotSupported:null!=this.view&&this.view.ready&&!this.supported})),(e=>{let{readyAndNotSupported:t}=e;t&&l.A.getLogger(this).errorOnce(this.unsupportedErrorMessage)}),p.syncAndInitial),(0,p.watch)((()=>this.analysis?.parent),(e=>{this._parentChangeFromReconnect||e===this.view||this._set("isAnalysisOwner",!1);const t=!this._parentChangeFromReconnect;this._parentChangeFromReconnect=!1,t&&this._scheduleViewReconnect()}),p.sync),(0,p.watch)((()=>({view:this.view,ready:null!=this.view&&this.view.ready,supported:this.supported})),((e,t)=>{let{view:s}=e;const i=t?.view;s!==i&&(this._startUserOperation=(0,c.DC)(this._startUserOperation),this._disconnectFromView(i)),this._scheduleViewReconnect()}),p.syncAndInitial)])}destroy(){this._reconnectViewTask=(0,c.DC)(this._reconnectViewTask),this._startUserOperation=(0,c.DC)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),this._set("view",null),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}get supported(){return null==this.view||this.view.type===this.supportedViewType}set visible(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}get active(){return null!=this.tool&&this.tool.active}get disabled(){return null==this.view||!this.view.ready||!this.supported}set analysis(e){e!==this._get("analysis")&&(this._startUserOperation=(0,c.DC)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}get ready(){return null!=this.analysisView&&!this.connectingToView}get connectingToView(){return null!=this._reconnectViewTask}get isAnalysisOwner(){return this._get("isAnalysisOwner")}get tool(){return null!=this.analysisView?this.analysisView.tool:null}clear(){this._startUserOperation=(0,c.DC)(this._startUserOperation),this._resetInteractiveCreationState(),null!=this.tool&&null!=this.view&&this.view.activeTool===this.tool&&(this.view.activeTool=null)}async start(){if(!this.visible)return void l.A.getLogger(this).warn("Cannot start analysis when not visible");this.clear();const e={task:null,abort:null,state:i.PENDING},t=(0,a.UT)((async t=>{if(e.state=i.WAIT_FOR_VIEW_READY,await(0,p.whenOnce)((()=>this.ready),t),e.state=i.RUNNING,null==this.analysisView||null==this.view)return;const s=this.analysisView.tool;null!=s&&(this.view.activeTool=s,(0,p.when)((()=>s.created),(()=>{s.active&&null!=this.view&&(this.view.activeTool=null)}),{initial:!0,once:!0}))}));return e.task=t,e.abort=()=>t.abort(),this._startUserOperation=e,t.promise}onConnectToAnalysisView(e){}onDisconnectFromAnalysisView(){}_scheduleViewReconnect(){this._reconnectViewTask=(0,c.DC)(this._reconnectViewTask);const e=(0,a.UT)((async t=>{try{await this._reconnectView(t)}catch(s){if((0,u.throwIfAborted)(t),!(0,u.isAbortError)(s))return void l.A.getLogger(this).warn("Failed to use analysis in view model",s);throw s}finally{e===this._reconnectViewTask&&(this._reconnectViewTask=null)}}));this._reconnectViewTask=e}async _reconnectView(e){const{view:t}=this,s=null!=t&&t.ready&&this.supported,i=this.analysis;if(this._startUserOperation=w(this._startUserOperation),this._disconnectFromView(t),s&&null!=t&&null!=i){if(this.isAnalysisOwner){if(null!=i.parent)return void l.A.getLogger(this).errorOnce("expected owned analysis to have null parent when connecting to view");this._parentChangeFromReconnect=!0,t.analyses.add(i)}this.analysisView=await t.whenAnalysisView(i),(0,u.isAborted)(e)?this._startUserOperation=w(this._startUserOperation):(this.analysisView.visible=this.visible,this._forceInteractiveHandle=this.analysisView.forceInteractiveForViewModel(),this.addHandles(this._forceInteractiveHandle),this.onConnectToAnalysisView(this.analysisView))}}_disconnectFromView(e){null!=e&&this.isAnalysisOwner&&e.analyses.includes(this.analysis)&&(this._parentChangeFromReconnect=!0,this.analysis.clear(),e.analyses.remove(this.analysis)),this.onDisconnectFromAnalysisView(),this._forceInteractiveHandle=(0,c.xt)(this._forceInteractiveHandle),this.analysisView=null}_setExternalAnalysis(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=void 0,this._forceInteractiveHandle=(0,c.xt)(this._forceInteractiveHandle)),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}_resetInteractiveCreationState(){this.analysis.clear(),null!=this.tool&&this.tool.resetCreated()}get testInfo(){}};function w(e){return null!=e&&e.state>=i.RUNNING?(e.abort(),null):e}(0,r._)([(0,d.MZ)()],y.prototype,"supported",null),(0,r._)([(0,d.MZ)()],y.prototype,"view",void 0),(0,r._)([(0,d.MZ)({type:Boolean,value:!0})],y.prototype,"visible",null),(0,r._)([(0,d.MZ)()],y.prototype,"active",null),(0,r._)([(0,d.MZ)()],y.prototype,"disabled",null),(0,r._)([(0,d.MZ)({nonNullable:!0})],y.prototype,"analysis",null),(0,r._)([(0,d.MZ)()],y.prototype,"analysisView",void 0),(0,r._)([(0,d.MZ)()],y.prototype,"ready",null),(0,r._)([(0,d.MZ)()],y.prototype,"connectingToView",null),(0,r._)([(0,d.MZ)({readOnly:!0})],y.prototype,"isAnalysisOwner",null),(0,r._)([(0,d.MZ)()],y.prototype,"_reconnectViewTask",void 0),(0,r._)([(0,d.MZ)()],y.prototype,"_forceInteractiveHandle",void 0),(0,r._)([(0,d.MZ)()],y.prototype,"tool",null),y=(0,r._)([(0,h.$)("esri.widgets.support.AnalysisViewModel")],y)}}]);