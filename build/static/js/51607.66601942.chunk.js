"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[51607,70674,99490],{22093:(t,e,i)=>{function s(t,e,i){if(!e||!t?.map)return;const{map:s}=t,o=s.layers.find((t=>t===e));o||s.add(e,i),o&&null!=i&&s.layers.reorder(o,i)}function o(t,e){const i="subtype-sublayer"===e?.type?e.parent:e;return t.allLayerViews.find((t=>{const e=t.layer;return e===i||"sublayers"in e&&null!=e.sublayers&&e.sublayers.includes(i)}))}i.d(e,{Y:()=>s,i:()=>o})},51607:(t,e,i)=>{i.r(e),i.d(e,{default:()=>L});var s=i(93800),o=i(79953),n=i(48602),a=(i(21265),i(50925),i(14746),i(75269)),l=i(27811),r=i(49403),c=(i(17745),i(76697)),h=i(87118),d=i(21772),u=i(88102),m=i(80043),w=i(99071),A=i(6946);let y=class extends A.default{constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"arrowsToggle",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"capSelect",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"colorPicker",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"stylePicker",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"widthInput",void 0),y=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],y);const p=y,b="esri-un-associations",v={divControlsSymbolPicker:`${b}__div-controls-symbol-picker`,dropdown:`${b}__dropdown`,dropdownItemLineCap:`${b}__dropdown-item-line-cap`,dropdownItemLinePattern:`${b}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${b}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${b}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${b}__dropdown-trigger`,labelAndToggle:`${b}__label-and-toggle`};let g=class extends l.default{constructor(t,e){super(t,e),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new w.default,this.messages=null,this.showArrows=!1,this.visibleElements=new p,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:t,lineColor:e,lineStyle:i,lineWidth:s,showArrows:o}},visibleElements:n}=this,a=this.lineSymbol;return(0,h.K)("div",{class:v.divControlsSymbolPicker},n.arrowsToggle?this._renderToggle(o,this.showArrows,a,"marker"):void 0,n.capSelect?this._renderLineStylePicker(t,this._lineCapTypes,a,"cap"):void 0,n.colorPicker&&a.color?this._renderColorPicker(e,a.color.toHex(),a,"color"):void 0,n.stylePicker?this._renderLineStylePicker(i,this._lineStyleTypes,a,"style"):void 0,n.widthInput?this._renderNumberInput(s,a.width.toString(),a,"width"):void 0)}loadDependencies(){return(0,r.W)({dropdown:()=>i.e(41631).then(i.bind(i,41631)),"dropdown-group":()=>i.e(90553).then(i.bind(i,90553)),"dropdown-item":()=>i.e(54055).then(i.bind(i,54055)),input:()=>i.e(46138).then(i.bind(i,46138)),"input-number":()=>Promise.all([i.e(9982),i.e(86634)]).then(i.bind(i,9982)),label:()=>i.e(60216).then(i.bind(i,60216)),switch:()=>i.e(92812).then(i.bind(i,92812))})}_afterComponentCreate(t){"value"in t&&null!=t.value&&"setNumberValue"in t&&t.setNumberValue({committing:!1,value:t.value,origin:"direct"})}_renderColorPicker(t,e,i,s){return(0,h.K)("calcite-label",{scale:"s"},t,(0,h.K)("calcite-input",{scale:"s",type:"color",value:e,onCalciteInputInput:t=>{const e=t.currentTarget;i.set(s,new u.default(e.value))}}))}_renderLineStylePicker(t,e,i,s){const o="style"===s,n="esri/widgets/UtilityNetworkAssociations/assets/img";return(0,h.K)("calcite-label",{scale:"s"},t,(0,h.K)("calcite-dropdown",{class:v.dropdown,onCalciteDropdownSelect:t=>{const e=t.currentTarget;i.set(s,e.selectedItems[0].label)}},(0,h.K)("div",{class:v.dropdownTrigger,role:"button",slot:"trigger"},(0,h.K)("div",{class:o?v.dropdownSelectedItemLinePattern:v.dropdownSelectedItemLineCap,style:`background-image:url(${(0,d.s)(`${n}/line-${o?"patterns":"caps"}/${i[s]}.png`)})`})),(0,h.K)("calcite-dropdown-group",null,e.map((t=>function(t,e){return(0,h.K)("calcite-dropdown-item",{label:t,selected:i[e]===t},(0,h.K)("div",{class:o?v.dropdownItemLinePattern:v.dropdownItemLineCap,style:`background-image:url(${(0,d.s)(`${n}/line-${o?"patterns":"caps"}/${t}.png`)})`}))}(t,s))))))}_renderNumberInput(t,e,i,s){return(0,h.K)("calcite-label",{scale:"s"},t,(0,h.K)("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:e,onCalciteInputNumberChange:t=>{const e=t.currentTarget;i.set(s,e.value)}}))}_renderToggle(t,e,i,s){return(0,h.K)("div",{class:v.labelAndToggle},(0,h.K)("calcite-label",{scale:"s"},t),(0,h.K)("calcite-switch",{bind:this,checked:e,onCalciteSwitchChange:t=>{t.currentTarget.checked?i.set(s,new m.default({style:"arrow"})):i.set(s,null)}}))}};(0,s._)([(0,n.MZ)()],g.prototype,"lineSymbol",void 0),(0,s._)([(0,n.MZ)(),(0,c.G)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],g.prototype,"messages",void 0),(0,s._)([(0,n.MZ)()],g.prototype,"showArrows",void 0),(0,s._)([(0,n.MZ)({type:p,nonNullable:!0})],g.prototype,"visibleElements",void 0),g=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],g);const _=g;var S=i(99490);let k=class extends A.default{constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=new p,this.structuralAttachmentAssociationsSettings=new p}};(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],k.prototype,"maxAllowableAssociationsSlider",void 0),(0,s._)([(0,n.MZ)({type:p,nonNullable:!0})],k.prototype,"connectivityAssociationsSettings",void 0),(0,s._)([(0,n.MZ)({type:p,nonNullable:!0})],k.prototype,"structuralAttachmentAssociationsSettings",void 0),k=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations.VisibleElements")],k);const C=k,M="esri-un-associations",x={action:`${M}__action`,actionRefresh:`${M}__action-refresh`,blockContent:`${M}__block-content`,blockSectionSettings:`${M}__block-section-settings`,combobox:`${M}__combobox`,comboboxItem:`${M}__combobox-item`,divControlsMain:`${M}__div-controls-main`,label:`${M}__label`,labelAndCombobox:`${M}__label-and-combobox`,labelAndSlider:`${M}__label-and-slider`,labelAndToggle:`${M}__label-and-toggle`,panel:`${M}__panel`,slider:`${M}__slider`,statusIconContainer:`${M}__status-icon-container`,statusIconWarning:`${M}__status-icon-warning`,switch:`${M}__switch`,switchContainer:`${M}__switch-container`,widgetContainer:`${M}__widget-container`};let f=class extends l.default{constructor(t,e){super(t,e),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new S.default,this.visibleElements=new C}initialize(){this.addHandles([(0,o.watch)((()=>[this.view?.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]),(()=>{!0===this.autoRefreshAssociations&&(!0===this.showAssociationsEnabled?this.viewModel.showAssociations():this.viewModel.removeAssociations())})),(0,o.watch)((()=>this.view?.map?.utilityNetworks),(t=>{t?.items.forEach((async(t,e)=>{t.loaded||await t.load(),0===e&&(this.utilityNetwork=t)}))}),o.initial),(0,o.on)((()=>this.view?.map?.utilityNetworks),"change",(t=>{const e=t.target;t.added.forEach((async t=>{t.loaded||await t.load()})),t.removed.some((t=>t.layerUrl===this.utilityNetwork?.layerUrl))&&(this.utilityNetwork=null),this.utilityNetwork=e.length?e.getItemAt(0):null}))])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get icon(){return"view-associations"}set icon(t){this._overrideIfSome("icon",t)}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return(0,h.K)("div",{class:x.widgetContainer},(0,h.K)("calcite-block",{class:x.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return(0,r.W)({action:()=>i.e(88342).then(i.bind(i,88342)),block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),"block-section":()=>i.e(6283).then(i.bind(i,6283)),icon:()=>Promise.resolve().then(i.bind(i,92439)),combobox:()=>Promise.all([i.e(60382),i.e(89939),i.e(90609)]).then(i.bind(i,90609)),"combobox-item":()=>i.e(32045).then(i.bind(i,32045)),label:()=>i.e(60216).then(i.bind(i,60216)),notice:()=>i.e(51132).then(i.bind(i,51132)),panel:()=>Promise.all([i.e(86290),i.e(74597),i.e(99776)]).then(i.bind(i,99776)),slider:()=>i.e(81517).then(i.bind(i,81517)),switch:()=>i.e(92812).then(i.bind(i,92812)),tooltip:()=>Promise.resolve().then(i.bind(i,75703))})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.currentTarget.checked}_getLoadErrorMessagesAsNotices(t,e){return(0,h.K)("calcite-notice",{closable:!1,key:`error-notice-${e}`,kind:"warning",open:!0,scale:"s"},(0,h.K)("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.currentTarget.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:e}}=this;"ready"!==e&&"warning"!==e||t.showAssociations()}_renderConnectivityAssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:e}}=this;if(e)return(0,h.K)("calcite-block-section",{class:x.blockSectionSettings,text:t},(0,h.K)(_,{id:`${this.id}-symbol-picker-connectivity`,lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:e}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return(0,h.K)("div",{class:x.labelAndToggle,key:"connectivityAssociationsToggleDiv"},(0,h.K)("calcite-label",{class:x.label},t),(0,h.K)("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderComboboxItem(t){let{heading:e,value:i,selected:s}=t;return(0,h.K)("calcite-combobox-item",{class:x.comboboxItem,heading:e,selected:s,textLabel:e,value:i})}_renderContent(){const{viewModel:{loadErrors:t,state:e}}=this;return"disabled"===e?(0,h.K)("div",{class:x.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):(0,h.K)("calcite-panel",{class:x.panel,disabled:"loading"===e},(0,h.K)("div",{class:x.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,e,i){return(0,h.K)("div",{key:t,slot:"control"},(0,h.K)("calcite-action",{id:e,loading:!0,text:i}),(0,h.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:e},(0,h.K)("span",null,i)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:e}}=this;if(e)return(0,h.K)("div",{class:x.labelAndSlider,key:"maxAllowableAssociationsSliderDiv"},(0,h.K)("calcite-label",{class:x.label},t),(0,h.K)("calcite-slider",{bind:this,class:x.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:e},viewModel:{state:i}}=this,s=`${this.id}-refresh-action`;if("disabled"!==i)return(0,h.K)("div",{class:x.actionRefresh,slot:"control"},(0,h.K)("calcite-action",{bind:this,class:x.action,icon:"refresh-f",id:s,loading:"loading"===i,onclick:this._refreshAssociations,text:t}),(0,h.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:s},(0,h.K)("span",null,"loading"===i?e:t)))}_renderSettingsPane(){const{messagesCommon:{settings:t},visibleElements:{maxAllowableAssociationsSlider:e,connectivityAssociationsSettings:i,structuralAttachmentAssociationsSettings:s}}=this,o=(this.view?.map).utilityNetworks?.items;if(1!==o?.length||e||i||s)return(0,h.K)("calcite-block",{class:x.blockContent,collapsible:!0,heading:t},(0,h.K)("div",{class:x.divControlsMain},this._renderUtilityNetworkSettings(),this._renderMaxAllowableAssociationsSlider()),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:e},viewModel:{state:i}}=this,s=`${this.id}-show-associations-switch`;if("disabled"!==i)return"loading"===i?this._renderLoadingAction("loadingActionDiv",`${this.id}-loading-action`,e):(0,h.K)("div",{class:x.switchContainer,key:"switchDiv",slot:"control"},(0,h.K)("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:x.switch,id:s,onCalciteSwitchChange:this._showAssociationsSwitchChange}),(0,h.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:s},(0,h.K)("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:e,state:i}}=this;switch(i){case"disabled":return this._renderWarningIcon("statusDiv",`${this.id}-disabled-icon`,null);case"warning":return this._renderWarningIcon("statusDiv",`${this.id}-warning-icon`,e);case"executing":return this._renderLoadingAction("executingActionDiv",`${this.id}-executing-action`,t);default:return}}_renderStructuralAttachmentAssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:e}}=this;if(e)return(0,h.K)("calcite-block-section",{class:x.blockSectionSettings,text:t},(0,h.K)(_,{id:`${this.id}-symbol-picker-structural-attachment`,lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:e}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return(0,h.K)("div",{class:x.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},(0,h.K)("calcite-label",{class:x.label},t),(0,h.K)("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_renderUtilityNetworkSettings(){const{messages:{input:{utilityNetwork:t}}}=this,e=(this.view?.map).utilityNetworks?.items;if(1===e?.length)return null;const i=e?.map((t=>{const e=t.title,i=t.layerUrl,s=t.layerUrl===this.utilityNetwork?.layerUrl;return this._renderComboboxItem({heading:e,value:i,selected:s})}));return(0,h.K)("div",{class:x.labelAndCombobox,key:"utilityNetworkComboboxDiv"},(0,h.K)("calcite-label",{class:x.label},t),(0,h.K)("calcite-combobox",{class:x.combobox,clearDisabled:!0,label:"",maxItems:3,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:t=>{const i=e?.find((e=>e.layerUrl===t.currentTarget.value));this.utilityNetwork=i}},i))}_showAssociationsSwitchChange(t){let{currentTarget:e}=t;const{viewModel:i}=this;this.showAssociationsEnabled=e.checked,this._associationsOptionsEnabled=e.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.currentTarget.checked}_renderWarningIcon(t,e,i){return i?(0,h.K)("div",{class:x.statusIconContainer,key:t,slot:"control"},(0,h.K)("calcite-icon",{class:x.statusIconWarning,icon:"exclamation-mark-triangle",id:e,scale:"s"}),(0,h.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:e},(0,h.K)("span",null,i))):(0,h.K)("div",{class:x.statusIconContainer,key:t,slot:"control"},(0,h.K)("calcite-icon",{class:x.statusIconWarning,icon:"exclamation-mark-triangle",id:e,scale:"s"}))}};(0,s._)([(0,n.MZ)()],f.prototype,"autoRefreshAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"connectivityAssociationsLineSymbol",null),(0,s._)([(0,n.MZ)()],f.prototype,"icon",null),(0,s._)([(0,n.MZ)()],f.prototype,"includeConnectivityAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"includeStructuralAttachmentAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"label",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociationsSliderMax",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociationsSliderMin",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociationsSliderStep",null),(0,s._)([(0,n.MZ)(),(0,c.G)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],f.prototype,"messages",void 0),(0,s._)([(0,n.MZ)(),(0,c.G)("esri/t9n/common")],f.prototype,"messagesCommon",void 0),(0,s._)([(0,n.MZ)()],f.prototype,"showArrowsConnectivity",null),(0,s._)([(0,n.MZ)()],f.prototype,"showArrowsStructuralAttachment",null),(0,s._)([(0,n.MZ)()],f.prototype,"showAssociationsEnabled",null),(0,s._)([(0,n.MZ)()],f.prototype,"structuralAttachmentAssociationsLineSymbol",null),(0,s._)([(0,n.MZ)()],f.prototype,"utilityNetwork",null),(0,s._)([(0,n.MZ)()],f.prototype,"view",null),(0,s._)([(0,n.MZ)({type:S.default})],f.prototype,"viewModel",void 0),(0,s._)([(0,n.MZ)({type:C,nonNullable:!0})],f.prototype,"visibleElements",void 0),f=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations")],f);const L=f},70674:(t,e,i)=>{i.r(e),i.d(e,{default:()=>m});var s=i(93800),o=i(48602),n=(i(21265),i(50925),i(14746),i(75269)),a=i(21),l=i(57457),r=i(24203),c=i(75215),h=i(33580),d=i(87730);let u=class extends((0,r.dM)((0,c.j)(l.default))){constructor(t){super(t),this.elevationInfo=null,this.graphics=new h.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,e){return super.on(t,e)}graphicChanged(t){this.emit("graphic-update",t)}};(0,s._)([(0,o.MZ)({type:d.A})],u.prototype,"elevationInfo",void 0),(0,s._)([(0,o.MZ)((0,a.C)(h.Y,"graphics"))],u.prototype,"graphics",void 0),(0,s._)([(0,o.MZ)({type:["show","hide"]})],u.prototype,"listMode",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"screenSizePerspectiveEnabled",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],u.prototype,"type",void 0),(0,s._)([(0,o.MZ)({constructOnly:!0})],u.prototype,"internal",void 0),u=(0,s._)([(0,n.$)("esri.layers.GraphicsLayer")],u);const m=u},99490:(t,e,i)=>{i.r(e),i.d(e,{default:()=>_});var s=i(93800),o=i(79625),n=(i(88677),i(6946)),a=i(89129),l=i(74719),r=i(50925),c=i(79953),h=i(48602),d=(i(21265),i(14746),i(75269)),u=i(15492),m=i(70674),w=i(80043),A=i(99071),y=i(22093),p=i(12711),b=i(53957);const v=-2147208504;let g=class extends n.default{constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new u.U,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new A.default({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new a.default,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new A.default({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await(0,b.ud)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then((()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([(0,c.watch)((()=>[this.view,this.utilityNetwork]),(async()=>{const{loadErrors:t,messages:{info:{noUtilityNetwork:e,noView:i}}}=this;this._initialValidationsFinished=!1,t.removeAll();let s=!1,o=!1;this.removeAssociations(),"2d"===this.view?.type?((0,y.Y)(this.view,this._internalGraphicsLayerConnectivity),(0,y.Y)(this.view,this._internalGraphicsLayerStructuralAttachment),s=!0):(this.loadErrors.push(i),r.A.getLogger(this).error(new l.default("utilityNetworkAssociations:missing-property",i))),"utility"===this.utilityNetwork?.type?o=!0:(this.loadErrors.push(e),r.A.getLogger(this).error(new l.default("utilityNetworkAssociations:missing-property",e))),s&&o&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0}),{initial:!0}),(0,c.watch)((()=>[this.view?.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]),(async()=>{this.view?.stationary&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()})),(0,c.watch)((()=>[this.showArrowsConnectivity]),(()=>{const t=this.connectivityAssociationsLineSymbol.clone();t.marker=null,this.showArrowsConnectivity&&(t.marker=new w.default({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const e of this._internalGraphicsLayerConnectivity.graphics)e.symbol=t})),(0,c.watch)((()=>[this.showArrowsStructuralAttachment]),(()=>{const t=this.structuralAttachmentAssociationsLineSymbol.clone();t.marker=null,this.showArrowsStructuralAttachment&&(t.marker=new w.default({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const e of this._internalGraphicsLayerStructuralAttachment.graphics)e.symbol=t})),(0,c.watch)((()=>{const{cap:t,color:e,style:i,width:s,marker:o}=this.connectivityAssociationsLineSymbol;return[t,e,i,s,o]}),(()=>{const t=this.connectivityAssociationsLineSymbol.clone();for(const e of this._internalGraphicsLayerConnectivity.graphics)e.symbol=t;this.showArrowsConnectivity=!1,t.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,t.marker=new w.default({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))})),(0,c.watch)((()=>{const{cap:t,color:e,style:i,width:s,marker:o}=this.structuralAttachmentAssociationsLineSymbol;return[t,e,i,s,o]}),(()=>{const t=this.structuralAttachmentAssociationsLineSymbol.clone();for(const e of this._internalGraphicsLayerStructuralAttachment.graphics)e.symbol=t;this.showArrowsStructuralAttachment=!1,t.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,t.marker=new w.default({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))})),(0,p.oQ)(t)])}))}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":""!==this.executionError?"warning":this._initialValidationsFinished?"ready":"loading"}get utilityNetwork(){return this.utilityNetwork}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}get view(){return this.view}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){const{messages:{info:{maxAllowableAssociationsExceeded:t,noAssociationsFound:e,noAssociationTypeSpecified:i}},utilityNetwork:s}=this;this._set("executionError","");const n={extent:this.view?.extent,gdbVersion:this.utilityNetwork?.gdbVersion,maxGeometryCount:this.maxAllowableAssociations,moment:this.utilityNetwork?.historicMoment,outSpatialReference:this.view?.spatialReference.clone(),returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations};this._updatingHandles.addPromise(s?.synthesizeAssociationGeometries(n).then((i=>{let s=[],n=[];return i?.maxGeometryCountExceeded?(this.removeAssociations(),void this._set("executionError",t)):0===i?.associations.length?(this.removeAssociations(),void this._set("executionError",e)):void(i&&(s=i?.associations.filter((t=>{let{associationType:e}=t;return"connectivity"===e})).map((t=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new w.default({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new o.default({geometry:t.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol})))),n=i.associations.filter((t=>{let{associationType:e}=t;return"attachment"===e})).map((t=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new w.default({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new o.default({geometry:t.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol})))),this._internalGraphicsLayerConnectivity.removeAll(),s.length>0&&this._internalGraphicsLayerConnectivity.addMany(s),this._internalGraphicsLayerStructuralAttachment.removeAll(),n.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(n)))}),(t=>{let e="Error: "+t;t instanceof l.default&&t.details?.raw&&(e=t.details.raw.extendedCode===v?i:t.details.message),this._set("executionError",e)})))}_createInternalGraphicsLayer(t){return new m.default({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&this.view?.map&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};(0,s._)([(0,h.MZ)()],g.prototype,"_initialValidationsFinished",void 0),(0,s._)([(0,h.MZ)()],g.prototype,"autoRefreshAssociations",void 0),(0,s._)([(0,h.MZ)({type:A.default,nonNullable:!0})],g.prototype,"connectivityAssociationsLineSymbol",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],g.prototype,"executionError",void 0),(0,s._)([(0,h.MZ)({type:Boolean,value:!0})],g.prototype,"includeConnectivityAssociations",null),(0,s._)([(0,h.MZ)({type:Boolean,value:!0})],g.prototype,"includeStructuralAttachmentAssociations",null),(0,s._)([(0,h.MZ)()],g.prototype,"loadErrors",void 0),(0,s._)([(0,h.MZ)()],g.prototype,"maxAllowableAssociations",void 0),(0,s._)([(0,h.MZ)()],g.prototype,"messages",void 0),(0,s._)([(0,h.MZ)()],g.prototype,"showAssociationsEnabled",void 0),(0,s._)([(0,h.MZ)()],g.prototype,"showArrowsConnectivity",void 0),(0,s._)([(0,h.MZ)()],g.prototype,"showArrowsStructuralAttachment",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],g.prototype,"state",null),(0,s._)([(0,h.MZ)({type:A.default,nonNullable:!0})],g.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),(0,s._)([(0,h.MZ)()],g.prototype,"utilityNetwork",null),(0,s._)([(0,h.MZ)()],g.prototype,"view",null),g=(0,s._)([(0,d.$)("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],g);const _=g}}]);