"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[18688,33247],{16650:(t,e,i)=>{i.d(e,{A:()=>n});const o="esri-directional-pad",n={base:o,buttonsContainer:`${o}__buttons-container`,button:`${o}__button`,compassButton:`${o}__compass`,rotationContainer:`${o}__rotation-container`,rotationSliderContainer:`${o}__rotation-slider-container`,rotationReset:`${o}__rotation-reset-button`,error:`${o}__error`}},18688:(t,e,i)=>{i.r(e),i.d(e,{default:()=>v});var o=i(93800),n=i(58448),s=i(48602),r=i(75269),a=i(28792),l=i(16650),d=i(84092),h=i(30920);let c=class extends((0,h.A)(n.A.EventedAccessor)){constructor(t){super(t),this._initialAngle=void 0,this._movementVector=void 0,this._widgetCenter=void 0,this._anyAngleMovementEnabled=!1,this._movementTimeout=void 0,this._disabled=!1,this._moveOnceDuration=a.qU,this.angle=void 0,this.speed=1,this.view=null,this.beginFollowingPointer=(t,e)=>{if(this.disabled)return;this._widgetCenter=e;const i=this._pointerLocationToVector(t);if(void 0===i)return;const o=this._resolveClosestAngle(t,i);void 0!==o&&(this._emitMove((0,d.s5)(o)),this.angle=o,this._initialAngle=o,this._setMovementTimeout((()=>{void 0===this._widgetCenter&&this._stopMovement()})),document.addEventListener("pointermove",this._onPointerMove,{passive:!0}),document.addEventListener("pointerup",this._onPointerUp,{passive:!0,once:!0}))},this.moveOnce=t=>{const e=(0,d.s5)(t);this._emitMove(e),this._setMovementTimeout(this._stopMovement)},this._pointerLocationToVector=t=>{if(void 0===this._widgetCenter)return;const{x:e,y:i}=(0,d.LD)(this._widgetCenter,t);return{x:e,y:-i}},this._resolveClosestAngle=(t,e)=>{const i=t.target,o=i?.getAttribute?.("data-angle"),n=i?.classList?.contains(l.A.compassButton);if(n)return;const s=Number.parseInt(o??"",10);return Number.isNaN(s)?(0,d.F6)(e):s},this._onPointerMove=t=>{if(0===t.buttons)return void this._stopMovement();const e=this._pointerLocationToVector(t);if(void 0===e)return;this._setMovementTimeout(void 0);const i=this._resolveClosestAngle(t,e);if(void 0===i)return void this._emitStop();const o=(0,d.s5)(i),n=null!=this._initialAngle&&this._initialAngle!==i;this._anyAngleMovementEnabled||=n;const s=this._anyAngleMovementEnabled?e:o;(s.x!==this._movementVector?.x||s.y!==this._movementVector?.y)&&(this.angle=i,this._emitMove(s))},this._onPointerUp=()=>{void 0===this._movementTimeout?this._stopMovement():this._widgetCenter=void 0},this._stopMovement=()=>{this._emitStop(),this._widgetCenter=void 0,this._initialAngle=void 0,this._anyAngleMovementEnabled=!1,document.removeEventListener("pointermove",this._onPointerMove),document.removeEventListener("pointerup",this._stopMovement),this._setMovementTimeout(void 0)},this.on("move-start",(()=>this.view?.mapViewNavigation.begin())),this.on("move-direction-change",(t=>{let{vector:{x:e,y:i}}=t;return this.view?.mapViewNavigation.continuousPanVector({x:e*this.speed,y:i*this.speed})})),this.on("move-stop",(()=>this.view?.mapViewNavigation.stop()))}destroy(){this._stopMovement()}get disabled(){const{view:t,_disabled:e,supported:i}=this;return!1===t?.ready||e||!i}set disabled(t){this._disabled=t}get rotation(){return this.view?.rotation??this._get("rotation")??0}set rotation(t){this.view?this.view.constraints.rotationEnabled&&this.callGoTo({target:{rotation:t},options:{animate:0===t&&void 0}}):this._set("rotation",t)}get supported(){return null==this.view||"2d"===this.view.type}get state(){const{disabled:t,angle:e}=this;return t?"disabled":null!=e?"moving":"ready"}_setMovementTimeout(t){clearTimeout(this._movementTimeout),this._movementTimeout=void 0===t?void 0:setTimeout((()=>{this._movementTimeout=void 0,t()}),this._moveOnceDuration)}_emitMove(t){null==this._movementVector&&this._emitMoveStartEvent({vector:t});const e=this._movementVector;this._movementVector=t,this._emitMoveDirectionChangeEvent({vector:t,oldVector:e})}_emitStop(){this.angle=void 0,void 0!==this._movementVector&&(this._emitMoveStopEvent({oldVector:this._movementVector}),this._movementVector=void 0)}_emitMoveStartEvent(t){this.emit("move-start",{...t,type:"move-start"})}_emitMoveDirectionChangeEvent(t){this.emit("move-direction-change",{...t,type:"move-direction-change"})}_emitMoveStopEvent(t){this.emit("move-stop",{...t,type:"move-stop"})}};(0,o._)([(0,s.MZ)()],c.prototype,"_initialAngle",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"_movementVector",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"_widgetCenter",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"_anyAngleMovementEnabled",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"_movementTimeout",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"_disabled",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"_moveOnceDuration",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"disabled",null),(0,o._)([(0,s.MZ)()],c.prototype,"angle",void 0),(0,o._)([(0,s.MZ)({type:Number,range:{min:0,max:100}})],c.prototype,"speed",void 0),(0,o._)([(0,s.MZ)()],c.prototype,"rotation",null),(0,o._)([(0,s.MZ)()],c.prototype,"supported",null),(0,o._)([(0,s.MZ)({readOnly:!0})],c.prototype,"state",null),(0,o._)([(0,s.MZ)()],c.prototype,"view",void 0),c=(0,o._)([(0,r.$)("esri.widgets.DirectionalPad.DirectionalPadViewModel")],c);const v=c},28792:(t,e,i)=>{i.d(e,{Ey:()=>n,GC:()=>o,qJ:()=>s,qU:()=>r});const o=[-45,0,45,-90,90,-135,180,135],n=[...o,-180],s={0:{label:"north",iconName:"chevron-up"},45:{label:"northEast",iconName:"chevron-up-right"},90:{label:"east",iconName:"chevron-right"},135:{label:"southEast",iconName:"chevron-down-right"},180:{label:"south",iconName:"chevron-down"},"-135":{label:"southWest",iconName:"chevron-down-left"},"-90":{label:"west",iconName:"chevron-left"},"-45":{label:"northWest",iconName:"chevron-up-left"}},r=200},33247:(t,e,i)=>{i.r(e),i.d(e,{default:()=>E});var o=i(93800),n=i(56082),s=i(50925),r=i(79953),a=i(48602),l=(i(21265),i(14746),i(75269)),d=i(27811),h=i(4177),c=i(28792),v=i(16650),u=i(18688),_=i(84092),p=i(6946);let m=class extends p.default{constructor(t){super(t),this.directionalButtons=!0,this.rotationSlider=!1,this.rotationResetButton=!1}};(0,o._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],m.prototype,"directionalButtons",void 0),(0,o._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],m.prototype,"rotationSlider",void 0),(0,o._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],m.prototype,"rotationResetButton",void 0),m=(0,o._)([(0,l.$)("esri.widgets.DirectionalPad.VisibleElements")],m);const b=m;var g=i(49403),M=i(50821),w=i(17745),y=i(76697),C=i(87118);let f=class extends d.default{constructor(t,e){super(t,e),this._buttonsContainer=null,this._buttons={},this.messages=null,this.visibleElements=new b,this.viewModel=new u.default,this.visualScale="s",this._rotateIcon=t=>({"--rotation":`rotate(${t}deg)`}),this._afterButtonContainerCreate=t=>{this._buttonsContainer=t,this._buttonsContainer.addEventListener("contextmenu",this._onContextMenu,{capture:!0})},this._afterButtonContainerRemoved=()=>{this._buttonsContainer?.removeEventListener("contextmenu",this._onContextMenu,{capture:!0}),this._buttonsContainer=null},this._afterButtonCreate=(t,e)=>{this._buttons[t]=e},this._afterButtonRemoved=t=>{this._buttons[t]=void 0},this._onContextMenu=t=>t.preventDefault(),this._onButtonPointerDown=t=>{if(null===this._buttonsContainer)return;const e=t.target,i=e?.shadowRoot?.querySelector("button");i?.hasPointerCapture(t.pointerId)&&i.releasePointerCapture(t.pointerId);const o=(0,_.Tu)(this._buttonsContainer);this.viewModel.beginFollowingPointer(t,o)},this._onKeyDown=(t,e)=>{let{key:i}=e;(0,w.OU)(i)&&this.viewModel.moveOnce(t)},this._onSliderInput=t=>{let{currentTarget:e}=t;"number"==typeof e.value&&(this.viewModel.rotation=e.value)},this._onRotationReset=()=>{this.viewModel.rotation=0},(0,n.ED)(s.A.getLogger(this),"Directional Pad","arcgis-directional-pad",{version:"4.32"})}loadDependencies(){return(0,g.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-group":()=>Promise.all([i.e(86290),i.e(74597),i.e(11484)]).then(i.bind(i,11484)),"action-pad":()=>Promise.all([i.e(86290),i.e(74597),i.e(29022)]).then(i.bind(i,29022)),icon:()=>Promise.resolve().then(i.bind(i,92439)),slider:()=>i.e(81517).then(i.bind(i,81517))})}initialize(){this.addHandles((0,r.watch)((()=>this.viewModel.angle),(()=>{const t=this._buttonsContainer?.contains(document.activeElement);t&&(null==this.viewModel.angle?this.container?.focus():(0,w.Z6)(this._buttons[this.viewModel.angle]))})))}get disabled(){return this.viewModel.disabled}set disabled(t){this.viewModel.disabled=t}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get speed(){return this.viewModel.speed}set speed(t){this.viewModel.speed=t}get _rotationEnabled(){return!this.view?.ready||this.view.constraints.rotationEnabled}render(){const{label:t,disabled:e,viewModel:i}=this,o=this.classes(v.A.base,M.D.widget,e?M.D.disabled:null);return(0,C.K)("div",{"aria-label":t,class:o,tabIndex:-1},i.supported?this._renderContent():this._renderUnsupportedMessage())}_renderUnsupportedMessage(){return(0,C.K)("section",{class:v.A.error,key:"unsupported"},(0,C.K)("p",null,this.messages.unsupported))}_renderContent(){return[this.visibleElements.directionalButtons?this._renderDirectionalButtons():void 0,this.visibleElements.rotationSlider?this._renderRotation():void 0]}_renderDirectionalButtons(){return(0,C.K)("calcite-action-pad",{expandDisabled:!0,key:"directional-buttons-container",layout:"grid"},(0,C.K)("calcite-action-group",{afterCreate:this._afterButtonContainerCreate,afterRemoved:this._afterButtonContainerRemoved,class:v.A.buttonsContainer,dir:"ltr"},c.GC.slice(0,4).map((t=>this._renderButton(t))),this._renderCompass(),c.GC.slice(4).map((t=>this._renderButton(t)))))}_renderButton(t){const{label:e,iconName:i}=c.qJ[t],o=this.messages[e];return(0,C.K)("calcite-action",{active:this.viewModel.angle===t,afterCreate:e=>this._afterButtonCreate(t,e),afterRemoved:()=>this._afterButtonRemoved(t),alignment:"center",class:v.A.button,"data-angle":t.toString(),disabled:this.disabled,key:t,onkeydown:this._onKeyDown.bind(void 0,t),onpointerdown:this._onButtonPointerDown,scale:this.visualScale,text:o,title:o},(0,C.K)("calcite-icon",{icon:i,scale:this.visualScale}))}_renderCompass(){const t=this.disabled||(0,h.P)(this.view)?"compass-needle":"arrow-up",e=0===this.viewModel.rotation,i=this.messages.resetHeading;return(0,C.K)("calcite-action",{alignment:"center",class:v.A.compassButton,disabled:this.disabled||!this._rotationEnabled||e,key:"compass",onclick:this._onRotationReset,scale:this.visualScale,styles:this._rotateIcon(this.viewModel.rotation),text:i,title:i},!e&&(0,C.K)("calcite-icon",{icon:t,scale:this.visualScale}))}_renderRotation(){return(0,C.K)("calcite-action-pad",{expandDisabled:!0,key:"slider-container",layout:"horizontal"},(0,C.K)("calcite-action-group",{class:v.A.rotationContainer},this.visibleElements.rotationResetButton?this._renderRotationResetButton():null,this._renderRotationSlider()))}_renderRotationResetButton(){const t=this.messages.resetHeading;return(0,C.K)("calcite-action",{alignment:"center",class:v.A.rotationReset,disabled:this.disabled||!this._rotationEnabled,onclick:this._onRotationReset,scale:this.visualScale,text:t,title:t},(0,C.K)("calcite-icon",{flipRtl:!0,icon:"rotate",scale:this.visualScale}))}_renderRotationSlider(){return(0,C.K)("div",{class:v.A.rotationSliderContainer},(0,C.K)("calcite-slider",{"aria-label":this.messages.heading,disabled:this.disabled||!this._rotationEnabled,labelHandles:!0,max:360,min:0,required:!0,scale:this.visualScale,value:Math.round(this.viewModel.rotation),onCalciteSliderInput:this._onSliderInput}))}};(0,o._)([(0,a.MZ)()],f.prototype,"_buttonsContainer",void 0),(0,o._)([(0,a.MZ)()],f.prototype,"_buttons",void 0),(0,o._)([(0,a.MZ)()],f.prototype,"disabled",null),(0,o._)([(0,a.MZ)()],f.prototype,"icon",null),(0,o._)([(0,a.MZ)()],f.prototype,"label",null),(0,o._)([(0,a.MZ)(),(0,y.G)("esri/widgets/DirectionalPad/t9n/DirectionalPad")],f.prototype,"messages",void 0),(0,o._)([(0,a.MZ)({type:b,nonNullable:!0})],f.prototype,"visibleElements",void 0),(0,o._)([(0,a.MZ)()],f.prototype,"view",null),(0,o._)([(0,a.MZ)({type:u.default})],f.prototype,"viewModel",void 0),(0,o._)([(0,a.MZ)()],f.prototype,"visualScale",void 0),(0,o._)([(0,a.MZ)()],f.prototype,"speed",null),(0,o._)([(0,a.MZ)({readOnly:!0})],f.prototype,"_rotationEnabled",null),f=(0,o._)([(0,l.$)("esri.widgets.DirectionalPad")],f);const E=f},84092:(t,e,i)=>{i.d(e,{F6:()=>s,LD:()=>a,Tu:()=>l,s5:()=>r});var o=i(64682),n=i(28792);function s(t){const e=function(t){let{x:e,y:i}=t;const n=Math.atan2(e,i);return(0,o.KJ)(n)}(t),i=n.Ey.map((t=>({angle:t,offset:Math.abs(t-e)}))).sort(((t,e)=>t.offset-e.offset)),s=i[0].angle;return-180===s?180:s}function r(t){const e=(0,o.kU)(t);return{x:Math.sin(e),y:Math.cos(e)}}function a(t,e){const i=e.y-t.y,o=e.x-t.x,n=Math.sqrt(o*o+i*i);return{x:o/n,y:i/n}}function l(t){const{x:e,y:i,width:o,height:n}=t.getBoundingClientRect();return{x:e+o/2,y:i+n/2}}}}]);