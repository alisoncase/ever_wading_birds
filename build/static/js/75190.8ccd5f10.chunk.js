"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[75190],{7010:(e,t,i)=>{i.d(t,{A:()=>b});var o=i(93800),s=i(62631),n=i(48602),r=(i(21265),i(50925),i(75269)),l=i(91690),a=i(12010),d=i(27811),c=i(49403),u=i(50821),p=i(25756),h=(i(17745),i(76697)),m=i(87118),g=i(56390);const v="esri-sketch-tooltip-controls",_={base:v,block:`${v}__block`,blockContent:`${v}__block-content`,hintIcon:`${v}__hint-icon`,radioButtonLabelWrapper:`${v}__radio-button-label-wrapper`};let y=class extends d.default{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new g.A,this.sketchOptions=new l.A,this.viewType=void 0,this._onTooltipsEnabledChange=e=>{this.sketchOptions.tooltips.enabled=e},this._onLabelsEnabledChange=e=>{this.sketchOptions.labels.enabled=e},this._onDirectionModeChange=e=>{this.sketchOptions.values.directionMode=e.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([(0,c.W)({block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),label:()=>i.e(60216).then(i.bind(i,60216)),icon:()=>Promise.resolve().then(i.bind(i,92439)),"radio-button":()=>i.e(35906).then(i.bind(i,35906)),"radio-button-group":()=>i.e(31544).then(i.bind(i,31544))}),(0,p.m)()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return(0,m.K)("div",{"aria-label":e,class:this.classes(_.base,u.D.widget)},i?(0,m.K)("calcite-block",{class:_.block,heading:t.header?this.label:"",key:"content-block",label:this.label,open:!0},(0,m.K)("div",{class:_.blockContent,key:"content"},i)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&"2d"!==t?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(s.Ru);return 0===i.length?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return(0,m.K)(p.o,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return(0,m.K)(p.o,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return(0,m.K)("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,(0,m.K)("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return(0,m.K)("calcite-label",{key:e,layout:"inline",scale:"s"},(0,m.K)("calcite-radio-button",{checked:e===t,scale:"s",value:e}),(0,m.K)("div",{class:_.radioButtonLabelWrapper,key:"label-wrapper"},(0,m.K)("calcite-icon",{icon:a.N[e],scale:"s"}),i))}};(0,o._)([(0,n.MZ)()],y.prototype,"label",null),(0,o._)([(0,n.MZ)({type:g.A,nonNullable:!0})],y.prototype,"visibleElements",void 0),(0,o._)([(0,n.MZ)(),(0,h.G)("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],y.prototype,"messages",void 0),(0,o._)([(0,n.MZ)({nonNullable:!0,type:l.A})],y.prototype,"sketchOptions",void 0),(0,o._)([(0,n.MZ)({type:String})],y.prototype,"viewType",void 0),y=(0,o._)([(0,r.$)("esri.widgets.support.SketchTooltipControls")],y);const b=y},12010:(e,t,i)=>{i.d(t,{N:()=>o});const o={absolute:"absolute-direction",relative:"relative-direction"}},27892:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var o=i(93800),s=i(79953),n=i(48602),r=(i(21265),i(50925),i(14746),i(75269)),l=i(78076),a=i(27811),d=i(29831),c=i(75788),u=i(6946);let p=class extends u.default{constructor(e){super(e),this.filter=!0}};(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"filter",void 0),p=(0,o._)([(0,r.$)("esri.widgets.FeatureTemplates.VisibleElements")],p);const h=p;var m=i(49403),g=i(50821),v=i(68908),_=i(34462),y=(i(17745),i(76697)),b=i(66201),f=i(87118);const w="esri-feature-templates";function M(e){return e.id}let k=class extends a.default{constructor(e,t){super(e,t),this.enableListScroll=!0,this.filterText="",this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.selectionMode="none",this.viewModel=new c.default,this.visibleElements=new h,this.renderCustomItem=e=>null,this.renderCustomGroupContent=e=>null,this.renderItemLabel=()=>null,this.renderItemDescription=()=>null,this.renderItemContent=e=>null,this.renderItemContentEnd=e=>null,this._iconIntersectionObserver=new IntersectionObserver(((e,t)=>{e.forEach((async e=>{if(e.isIntersecting){const i=e.target;if(function(e){return!!e?.["data-has-icon"]}(i))return void t.unobserve(i);const o=function(e){return e?.["data-item"]}(i),{layer:s,template:n}=o;F(i,!0);const r=await(0,_.z)(n,s).catch((()=>(F(i,!1),null)));if(null==r)return;i.appendChild(r)}}))})),this._renderItemIcon=e=>(0,l.bI)(e.layer)?(0,f.K)("span",{"data-has-icon":!0,"data-item":e,key:"icon"},(0,f.K)("calcite-icon",{icon:"table"})):(0,f.K)("span",{afterCreate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,afterUpdate:this._afterItemCreateOrUpdate,"data-has-icon":!1,"data-item":e,key:"icon"}),this._afterItemCreateOrUpdate=e=>{this._iconIntersectionObserver?.observe(e)},this._afterItemRemoved=e=>{this._iconIntersectionObserver?.unobserve(e)}}initialize(){const e=e=>{let{label:t}=e;return!this.filterText||!!t?.toLowerCase().includes(this.filterText.toLowerCase())};this.addHandles((0,s.watch)((()=>this.viewModel),((t,i)=>{t&&!t.filterFunction&&(this.filterFunction=e),i&&i!==t&&i.filterFunction===e&&(i.filterFunction=null)}),s.initial))}destroy(){this._iconIntersectionObserver?.disconnect(),this._iconIntersectionObserver=null}loadDependencies(){return(0,m.W)({icon:()=>Promise.resolve().then(i.bind(i,92439)),loader:()=>Promise.resolve().then(i.bind(i,23173)),input:()=>i.e(46138).then(i.bind(i,46138)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),notice:()=>i.e(51132).then(i.bind(i,51132))})}get disabled(){return this.viewModel.disabled}set disabled(e){this.viewModel.disabled=e}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(e){this.viewModel.filterFunction=e}get groupBy(){return this.viewModel.groupBy}set groupBy(e){this.viewModel.groupBy=e}get icon(){return"list-rectangle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get selectedItem(){return this.viewModel.selectedItem}select(e,t){return this.viewModel.select(e,t)}render(){const{disabled:e,enableListScroll:t,filterText:i,headingLevel:o,messages:s,viewModel:{items:n,numberOfFeatureTemplates:r,selectedItem:l,state:a}}=this,c=this.visibleElements.filter&&r>1;if(function(e){return e.length>0&&(0,d.X6)(e[0])}(n)){const e=n.find((e=>e.label===d._t.label));e&&(e.label=s.other)}return(0,f.K)("div",{"aria-label":s.widgetLabel,class:this.classes(w,g.D.widget)},"loading"===a?(0,f.K)("calcite-loader",{key:"loader",label:this.messagesCommon.loading,type:"indeterminate"}):"ready"===a?(0,f.K)(v.kk,{disabled:e,enableListScroll:t,filterEnabled:c,filterText:i,headingLevel:o,id:this.id,identify:M,items:n,messages:{filterPlaceholder:s.filterPlaceholder,noItems:s.noItems,noMatches:s.noMatches},renderCustomGroupContent:this.renderCustomGroupContent,renderCustomItem:this.renderCustomItem,renderIcon:this._renderItemIcon,renderItemContent:this.renderItemContent,renderItemContentEnd:this.renderItemContentEnd,renderItemDescription:this.renderItemDescription,renderItemLabel:this.renderItemLabel,selectedItem:l??void 0,selectionMode:this.selectionMode??void 0,onFilterChange:e=>{this.filterText=e},onItemSelect:e=>!(0,d.X6)(e)&&this.viewModel.select(e)}):null)}};function F(e,t){e&&(e["data-has-icon"]=t)}(0,o._)([(0,n.MZ)()],k.prototype,"disabled",null),(0,o._)([(0,n.MZ)()],k.prototype,"enableListScroll",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"filterFunction",null),(0,o._)([(0,n.MZ)()],k.prototype,"filterText",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"groupBy",null),(0,o._)([(0,n.MZ)()],k.prototype,"headingLevel",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"icon",null),(0,o._)([(0,n.MZ)()],k.prototype,"label",null),(0,o._)([(0,n.MZ)()],k.prototype,"layers",null),(0,o._)([(0,n.MZ)(),(0,y.G)("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],k.prototype,"messages",void 0),(0,o._)([(0,n.MZ)(),(0,y.G)("esri/t9n/common")],k.prototype,"messagesCommon",void 0),(0,o._)([(0,n.MZ)({readOnly:!0})],k.prototype,"selectedItem",null),(0,o._)([(0,n.MZ)()],k.prototype,"selectionMode",void 0),(0,o._)([(0,n.MZ)(),(0,b.U)("select")],k.prototype,"viewModel",void 0),(0,o._)([(0,n.MZ)({type:h,nonNullable:!0})],k.prototype,"visibleElements",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"renderCustomItem",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"renderCustomGroupContent",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"renderItemLabel",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"renderItemDescription",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"renderItemContent",void 0),(0,o._)([(0,n.MZ)()],k.prototype,"renderItemContentEnd",void 0),k=(0,o._)([(0,r.$)("esri.widgets.FeatureTemplates")],k);const C=k},34462:(e,t,i)=>{i.d(t,{z:()=>a});var o=i(79625),s=i(16804),n=i(42985),r=i(69943),l=i(26286);async function a(e,t,i){if(!(0,r.DU)(e)&&(0,n.Rj)(e)&&e.thumbnail){const i=`data:image/png;base64,${e.thumbnail.imageData}`,o=document.createElement("div");return o.classList.add("esri-thumbnail-preview"),"geometryType"in t&&t.geometryType&&o.classList.add(`esri-thumbnail-preview--${t.geometryType}`),o.style.backgroundImage=`url(${i})`,o}const o=await d(t,e);if(null==o)return null;const a={maxSize:(0,s.PN)(i?.maxSize??32)};if(((0,r.DU)(e)||(0,n.gZ)(e))&&"renderer"in t&&"dictionary"===t.renderer?.type&&(a.fieldMap=t.renderer.fieldMap??void 0,a.feature=(0,r.DU)(e)?e:{attributes:e.prototype.attributes??{}}),(0,r.DU)(e)&&e.geometry&&!1!==i?.useGeometry&&!e.geometry.type.includes("point")){a.geometry=e.geometry,a.useMarkerSymbolSize=!1;const t=(0,s.PN)(i?.maxSize??22);a.size={width:t,height:t}}return await(0,l.renderPreviewHTML)(o,a)}async function d(e,t){if(!(0,r.DU)(t)&&(0,n.Rj)(t))return c(e);if("renderer"in e&&e.renderer){const{renderer:i}=e,s=(0,r.DU)(t)?t:new o.default({attributes:t.prototype.attributes});if("getSymbolAsync"in i){const e=await i.getSymbolAsync(s);if(e)return e}}return c(e)}async function c(e){if(!("geometryType"in e))return null;const{geometryType:t}=e,o="point"===t||"multipoint"===t?await Promise.resolve().then(i.bind(i,83031)):"polyline"===t?await Promise.resolve().then(i.bind(i,99071)):"polygon"===t||"mesh"===t||"multipatch"===t?await Promise.resolve().then(i.bind(i,92744)):null;return o?new o.default:null}},54611:(e,t,i)=>{i.d(t,{AP:()=>c,bO:()=>a});var o=i(93800),s=i(6946),n=i(48602),r=(i(21265),i(50925),i(14746),i(75269)),l=i(76841);let a=class extends s.default{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"point",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"polyline",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"polygon",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"rectangle",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"circle",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"multipoint",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"mesh",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"freehandPolyline",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"freehandPolygon",void 0),a=(0,o._)([(0,r.$)("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],a);let d=class extends s.default{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};(0,o._)([(0,n.MZ)({nonNullable:!0})],d.prototype,"rectangle-selection",void 0),(0,o._)([(0,n.MZ)({nonNullable:!0})],d.prototype,"lasso-selection",void 0),(0,o._)([(0,n.MZ)({nonNullable:!0})],d.prototype,"custom-selection",void 0),d=(0,o._)([(0,r.$)("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],d);let c=class extends s.default{constructor(e){super(e),this.createTools=new a,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new d,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new l.A,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};(0,o._)([(0,n.MZ)({type:a,nonNullable:!0})],c.prototype,"createTools",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"directionModePicker",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"duplicateButton",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"deleteButton",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"selectionCountLabel",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"labelsToggle",void 0),(0,o._)([(0,n.MZ)({type:d,nonNullable:!0})],c.prototype,"selectionTools",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"settingsMenu",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"snappingControls",void 0),(0,o._)([(0,n.MZ)({type:l.A,nonNullable:!0})],c.prototype,"snappingControlsElements",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"tooltipsToggle",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"undoRedoMenu",void 0),c=(0,o._)([(0,r.$)("esri.widgets.Sketch.VisibleElements")],c)},56390:(e,t,i)=>{i.d(t,{A:()=>a});var o=i(93800),s=i(6946),n=i(48602),r=(i(21265),i(50925),i(14746),i(75269));let l=class extends s.default{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"directionModePicker",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"header",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"labelsToggle",void 0),(0,o._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"tooltipsToggle",void 0),l=(0,o._)([(0,r.$)("esri.widgets.support.SketchTooltipControls.VisibleElements")],l);const a=l},68908:(e,t,i)=>{i.d(t,{Gx:()=>h,kk:()=>c});var o=i(9137),s=i(17745),n=i(87118);const r="esri-item-list",l=`${r}__list-item`,a={base:r,filterContainerSticky:`${r}__filter-container--sticky`,group:`${r}__group`,groupHeader:`${r}__group__header`,item:l,itemDisabled:`${l}--disabled`,itemIcon:`${l}-icon`,itemContentEnd:`${l}-content-end`,noMatchesMessage:`${r}__no-matches-message`,scroller:`${r}__scroller`,scrollerEnabled:`${r}__scroller--enabled`},d=4;function c(e){const{disabled:t,filterText:i="",id:o,messages:s,onFilterChange:r,...l}=e;return(0,n.K)("div",{key:o},e.filterEnabled??1?p({disabled:t,filterText:i,id:o,messages:s,onFilterChange:r}):null,u({...l,disabled:t,enableListScroll:e.enableListScroll??!0,filterText:i,messages:s}))}function u(e){const{headingLevel:t,items:i,...o}=e;return 0===i.length?(0,n.K)("div",{class:a.noMatchesMessage,key:"no-matches"},e.messages.noMatches):(0,n.K)("div",{class:(0,s.Ly)({[a.scroller]:!0,[a.scrollerEnabled]:!!e.enableListScroll}),key:"item-container"},i.map((e=>function(e){return!!e.items}(e)?v({...o,group:e,headingLevel:t}):h({...o,grouped:!0,item:e}))))}function p(e){const{disabled:t,messages:i,filterText:o,enableListScroll:s}=e;return(0,n.K)("div",{class:s?void 0:a.filterContainerSticky,key:"filter"},(0,n.K)("calcite-input",{disabled:t,placeholder:i.filterPlaceholder,type:"search",value:o,onCalciteInputInput:t=>{const i=t.currentTarget;e.onFilterChange&&e.onFilterChange(i.value)}}))}function h(e){const{disabled:t,grouped:i,identify:o,item:r,onItemMouseEnter:l,onItemMouseLeave:d,onItemSelect:c,renderIcon:u,renderCustomItem:p,renderItemContent:h,renderItemContentEnd:v,renderItemLabel:_,renderItemDescription:y,renderItemActionEnd:b,renderItemTitle:f,selectedItem:w}=e,M=m(r,o),k=M===m(w,o),F=p?.(e);if(F)return F;const C=h?.(r),T=v?.(r),I=b?.(r),A=!(!r.disabled&&!t),K=u?.(r);return(0,n.K)("calcite-list-item",{afterUpdate:e=>{e.selected=k},"aria-level":i?"2":"",class:(0,s.Ly)({[a.item]:!0,[a.itemDisabled]:A}),"data-item":r,description:C?void 0:y?.(r)??void 0,disabled:A,key:M,label:C?void 0:_?.(r)??r.label??void 0,onblur:e=>d?.(g(e)),onfocus:e=>l?.(g(e)),onmouseenter:e=>l?.(g(e)),onmouseleave:e=>d?.(g(e)),selected:k,title:f?.(r)??void 0,onCalciteListItemSelect:e=>{e.preventDefault(),c?.(g(e))}},K?(0,n.K)("div",{class:a.itemIcon,key:"content-start",slot:"content-start"},K):void 0,C?(0,n.K)("div",{key:"content",slot:"content"},C):null,T?(0,n.K)("div",{class:a.itemContentEnd,key:"content-end",slot:"content-end"},T):null,I??null)}function m(e,t){return e?`${t?.(e)||e.id}__${e.label}`:""}function g(e){return e.currentTarget["data-item"]}function v(e){const{disabled:t,group:i,headingLevel:s=d,selectionMode:r="none",renderCustomGroupContent:l,...c}=e,u=l?.(e);return(0,n.K)("div",{class:a.group,key:i.label??void 0},(0,n.K)(o.D,{class:a.groupHeader,level:s},i.label),u||(0,n.K)("calcite-list",{disabled:t,label:i.label??"",selectionAppearance:"border",selectionMode:r},i.items.map((e=>h({...c,disabled:t,item:e,grouped:!0})))))}},70350:(e,t,i)=>{i.d(t,{A:()=>v});var o=i(93800),s=i(49959),n=i(79953),r=i(48602),l=(i(21265),i(50925),i(14746),i(75269)),a=i(27811),d=i(73484),c=(i(17745),i(87118));const u="esri-spinner",p=u,h=`${u}--start`,m=`${u}--finish`;let g=class extends a.default{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new d.A}initialize(){this.addHandles((0,n.watch)((()=>this.visible),(e=>this._visibleChange(e))))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:i}=e??{};t&&(this.viewModel.location=t),this.visible=!0;i&&i.catch((()=>{})).then((()=>this.hide()))}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,o=e&&i,s=!e&&i,n={[h]:o,[m]:s},r=this._getPositionStyles();return(0,c.K)("div",{class:this.classes(p,n),styles:r})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=(0,s.after)(this._animationDelay);this._animationPromise=t,t.catch((()=>{})).then((()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(null==t||null==e)return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};(0,o._)([(0,r.MZ)()],g.prototype,"location",null),(0,o._)([(0,r.MZ)()],g.prototype,"view",null),(0,o._)([(0,r.MZ)({type:d.A})],g.prototype,"viewModel",void 0),(0,o._)([(0,r.MZ)()],g.prototype,"visible",null),g=(0,o._)([(0,l.$)("esri.widgets.Spinner")],g);const v=g},74217:(e,t,i)=>{i.d(t,{$1:()=>d,H2:()=>h,MT:()=>m,VP:()=>g,WF:()=>c,Wt:()=>r,XQ:()=>v,hK:()=>p,nS:()=>u,uh:()=>l,xY:()=>a});var o=i(74719);const s="upload-assets",n=()=>new Error;class r extends o.default{constructor(){super(`${s}:unsupported`,"Layer does not support asset uploads.",n())}}class l extends o.default{constructor(){super(`${s}:no-glb-support`,"Layer does not support glb.",n())}}class a extends o.default{constructor(){super(`${s}:no-supported-source`,"No supported external source found",n())}}class d extends o.default{constructor(){super(`${s}:not-base-64`,"Expected gltf data in base64 format after conversion.",n())}}class c extends o.default{constructor(){super(`${s}:unable-to-prepare-options`,"Unable to prepare uploadAsset request options.",n())}}class u extends o.default{constructor(e,t){super(`${s}:bad-response`,`Bad response. Uploaded ${e} items and received ${t} results.`,n())}}class p extends o.default{constructor(e,t){super(`${s}-layer:upload-failed`,`Failed to upload mesh file ${e}. Error code: ${t?.code??"-1"}. Error message: ${t?.messages??"unknown"}`,n())}}class h extends o.default{constructor(e){super(`${s}-layer:unsupported-format`,`The service allowed us to upload an asset of FormatID ${e}, but it does not list it in its supported formats.`,n())}}class m extends o.default{constructor(){super(`${s}:convert3D-failed`,"convert3D failed.")}}class g extends o.default{constructor(){super("invalid-input:no-model","No supported model found")}}class v extends o.default{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},75190:(e,t,i)=>{i.r(t),i.d(t,{default:()=>rt});var o=i(93800),s=(i(88677),i(17741)),n=i(49959),r=i(79953),l=i(48602),a=(i(21265),i(50925),i(14746),i(75269)),d=i(98258),c=i(7293),u=i(76254),p=i(27892),h=i(70350),m=i(27811);const g="esri-editor",v={base:g,helpMessage:`${g}__help-message`,updateActions:`${g}__update-actions`,updateActionsList:`${g}__update-actions-list`,featureTemplatesContainer:`${g}__feature-templates-container`,templateItemContentEnd:`${g}__template-item-content-end`,sketchContainer:`${g}__sketch-container`,pendingFeatureListIcon:`${g}__pending-feature-list-icon`};var _=i(28888),y=i(83908),b=i(6946),f=i(76841);let w=class extends b.default{constructor(e){super(e),this.createFeaturesSection=!0,this.directionModePicker=!1,this.editFeaturesSection=!0,this.flow=!0,this.labelsToggle=!0,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new f.A,this.tooltipsToggle=!0,this.undoRedoButtons=!0,this.sketch=!0,this.zoomToButton=!0}};(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"createFeaturesSection",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"directionModePicker",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"editFeaturesSection",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"flow",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"labelsToggle",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"settingsMenu",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"snappingControls",void 0),(0,o._)([(0,l.MZ)({type:f.A,nonNullable:!0})],w.prototype,"snappingControlsElements",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"tooltipsToggle",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"undoRedoButtons",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"sketch",void 0),(0,o._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],w.prototype,"zoomToButton",void 0),w=(0,o._)([(0,a.$)("esri.widgets.Editor.VisibleElements")],w);const M=w;var k=i(49403),F=i(17745),C=i(87118);const T="esri-editor__panel-content",I={base:T,message:`${T}__message`,section:`${T}__section`,sectionGroup:`${T}__section__group`,scrimContainer:`${T}__scrim-container`},A=()=>(0,k.W)({scrim:()=>i.e(86836).then(i.bind(i,64455))});function K(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return(0,C.K)("div",{class:(0,F.Ly)(I.base,e?.showScrimOverlay?I.scrimContainer:void 0),key:e?.key??"panel-content"},...i,e?.showScrimOverlay?(0,C.K)("calcite-scrim",null):void 0)}function L(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return(0,C.K)("div",{class:I.message,"data-testid":"panel-content-message",key:e?.key??"panel-content-message"},...i)}function Z(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return(0,C.K)("div",{class:I.section,key:e?.key??"panel-content-section"},...i)}function E(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return(0,C.K)("div",{class:I.sectionGroup,key:e?.key??"panel-content-section-group"},...i)}function S(e){let{helpMessage:t,renderSketchToolbar:i}=e;return(0,C.K)(C.w,null,i(),(0,C.K)(K,{key:"creating-features-panel-content"},(0,C.K)(L,{key:"content-message"},t)))}var N=i(62631),O=i(95011),P=i(68908);function $(e){let{editorItems:t,filterText:i,id:o,messagesTemplates:s,onFilterTextChange:n,onSelectFeature:r,onZoomTo:l,workflow:a,editorMessages:d}=e;const c=new Map,u=a.data.candidates;let p=0;u.map((e=>({label:x(e),id:e.attributes[e.layer.objectIdField],data:e}))).filter((e=>{let{label:o,data:s}=e;const n=i.toLowerCase(),{title:r}=s.layer,l=t.find((e=>e.layer===s.sourceLayer));return l?l.supportsUpdateWorkflow&&(!n||o?.toLowerCase().includes(n)||r?.toLowerCase().includes(n)):null})).filter(N.Ru).forEach((e=>{p++;const t=e.data.layer;c.has(t)?c.get(t)?.items.push(e):c.set(t,{id:`${t.id}`,label:t.title??"",items:[e]})}));const h=t.toArray().map((e=>{let{layer:t}=e;return c.get(t)})).filter(N.Ru),m=p>10||i.length>0;return(0,C.K)(K,{key:"feature-list"},(0,C.K)(Z,null,(0,P.kk)({enableListScroll:!1,filterEnabled:m,filterText:i,id:o,items:h,messages:{filterPlaceholder:s.filterPlaceholder,noItems:s.noItems,noMatches:s.noMatches},onFilterChange:e=>n(e),onItemMouseEnter:e=>r(e.data),onItemMouseLeave:()=>r(null),onItemSelect:e=>r(e.data,!0),renderItemActionEnd:e=>function(e,t,i){return(0,C.K)("calcite-action",{appearance:"transparent",icon:"zoom-to-object",onclick:()=>t(e),scale:"s",slot:"actions-end",text:i,title:i})}(e.data,l,d.zoomTo)})))}function x(e){const t=e.layer;if(!t)return null;const i=t.fieldsIndex.get(t.objectIdField),o=i.alias||i.name,{attributes:s}=e,n=(0,O.getDisplayFieldName)(t);return n&&s[n]&&`${s[n]}`||`${o}: ${s[i.name]}`}const W="esri-editor__actions",D=()=>(0,k.W)({button:()=>Promise.resolve().then(i.bind(i,20423)),"split-button":()=>i.e(82661).then(i.bind(i,82661)),"dropdown-group":()=>i.e(90553).then(i.bind(i,90553)),"dropdown-item":()=>i.e(54055).then(i.bind(i,54055))});function B(e){let{buttons:t,key:i}=e;return(0,C.K)("div",{class:W,key:i??"footer-actions",slot:"footer"},t.filter(N.Ru).map(((e,t)=>"split-button"===e.type?U(e,t):V(e,t))))}const V=(e,t)=>{let{disabled:i,onClick:o,label:s,key:n,...r}=e;return(0,C.K)("calcite-button",{disabled:i??!1,key:n??`action-${t}`,onclick:o,width:"full",...r},s)},U=(e,t)=>{let{disabled:i,onClick:o,key:s,dropdownItems:n,...r}=e;return(0,C.K)("calcite-split-button",{disabled:i??!1,key:s??`split-action-${t}`,width:"full",onCalciteSplitButtonPrimaryClick:o,...r},(0,C.K)("calcite-dropdown-group",{selectionMode:"none"},n.filter(N.Ru).map(z)))},z=(e,t)=>{let{disabled:i,onClick:o,label:s,key:n,...r}=e;return(0,C.K)("calcite-dropdown-item",{disabled:i??!1,key:n??`dropdown-item-${t}`,onCalciteDropdownItemSelect:o,...r},s)};var G=i(62541);const j="esri-editor__notice",R=()=>(0,k.W)({notice:()=>i.e(51132).then(i.bind(i,51132))});function H(e){let{workflow:t,messages:i}=e;const o=[],s="content-start";if(t?.reliesOnOwnerAdminPrivileges){const e=i.ownerAdminNotice;o.push((0,C.K)(q,{key:"owner-admin-notice",message:e,slot:s}))}if(t?.hasInvalidFormTemplate){const e=i.formFieldUpdateError;o.push((0,C.K)(q,{key:"form-field-error",kind:"warning",message:e,slot:s}))}if("create-features"===t?.type&&"georeferenced-reprojected"===t.data.upload?.result?.type){const e=i.helpMessages3d.meshReprojected;o.push((0,C.K)(q,{key:"mesh-reprojected",kind:"warning",message:e,slot:s}))}return(0,C.K)(C.w,null,o)}function q(e){const t=e.kind??"brand";return(0,C.K)("calcite-notice",{class:j,icon:G.d[t],key:e.key,kind:t,open:!0,scale:"s"},e.title?(0,C.K)("div",{slot:"title"},e.title):null,(0,C.K)("div",{slot:"message"},e.message))}var X=i(7010),Q=i(79889),Y=i(56390);const J="esri-editor__settings";function ee(e){let{editorViewModel:t,messagesCommon:i,visibleElements:o}=e;const{snappingOptions:s,sketchOptions:n,view:r,snappingManager:l}=t,a=[],d={directionModePicker:o.directionModePicker,labelsToggle:o.labelsToggle,tooltipsToggle:o.tooltipsToggle};return Object.values(d).includes(!0)&&a.push((0,C.K)(X.A,{sketchOptions:n,viewType:r?.type,visibleElements:new Y.A(d)})),o.snappingControls&&a.push((0,C.K)(Q.default,{afterCreate:e=>e.layerListOpen=!1,snappingManager:l,snappingOptions:s,view:r,visibleElements:o.snappingControlsElements??new f.A})),0===a.length?null:(0,C.K)("calcite-accordion",{appearance:"transparent",class:J,key:"settings"},(0,C.K)("calcite-accordion-item",{"data-testid":"settings",heading:i.settings,iconStart:"gear"},a))}const te="esri-editor__panel-toolbar",ie=()=>(0,k.W)({accordion:()=>i.e(80012).then(i.bind(i,80012)),"accordion-item":()=>i.e(54530).then(i.bind(i,54530))});function oe(e){let{editorViewModel:t,messagesCommon:i,visibleElements:o}=e;return(0,C.K)("div",{class:te,key:"panel-toolbar"},(0,C.K)(ee,{editorViewModel:t,messagesCommon:i,visibleElements:o}))}var se=i(65946),ne=i(99961),re=i(9137),le=i(34462),ae=i(76697);let de=class extends m.default{constructor(){super(...arguments),this.workflow=null,this.headingLevel=4,this._iconIntersectionObserver=new IntersectionObserver(((e,t)=>{e.forEach((async e=>{if(e.isIntersecting){const i=e.target;if(function(e){return!!e?.["data-has-icon"]}(i))return void t.unobserve(i);const o=function(e){return e?.["data-item"]}(i),{graphic:s}=o,n=s.sourceLayer??this.workflow?.data.creationInfo?.layer;if(!n||!s)return;ce(i,!0);const r=await(0,le.z)(s,n).catch((()=>(ce(i,!1),null)));if(null==r)return;i.appendChild(r)}}))})),this.messages=null,this._renderActionEnd=e=>{let{graphic:t}=e;const{workflow:i,messages:o}=this;if(!i)return;const s=t.geometry?(0,C.K)("calcite-action",{appearance:"transparent",icon:"zoom-to-object",onblur:()=>{i.data.temporaryHighlightFeature=null},onclick:()=>i.data.viewModel.zoomTo(t),onfocus:()=>{i.data.temporaryHighlightFeature=t},scale:"s",slot:"actions-end",text:this.messages.zoomTo,title:this.messages.zoomTo}):void 0,n=i.data.isSharedTemplateWorkflow?void 0:(0,C.K)("calcite-action",{appearance:"transparent",icon:"trash",onblur:()=>{i.data.temporaryHighlightFeature=null},onclick:()=>i.cancelFeature(t),onfocus:()=>{i.data.temporaryHighlightFeature=t},scale:"s",slot:"actions-end",text:o.createFeaturesSelectionList.discard,title:o.createFeaturesSelectionList.discard});return(0,C.K)(C.w,null,s,n)},this._renderItemContentEnd=e=>{let{graphic:t}=e;const{workflow:i}=this,o=i?.data.isSubmittable(t);return[o?void 0:(0,C.K)("calcite-icon",{class:v.pendingFeatureListIcon,icon:"exclamation-mark-triangle",scale:"s",slot:"content-end"})]},this._renderItemIcon=e=>{if(null!=e?.graphic?.geometry)return(0,C.K)("span",{afterCreate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,afterUpdate:this._afterItemCreateOrUpdate,"data-has-icon":!1,"data-item":e,key:"icon"})},this._afterItemCreateOrUpdate=e=>{this._iconIntersectionObserver?.observe(e)},this._afterItemRemoved=e=>{this._iconIntersectionObserver?.unobserve(e)}}loadDependencies(){return(0,k.W)({action:()=>i.e(88342).then(i.bind(i,88342)),icon:()=>Promise.resolve().then(i.bind(i,92439)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170))})}destroy(){this._iconIntersectionObserver?.disconnect(),this._iconIntersectionObserver=null}render(){const e=this.workflow;if(!e)return(0,C.K)(C.w,null,void 0);const t=this.messages,i=e.pendingFeatures.filter((t=>e.data.isDisplayable(t))).map(((i,o)=>{const s=e.data.isSubmittable(i),n=s?t.createFeaturesSelectionList.featureReadyToSubmit:t.createFeaturesSelectionList.featureNotReadyToSubmit;return{disabled:!1,id:`${e.data.getFeatureTitle(i)??o}`,graphic:i,label:n,submittable:s}})).toArray();return(0,C.K)("div",null,(0,C.K)(re.D,{level:(0,re.S)(this.headingLevel)},t.createFeaturesSelectionList.heading),(0,C.K)("calcite-list",{label:t.createFeaturesSelectionList.heading},(0,P.kk)({enableListScroll:!1,filterEnabled:!1,filterText:"",id:"update-features-pick-list",items:i,messages:{filterPlaceholder:"",noItems:"",noMatches:""},renderIcon:this._renderItemIcon,renderItemTitle:e=>e.label,renderItemLabel:e=>e.id,onItemMouseEnter:t=>e.data.temporaryHighlightFeature=t.graphic,onItemMouseLeave:()=>e.data.temporaryHighlightFeature=null,onItemSelect:t=>e.updatePendingFeature(t.graphic),renderItemContentEnd:this._renderItemContentEnd,renderItemActionEnd:this._renderActionEnd})))}};function ce(e,t){e&&(e["data-has-icon"]=t)}(0,o._)([(0,l.MZ)()],de.prototype,"workflow",void 0),(0,o._)([(0,l.MZ)()],de.prototype,"headingLevel",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/Editor/t9n/Editor")],de.prototype,"messages",void 0),de=(0,o._)([(0,a.$)("esri.widgets.Editor.components.PendingFeatureList")],de);const ue=de;function pe(e){let{editorViewModel:t,headingLevel:i,messages:o,messagesCommon:s,onDelete:n,onDeleteAssociation:r,onSave:l,renderAttachments:a,renderFeatureForm:d,renderSketchToolbar:c}=e;const{activeLeafWorkflow:u,activeWorkflow:p,featureFormViewModel:h,syncing:m}=t;if(!u||!p||!h)return null;const g=u.type.includes("update"),v=g&&!u.hasPendingEdits||m||h.updating,_=g?s.update:s.create,y="create-features"===u?.type?u.numPendingFeaturesExcludingHidden:0,b="create-features"!==u?.type||!!u.data.selectedPendingFeature,f=y>1?(0,ne.V)(o.createFeaturesTemplate,{numFeatures:y}):_,w="shouldShowAttachments"in u&&u.shouldShowAttachments&&!h.activeRelationshipInput,M=h.inputs.every((e=>!e.visible))&&!w,k=M?(0,C.K)(Z,null,"create-features"===u.type?(0,C.K)(ue,{headingLevel:i,key:"pending-feature-list",workflow:u}):void 0):(0,C.K)(Z,{key:"panel-content-section"},(0,C.K)(H,{messages:o,workflow:p}),(0,C.K)(E,null,b||"create-features"!==u.type?d():(0,C.K)(ue,{headingLevel:i,key:"pending-feature-list",workflow:u}),w?(0,C.K)("div",{key:"attachments"},(0,C.K)(re.D,{level:(0,re.S)(i)},o.attachments),a()):null)),F={appearance:"solid",onClick:l,disabled:v,label:f,type:"button"},T={appearance:"outline",onClick:n,disabled:m,kind:"danger",label:s.delete,type:"button"},I={...T,onClick:r,label:o.deleteAssociationTitle,type:"button"},A={...T,primaryLabel:s.delete,primaryText:s.delete,dropdownItems:[{onClick:r,label:o.deleteAssociationTitle}],type:"split-button"},L={appearance:"outline",onClick:()=>{const{featureFormViewModel:e}=t;null!=e?.associationId&&(e.associationId=null)},disabled:m,label:s.cancel,type:"button"},S="viewing-associated-features"===t.page||"viewing-associated-layers"===t.page?[L]:[F,t.shouldShowDeleteButton&&!t.featureFormHasAssociation?T:void 0,t.shouldShowDeleteButton&&t.featureFormHasAssociation?A:void 0,!t.shouldShowDeleteButton&&t.featureFormHasAssociation?I:void 0];return(0,C.K)(C.w,null,M?c():void 0,(0,C.K)(K,{key:"attribute-panel-content"},k),(0,C.K)(B,{buttons:S}))}var he=i(74719),me=i(74217);const ge="esri-editor__upload-details",ve={base:ge,status:`${ge}__status`,titleWrapper:`${ge}__title-wrapper`,title:`${ge}__title`,description:`${ge}__description`,loader:`${ge}__loader`,iconSuccess:`${ge}__icon ${ge}__icon--success`,iconError:`${ge}__icon ${ge}__icon--error`,fileList:`${ge}__file-list`,file:`${ge}__file`,fileIcon:`${ge}__file-icon`,fileName:`${ge}__file-name`};function _e(e){const{messages:t,key:i,upload:o}=e;return(0,C.K)(C.w,null,(0,C.K)(K,{key:i??"upload-details"},(0,C.K)(Z,null,function(e){const t=function(e){let{helpMessage:t,messages:i,upload:o}=e;switch(o.state){case"pending":{const{title:e,description:t}=i.modelUploads.pending;return{title:e,description:t,iconContent:(0,C.K)("calcite-loader",{"aria-hidden":"true",class:ve.loader,label:"",scale:"s",type:"determinate",value:Math.min(Math.round(100*o.progress),1===o.progress?100:99)})}}case"success":{const{title:e}=i.modelUploads.success;return{title:e,description:t||i.helpMessages3d.mesh,iconContent:(0,C.K)("calcite-icon",{class:(0,F.Ly)(ve.iconSuccess),icon:"check",scale:"l"})}}case"error":{const{title:e}=i.modelUploads.error;return{title:e,description:ye(o.error,i),iconContent:(0,C.K)("calcite-icon",{class:(0,F.Ly)(ve.iconError),icon:"exclamation-mark-circle",scale:"l"})}}default:return null}}(e);return t?(0,C.K)("div",{class:ve.base,"data-testid":"upload-details",key:"upload-details-content"},(0,C.K)("div",{class:ve.status,key:"status"},t.iconContent,(0,C.K)("div",{class:ve.titleWrapper,key:"text"},(0,C.K)("div",{class:ve.title,key:"title"},t.title),(0,C.K)("div",{class:ve.description,key:"description"},t.description))),function(e){return(0,C.K)("div",{class:ve.fileList,key:"file-list"},e.files.map((e=>(0,C.K)("div",{class:ve.file,key:`file-${e.name}`},(0,C.K)("calcite-icon",{class:ve.fileIcon,icon:be(e),scale:"s"}),(0,C.K)("span",{class:ve.fileName},function(e){return e.split("/").pop()?.split("\\").pop()??""}(e.name))))))}(e.upload)):null}(e))),"error"===o.state?(0,C.K)(B,{buttons:[{onClick:()=>o.retry(),label:t.modelUploads.error.uploadNew,iconStart:"upload-to",type:"button"}],key:"upload-details-footer-actions"}):null)}function ye(e,t){if(!e)return null;const i=t.modelUploads.error.messages;switch(e.constructor){case me.VP:return i.noModel;case me.XQ:return i.multipleModels;case me.MT:return i.conversionFailed;case he.default:switch(e.name){case"glt-loader-error":case"gltf-loader-invalid-glb":return i.loadFailed;case"gltf-loader-unsupported-feature":return i.unsupportedFeature;case"glt-loader-request-error":return i.resourceRequestFailed;default:return i.default}default:return i.default}}function be(e){const t=e.name.split(".").pop()?.toLowerCase();return(t?ke[t]:null)??fe}const fe="file",we="file-shape",Me="file-image",ke={glb:we,gltf:we,jpeg:Me,jpg:Me,png:Me,svg:Me,zip:"file-zip"};var Fe=i(56612),Ce=i(9093),Te=i(32980),Ie=i(89129);const Ae={date:[],dateOnly:[],id:["is","isNot","startsWith","endsWith","contains","doesNotContain"],number:["is","isNot","startsWith","endsWith","contains","doesNotContain","isBlank","isNotBlank"],timeOnly:[],timestampOffset:[],string:["is","isNot","startsWith","endsWith","contains","doesNotContain","isBlank","isNotBlank","isEmpty","isNotEmpty"]};let Ke=class extends b.default{constructor(e){super(e),this.fieldName=null,this.layer=null,this.operator="is",this.operators=Ae,this.value=null}initialize(){this.addHandles((0,r.watch)((()=>this.layer),(async e=>{e&&!e.loaded&&await e.load()}),r.initial))}get domain(){const{fieldName:e,layer:t}=this;if(e&&t)return t.getFieldDomain(e)}get field(){const{fieldName:e,layer:t}=this;if(e&&t)return t.fieldsIndex.get(e)}get fields(){return(this.layer?.fields??[]).filter((e=>!!((0,O.isStringField)(e)||(0,O.isNumericField)(e)||(0,O.isObjectIDField)(e)||(0,O.isGlobalIDField)(e))))}get fieldLabel(){const{field:e}=this;return e&&(e.alias||e.name)||""}get isObjectIDField(){const{field:e}=this;return!!e&&(0,O.isObjectIDField)(e)}get isGlobalIDField(){const{field:e}=this;return!!e&&(0,O.isGlobalIDField)(e)}get isIntegerField(){return(0,O.isIntegerField)(this.field)}get isNumericField(){return(0,O.isNumericField)(this.field)}get isStringField(){return(0,O.isStringField)(this.field)}get isTimeOnlyField(){return(0,O.isTimeOnlyField)(this.field)}get normalizedFieldName(){return(0,O.normalizeFieldName)(this.field?.name)}get state(){const{layer:e}=this;return e?e.loaded?"ready":"loading":"disabled"}get valueAsString(){const{value:e}=this;return null==e||""===e?"":`${e}`}get normalizedValue(){const{value:e,isNumericField:t,isObjectIDField:i}=this;return null==e||""===e?"":t||i?`${e}`:`'${e}'`}get whereClause(){const{normalizedFieldName:e,operator:t,normalizedValue:i}=this;return e&&t?"isBlank"===t?`${e} IS NULL`:"isNotBlank"===t?`${e} IS NOT NULL`:"isEmpty"===t?`${e} = ''`:"isNotEmpty"===t?`${e} <> ''`:""===i?null:"is"===t?`${e} = ${i}`:"isNot"===t?`${e} <> ${i}`:"startsWith"===t?`${e} LIKE ${i}%`:"endsWith"===t?`${e} LIKE %${i}`:"contains"===t?`${e} LIKE %${i}%`:"doesNotContain"===t?`${e} NOT LIKE %${i}%`:null:null}};(0,o._)([(0,l.MZ)()],Ke.prototype,"domain",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"field",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"fields",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"fieldLabel",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"fieldName",void 0),(0,o._)([(0,l.MZ)()],Ke.prototype,"isObjectIDField",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"isIntegerField",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"isNumericField",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"isStringField",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"isTimeOnlyField",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"layer",void 0),(0,o._)([(0,l.MZ)()],Ke.prototype,"normalizedFieldName",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"operator",void 0),(0,o._)([(0,l.MZ)()],Ke.prototype,"operators",void 0),(0,o._)([(0,l.MZ)()],Ke.prototype,"state",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"value",void 0),(0,o._)([(0,l.MZ)()],Ke.prototype,"valueAsString",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"normalizedValue",null),(0,o._)([(0,l.MZ)()],Ke.prototype,"whereClause",null),Ke=(0,o._)([(0,a.$)("esri.widgets.support.FilterCondition.FilterConditionViewModel")],Ke);const Le=Ke,Ze={},Ee="esri-filter-condition",Se={base:Ee,container:`${Ee}__container`,valueInputContainer:`${Ee}__value-input-container`};let Ne=class extends m.default{constructor(e,t){super(e,t),this.messages=null,this.messagesCommon=null,this.viewModel=new Le,this.visibleElements={...Ze}}loadDependencies(){return(0,k.W)({input:()=>i.e(46138).then(i.bind(i,46138)),option:()=>i.e(99163).then(i.bind(i,99163)),select:()=>i.e(34280).then(i.bind(i,34280))})}get _defaultFieldName(){const{fields:e,fieldName:t}=this;return t||(e?.length?e[0].name:void 0)}get _valueInputType(){const{viewModel:e}=this;return e.isNumericField||e.isObjectIDField?"number":"text"}get _visibleOperators(){const{field:e,operators:t,viewModel:i}=this;return e?i.isStringField||i.isGlobalIDField?t.string:i.isNumericField?t.number:i.isObjectIDField?t.id:[]:[]}get _isValueInputHidden(){const{operator:e}=this;return!!e&&["isBlank","isNotBlank","isEmpty","isNotEmpty"].includes(e)}get domain(){return this.viewModel.domain}get field(){return this.viewModel.field}get fields(){return this.viewModel.fields}get fieldLabel(){return this.viewModel.fieldLabel}get fieldName(){return this.viewModel.fieldName}set fieldName(e){this.viewModel.fieldName=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get normalizedFieldName(){return this.viewModel.normalizedFieldName}get operator(){return this.viewModel.operator}set operator(e){this.viewModel.operator=e}get operators(){return this.viewModel.operators}set operators(e){this.viewModel.operators=e}get state(){return this.viewModel.state}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}get valueAsString(){return this.viewModel.valueAsString}castVisibleElements(e){return{...Ze,...e}}get whereClause(){return this.viewModel.whereClause}render(){return(0,C.K)("div",{class:Se.base},this._renderFieldSelection(),this._renderOperatorSelection(),this._renderValueInput())}_renderFieldSelection(){const e=this.normalizedFieldName;return(0,C.K)("div",null,(0,C.K)("calcite-select",{afterCreate:()=>{this.fieldName||(this.fieldName=this._defaultFieldName)},bind:this,label:this.messages.chooseField,width:"full",onCalciteSelectChange:e=>{let{currentTarget:t}=e;this.value=null,this.fieldName=t.value}},this.fields.map((t=>this._renderOption(t.name,t.alias,e)))))}_renderOperatorSelection(){const{_visibleOperators:e,messages:t,operator:i}=this;if(e.length)return(0,C.K)("div",null,(0,C.K)("calcite-select",{afterUpdate:e=>{const t=e.value;this._visibleOperators.includes(t)||(this.operator=this._visibleOperators[0])},bind:this,label:t.operator,required:!0,width:"full",onCalciteSelectChange:e=>{this.operator=e.currentTarget.value}},e.map((e=>this._renderOption(e,t.operators[e],i)))))}_renderOption(e,t,i){return(0,C.K)("calcite-option",{key:e,label:t??e,selected:e===i,value:e})}_renderValueInput(){const{valueAsString:e,domain:t,messages:i,operator:o}=this;if(!this._isValueInputHidden){if("coded-value"===t?.type&&t.codedValues.length&&("is"===o||"isNot"===o)){const o=t.codedValues[0].code;return(0,C.K)("div",{key:"value-select"},(0,C.K)("calcite-select",{afterCreate:()=>this._afterSelectCreateOrUpdate(o),afterUpdate:()=>this._afterSelectCreateOrUpdate(o),bind:this,label:i.value,required:!0,width:"full",onCalciteSelectChange:e=>{let{currentTarget:t}=e;this._onValueChange(t.value)}},t.codedValues.map((t=>{let{code:i,name:o}=t;return this._renderOption(`${i}`,o,e)}))))}return(0,C.K)("div",{class:Se.valueInputContainer,key:"value-input"},(0,C.K)("calcite-input",{label:i.value,type:this._valueInputType,value:e,onCalciteInputInput:e=>{let{currentTarget:t}=e;this._onValueChange(t.value)}}))}}_afterSelectCreateOrUpdate(e){null==this.value&&(this.value=e)}_onValueChange(e){const{viewModel:t}=this;e&&""!==e?t.isStringField||t.isGlobalIDField?this.value=e.toString():(t.isNumericField||t.isObjectIDField)&&(this.value=parseFloat(e)):this.value=null}};(0,o._)([(0,l.MZ)()],Ne.prototype,"_defaultFieldName",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"_valueInputType",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"_visibleOperators",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"_isValueInputHidden",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"domain",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"field",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"fields",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"fieldLabel",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"fieldName",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"layer",null),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/support/FilterCondition/t9n/FilterCondition")],Ne.prototype,"messages",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/t9n/common")],Ne.prototype,"messagesCommon",void 0),(0,o._)([(0,l.MZ)()],Ne.prototype,"normalizedFieldName",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"operator",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"operators",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"state",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"value",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"valueAsString",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"viewModel",void 0),(0,o._)([(0,l.MZ)()],Ne.prototype,"visibleElements",void 0),(0,o._)([(0,Te.w)("visibleElements")],Ne.prototype,"castVisibleElements",null),(0,o._)([(0,l.MZ)()],Ne.prototype,"whereClause",null),Ne=(0,o._)([(0,a.$)("esri.widgets.support.FilterCondition")],Ne);const Oe=Ne;let Pe=class extends b.default{constructor(e){super(e),this.conditionOperator="AND",this.conditionWidgets=new Ie.default,this.layer=null,this.operators=Ae}initialize(){this.addHandles([(0,r.watch)((()=>this.layer),(async e=>{e&&!e.loaded&&await e.load()}),r.initial)])}get count(){return this.conditionWidgets.length}get state(){const{layer:e}=this;return e?e.loaded?"ready":"loading":"disabled"}get whereClause(){const{conditionOperator:e,whereClauses:t}=this;let i="";return t.forEach(((t,o)=>{i+=o>0?` ${e} (${t})`:`(${t})`})),i}get whereClauses(){return this.conditionWidgets.toArray().map((e=>e.whereClause)).filter(N.Ru)}addCondition(e,t){const{layer:i,operators:o}=this;i&&this.conditionWidgets.add(new Oe({...e,layer:i,operators:o}),t)}duplicateCondition(e){const t=this.conditionWidgets.at(e);if(!t)return;const{fieldName:i,operator:o,value:s}=t;this.addCondition({fieldName:i,operator:o,value:s})}reset(){this.conditionWidgets.removeAll()}removeCondition(e){null==e?this.conditionWidgets.pop():this.conditionWidgets.splice(e,1)}};(0,o._)([(0,l.MZ)()],Pe.prototype,"conditionOperator",void 0),(0,o._)([(0,l.MZ)()],Pe.prototype,"conditionWidgets",void 0),(0,o._)([(0,l.MZ)()],Pe.prototype,"count",null),(0,o._)([(0,l.MZ)()],Pe.prototype,"layer",void 0),(0,o._)([(0,l.MZ)()],Pe.prototype,"operators",void 0),(0,o._)([(0,l.MZ)()],Pe.prototype,"state",null),(0,o._)([(0,l.MZ)()],Pe.prototype,"whereClause",null),(0,o._)([(0,l.MZ)()],Pe.prototype,"whereClauses",null),Pe=(0,o._)([(0,a.$)("esri.widgets.support.FilterBuilder.FilterBuilderViewModel")],Pe);const $e=Pe,xe={fab:!0,menu:!0},We="esri-filter-builder",De={base:We,container:`${We}__container`,conditionContainer:`${We}__condition-container`,operatorSelect:`${We}__operator-select`};let Be=class extends m.default{constructor(e,t){super(e,t),this.messages=null,this.messagesCommon=null,this.viewModel=new $e,this.visibleElements={...xe}}loadDependencies(){return(0,k.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-menu":()=>Promise.all([i.e(86290),i.e(74597),i.e(71564)]).then(i.bind(i,71564)),block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),fab:()=>i.e(25905).then(i.bind(i,25905)),option:()=>i.e(99163).then(i.bind(i,99163)),select:()=>i.e(34280).then(i.bind(i,34280))})}get conditionOperator(){return this.viewModel.conditionOperator}set conditionOperator(e){this.viewModel.conditionOperator=e}get count(){return this.viewModel.count}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get operators(){return this.viewModel.operators}set operators(e){this.viewModel.operators=e}get state(){return this.viewModel.state}castVisibleElements(e){return{...xe,...e}}get whereClause(){return this.viewModel.whereClause}get whereClauses(){return this.viewModel.whereClauses}render(){return(0,C.K)("div",{class:De.base},this._renderOperatorSelect(),this._renderConditions(),this._renderFAB())}reset(){this.viewModel.reset()}_renderOperatorSelect(){if(this.count<2)return;const{conditionOperator:e,messages:t}=this,i="AND"===e;return(0,C.K)("div",{class:De.operatorSelect},(0,C.K)("calcite-select",{label:t.condition,width:"full",onCalciteSelectChange:e=>{let{currentTarget:t}=e;this.conditionOperator=t.value}},(0,C.K)("calcite-option",{label:t.allAreTrue,selected:i,value:"AND"}),(0,C.K)("calcite-option",{label:t.anyAreTrue,selected:!i,value:"OR"})))}_renderConditions(){return this.viewModel.conditionWidgets.toArray().map(((e,t)=>this._renderConditionContainer(e,t)))}_renderConditionContainer(e,t){return(0,C.K)("calcite-block",{class:De.conditionContainer,heading:this.messages.condition,open:!0},e.render(),this._renderConditionrMenu(t))}_renderFAB(){if(!this.visibleElements.fab)return;const e="loading"===this.state;return(0,C.K)("calcite-fab",{appearance:"outline-fill",disabled:e,icon:"plus",kind:"neutral",loading:e,onclick:()=>this.viewModel.addCondition(),text:this.messages.addNew,textEnabled:!0})}_renderConditionrMenu(e){if(!this.visibleElements.menu)return;const{messages:t}=this;return(0,C.K)("calcite-action-menu",{label:t.moreOptions,overlayPositioning:"fixed",placement:"bottom-end",slot:"control"},(0,C.K)("calcite-action",{onclick:()=>this.viewModel.removeCondition(e),text:t.delete,textEnabled:!0}),(0,C.K)("calcite-action",{onclick:()=>this.viewModel.duplicateCondition(e),text:t.duplicate,textEnabled:!0}))}};(0,o._)([(0,l.MZ)()],Be.prototype,"conditionOperator",null),(0,o._)([(0,l.MZ)()],Be.prototype,"count",null),(0,o._)([(0,l.MZ)()],Be.prototype,"layer",null),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/support/FilterBuilder/t9n/FilterBuilder")],Be.prototype,"messages",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/t9n/common")],Be.prototype,"messagesCommon",void 0),(0,o._)([(0,l.MZ)()],Be.prototype,"operators",null),(0,o._)([(0,l.MZ)()],Be.prototype,"state",null),(0,o._)([(0,l.MZ)()],Be.prototype,"viewModel",void 0),(0,o._)([(0,l.MZ)()],Be.prototype,"visibleElements",void 0),(0,o._)([(0,Te.w)("visibleElements")],Be.prototype,"castVisibleElements",null),(0,o._)([(0,l.MZ)()],Be.prototype,"whereClause",null),(0,o._)([(0,l.MZ)()],Be.prototype,"whereClauses",null),Be=(0,o._)([(0,a.$)("esri.widgets.support.FilterBuilder")],Be);const Ve=Be;var Ue=i(50821);const ze="esri-feature-form-utility-network-association-layers",Ge={base:ze,header:`${ze}__header`,headingContent:`${ze}__heading-content`,featureObserver:`${ze}__feature-observer`,filterContainer:`${ze}__filter-container`,filterOptionsContainer:`${ze}__filter-options-container`,filterOptionsHeader:`${ze}__filter-options-header`,listContainer:`${ze}__list-container`,stickySpinnerContainer:`${ze}__sticky-loading-container`,loadingContainer:`${ze}__loading-container`};let je=class extends m.default{constructor(e,t){super(e,t),this.headingLevel=5,this.messagesCommon=null,this.messagesFeature=null,this.messagesFeatureForm=null,this.messagesFilterBuilder=null,this.viewModel=new Ce.A,this._filterBuilder=new Ve,this._featureFilterText="",this._layerFilterText="",this._observer=new IntersectionObserver((e=>{let[t]=e;t?.isIntersecting&&this._increaseFeaturePage()}),{root:window.document}),this._observerNode=null}initialize(){this.addHandles([(0,r.watch)((()=>this.viewModel),(()=>this.reset())),(0,r.watch)((()=>[this.viewModel.state,this._observerNode]),(()=>this._onObserverChange())),(0,r.watch)((()=>this.selectedLayer),(e=>{this._filterBuilder.layer=e,e||(this.filterOptionsVisible=!1,this._featureFilterText="")}))])}loadDependencies(){return(0,k.W)({action:()=>i.e(88342).then(i.bind(i,88342)),button:()=>Promise.resolve().then(i.bind(i,20423)),icon:()=>Promise.resolve().then(i.bind(i,92439)),input:()=>i.e(46138).then(i.bind(i,46138)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),loader:()=>Promise.resolve().then(i.bind(i,23173))})}get filterOptionsVisible(){return this.viewModel.filterOptionsVisible}set filterOptionsVisible(e){this.viewModel.filterOptionsVisible=e}get selectedLayer(){return this.viewModel.selectedLayer}set selectedLayer(e){this.viewModel.selectedLayer=e}get selectedFeature(){return this.viewModel.selectedFeature}set selectedFeature(e){this.viewModel.selectedFeature=e}get filterWhereClause(){return this.viewModel.filterWhereClause}set filterWhereClause(e){this.viewModel.filterWhereClause=e,e||this._filterBuilder.reset()}get _filteredFeatureItems(){const{_featureFilterText:e}=this;return this.viewModel.featureItems.map((e=>({label:e.label,graphic:e.feature,layer:e.feature.sourceLayer}))).filter((t=>t.label?.toLowerCase().includes(e)??!1))}render(){const{state:e,filterOptionsVisible:t}=this.viewModel;return(0,C.K)("div",{class:this.classes(Ge.base,Ue.D.widget)},"loading"===e?this._renderLoading():t?this._renderFilterOptions():this.selectedLayer?this._renderFeatures():this._renderLayers())}applyFilterOptions(){const{selectedLayer:e}=this;this.filterOptionsVisible=!1,e&&(this.filterWhereClause=this._filterBuilder.whereClause)}reset(){this.filterWhereClause=null,this._featureFilterText="",this._layerFilterText="",this.filterOptionsVisible=!1,this._filterBuilder.reset()}async _onObserverChange(){this._observerNode&&this._observer.unobserve(this._observerNode);const{state:e}=this.viewModel;this._observerNode&&"ready"===e&&this._observer.observe(this._observerNode)}_increaseFeaturePage(){const{featureCount:e,featurePage:t,state:i}=this.viewModel;e||1===t?"ready"===i&&this.viewModel.featurePage++:this.viewModel.featurePage=1}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,C.K)("div",{class:Ge.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoading(){return(0,C.K)("div",{class:Ge.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderLoadingIcon(){return(0,C.K)("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderFilterOptions(){return(0,C.K)("div",{class:Ge.filterOptionsContainer},(0,C.K)("div",{class:Ge.filterOptionsHeader},(0,C.K)("span",null,this.messagesFilterBuilder.widgetLabel),(0,C.K)("calcite-button",{appearance:"transparent",onclick:()=>this._filterBuilder.reset()},this.messagesCommon.clear)),this._filterBuilder.render())}_renderLayers(){const e=this.messagesFeatureForm.associations,t=e.availableLayers,i=e.filterLayers;return(0,C.K)("div",null,this._renderHeader({heading:t,placeholder:i,renderFilterOptions:!1,renderTotal:!1}),(0,C.K)("div",{class:Ge.listContainer},(0,C.K)("calcite-list",{label:e.associatedFeatures},this._renderLayerItems(),this._renderStickyLoading())))}_renderLayerItems(){const{_layerFilterText:e,viewModel:t,messagesCommon:i}=this,{layerItems:o}=t;return o.map((e=>({label:e.title??i.untitled,layer:e}))).filter((t=>t.label?.toLowerCase().includes(e)??!1)).toArray().map((e=>this._renderLayerItem(e)))}_renderLayerItem(e){const{label:t,layer:i}=e;return(0,C.K)("calcite-list-item",{key:`layer-item-${i.id}`,label:(0,Fe._e)(t),onCalciteListItemSelect:()=>{this.selectedLayer=i,this._filterBuilder.reset()}},(0,C.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderFeatures(){const{selectedLayer:e}=this;if(!e)return;const t=this.messagesFeatureForm.associations,i=e.title??this.messagesCommon.untitled,o=t.filterFeatures;return(0,C.K)("div",null,this._renderHeader({heading:i,placeholder:o,renderFilterOptions:!0,renderTotal:!0}),(0,C.K)("div",{class:Ge.listContainer},(0,C.K)("calcite-list",{label:t.associatedFeatures},this._renderFeatureItems(),this._renderStickyLoading(),this._renderFeatureObserver())))}_renderFeatureItems(){return this._filteredFeatureItems.toArray().map((e=>this._renderFeatureItem(e)))}_renderFeatureItem(e){const{label:t,graphic:i}=e;return(0,C.K)("calcite-list-item",{key:`feature-item-${i.uid}`,label:(0,Fe._e)(t),onCalciteListItemSelect:()=>{this.selectedFeature={feature:i,label:t}}},(0,C.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_onObserverCreate(e){this._observerNode=e}_renderFeatureObserver(){return(0,C.K)("div",{afterCreate:this._onObserverCreate,bind:this,class:Ge.featureObserver,key:"feature-observer"})}_renderHeader(e){return(0,C.K)("div",{class:Ge.header,key:"filter"},this._renderHeading(e.heading),this._renderFilter(e.placeholder,e.renderFilterOptions),e.renderTotal?this._renderTotal():null)}_renderHeading(e){return e?(0,C.K)(re.D,{key:"title",level:this.headingLevel},(0,C.K)("div",{class:Ge.headingContent},(0,C.K)("calcite-icon",{icon:"layer"}),e)):null}_renderFilter(e,t){const i=!this.selectedLayer,o=i?this._layerFilterText:this._featureFilterText;return(0,C.K)("div",{class:Ge.filterContainer,key:"filter"},(0,C.K)("calcite-input",{icon:"search",placeholder:e,type:"search",value:o,onCalciteInputInput:e=>{i?this._layerFilterText=e.currentTarget.value.trim().toLowerCase():this._featureFilterText=e.currentTarget.value.trim().toLowerCase()}},t?this._renderFilterOptionsAction():null))}_renderFilterOptionsAction(){const e=this.messagesFeatureForm.associations.filterOptions;return(0,C.K)("calcite-action",{appearance:"transparent",icon:"sliders",indicator:!!this._filterBuilder.whereClause,onclick:()=>{this.viewModel.filterOptionsVisible=!this.viewModel.filterOptionsVisible},scale:"s",slot:"action",text:e,title:e})}_renderTotal(){const{messagesFeature:e,viewModel:t}=this,i=(0,ne.V)(e.numberRecords,{number:t.featureCount});return(0,C.K)("div",{key:"total"},i)}};(0,o._)([(0,l.MZ)()],je.prototype,"filterOptionsVisible",null),(0,o._)([(0,l.MZ)()],je.prototype,"headingLevel",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/t9n/common")],je.prototype,"messagesCommon",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/Feature/t9n/Feature")],je.prototype,"messagesFeature",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/FeatureForm/t9n/FeatureForm")],je.prototype,"messagesFeatureForm",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/support/FilterBuilder/t9n/FilterBuilder")],je.prototype,"messagesFilterBuilder",void 0),(0,o._)([(0,l.MZ)()],je.prototype,"selectedLayer",null),(0,o._)([(0,l.MZ)({type:Ce.A})],je.prototype,"viewModel",void 0),(0,o._)([(0,l.MZ)()],je.prototype,"selectedFeature",null),(0,o._)([(0,l.MZ)()],je.prototype,"filterWhereClause",null),(0,o._)([(0,l.MZ)()],je.prototype,"_filterBuilder",void 0),(0,o._)([(0,l.MZ)()],je.prototype,"_featureFilterText",void 0),(0,o._)([(0,l.MZ)()],je.prototype,"_layerFilterText",void 0),(0,o._)([(0,l.MZ)()],je.prototype,"_observer",void 0),(0,o._)([(0,l.MZ)()],je.prototype,"_filteredFeatureItems",null),(0,o._)([(0,l.MZ)()],je.prototype,"_observerNode",void 0),je=(0,o._)([(0,a.$)("esri.widgets.FeatureForm.FeatureFormUtilityNetworkAssociations.UtilityNetworkAssociationItemList")],je);const Re=je;var He=i(72735);function qe(e,t){return!!(e.layer&&"globalIdField"in e.layer&&e.layer.globalIdField&&t.fromNetworkElement)&&e.attributes[e.layer.globalIdField]===t.fromNetworkElement.globalId}const Xe="esri-feature-form-utility-network-association-settings",Qe={base:Xe,infoContainer:`${Xe}__info-container`};let Ye=class extends m.default{constructor(e,t){super(e,t),this.percentAlong=50,this.headingLevel=5,this.messagesFeature=null,this.messagesCommon=null,this.messagesFeatureForm=null,this.readOnly=!1,this.sourceFeature=null,this.targetFeature=null,this.utilityNetwork=null}loadDependencies(){return(0,k.W)({block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),combobox:()=>Promise.all([i.e(60382),i.e(89939),i.e(90609)]).then(i.bind(i,90609)),"combobox-item":()=>i.e(32045).then(i.bind(i,32045)),"input-number":()=>Promise.all([i.e(9982),i.e(86634)]).then(i.bind(i,9982)),label:()=>i.e(60216).then(i.bind(i,60216)),switch:()=>i.e(92812).then(i.bind(i,92812))})}get association(){return this._get("association")}set association(e){this.percentAlong=e.percentAlong?100*e.percentAlong:50,this._set("association",e)}get associationType(){return this.association.associationType}set associationType(e){this.association.associationType=e,"junction-edge-to-connectivity"!==e&&"junction-edge-from-connectivity"!==e||(this.association.percentAlong=void 0)}render(){return(0,C.K)("div",{class:this.classes(Qe.base,Ue.D.widget)},this._renderFromAssociationEndpoint(),this._renderToAssociationEndpoint(),this._renderAdditionalContent())}_renderFromAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:i,targetFeature:o,messagesFeatureForm:s}=this,n=qe(i.feature,t)?i:o,r=n.label,l=(0,He.o)(t,"from",s.associations);switch(e){case"connectivity":case"junction-junction-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-from-connectivity":case"junction-edge-to-connectivity":return this._renderAssociationEndpoint(r,l,this._renderConnectivityContent(n.feature,t.fromNetworkElement))}return this._renderAssociationEndpoint(r,l)}_renderToAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:i,targetFeature:o,messagesFeatureForm:s}=this,n=qe(i.feature,t)?o:i,r=n.label,l=(0,He.o)(t,"to",s.associations);switch(e){case"connectivity":case"junction-junction-connectivity":return this._renderAssociationEndpoint(r,l,this._renderConnectivityContent(n.feature,t.toNetworkElement));case"containment":return this._renderAssociationEndpoint(r,l,this._renderContainmentContent())}return this._renderAssociationEndpoint(r,l)}_renderAssociationEndpoint(e,t,i){return(0,C.K)("calcite-block",{description:t,heading:e,open:!0},i)}_renderContainmentContent(){const{messagesFeatureForm:e,association:t}=this,i=t.isContentVisible??!1;return(0,C.K)("calcite-label",{layout:"inline"},e.associations.visible,(0,C.K)("calcite-switch",{checked:i,onCalciteSwitchChange:e=>{let{currentTarget:i}=e;t.isContentVisible=i.checked}}))}_renderConnectivityContent(e,t){const{messagesFeatureForm:i,utilityNetwork:o}=this,s=o.getTerminalConfiguration(e),n=s?.terminals.map((e=>this._renderComboboxListItemNumber(e.id,t.terminalId,e.name)))||[];return(0,C.K)("calcite-label",null,i.associations.terminal,(0,C.K)("calcite-combobox",{allowCustomValues:!1,clearDisabled:!0,label:i.associations.terminalComboboxLabel,overlayPositioning:"fixed",selectionMode:"single",onCalciteComboboxChange:e=>{let{currentTarget:i}=e;t.terminalId=parseInt(i.value,10)}},...n))}_renderAdditionalContent(){const{associationType:e}=this;switch(e){case"connectivity":case"junction-junction-connectivity":case"attachment":case"containment":return}const t="junction-edge-midspan-connectivity"===e?e:"junction-edge-from-connectivity",{messagesFeatureForm:i}=this,o=[this._renderComboboxListItemString("junction-edge-midspan-connectivity",t,i.associations.midspanEdge),this._renderComboboxListItemString("junction-edge-from-connectivity",t,i.associations.endpointEdge)];return(0,C.K)("div",{class:Qe.infoContainer},(0,C.K)("calcite-label",{key:"additional-content"},i.associations.connectTo,(0,C.K)("calcite-combobox",{allowCustomValues:!1,clearDisabled:!0,label:i.associations.edgeConnectionComboboxLabel,overlayPositioning:"fixed",selectionMode:"single",onCalciteComboboxChange:e=>{let{currentTarget:t}=e;this.associationType=t.value}},...o)),"junction-edge-midspan-connectivity"===t?this._renderMidspanEdgeContent():this._renderEndpointEdgeContent())}_renderMidspanEdgeContent(){const{messagesFeatureForm:e,percentAlong:t,association:i}=this;return i.percentAlong=t/100,(0,C.K)("calcite-label",{key:"midspan-edge"},e.associations.midspanLocation,(0,C.K)("calcite-input-number",{max:100,min:0,numberButtonType:"vertical",suffixText:"%",value:`${t}`,onCalciteInputNumberInput:e=>{let{currentTarget:t}=e;this.percentAlong=parseFloat(t.value)}}))}_renderEndpointEdgeContent(){const{associationType:e,messagesFeatureForm:t}=this,i="junction-edge-to-connectivity"===e;return(0,C.K)("calcite-label",{key:"endpoint-edge"},t.associations.edgeSide,(0,C.K)("calcite-label",{layout:"inline"},t.associations.fromSide,(0,C.K)("calcite-switch",{checked:i,onCalciteSwitchChange:e=>{let{currentTarget:t}=e;const i=t.checked?"junction-edge-to-connectivity":"junction-edge-from-connectivity";this.associationType=i}}),t.associations.toSide))}_renderComboboxListItemNumber(e,t,i){return(0,C.K)("calcite-combobox-item",{heading:i,key:`#${e}`,selected:t===e,value:`${e}`})}_renderComboboxListItemString(e,t,i){return(0,C.K)("calcite-combobox-item",{heading:i,key:`#${e}`,selected:t===e,value:`${e}`})}};(0,o._)([(0,l.MZ)()],Ye.prototype,"association",null),(0,o._)([(0,l.MZ)()],Ye.prototype,"percentAlong",void 0),(0,o._)([(0,l.MZ)()],Ye.prototype,"associationType",null),(0,o._)([(0,l.MZ)()],Ye.prototype,"headingLevel",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/Feature/t9n/Feature")],Ye.prototype,"messagesFeature",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/t9n/common")],Ye.prototype,"messagesCommon",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/FeatureForm/t9n/FeatureForm")],Ye.prototype,"messagesFeatureForm",void 0),(0,o._)([(0,l.MZ)()],Ye.prototype,"readOnly",void 0),(0,o._)([(0,l.MZ)()],Ye.prototype,"sourceFeature",void 0),(0,o._)([(0,l.MZ)()],Ye.prototype,"targetFeature",void 0),(0,o._)([(0,l.MZ)()],Ye.prototype,"utilityNetwork",void 0),Ye=(0,o._)([(0,a.$)("esri.widgets.FeatureForm.FeatureFormUtilityNetworkAssociations.UtilityNetworkAssociationSettings")],Ye);const Je=Ye;var et=i(54611),tt=i(42198);function it(e){let t,i,{getLoading:o,setEffectiveLoading:s}=e;function n(){clearTimeout(i),i=void 0}function l(e){t=e?Date.now():void 0,s(e)}function a(e,t){if(e<=0)return l(t);i=setTimeout((()=>{n(),l(t)}),e)}return l(o()),(0,tt.vE)([(0,r.watch)(o,(e=>{n(),e?a(500,!0):a(null!=t?1e3-(Date.now()-t):0,!1)}),r.sync),(0,tt.hA)(n)])}var ot=i(66201);const st=Symbol("sketch-setup-handles");let nt=class extends m.default{constructor(e,t){var i;super(e,t),i=this,this._featureForm=new u.default,this._sketchToolbar=null,this._attachments=new c.default({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),this._associationItemList=new Re,this._associationSettings=new Je,this._featureTemplates=new p.default({enableListScroll:!1,renderItemContentEnd:e=>e.supportsUpload?(0,C.K)("calcite-icon",{class:v.templateItemContentEnd,icon:"upload-to",key:"upload-icon"}):null,renderItemLabel:e=>e.label,renderCustomGroupContent:e=>this._renderCustomTemplateGroupContent(e)}),this._filterText="",this._prompt=null,this._spinner=new h.A,this._loading=!1,this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.messagesTemplates=null,this.messagesFeature=null,this.supportingWidgetDefaults=null,this.viewModel=new _.default,this.visibleElements=new M,this._renderAttachments=()=>this._attachments.render(),this._renderFeatureForm=()=>this._featureForm.render(),this._renderAssociationItemList=()=>this._associationItemList.render(),this._renderAssociationSettings=()=>this._associationSettings.render(),this._renderFeatureTemplates=()=>this._featureTemplates.render(),this._renderSketch=()=>this._sketchToolbar?(0,C.K)("div",{class:v.sketchContainer,key:"editor-sketch-container"},this._sketchToolbar?.render()):void 0,this._renderSelectIcon=()=>(0,C.K)("calcite-icon",{icon:"cursor",slot:"content-start"}),this.EditorPanel=function(e){let{heading:t,key:o,selected:s}=e;const{visibleElements:n}=i;for(var r=arguments.length,l=new Array(r>1?r-1:0),a=1;a<r;a++)l[a-1]=arguments[a];return(0,C.K)("calcite-flow-item",{closable:!1,heading:t,headingLevel:i.headingLevel,key:o,loading:i._loading,selected:s,onCalciteFlowItemBack:i._onBack},n.zoomToButton&&i.viewModel.canZoomTo?(0,C.K)("calcite-action",{alignment:"center",appearance:"transparent",icon:"zoom-to-object",key:"zoom-to-button",onclick:()=>i.viewModel.zoomTo(),slot:"header-actions-end",text:i.messages.zoomTo,title:i.messages.zoomTo}):null,n.settingsMenu?(0,C.K)(oe,{editorViewModel:i.viewModel,messagesCommon:i.messagesCommon,visibleElements:n}):null,...l)},this._showDiscardEditsPrompt=()=>{const{messages:e,activeWorkflow:t}=this,i={title:e.cancelEditTitle,message:e.cancelEditWarningMessage,yesLabel:e.discardEdits,noLabel:e.continueEditing};return"create-features"===t?.type&&(0,y.v)(t.data.creationInfo)?this._showPromptAndWait("success"===t.data.upload?.state?e.modelUploads.cancelPlacementPrompt:e.modelUploads.cancelUploadPrompt):"update"===t?.type&&t.activeFeatureFormViewModel?.activeAssociation?this._showPromptAndWait({...i,message:e.cancelAssociationEditWarning}):this._showPromptAndWait(i)},this._showGenericCancelPrompt=()=>{const{messages:e,messagesCommon:t}=this;return this._showPromptAndWait({title:e.cancelRequestTitle,message:e.cancelRequestWarningMessage,yesLabel:t.form.yes,noLabel:t.form.no})},this._showPrompt=e=>{this._prompt?.cancel?.(),this._prompt=e},this._clearPrompt=()=>{this._prompt=null},this._onSave=()=>{this.viewModel.saveWorkflow()},this._onDelete=()=>{const{messages:e,messagesCommon:t}=this;this._showPrompt({title:e.deleteWarningTitle,message:e.deleteWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:()=>{this.deleteFeatureFromWorkflow(),this._clearPrompt()}},secondary:{label:e.keepFeature,action:this._clearPrompt}}})},this._onDeleteAssociation=()=>{const{messages:e,messagesCommon:t}=this;this._showPrompt({title:e.deleteAssociationTitle,message:e.deleteAssociationMessage,context:"danger",actions:{primary:{label:t.delete,action:()=>{this.deleteAssociationFromWorkflow(),this._clearPrompt()}},secondary:{label:e.keepAssociation,action:this._clearPrompt}}})},this._onToggleUpdateWorkflow=()=>this.viewModel.toggleUpdateWorkflow(),this._onBack=e=>(e?.stopPropagation(),this.viewModel.back()),this._onAttachmentAdd=()=>{const{activeWorkflow:e}=this.viewModel;e&&("create-features"===e.type||"update"===e.type&&"create-features"===e.activeWorkflow?.type?(this._attachments.addFile(),e.back()):this._attachments.addAttachment().then((()=>e.back())))},this._onAttachmentUpdate=()=>{const{activeWorkflow:e}=this.viewModel;e&&("create-features"===e.type?(this._attachments.updateFile(),e.back()):this._attachments.updateAttachment().then((()=>e.back())))},this._onAttachmentDelete=()=>{const{messages:e,messagesCommon:t}=this;this._showPrompt({title:e.deleteAttachmentWarningTitle,message:e.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:this._onAttachmentDeleteConfirm},secondary:{label:e.keepAttachment,action:this._clearPrompt}}})},this._onAttachmentDeleteConfirm=async()=>{const e=this._attachments,{activeWorkflow:t}=this.viewModel;t&&("create-features"===t.type?e.deleteFile():(await e.deleteAttachment(e.viewModel.activeAttachmentInfo),this._clearPrompt()),await t.back(),this._clearPrompt())},this._onAttachmentsError=e=>{this._showPrompt({title:this.messages.errorWarningTitle,message:e.message,context:"warning",actions:{primary:{label:this.messagesCommon.form.ok,action:this._clearPrompt}}})}}initialize(){this._featureForm.showPrompt=this._showPrompt,this._featureForm.clearPrompt=this._clearPrompt,this.addHandles([(0,r.watch)((()=>(0,re.S)(this.headingLevel)),(e=>{this._featureForm.headingLevel=e,this._featureTemplates.headingLevel=e}),r.initial),(0,r.on)((()=>this.viewModel.activeWorkflow),"cancel-request",(e=>{let{controller:t}=e;(this.viewModel.hasPendingEdits?this._showDiscardEditsPrompt():this._showGenericCancelPrompt()).then((e=>e?t.allow():t.deny()))})),(0,r.when)((()=>this.viewModel.featureFormViewModel),(e=>{this._featureForm.viewModel=e}),r.initial),(0,r.when)((()=>this.viewModel.utilityNetworkAssociationAddAssociationViewModel),(e=>{this._associationItemList.viewModel=e}),r.initial),(0,r.when)((()=>this.viewModel.utilityNetworkAssociationAddAssociationViewModel?.association),(()=>{this._setUpAssociationSettings()})),(0,r.watch)((()=>this.viewModel),(e=>{this._attachments.viewModel=e?.attachmentsViewModel??null,this._featureTemplates.viewModel=e?.featureTemplatesViewModel??null,this._spinner.viewModel=e?.spinnerViewModel??null,e.showDiscardEditsPrompt=this._showDiscardEditsPrompt}),r.initial),(0,r.watch)((()=>this.view),((e,t)=>{const i=`editor-${this.id}-spinner`;t?.ui.remove(this._spinner,i),e?.ui.add(this._spinner,{key:i,position:"manual"})}),r.initial),(0,r.watch)((()=>[this.supportingWidgetDefaults,this.viewModel.sketchViewModel]),(e=>{let[t]=e;t&&(this._featureForm.set(t.featureForm),this._attachments.set(t.attachments),this._featureTemplates.set(t.featureTemplates),this.viewModel.sketchViewModel?.set(t.sketch))}),r.initial),(0,r.when)((()=>this._attachments?.error),(e=>this._onAttachmentsError(e))),(0,r.when)((()=>this.viewModel?.failures),(e=>{const{messages:t}=this,[{error:i,retry:o,cancel:s}]=e;this._showPrompt({title:t.errorWarningTitle,message:(0,ne.V)(t.errorWarningMessageTemplate,{errorMessage:i.message}),context:"warning",actions:{primary:{label:t.retry,action:()=>{o(),this._clearPrompt()}},secondary:{label:t.ignore,action:()=>{s(),this._clearPrompt()}}}})})),(0,r.watch)((()=>this.viewModel?.state),(e=>{switch(e){case"awaiting-feature-to-update":case"ready":case"disabled":this._filterText="",this._featureTemplates.filterText=""}})),(0,r.watch)((()=>this.viewModel.featureFormDisabled),(e=>this._featureForm.disabled=e)),(0,r.watch)((()=>this.visibleElements.sketch),(()=>this._setupSketch()),r.initial),it({getLoading:()=>{const{viewModel:e}=this;return e.syncing||e.updating||this._attachments.submitting},setEffectiveLoading:e=>{this._loading=e}})])}destroy(){this._associationItemList.destroy(),this._associationSettings.destroy(),this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy(),this._sketchToolbar=(0,s.pR)(this._sketchToolbar)}loadDependencies(){return Promise.all([(0,k.W)({action:()=>i.e(88342).then(i.bind(i,88342)),flow:()=>i.e(58739).then(i.bind(i,58739)),"flow-item":()=>Promise.all([i.e(86290),i.e(74597),i.e(99776),i.e(85326)]).then(i.bind(i,85326)),icon:()=>Promise.resolve().then(i.bind(i,92439)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170))}),A(),Promise.all([A(),(0,k.W)({action:()=>i.e(88342).then(i.bind(i,88342))})]),D(),R(),A(),ie(),(0,se.D6)(),Promise.all([D(),R(),A()]),Promise.all([(0,k.W)({icon:()=>Promise.resolve().then(i.bind(i,92439)),loader:()=>Promise.resolve().then(i.bind(i,23173))}),D(),A()])])}get _deleteButtonCommonInfo(){return{appearance:"outline",kind:"danger"}}get activeWorkflow(){return this.viewModel.activeWorkflow}get hideTemplatesForInactiveLayers(){return this.viewModel.hideTemplatesForInactiveLayers}set hideTemplatesForInactiveLayers(e){this.viewModel.hideTemplatesForInactiveLayers=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()}startCreateFeaturesWorkflowAtFeatureCreation(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(e)}startCreateFeaturesWorkflowAtFeatureEdit(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureEdit(e)}startUpdateWorkflowAtFeatureSelection(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}startUpdateWorkflowAtMultipleFeatureSelection(e){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e)}startUpdateWorkflowAtFeatureEdit(e){return this.viewModel.startUpdateWorkflowAtFeatureEdit(e)}deleteFeatureFromWorkflow(){return this.viewModel.deleteFeatureFromWorkflow()}deleteAssociationFromWorkflow(){return this.viewModel.deleteAssociationFromWorkflow()}cancelWorkflow(e){return this.viewModel.cancelWorkflow(e)}render(){const{visibleElements:e,viewModel:t}=this,i=this.classes(v.base,Ue.D.widget,Ue.D.panel);if(!t)return(0,C.K)("div",{class:i,key:"empty"});const{pageStack:o}=t,s=o.length-1,n=o.map(((e,t)=>this._renderPage(e,t===s)));return(0,C.K)("div",{class:i,key:"base"},e.flow?(0,C.K)("calcite-flow",{key:"flow"},n):n,this._prompt?(0,C.K)(se.XG,{...this._prompt,headingLevel:this.headingLevel}):void 0)}_renderPage(e,t){const i={selected:t};switch(e){case"disabled":break;case"ready":return this._renderReady(i);case"awaiting-feature-creation-info":return this._renderAwaitingFeatureCreationInfo(i);case"creating-features-upload-details":return this._renderUploadDetails(i);case"creating-features":return this._renderCreatingFeatures(i);case"editing-existing-feature":case"editing-attributes":return this._renderUpdateFeature(i);case"awaiting-update-feature-candidate":return this._renderFeatureList(i);case"adding-attachment":return this._renderAttachmentAdding(i);case"editing-attachment":return this._renderAttachmentEditing(i);case"viewing-associated-layers":case"viewing-associated-features":return this._renderViewAssociatedLayers(i);case"add-association-select-layer":case"add-association-select-feature":return this._renderSelectFeature(i);case"add-association-create-association":return this._renderAddAssociation(i)}return(0,C.K)("div",{key:"empty-page"})}_renderAwaitingFeatureCreationInfo(e){const{EditorPanel:t,messages:i}=this;return(0,C.K)(t,{heading:i.selectTemplate,key:"templates-panel",...e},(0,C.K)(K,{key:"feature-templates"},(0,C.K)(Z,null,this._renderFeatureTemplates())))}_renderUploadDetails(e){const{EditorPanel:t,activeWorkflow:i,messages:o}=this;if("create-features"!==i?.type)return null;const s=i.data.upload;return s?(0,C.K)(t,{heading:o.createFeatures,key:"upload-details-panel",...e},(0,C.K)(_e,{helpMessage:this._helpMessage,messages:o,upload:s})):null}_renderCreatingFeatures(e){const{EditorPanel:t,activeWorkflow:i,messages:o,messagesCommon:s,headingLevel:n,viewModel:r}=this;if(!i)return null;const l="create-features"===i.type&&i.numPendingFeatures>0||"update"===i.type&&"create-features"===i?.activeWorkflow?.type&&i.activeWorkflow?.numPendingFeatures>0;return(0,C.K)(t,{heading:o.createFeatures,key:"create-features-panel",...e},l?(0,C.K)(pe,{editorViewModel:r,headingLevel:n,messages:o,messagesCommon:s,renderAttachments:this._renderAttachments,renderFeatureForm:this._renderFeatureForm,renderSketchToolbar:this._renderSketch,onDelete:this._onDelete,onDeleteAssociation:this._onDeleteAssociation,onSave:this._onSave}):(0,C.K)(S,{helpMessage:this._helpMessage,renderSketchToolbar:this._renderSketch}))}_renderUpdateFeature(e){const{EditorPanel:t,messages:i,messagesCommon:o,headingLevel:s,viewModel:n}=this;return(0,C.K)(t,{heading:i.editFeature,key:"update-feature-panel",...e},(0,C.K)(pe,{editorViewModel:n,headingLevel:s,messages:i,messagesCommon:o,renderAttachments:this._renderAttachments,renderFeatureForm:this._renderFeatureForm,renderSketchToolbar:this._renderSketch,onDelete:this._onDelete,onDeleteAssociation:this._onDeleteAssociation,onSave:this._onSave}))}_getAssociationTypeTitle(e){const{messages:t}=this;if(!e)return t.editFeature;if(e.title)return e.title;const{messagesFeature:i}=this;switch(e.type){case"attachment":return i.associationsAttachments;case"connectivity":return i.associationsConnectivity;case"structure":return i.associationsStructure;case"content":return i.associationsContents;case"container":return i.associationsContainer}}_getAddAssociationTypeTitle(e){const{messages:t}=this;if(!e)return t.editFeature;const i=t.associations;switch(e.type){case"attachment":return i.addAttachment;case"connectivity":return i.addConnectivity;case"structure":return i.addStructure;case"content":return i.addContent;case"container":return i.addContainer}}_renderViewAssociatedLayers(e){const{EditorPanel:t,messages:i,messagesCommon:o,headingLevel:s,viewModel:n}=this,r=n.featureFormViewModel?.activeAssociationInput?.activeAssociationType,l=this._getAssociationTypeTitle(r);return(0,C.K)(t,{heading:l,key:"viewing-associated-layers-panel",...e},(0,C.K)(pe,{editorViewModel:n,headingLevel:s,messages:i,messagesCommon:o,renderAttachments:this._renderAttachments,renderFeatureForm:this._renderFeatureForm,renderSketchToolbar:this._renderSketch,onDelete:this._onDelete,onDeleteAssociation:this._onDeleteAssociation,onSave:this._onSave}))}_renderSelectFeature(e){const{_associationItemList:t,EditorPanel:i,viewModel:o,messagesCommon:s}=this,n=o.utilityNetworkAssociationAddAssociationViewModel,r=this._getAddAssociationTypeTitle(n?.associationType),l="ready"!==n?.state;return(0,C.K)(i,{heading:r,key:"add-association-select-feature",...e},(0,C.K)(K,{key:"select-feature"},(0,C.K)(Z,null,this._renderAssociationItemList())),(0,C.K)(B,{buttons:[t.filterOptionsVisible?{appearance:"solid",label:s.apply,disabled:l,onClick:()=>t.applyFilterOptions(),type:"button"}:void 0,{appearance:"outline",label:s.cancel,disabled:l,onClick:()=>{"update"===o.activeWorkflow?.type&&o.activeWorkflow.cancelActiveWorkflow()},type:"button"}]}))}_setUpAssociationSettings(){const{viewModel:e,_associationSettings:t}=this,i=e.utilityNetworkAssociationAddAssociationViewModel,o="update"===e.activeWorkflow?.type?e.activeWorkflow:null,s=o?o.activeWorkflow:null,n="add-association"===s?.type?s.sourceFeatureItem:null,r=i?.selectedFeature,l=i?.association,a=i?.utilityNetwork;n&&r&&l&&a&&(t.sourceFeature=n,t.targetFeature=r,t.association=l,t.utilityNetwork=a)}_renderAddAssociation(e){const{EditorPanel:t,viewModel:i,messagesCommon:o}=this,s=i.utilityNetworkAssociationAddAssociationViewModel,n=this._getAddAssociationTypeTitle(s?.associationType),r="ready"!==s?.state;return(0,C.K)(t,{heading:n,key:"add-association",...e},(0,C.K)(K,{key:"add-association-content"},(0,C.K)(Z,null,this._renderAssociationSettings())),(0,C.K)(B,{buttons:[{label:o.add,disabled:r||!s.canAddAssociation,onClick:()=>this._onSave(),type:"button"},{appearance:"outline",label:o.cancel,disabled:r,onClick:()=>{"update"===i.activeWorkflow?.type&&i.activeWorkflow.cancelActiveWorkflow()},type:"button"}]}))}_renderCustomTemplateGroupContent(e){const{messages:t,viewModel:i}=this,o=(0,s.Pb)(e.group.items,(e=>i.itemHasInvalidFormTemplate(e)?t.formFieldCreateError:void 0));return o?(0,C.K)(q,{kind:"warning",message:o}):null}_renderAttachmentAdding(e){const{EditorPanel:t,_attachments:i,messages:o,messagesCommon:s}=this;return(0,C.K)(t,{heading:o.addAttachment,key:"attachment-adding-panel",...e},(0,C.K)(K,{key:"attachments"},this._renderAttachments()),(0,C.K)(B,{buttons:[{label:i.submitting?s.cancel:s.add,disabled:i.submitting||!i.selectedFile,onClick:this._onAttachmentAdd,type:"button"}]}))}_renderAttachmentEditing(e){const{EditorPanel:t,_attachments:i,activeWorkflow:o,messages:s,messagesCommon:n}=this;return o?(0,C.K)(t,{heading:s.editAttachment,key:"attachment-editing-panel",...e},(0,C.K)(K,{key:"attachments"},this._renderAttachments()),o.shouldAllowAttachmentEditing?(0,C.K)(B,{buttons:[{label:n.update,disabled:i.submitting||!i.selectedFile,onClick:this._onAttachmentUpdate,type:"button"},{...this._deleteButtonCommonInfo,onClick:this._onAttachmentDelete,disabled:i.submitting,label:n.delete,type:"button"}]}):void 0):null}_renderReady(e){const{EditorPanel:t,messages:i,viewModel:o,visibleElements:s}=this,n=this._helpMessage;return(0,C.K)(t,{heading:i.widgetLabel,key:"landing-panel",...e},(0,C.K)(K,{key:"landing-content"},o.editorItems.length?[s.editFeaturesSection?(0,C.K)(Z,{key:"edit-actions"},this._renderUpdateActions()):null,s.createFeaturesSection&&o.canCreateVisible?(0,C.K)(Z,{key:"create-actions"},this._renderCreateActions()):null]:(0,C.K)(L,{key:"no-content"},i.noEditableLayers)),n?(0,C.K)("div",{class:v.helpMessage,key:"footer-actions",slot:"footer"},n):void 0)}get _helpMessage(){const{activeWorkflow:e,messages:t,view:i}=this,o=e?.helpMessage;return o?t["3d"===i?.type?"helpMessages3d":"helpMessages2d"]?.[o]:void 0}_renderUpdateActions(){const{messages:e,messagesCommon:t,viewModel:i}=this,o={id:"select",label:t.select};return(0,C.K)("div",{class:v.updateActions,key:"update-actions"},(0,C.K)(re.D,{level:(0,re.S)(this.headingLevel)},e.editFeatures),(0,C.K)("calcite-list",{class:v.updateActionsList,label:e.editFeaturesList,selectionAppearance:"border",selectionMode:"single"},(0,P.Gx)({disabled:!i.canUpdateVisible,grouped:!1,item:o,selectedItem:"awaiting-feature-to-update"===i.activeWorkflow?.stepId?o:void 0,renderIcon:this._renderSelectIcon,onItemSelect:this._onToggleUpdateWorkflow})))}_renderCreateActions(){return(0,C.K)("div",{key:"create-actions"},(0,C.K)(re.D,{level:(0,re.S)(this.headingLevel)},this.messages.createFeatures),(0,C.K)("div",{class:v.featureTemplatesContainer,key:"templates"},this._renderFeatureTemplates()))}_renderFeatureList(e){const{EditorPanel:t,viewModel:i}=this,{activeWorkflow:o}=i;if("update"!==o?.type)return null;const s=o.data.candidates,n=(0,ne.V)(this.messages.multipleFeaturesTemplate,{total:s.length});return(0,C.K)(t,{heading:n,key:"feature-list",...e},(0,C.K)($,{editorItems:i.editorItems,editorMessages:this.messages,filterText:this._filterText,id:this.id,messagesTemplates:this.messagesTemplates,workflow:o,onFilterTextChange:e=>this._filterText=e,onSelectFeature:(e,t)=>i.selectFeature(e,t),onZoomTo:e=>i.zoomTo(e)}))}_showPromptAndWait(e){let{title:t,message:i,yesLabel:o,noLabel:s}=e;const r=(0,n.createResolver)(),{view:l}=this,a=l?.focused;return this._showPrompt({title:t,message:i,context:"danger",actions:{primary:{label:o,action:()=>r.resolve(!0)},secondary:{label:s,action:()=>r.resolve(!1)}}}),r.promise.finally((()=>{this._clearPrompt(),a&&l?.focus()}))}async _setupSketch(){if(!this.visibleElements.sketch)return this._sketchImportAbortController=(0,s.DC)(this._sketchImportAbortController),this._sketchToolbar=(0,s.pR)(this._sketchToolbar),void this.removeHandles(st);if(this._sketchImportAbortController)return;const e=new AbortController;this._sketchImportAbortController=e;const t=await Promise.all([i.e(30124),i.e(31329),i.e(67439),i.e(26584),i.e(12162),i.e(57263)]).then(i.bind(i,57263));if(!e.signal.aborted)try{this._sketchToolbar=new t.default({toolbarKind:"docked",contextualToolLocation:"inline-end",scale:"s",visibleElements:new et.AP({deleteButton:!1,settingsMenu:!1,directionModePicker:!1,selectionCountLabel:!1,duplicateButton:!1,createTools:new et.bO({freehandPolygon:!0,freehandPolyline:!0})})}),this.addHandles([(0,r.watch)((()=>this.viewModel.activeLeafWorkflow?.availableCreateTools),(e=>{this._sketchToolbar&&(this._sketchToolbar.availableCreateTools=e)}),r.initial),(0,r.watch)((()=>this.visibleElements.undoRedoButtons),(e=>{this._sketchToolbar&&(this._sketchToolbar.visibleElements.undoRedoMenu=e)}),r.initial),(0,r.when)((()=>this.viewModel?.sketchViewModel),(e=>{this._sketchToolbar&&(this._sketchToolbar.viewModel=e)}),r.initial)],st)}finally{this._sketchImportAbortController=null}}get test(){return{sketch:this._sketchToolbar,showPrompt:this._showPromptAndWait.bind(this)}}};(0,o._)([(0,l.MZ)()],nt.prototype,"_featureForm",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_sketchToolbar",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_attachments",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_associationItemList",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_associationSettings",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_featureTemplates",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_filterText",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_prompt",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_spinner",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_deleteButtonCommonInfo",null),(0,o._)([(0,l.MZ)()],nt.prototype,"_loading",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],nt.prototype,"activeWorkflow",null),(0,o._)([(0,l.MZ)()],nt.prototype,"headingLevel",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"hideTemplatesForInactiveLayers",null),(0,o._)([(0,l.MZ)()],nt.prototype,"icon",null),(0,o._)([(0,l.MZ)()],nt.prototype,"label",null),(0,o._)([(0,l.MZ)()],nt.prototype,"labelOptions",null),(0,o._)([(0,l.MZ)()],nt.prototype,"layerInfos",null),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/Editor/t9n/Editor")],nt.prototype,"messages",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/t9n/common")],nt.prototype,"messagesCommon",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],nt.prototype,"messagesTemplates",void 0),(0,o._)([(0,l.MZ)(),(0,ae.G)("esri/widgets/Feature/t9n/Feature")],nt.prototype,"messagesFeature",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"snappingOptions",null),(0,o._)([(0,l.MZ)()],nt.prototype,"tooltipOptions",null),(0,o._)([(0,l.MZ)()],nt.prototype,"supportingWidgetDefaults",void 0),(0,o._)([(0,l.MZ)({type:d.default,nonNullable:!0})],nt.prototype,"valueOptions",null),(0,o._)([(0,l.MZ)()],nt.prototype,"view",null),(0,o._)([(0,l.MZ)(),(0,ot.U)(["sketch-create","sketch-delete","sketch-update","workflow-cancel","workflow-commit"])],nt.prototype,"viewModel",void 0),(0,o._)([(0,l.MZ)({type:M,nonNullable:!0})],nt.prototype,"visibleElements",void 0),(0,o._)([(0,l.MZ)()],nt.prototype,"_helpMessage",null),nt=(0,o._)([(0,a.$)("esri.widgets.Editor")],nt);const rt=nt}}]);