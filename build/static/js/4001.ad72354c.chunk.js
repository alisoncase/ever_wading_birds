"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[4001,12574,14524,14967,47381,55928,69762,86434,92143],{10993:(e,t,n)=>{n.d(t,{CI:()=>a,aI:()=>c,fk:()=>l});n(21265);var r=n(64682),i=n(70576);function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1}return!0}function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1;return!0}function a(e,t){return e===t||null!=e&&null!=t&&(0,i.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function l(e,t,n){return e===t||null!=e&&null!=t&&(0,i.aI)(e.spatialReference,t.spatialReference)&&(0,r.Sp)(e.x,t.x,n)&&(0,r.Sp)(e.y,t.y,n)&&(0,r.Sp)(e.z??0,t.z??0,n)&&(0,r.Sp)(e.m??0,t.m??0,n)}function h(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return a(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&o(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&o(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&s(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function c(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!h(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}(e.attributes,t.attributes)}},14967:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r,i=n(93800),s=n(85715),o=n(19455),a=n(48602),l=(n(21265),n(50925),n(14746),n(47332)),h=n(75269);let c=r=class extends(s.A.ClonableMixin(o.A)){constructor(e){super(e),this.type="georeferenced",this.origin=null}};c.absolute=new r,(0,i._)([(0,l.e)({georeferenced:"georeferenced"},{readOnly:!0})],c.prototype,"type",void 0),(0,i._)([(0,a.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],c.prototype,"origin",void 0),c=r=(0,i._)([(0,h.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],c);const u=c},18162:(e,t,n)=>{n.d(t,{F:()=>s});n(96913);var r=n(93321),i=n(31183);function s(e,t,n,r,s){return!(null==t||null==r||e.length<2)&&(o.x=e[0],o.y=e[1],o.z=e[2],o.spatialReference=t,(0,i.g)(o,n,r,s))}const o=(0,n(62240).T)(0,0,0,r.default.WGS84)},20444:(e,t,n)=>{n.d(t,{CK:()=>h,E9:()=>a,Hq:()=>l,MW:()=>c,TE:()=>u,yJ:()=>d});var r=n(89227),i=n(75400),s=n(14967),o=n(55928);function a(e){return null==e.origin}function l(e){return null!=e.origin}function h(e){return l(e.vertexSpace)}function c(e,t){if(!l(e))return null;const[n,r,s]=e.origin;return new i.default({x:n,y:r,z:s,spatialReference:t})}function u(e,t){const{x:n,y:r,z:i,spatialReference:a}=e,l=[n,r,i??0];return"local"===(t?.vertexSpace??function(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(a))?new o.default({origin:l}):new s.default({origin:l})}function d(e,t){return e.type===t.type&&(e.origin===t.origin||null!=e.origin&&null!=t.origin&&(0,r.p)(e.origin,t.origin))}},21369:(e,t,n)=>{n.d(t,{A6:()=>g,B8:()=>p,Xd:()=>c,Xr:()=>f,Yc:()=>I,hZ:()=>w,lw:()=>u,t2:()=>P,x8:()=>h});var r=n(13473),i=n(66509),s=n(28473),o=n(12147),a=n(89227),l=n(60548);function h(e,t,n){n*=.5;const r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function c(e,t){const n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>(0,o.FD)()?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function u(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=n[0],l=n[1],h=n[2],c=n[3];return e[0]=r*c+o*a+i*h-s*l,e[1]=i*c+o*l+s*a-r*h,e[2]=s*c+o*h+r*l-i*a,e[3]=o*c-r*a-i*l-s*h,e}function d(e,t,n,r){const i=t[0],s=t[1],a=t[2],l=t[3];let h,c,u,d,p,f=n[0],v=n[1],g=n[2],m=n[3];return c=i*f+s*v+a*g+l*m,c<0&&(c=-c,f=-f,v=-v,g=-g,m=-m),1-c>(0,o.FD)()?(h=Math.acos(c),u=Math.sin(h),d=Math.sin((1-r)*h)/u,p=Math.sin(r*h)/u):(d=1-r,p=r),e[0]=d*i+p*f,e[1]=d*s+p*v,e[2]=d*a+p*g,e[3]=d*l+p*m,e}function p(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,a=o?1/o:0;return e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=s*a,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function v(e,t){const n=t[0]+t[4]+t[8];let r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const i=(n+1)%3,s=(n+2)%3;r=Math.sqrt(t[3*n+n]-t[3*i+i]-t[3*s+s]+1),e[n]=.5*r,r=.5/r,e[3]=(t[3*i+s]-t[3*s+i])*r,e[i]=(t[3*i+n]+t[3*n+i])*r,e[s]=(t[3*s+n]+t[3*n+s])*r}return e}function g(e,t,n,r){const i=.5*Math.PI/180;t*=i,n*=i,r*=i;const s=Math.sin(t),o=Math.cos(t),a=Math.sin(n),l=Math.cos(n),h=Math.sin(r),c=Math.cos(r);return e[0]=s*l*c-o*a*h,e[1]=o*a*c+s*l*h,e[2]=o*l*h-s*a*c,e[3]=o*l*c+s*a*h,e}const m=l.c,w=l.s,_=l.g,y=u,x=l.b,M=l.h,b=l.l,S=l.j,O=S,R=l.f,T=R,Z=l.n,P=l.a,C=l.e;function I(e,t,n){const r=(0,a.f)(t,n);return r<-.999999?((0,a.e)(k,V,t),(0,a.H)(k)<1e-6&&(0,a.e)(k,H,t),(0,a.n)(k,k),h(e,k,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a.e)(k,t,n),e[0]=k[0],e[1]=k[1],e[2]=k[2],e[3]=1+r,Z(e,e))}const k=(0,s.vt)(),V=(0,s.fA)(1,0,0),H=(0,s.fA)(0,1,0);const z=(0,i.vt)(),W=(0,i.vt)();const A=(0,r.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:_,calculateW:function(e,t){const n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},conjugate:f,copy:m,dot:M,equals:C,exactEquals:P,fromEuler:g,fromMat3:v,getAxisAngle:c,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:p,len:O,length:S,lerp:b,mul:y,multiply:u,normalize:Z,random:function(e){const t=o.Ov,n=t(),r=t(),i=t(),s=Math.sqrt(1-n),a=Math.sqrt(n);return e[0]=s*Math.sin(2*Math.PI*r),e[1]=s*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*i),e[3]=a*Math.cos(2*Math.PI*i),e},rotateX:function(e,t,n){n*=.5;const r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*a,e[1]=i*l+s*a,e[2]=s*l-i*a,e[3]=o*l-r*a,e},rotateY:function(e,t,n){n*=.5;const r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=r*l-s*a,e[1]=i*l+o*a,e[2]=s*l+r*a,e[3]=o*l-i*a,e},rotateZ:function(e,t,n){n*=.5;const r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*a,e[1]=i*l-r*a,e[2]=s*l+o*a,e[3]=o*l-s*a,e},rotationTo:I,scale:x,set:w,setAxes:function(e,t,n,r){const i=A;return i[0]=n[0],i[3]=n[1],i[6]=n[2],i[1]=r[0],i[4]=r[1],i[7]=r[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],Z(e,v(e,i))},setAxisAngle:h,slerp:d,sqlerp:function(e,t,n,r,i,s){return d(z,t,i,s),d(W,n,r,s),d(e,z,W,2*s*(1-s)),e},sqrLen:T,squaredLength:R,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},31183:(e,t,n)=>{n.d(t,{W:()=>a,g:()=>o});var r=n(28473),i=n(96913),s=n(67093);function o(e,t,n,r){if((0,i.canProjectWithoutEngine)(e.spatialReference,n)){l[0]=e.x,l[1]=e.y;const i=e.z;return l[2]=i??r??0,(0,s.projectBuffer)(l,e.spatialReference,0,t,n,0)}const o=(0,i.tryProjectWithZConversion)(e,n);return!!o&&(t[0]=o?.x,t[1]=o?.y,t[2]=o?.z??r??0,!0)}async function a(e,t,n,r,s){return await(0,i.initializeProjection)(e.spatialReference,n,null,s),o(e,t,n,r)}const l=(0,r.vt)()},34156:(e,t,n)=>{n.d(t,{EL:()=>g,RS:()=>m,gr:()=>h,wP:()=>u,wZ:()=>d});var r=n(79625),i=(n(21265),n(82301)),s=n(25048),o=n(93321),a=n(78629),l=n(62240);function h(e){return"declaredClass"in e}function c(e){return"declaredClass"in e}function u(e,t){return e?function(e){return"declaredClass"in e}(e)?e:new r.default({layer:t,sourceLayer:t,visible:e.visible,symbol:(0,i.clone)(e.symbol),attributes:(0,i.clone)(e.attributes),geometry:d(e.geometry)}):null}function d(e){return null==e?null:h(e)?e:(0,a.fromJSON)(function(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:i}=e.spatialReference,s={wkid:t,wkt:n,wkt2:r,latestWkid:i};switch(e.type){case"point":{const{x:t,y:n,z:r,m:i}=e;return{x:t,y:n,z:r,m:i,spatialReference:s}}case"polygon":{const{rings:t,hasZ:n,hasM:r}=e;return{rings:p(t),hasZ:n,hasM:r,spatialReference:s}}case"polyline":{const{paths:t,hasZ:n,hasM:r}=e;return{paths:p(t),hasZ:n,hasM:r,spatialReference:s}}case"extent":{const{xmin:t,xmax:n,ymin:r,ymax:i,zmin:o,zmax:a,mmin:l,mmax:h,hasZ:c,hasM:u}=e;return{xmin:t,xmax:n,ymin:r,ymax:i,zmin:o,zmax:a,mmin:l,mmax:h,hasZ:c,hasM:u,spatialReference:s}}case"multipoint":{const{points:t,hasZ:n,hasM:r}=e;return{points:v(t)?f(t):t,hasZ:n,hasM:r,spatialReference:s}}default:return}}(e))}function p(e){return function(e){for(const t of e)if(0!==t.length)return v(t);return!1}(e)?e.map((e=>f(e))):e}function f(e){return e.map((e=>Array.from(e)))}function v(e){return e.length>0&&((0,s.vZ)(e[0])||(0,s.aI)(e[0]))}function g(e,t){if(!e)return null;let n;if(c(e)){if(null==t)return e.clone();if(c(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,l.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function m(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:i}=e,s={wkid:t,wkt:n,wkt2:r,latestWkid:i};return o.default.fromJSON(s)}},48114:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(93800),i=n(48602),s=(n(21265),n(50925),n(14746),n(75269)),o=n(75400),a=n(51064),l=n(56347),h=n(82959),c=n(94761),u=n(83210),d=n(51232),p=n(4542),f=n(77626),v=n(30124),g=n(53605);let m=class extends l.default{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this._drawTool=null,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){this._removeDrawTool(),this.emit("destroy")}complete(){this._completeDrawing()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){"click"===this.mode?this.addHandles(this._getClickModeViewHandles()):this.addHandles(this._getDragModeViewHandles())}_getDragModeViewHandles(){return[this.view.on("immediate-click",(e=>{e.stopPropagation(),e.mapPoint&&!this._panEnabled&&null!=this.getCoordsFromScreenPoint((0,g.ZV)(e))&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}),d.o.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,g.ZV)(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor()))}),d.o.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),null==this._activePointerId&&"touch"!==e.pointerType&&(this._cursorScreenPoint=(0,g.ZV)(e),this._updateCursor())}),d.o.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=(0,g.ZV)(e),this._updateCursor())}),d.o.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),2===this._committedVertices.length&&this._drawCompleteHandler(e),this._isDragging=!1)}),d.o.TOOL),this.view.on("key-down",(e=>{e.key===p.NE.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===p.NE.pan&&(this._panEnabled=!0)}),d.o.TOOL),this.view.on("key-up",(e=>{e.key===p.NE.pan&&(this._panEnabled=!1)}),d.o.TOOL),this.view.on("drag",(e=>{null!=this._activePointerId&&e.stopPropagation()}),d.o.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),d.o.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,g.ZV)(e),this._activePointerId=e.pointerId,this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor()}),d.o.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,g.ZV)(e),null==this._activePointerId&&"touch"!==e.pointerType&&this._updateCursor()}),d.o.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)}),d.o.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)}),d.o.TOOL),this.view.on("key-down",(e=>{e.key===p.NE.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),2===this.vertices.length&&this._drawCompleteHandler(e)),e.key===p.NE.complete&&this._cursorScreenPoint&&2===this.vertices.length&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}),d.o.TOOL)]}_addDrawTool(){const e=new h.B({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode});this._drawTool=e,this.view.addAndActivateTool(e),this.addHandles([e.on("vertex-add",(t=>{1===t.vertices.length&&this.emit("vertex-add",new c.Sf(this.view,t.vertices[0].vertexIndex,e.getVertexCoords()))})),e.on("cursor-update",(t=>{1===t.vertices.length&&this.emit("cursor-update",new c.sQ(this.view,t.vertices[0].vertexIndex,e.getVertexCoords()))})),e.on("complete",(t=>{this.emit("draw-complete",new c.cH(e.getVertexCoords())),this._removeDrawTool()})),this.view.on("key-down",(t=>{t.key!==p.NE.vertexAdd||t.repeat||"click"!==this.mode?t.key!==p.NE.complete||t.repeat||e.completeCreateOperation():e.drawOperation.numCommittedVertices>0?e.completeCreateOperation():e.drawOperation.commitStagedVertex()}),d.o.TOOL)])}_removeDrawTool(){this._drawTool&&(this.view.tools.remove(this._drawTool),this._drawTool=null)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(t))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=(0,u.ZP)(this.view,this._committedVertices[0]));const n=this._committedVertices.length-1,r=new c.Sf(this.view,n,this.vertices);this.emit("vertex-add",r)}_updateCursor(){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const e=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);null!=e&&this._pushCursorVertex(e.vertex,(()=>this.emit("cursor-update",new c.sQ(this.view,this._activeComponent.vertices.length,this.vertices,null!=this._stagedVertex?new o.default(this._stagedVertex):null))))}_completeDrawing(){if(this._drawTool)return this._drawTool.completeCreateOperation(),void this.removeAllHandles();if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),null!=this._snappingManager&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const e=new c.cH(this.vertices);this.emit("draw-complete",e),e.defaultPrevented||this.removeAllHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new v.p(new f.ZE("polygon",this._coordinateHelper),a.RT.Local),this._activeComponent=new f.uA(this._coordinateHelper.spatialReference,a.RT.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};(0,r._)([(0,i.MZ)({type:["freehand","click"]})],m.prototype,"mode",void 0),m=(0,r._)([(0,s.$)("esri.views.draw.SegmentDrawAction")],m);const w=m},49282:(e,t,n)=>{n.d(t,{t:()=>i,x:()=>r});const r=["freehand","hybrid","click"],i="click"},55928:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(93800),i=n(85715),s=n(19455),o=n(48602),a=(n(21265),n(50925),n(14746),n(47332)),l=n(75269),h=n(28473);let c=class extends(i.A.ClonableMixin(s.A)){constructor(e){super(e),this.type="local",this.origin=(0,h.vt)()}};(0,r._)([(0,a.e)({local:"local"},{readOnly:!0})],c.prototype,"type",void 0),(0,r._)([(0,o.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],c.prototype,"origin",void 0),c=(0,r._)([(0,l.$)("esri.geometry.support.MeshLocalVertexSpace")],c);const u=c},64053:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(93800),i=n(6946),s=n(48602),o=(n(21265),n(50925),n(14746),n(75269));let a=class extends i.default{constructor(e){super(e),this.enabled=!1}};(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"enabled",void 0),a=(0,r._)([(0,o.$)("esri.views.interactive.sketch.SketchLabelOptions")],a);const l=a},81064:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(5019),i=n(69601);class s{constructor(e){this._observable=new i.I,this._set=new Set(e)}get size(){return(0,r.gc)(this._observable),this._set.size}add(e){const t=this._set.size;return this._set.add(e),this._set.size!==t&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const t=this._set.delete(e);return t&&this._observable.notify(),t}entries(){return(0,r.gc)(this._observable),this._set.entries()}forEach(e,t){(0,r.gc)(this._observable),this._set.forEach(((n,r)=>e.call(t,n,r,this)),t)}has(e){return(0,r.gc)(this._observable),this._set.has(e)}keys(){return(0,r.gc)(this._observable),this._set.keys()}values(){return(0,r.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,r.gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},82959:(e,t,n)=>{n.d(t,{B:()=>d});var r=n(93800),i=n(58448),s=n(17741),o=n(48602),a=(n(21265),n(50925),n(14746),n(75269)),l=n(41317),h=n(26054),c=n(48941),u=n(88204);let d=class extends(i.A.EventedMixin(u.g)){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=this.view,t=(0,l.bK)(this.hasZ,this.elevationInfo);this.drawOperation=new h.O0({view:e,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:"3d"===e.type?new c.IX(e,t):null,elevationDrawSurface:"3d"===e.type?new c.rT(t,this.defaultZ,e):null,hasM:!1,elevationInfo:t}),this.addHandles([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e)))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,s.pR)(this.drawOperation),this._set("view",null)}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.geometryIncludingUncommittedVertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}canRedo(){return this.drawOperation.canRedo}canUndo(){return this.drawOperation.canUndo}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};(0,r._)([(0,o.MZ)({constructOnly:!0,nonNullable:!0})],d.prototype,"defaultZ",void 0),(0,r._)([(0,o.MZ)()],d.prototype,"drawOperation",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],d.prototype,"elevationInfo",void 0),(0,r._)([(0,o.MZ)({value:!0})],d.prototype,"enabled",null),(0,r._)([(0,o.MZ)({constructOnly:!0})],d.prototype,"geometryType",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],d.prototype,"hasZ",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],d.prototype,"mode",void 0),(0,r._)([(0,o.MZ)()],d.prototype,"snapToScene",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"type",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"updating",null),(0,r._)([(0,o.MZ)({constructOnly:!0,nonNullable:!0})],d.prototype,"view",void 0),d=(0,r._)([(0,a.$)("esri.views.draw.DrawTool")],d)},83210:(e,t,n)=>{n.d(t,{E5:()=>p,ZP:()=>m,vz:()=>v});var r=n(62631),i=n(98352),s=n(67654),o=n(21369),a=n(66509),l=n(89227),h=n(28473),c=n(75400),u=n(91345);function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=n?[e,t,n]:[e,t]}function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=n?{x:e,y:t,z:n}:{x:e,y:t}}class f{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(r.Ru)}get doUnnormalization(){return!1}}class v extends f{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(t),this._defaultZ=n,this.transform=(0,s.vt)(),this.transformInv=(0,s.vt)(),this.transform=(0,s.o8)(e),(0,i.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return d(e,t,this._defaultZ)}mapToLocal(e){return p(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return d(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class g extends f{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,h.vt)(),this.tangentFrameUpWS=(0,h.vt)(),this.tangentFrameRightWS=(0,h.vt)(),this.tangentFrameForwardWS=(0,h.vt)(),this.localFrameRightWS=(0,h.vt)(),this.localFrameUpWS=(0,h.vt)(),this.worldToLocalTransform=(0,a.vt)(),this.localToWorldTransform=(0,a.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u._.Z,this.tangentFrameForwardWS);const r=(0,h.vt)();(0,l.h)(r,this.tangentFrameForwardWS,(0,l.f)(n,this.tangentFrameForwardWS)),(0,l.d)(this.localFrameRightWS,n,r),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.e)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,o.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,o.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return d(e,t,this.defaultZ)}mapToLocal(e){const t=(0,h.vt)();this.view.renderCoordsHelper.toRenderCoords(new c.default({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new c.default({spatialReference:this.view.spatialReference}));return null!=n?p(n.x/this.scale,n.y/this.scale):null}localToMap(e){const t=(0,h.vt)();this.view.renderCoordsHelper.toRenderCoords(new c.default({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new c.default({spatialReference:this.view.spatialReference}));return null!=n?d(n.x,n.y,this.defaultZ):null}}function m(e,t){if("2d"===e.type)return new v(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const n=t.length>2?new c.default({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new c.default({x:t[0],y:t[1],spatialReference:e.spatialReference});return new g(e,n)}return null}},92143:(e,t,n)=>{n.d(t,{IV:()=>v,LF:()=>i,T9:()=>c,Wq:()=>a,d_:()=>s,g2:()=>d,gT:()=>o,hs:()=>u,iT:()=>f,kM:()=>l,l3:()=>h,n0:()=>g,r7:()=>p});var r=n(84190);function i(e){return{value:e}}function s(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}function o(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,r.t$)(t),value:e,unit:t,rotationType:n}}function l(e,t){const n=h(e,t);return"angle"===e.type?a(n,t,e.rotationType):function(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}(n,t)}function h(e,t){return(0,r.oU)(e.value,e.unit,t)}function c(e,t){return null==e?t:null==t||e.value>(0,r.oU)(t.value,t.unit,e.unit)?e:t}function u(e,t){return null==e?null:{...e,value:e.value*t}}function d(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}const p=s(0,"meters"),f=o(0,"square-meters"),v=(a(0,"radians"),a(0,"degrees")),g=a(0,"degrees","geographic")},94761:(e,t,n)=>{n.d(t,{NM:()=>i,Sf:()=>r,cH:()=>o,sQ:()=>s});class r{constructor(e,t,n){this.view=e,this.vertexIndex=t,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class i{constructor(e,t,n){this.view=e,this.vertexIndex=t,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class s{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.view=e,this.vertexIndex=t,this.vertices=n,this.mapPoint=r,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===n.length?n[0]:null}preventDefault(){this.defaultPrevented=!0}}class o{constructor(e){this.vertices=e,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===e.length?e[0]:null}preventDefault(){this.defaultPrevented=!0}}},95095:(e,t,n)=>{n.d(t,{$h:()=>f,Ef:()=>b,IP:()=>g,P1:()=>y,hF:()=>M,jQ:()=>_,rT:()=>x,rZ:()=>r,uR:()=>m});var r,i=n(5839),s=n(92143),o=n(84190),a=n(32006),l=n(98080),h=n(89227),c=n(28473),u=n(18162),d=n(26266),p=n(70576);function f(e,t){if(null==e||null==t)return;const n=v(e,t);return null!=n?(0,s.Wq)(n,"radians","geographic"):void 0}!function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"}(r||(r={}));const v=(()=>{const e=(0,c.vt)(),t=(0,c.vt)();return(n,r)=>((0,h.i)(e,n.x,n.y,n.z??0),(0,h.i)(t,r.x,r.y,r.z??0),g(e,t,n.spatialReference,r.spatialReference))})(),g=(()=>{const e=(0,l.vt)(),t=(0,c.vt)(),n=(0,c.vt)();return(r,i,s,c)=>{if((0,h.p)(r,i))return;const f=(0,d.geodesicCompatibleSpatialReference)(s),v=(0,d.geodesicCompatibleSpatialReference)(c);if(f&&v&&(0,p.aI)(f,v)&&(0,u.F)(r,s,t,f)&&(0,u.F)(i,c,n,v)){const{azimuth:e}=(0,d.inverseGeodeticSolver)(O,t,n,f);return null!=e?(0,o.oU)(e,"degrees","radians"):void 0}e[0]=i[0]-r[0],e[1]=i[1]-r[1];let g=(0,a.g7)(l.JP,e);return e[0]<0&&(g=R-g),g}})();function m(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.Absolute;if(t&&n)switch(i){case r.Absolute:return f(t,n);case r.Relative:return _(w(e,t,n),r.Relative);case r.RelativeBilateral:return _(w(e,t,n),r.RelativeBilateral)}}function w(e,t,n){if(!e||!t||!n)return;const r=v(e,t),i=v(t,n);return null!=r&&null!=i?(0,s.Wq)(i-r,"radians","geographic"):void 0}function _(e,t){if(null!=e)switch(t){case r.Absolute:return y(e);case r.Relative:{const t=M(e);let n=Z.normalize(t,0,!0);return-180===n&&(n=180),(0,s.Wq)(n,"degrees","geographic")}case r.RelativeBilateral:{const t=M(e),n=Math.abs(Z.normalize(t,0,!0));return(0,s.Wq)(n,"degrees","geographic")}}}function y(e){const t=M(e),n=T.normalize(t,0,!0);return(0,s.Wq)(n,"degrees","geographic")}const x=(()=>{const e=(0,c.vt)();return function(t,n,r,i,a){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"geodesic";(0,h.c)(e,n);const c=M(a);if("geodesic"===l){const s=(0,d.geodesicCompatibleSpatialReference)(r);if(s&&(0,u.F)(e,r,e,s))return(0,d.directGeodeticSolver)(t,e,c,i,s),t[2]=n[2],!!(0,u.F)(t,s,t,r)}const p=(0,s.g2)(c,"geographic","arithmetic"),f=(0,o.oU)(p,"degrees","radians"),v=n[0]+i*Math.cos(f),g=n[1]+i*Math.sin(f),m=n[2];return(0,h.i)(t,v,g,m),!0}})();function M(e){if(null!=e)return(0,s.g2)(S(e),e.rotationType,"geographic")}function b(e){if(null!=e)return(0,s.g2)(S(e),e.rotationType,"arithmetic")}function S(e){return(0,o.oU)(e.value,e.unit,"degrees")}const O=new d.InverseGeodeticSolverResult,R=2*Math.PI,T=i.ie,Z=new i.hr(-180,180)}}]);