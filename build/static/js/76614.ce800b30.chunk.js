"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[14524,25280,47381,49705,69762,76614,92143],{6579:(e,t,r)=>{r.d(t,{Cq:()=>p,Ee:()=>m,J1:()=>g,LF:()=>b,Me:()=>M,Mm:()=>h,Sz:()=>_,W4:()=>y,e_:()=>v,nD:()=>c,t_:()=>w,tr:()=>f,v7:()=>C,zJ:()=>d,zq:()=>T});var i=r(87436),o=r(5839),n=r(64682),s=r(92143),a=r(56612),l=r(84190),u=r(23224);function p(e,t,r){return e.units[t][r]}function d(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return`${(0,u.ZV)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:t>0?"never":"exceptZero"})} ${p(e,r,o)}`}function c(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return`${(0,u.ZV)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:"exceptZero"})} ${p(e,r,o)}`}function m(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.x0)(t,r);return d(e,(0,l.oU)(t,r,n),n,i,o)}function h(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.x0)(t,r);return c(e,(0,l.oU)(t,r,n),n,i,o)}function y(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.x$)(t,r);return d(e,(0,l.oU)(t,r,n),n,i,o)}function v(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.x$)(t,r);return c(e,(0,l.oU)(t,r,n),n,i,o)}function f(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.OU)(t,r);return d(e,(0,l.oU)(t,r,n),n,i,o)}function g(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.OU)(t,r);return c(e,(0,l.oU)(t,r,n),n,i,o)}function w(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.y7)(t,r);return d(e,(0,l.oU)(t,r,n),n,i,o)}function b(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.y7)(t,r);return c(e,(0,l.oU)(t,r,n),n,i,o)}function T(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.wv)(t,r);return d(e,(0,l.oU)(t,r,n),n,i,o)}function _(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const n=(0,l.TL)(t,r);return d(e,(0,l.oU)(t,r,n),n,i,o)}const S=(e,t)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"});function M(e,t,r,i,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.ie,p=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=a.normalize((0,s.g2)((0,l.oU)(e,t,"degrees"),r,i),0,p);const c=S(d,n??2);return d=A(d,c),(0,u.ZV)(d,c)}const O=new Map;function A(e,t){const r=JSON.stringify(t);let i=O.get(r);return i||(i=new Intl.NumberFormat("en-US",t),O.set(r,i)),/^[-+]?360\.?0*\xb0?$/.test(i.format(e))?0:e}const Z=["B","kB","MB","GB","TB"];function C(e,t){let r=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(i.u.KILOBYTES));r=(0,n.qE)(r,0,Z.length-1);const o=(0,u.ZV)(t/i.u.KILOBYTES**r,{maximumFractionDigits:2});return(0,a.HC)(e.units.bytes[Z[r]],{fileSize:o})}},25280:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var i,o=r(93800),n=r(48602),s=(r(21265),r(50925),r(14746),r(75269)),a=r(87520);let l=i=class extends a.default{constructor(e){super(e),this.doNotLocateOnRestrictedElements=null}clone(){return new i({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements,...this.cloneProperties()})}};(0,o._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],l.prototype,"doNotLocateOnRestrictedElements",void 0),l=i=(0,o._)([(0,s.$)("esri.rest.support.NetworkFeatureSet")],l);const u=l},49705:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var i=r(93800),o=r(85715),n=r(19455),s=r(48602),a=(r(21265),r(50925),r(14746),r(75269));let l=class extends(o.A.ClonableMixin(n.A)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.url=null}};(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],l.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],l.prototype,"url",void 0),l=(0,i._)([(0,a.$)("esri.rest.support.NetworkUrl")],l);const u=l},53826:(e,t,r)=>{r.d(t,{Ng:()=>S,OM:()=>f,Q0:()=>b,T8:()=>w,ZP:()=>_,ZT:()=>T,eX:()=>A,fD:()=>D,fb:()=>h,fl:()=>m,iP:()=>C,oh:()=>M,rX:()=>N,sH:()=>y,yk:()=>j});r(88677),r(21265);var i=r(74719),o=r(64682),n=r(66845),s=r(72520),a=r(69943),l=r(73210),u=r(51536),p=r(12711);const d=l.n$,c={date:null,time:null,timeZoneOffset:null},m=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),h="latn",y=new Set(["date-only","time-only","timestamp-offset"]),v=e=>"valueAsDate"in e;function f(e){return{locale:(0,p.JK)(),numberingSystem:h,zone:e??d}}function g(e,t){return null==e?null:u.c9.fromMillis(e,f(t))}function w(e,t){if(null==e||!(0,a.Kg)(e)||""===e){if(t){const e=u.c9.local({zone:t});return{date:null,time:null,timeZoneOffset:e.isValid?e.offset.toString():null}}return c}const r=u.c9.fromISO(e,{setZone:!0});return{date:r.toFormat(s.mo,f()),time:r.toFormat(s.Uq.HMS_MS,f()),timeZoneOffset:r.offset.toString()}}function b(e,t){if(null==e||!(0,a.Et)(e)||isNaN(e))return c;const r=g(e,t);return r?{date:r.toFormat(s.mo,f(t)),time:r.toFormat(s.Fj,f(t))}:c}function T(e){switch(e.type){case"date":default:return(0,n.J2)("short-date-short-time");case"date-only":return(0,n.J2)("short-date");case"time-only":return(0,n.J2)("short-time");case"timestamp-offset":return{...(0,n.J2)("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function _(e,t,r){if(!e||null==t)return null;switch(e.type){case"date":return(0,n.Yq)(t,r);case"date-only":return(0,n.iS)(t,r);case"time-only":return(0,n.F8)(t,r);case"timestamp-offset":return(0,n.Ey)(t,r);default:return null}}function S(e){const{dateComponent:t,defaultTimeZone:r,timeComponent:i,timeZoneComponent:o,oldValue:n}=e;if(!t?.value)return null;const{year:a,month:p,day:d}=u.c9.fromFormat(t.value,s.mo),{hour:c,minute:m,second:h,millisecond:y}=O(i,l.n$)??u.c9.now(),v=w(n,r),f=o?.value?parseInt(o.value,10):null!=v.timeZoneOffset?parseInt(v.timeZoneOffset,10):(new Date).getTimezoneOffset(),g=u.mQ.instance(f),b=u.c9.fromObject({year:a,month:p,day:d,hour:c,minute:m,second:h,millisecond:y},{zone:g});return b.isValid?b.toISO({includeOffset:!0}):null}function M(e){const{dateComponent:t,timeComponent:r,timeZone:i,max:o,min:n,oldValue:s}=e,a=O(t,i);let l=!!e.applyRange;if(!a)return null;let p=null;if(null!=r?.value){const e=O(r,i),t=Date.now(),n=null!=o&&o<t?o:t,s=u.c9.fromMillis(n,f(i)),l=a||s,{year:d,month:c,day:m}=l,{hour:h,minute:y,second:v,millisecond:g}=e||s;p=l.set({year:d,month:c,day:m,hour:h,minute:y,second:v,millisecond:g})}else{const e=g(Z({value:s??Date.now(),max:o,min:n}),i),{year:t,month:r,day:u}=a,{hour:d,minute:c,second:m,millisecond:h}=e;l=!0,p=a.set({year:t,month:r,day:u,hour:d,minute:c,second:m,millisecond:h})}if(!p.isValid)return null;const d=p.toMillis();return l?Z({value:d,max:o,min:n}):d}function O(e,t){if(null==e?.value||Array.isArray(e.value))return null;let r=null;return r=v(e)?u.c9.fromFormat(e.value,s.mo,f(t)):(0,s.UE)(e.value),r?.isValid?r:null}function A(e){const{max:t,min:r,value:i}=e;return!isNaN(i)&&!(null!=t&&i>t)&&!(null!=r&&i<r)}function Z(e){const{max:t,min:r,value:i}=e;return null!=t&&null!=r?(0,o.qE)(i,r,t):null!=t&&i>t?t:null!=r&&i<r?r:i}function C(e){if(!e)return"";const t=e.split(".").at(0);if(!t||t.length<1)throw new i.default("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const r=t.split(":"),o=new Array(3);for(let i=0;i<3;i++){const e=r.at(i)??"";o[i]=e.padStart(2,"0")}return o.join(":")}function D(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return C(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function N(e){return!!e&&"object"==typeof e&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function j(e){const{type:t,range:r,value:i}=e;if(null==i||!r||i===r.min||i===r.max)return!0;if("date"===t)return A({value:i,min:r.min,max:r.max});const{rawMax:o,rawMin:n}=r;let a=null,l=null,u=null;switch(t){case"date-only":a=(0,s.Xi)(o),l=(0,s.Xi)(n),u=(0,s.Xi)(i);break;case"time-only":a=(0,s.UE)(o),l=(0,s.UE)(n),u=(0,s.UE)(i);break;case"timestamp-offset":a=(0,s.gz)(o),l=(0,s.gz)(n),u=(0,s.gz)(i)}return!u||A({value:u.valueOf(),min:l?.valueOf(),max:a?.valueOf()})}},54697:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var i,o=r(93800),n=r(85715),s=r(89129),a=r(19455),l=r(48602),u=r(80556),p=(r(21265),r(14746),r(47332)),d=r(14800),c=r(75269),m=r(15484),h=r(93321),y=r(98274),v=r(69265),f=r(87520),g=r(93074),w=r(25280),b=r(49705),T=r(65241);let _=i=class extends(n.A.ClonableMixin(a.A)){constructor(e){super(e),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.checksum=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(e){return(0,u.PZ)(i,e)}readAccumulateAttributes(e){return null==e?null:e.map((e=>g.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>g.et.toJSON(e))))}writePointBarriers(e,t,r){M(e,t,r)}writePolygonBarrier(e,t,r){M(e,t,r)}writePolylineBarrier(e,t,r){M(e,t,r)}readRestrictionAttributes(e){return null==e?null:e.map((e=>g.OC.fromJSON(e)))}writeRestrictionAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>g.OC.toJSON(e))))}readStartTime(e,t){const{startTime:r}=t;return null==r?null:"now"===r?"now":new Date(r)}writeStartTime(e,t){null!=e&&(t.startTime="now"===e?"now":e.getTime())}readStops(e,t){return function(e){return function(e){return e&&"type"in e}(e)?v.default.fromJSON(e):function(e){return e&&"url"in e}(e)?b.default.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?w.default.fromJSON(e):function(e){return e&&"features"in e}(e)?f.default.fromJSON(e):null}(t.stops)}writeStops(e,t,r){M(e,t,r)}};(0,o._)([(0,l.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],_.prototype,"accumulateAttributes",void 0),(0,o._)([(0,d.w)("accumulateAttributes")],_.prototype,"readAccumulateAttributes",null),(0,o._)([(0,m.K)("accumulateAttributes")],_.prototype,"writeAccumulateAttributes",null),(0,o._)([(0,l.MZ)(y.K)],_.prototype,"apiKey",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],_.prototype,"attributeParameterValues",void 0),(0,o._)([(0,l.MZ)({type:String,json:{write:!0}})],_.prototype,"checksum",void 0),(0,o._)([(0,l.MZ)({type:String,json:{write:!0}})],_.prototype,"directionsLanguage",void 0),(0,o._)([(0,p.e)(g.Z7)],_.prototype,"directionsLengthUnits",void 0),(0,o._)([(0,p.e)(g.aJ)],_.prototype,"directionsOutputType",void 0),(0,o._)([(0,p.e)(g.$n)],_.prototype,"directionsStyleName",void 0),(0,o._)([(0,p.e)(g.Mm,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],_.prototype,"directionsTimeAttribute",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"findBestSequence",void 0),(0,o._)([(0,l.MZ)({type:Number,json:{write:!0}})],_.prototype,"geometryPrecision",void 0),(0,o._)([(0,l.MZ)({type:Number,json:{write:!0}})],_.prototype,"geometryPrecisionM",void 0),(0,o._)([(0,l.MZ)({type:Number,json:{write:!0}})],_.prototype,"geometryPrecisionZ",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"ignoreInvalidLocations",void 0),(0,o._)([(0,p.e)(g.et,{name:"impedanceAttributeName",ignoreUnknown:!1})],_.prototype,"impedanceAttribute",void 0),(0,o._)([(0,l.MZ)({type:Number,json:{write:!0}})],_.prototype,"outputGeometryPrecision",void 0),(0,o._)([(0,p.e)(g.hY)],_.prototype,"outputGeometryPrecisionUnits",void 0),(0,o._)([(0,p.e)(g.Sr)],_.prototype,"outputLines",void 0),(0,o._)([(0,l.MZ)({type:h.default,json:{name:"outSR",write:!0}})],_.prototype,"outSpatialReference",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],_.prototype,"overrides",void 0),(0,o._)([(0,l.MZ)({json:{name:"barriers",write:!0}})],_.prototype,"pointBarriers",void 0),(0,o._)([(0,m.K)("pointBarriers")],_.prototype,"writePointBarriers",null),(0,o._)([(0,l.MZ)({json:{write:!0}})],_.prototype,"polygonBarriers",void 0),(0,o._)([(0,m.K)("polygonBarriers")],_.prototype,"writePolygonBarrier",null),(0,o._)([(0,l.MZ)({json:{write:!0}})],_.prototype,"polylineBarriers",void 0),(0,o._)([(0,m.K)("polylineBarriers")],_.prototype,"writePolylineBarrier",null),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"preserveFirstStop",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"preserveLastStop",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"preserveObjectID",void 0),(0,o._)([(0,l.MZ)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],_.prototype,"restrictionAttributes",void 0),(0,o._)([(0,d.w)("restrictionAttributes")],_.prototype,"readRestrictionAttributes",null),(0,o._)([(0,m.K)("restrictionAttributes")],_.prototype,"writeRestrictionAttributes",null),(0,o._)([(0,p.e)(g.hE)],_.prototype,"restrictUTurns",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnBarriers",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnDirections",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnPolygonBarriers",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnPolylineBarriers",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnRoutes",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnStops",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnTraversedEdges",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnTraversedJunctions",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnTraversedTurns",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"returnZ",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],_.prototype,"startTime",void 0),(0,o._)([(0,d.w)("startTime")],_.prototype,"readStartTime",null),(0,o._)([(0,m.K)("startTime")],_.prototype,"writeStartTime",null),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"startTimeIsUTC",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],_.prototype,"stops",void 0),(0,o._)([(0,d.w)("stops")],_.prototype,"readStops",null),(0,o._)([(0,m.K)("stops")],_.prototype,"writeStops",null),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"timeWindowsAreUTC",void 0),(0,o._)([(0,l.MZ)({type:T.default,json:{write:!0}})],_.prototype,"travelMode",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"useHierarchy",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"useTimeWindows",void 0),_=i=(0,o._)([(0,c.$)("esri.rest.support.RouteParameters")],_);const S=_;function M(e,t,r){null!=e&&(t[r]=s.default.isCollection(e)?{features:e.toArray().map((e=>e.toJSON()))}:e.toJSON())}},56702:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var i,o=r(93800),n=r(79625),s=r(35377),a=r(85715),l=r(19455),u=r(48602),p=(r(21265),r(50925),r(14746),r(14800)),d=r(75269),c=r(15484),m=r(75400),h=r(78307),y=r(93074),v=r(38602);let f=i=class extends(a.A.ClonableMixin(l.A)){constructor(e){super(e),this.arriveCurbApproach=null,this.arriveTime=null,this.arriveTimeOffset=null,this.bearing=null,this.bearingTol=null,this.cumulativeCosts=null,this.cumulativeDistance=null,this.cumulativeDuration=null,this.curbApproach=null,this.departCurbApproach=null,this.departTime=null,this.departTimeOffset=null,this.distanceToNetworkInMeters=null,this.geometry=null,this.lateDuration=null,this.locationType=null,this.name=null,this.navLatency=null,this.objectId=null,this.popupTemplate=null,this.posAlong=null,this.routeName=null,this.serviceCosts=null,this.serviceDistance=null,this.serviceDuration=null,this.sequence=null,this.sideOfEdge=null,this.snapX=null,this.snapY=null,this.snapZ=null,this.sourceId=null,this.sourceOid=null,this.status=null,this.symbol=null,this.timeWindowEnd=null,this.timeWindowEndOffset=null,this.timeWindowStart=null,this.timeWindowStartOffset=null,this.type="stop",this.violations=null,this.waitDuration=null,this.wait=null}readArriveTimeOffset(e,t){return(0,h.Zn)(t.attributes.ArriveTime,t.attributes.ArriveTimeUTC)}readCumulativeCosts(e,t){return(0,h.lh)(t.attributes,"Cumul_")}readDepartTimeOffset(e,t){return(0,h.Zn)(t.attributes.DepartTime,t.attributes.DepartTimeUTC)}readServiceCosts(e,t){return(0,h.lh)(t.attributes,"Attr_")}writeServiceCosts(e,t){(0,h.p3)(e,t,"Attr_")}writeTimeWindowEnd(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowEnd=e.getTime())}writeTimeWindowStart(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowStart=e.getTime())}readViolations(e,t){return(0,h.lh)(t.attributes,"Violation_")}readWait(e,t){return(0,h.lh)(t.attributes,"Wait_")}static fromGraphic(e){return new i({arriveCurbApproach:null!=e.attributes.ArrivalCurbApproach?y.JJ.fromJSON(e.attributes.ArrivalCurbApproach):null,arriveTime:null!=e.attributes.ArrivalTime?new Date(e.attributes.ArrivalTime):null,arriveTimeOffset:e.attributes.ArrivalUTCOffset,cumulativeCosts:null!=e.attributes.CumulativeCosts?(0,h.aZ)(JSON.parse(e.attributes.CumulativeCosts)):null,cumulativeDistance:e.attributes.CumulativeMeters??null,cumulativeDuration:e.attributes.CumulativeMinutes??null,curbApproach:null!=e.attributes.CurbApproach?y.JJ.fromJSON(e.attributes.CurbApproach):null,departCurbApproach:null!=e.attributes.DepartureCurbApproach?y.JJ.fromJSON(e.attributes.DepartureCurbApproach):null,departTime:null!=e.attributes.DepartureTime?new Date(e.attributes.DepartureTime):null,departTimeOffset:e.attributes.DepartureUTCOffset??null,geometry:e.geometry,lateDuration:e.attributes.LateMinutes??null,locationType:null!=e.attributes.LocationType?y.EM.fromJSON(e.attributes.LocationType):null,name:e.attributes.Name,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,routeName:e.attributes.RouteName,sequence:e.attributes.Sequence??null,serviceCosts:null!=e.attributes.ServiceCosts?(0,h.aZ)(JSON.parse(e.attributes.ServiceCosts)):null,serviceDistance:e.attributes.ServiceMeters??null,serviceDuration:e.attributes.ServiceMinutes??null,status:null!=e.attributes.Status?y.$r.fromJSON(e.attributes.Status):null,symbol:e.symbol,timeWindowEnd:null!=e.attributes.TimeWindowEnd?new Date(e.attributes.TimeWindowEnd):null,timeWindowEndOffset:e.attributes.TimeWindowEndUTCOffset??null,timeWindowStart:null!=e.attributes.TimeWindowStart?new Date(e.attributes.TimeWindowStart):null,timeWindowStartOffset:e.attributes.TimeWindowStartUTCOffset??null,waitDuration:e.attributes.WaitMinutes??null})}toGraphic(){const e={ObjectID:this.objectId,ArrivalCurbApproach:null!=this.arriveCurbApproach?y.JJ.toJSON(this.arriveCurbApproach):null,ArrivalTime:null!=this.arriveTime?this.arriveTime.getTime():null,ArrivalUTCOffset:this.arriveTimeOffset,CumulativeCosts:null!=this.cumulativeCosts?JSON.stringify((0,h.nA)(this.cumulativeCosts)):null,CumulativeMeters:this.cumulativeDistance,CumulativeMinutes:this.cumulativeDuration,CurbApproach:null!=this.curbApproach?y.JJ.toJSON(this.curbApproach):null,DepartureCurbApproach:null!=this.departCurbApproach?y.JJ.toJSON(this.departCurbApproach):null,DepartureTime:null!=this.departTime?this.departTime.getTime():null,DepartureUTCOffset:this.departTimeOffset,LateMinutes:this.lateDuration,LocationType:null!=this.locationType?y.EM.toJSON(this.locationType):null,Name:this.name,RouteName:this.routeName,Sequence:this.sequence,ServiceCosts:null!=this.serviceCosts?JSON.stringify((0,h.nA)(this.serviceCosts)):null,ServiceMeters:this.serviceDistance,ServiceMinutes:this.serviceDuration,Status:null!=this.status?y.$r.toJSON(this.status):null,TimeWindowEnd:null!=this.timeWindowEnd?this.timeWindowEnd.getTime():null,TimeWindowEndUTCOffset:this.timeWindowEndOffset??this.arriveTimeOffset,TimeWindowStart:null!=this.timeWindowStart?this.timeWindowStart.getTime():null,TimeWindowStartUTCOffset:this.timeWindowStartOffset??this.arriveTimeOffset,WaitMinutes:this.waitDuration};return new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};f.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"ArrivalCurbApproach",alias:"Arrival Curb Approach",type:"esriFieldTypeInteger"},{name:"ArrivalTime",alias:"Arrival Time",type:"esriFieldTypeDate"},{name:"ArrivalUTCOffset",alias:"Arrival Time",type:"esriFieldTypeInteger"},{name:"CumulativeCosts",alias:"Cumulative Costs",type:"esriFieldTypeString"},{name:"CumulativeMeters",alias:"Cumulative Meters",type:"esriFieldTypeDouble"},{name:"CumulativeMinutes",alias:"Cumulative Minutes",type:"esriFieldTypeDouble"},{name:"CurbApproach",alias:"Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureCurbApproach",alias:"Departure Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureTime",alias:"Departure Time",type:"esriFieldTypeDate"},{name:"DepartureUTCOffset",alias:"Departure Time",type:"esriFieldTypeInteger"},{name:"LateMinutes",alias:"Minutes Late",type:"esriFieldTypeDouble"},{name:"LocationType",alias:"Location Type",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"RouteName",alias:"Route Name",type:"esriFieldTypeString"},{name:"Sequence",alias:"Sequence",type:"esriFieldTypeInteger"},{name:"ServiceCosts",alias:"Service Costs",type:"esriFieldTypeString"},{name:"ServiceMeters",alias:"Service Meters",type:"esriFieldTypeDouble"},{name:"ServiceMinutes",alias:"Service Minutes",type:"esriFieldTypeDouble"},{name:"Status",alias:"Status",type:"esriFieldTypeInteger"},{name:"TimeWindowEnd",alias:"Time Window End",type:"esriFieldTypeDate"},{name:"TimeWindowEndUTCOffset",alias:"Time Window End Offset",type:"esriFieldTypeInteger"},{name:"TimeWindowStart",alias:"Time Window Start",type:"esriFieldTypeDate"},{name:"TimeWindowStartUTCOffset",alias:"Time Window Start Offset",type:"esriFieldTypeInteger"},{name:"WaitMinutes",alias:"Minutes Wait",type:"esriFieldTypeDouble"}],(0,o._)([(0,u.MZ)({type:y.JJ.apiValues,json:{read:{source:"attributes.ArrivalCurbApproach",reader:y.JJ.read}}})],f.prototype,"arriveCurbApproach",void 0),(0,o._)([(0,u.MZ)({type:Date,json:{read:{source:"attributes.ArriveTimeUTC"}}})],f.prototype,"arriveTime",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"arriveTimeOffset",void 0),(0,o._)([(0,p.w)("arriveTimeOffset",["attributes.ArriveTime","attributes.ArriveTimeUTC"])],f.prototype,"readArriveTimeOffset",null),(0,o._)([(0,u.MZ)({json:{name:"attributes.Bearing",read:!1,write:!0}})],f.prototype,"bearing",void 0),(0,o._)([(0,u.MZ)({json:{name:"attributes.BearingTol",read:!1,write:!0}})],f.prototype,"bearingTol",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"cumulativeCosts",void 0),(0,o._)([(0,p.w)("cumulativeCosts",["attributes"])],f.prototype,"readCumulativeCosts",null),(0,o._)([(0,u.MZ)()],f.prototype,"cumulativeDistance",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"cumulativeDuration",void 0),(0,o._)([(0,u.MZ)({type:y.JJ.apiValues,json:{name:"attributes.CurbApproach",read:{reader:y.JJ.read},write:{writer:y.JJ.write}}})],f.prototype,"curbApproach",void 0),(0,o._)([(0,u.MZ)({type:y.JJ.apiValues,json:{read:{source:"attributes.DepartCurbApproach",reader:y.JJ.read}}})],f.prototype,"departCurbApproach",void 0),(0,o._)([(0,u.MZ)({type:Date,json:{read:{source:"attributes.DepartTimeUTC"}}})],f.prototype,"departTime",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"departTimeOffset",void 0),(0,o._)([(0,p.w)("departTimeOffset",["attributes.DepartTime","attributes.DepartTimeUTC"])],f.prototype,"readDepartTimeOffset",null),(0,o._)([(0,u.MZ)({json:{read:{source:"attributes.DistanceToNetworkInMeters"}}})],f.prototype,"distanceToNetworkInMeters",void 0),(0,o._)([(0,u.MZ)({type:m.default,json:{write:!0}})],f.prototype,"geometry",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"lateDuration",void 0),(0,o._)([(0,u.MZ)({type:y.EM.apiValues,json:{name:"attributes.LocationType",read:{reader:y.EM.read},write:{writer:y.EM.write}}})],f.prototype,"locationType",void 0),(0,o._)([(0,u.MZ)({json:{name:"attributes.Name"}})],f.prototype,"name",void 0),(0,o._)([(0,u.MZ)({json:{name:"attributes.NavLatency",read:!1,write:!0}})],f.prototype,"navLatency",void 0),(0,o._)([(0,u.MZ)({json:{name:"attributes.ObjectID"}})],f.prototype,"objectId",void 0),(0,o._)([(0,u.MZ)({type:s.default})],f.prototype,"popupTemplate",void 0),(0,o._)([(0,u.MZ)({json:{read:{source:"attributes.PosAlong"}}})],f.prototype,"posAlong",void 0),(0,o._)([(0,u.MZ)({json:{name:"attributes.RouteName"}})],f.prototype,"routeName",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"serviceCosts",void 0),(0,o._)([(0,p.w)("serviceCosts",["attributes"])],f.prototype,"readServiceCosts",null),(0,o._)([(0,c.K)("serviceCosts")],f.prototype,"writeServiceCosts",null),(0,o._)([(0,u.MZ)()],f.prototype,"serviceDistance",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"serviceDuration",void 0),(0,o._)([(0,u.MZ)({json:{name:"attributes.Sequence"}})],f.prototype,"sequence",void 0),(0,o._)([(0,u.MZ)({type:y.mt.apiValues,json:{read:{source:"attributes.SideOfEdge",reader:y.mt.read}}})],f.prototype,"sideOfEdge",void 0),(0,o._)([(0,u.MZ)({json:{read:{source:"attributes.SnapX"}}})],f.prototype,"snapX",void 0),(0,o._)([(0,u.MZ)({json:{read:{source:"attributes.SnapY"}}})],f.prototype,"snapY",void 0),(0,o._)([(0,u.MZ)({json:{read:{source:"attributes.SnapZ"}}})],f.prototype,"snapZ",void 0),(0,o._)([(0,u.MZ)({json:{read:{source:"attributes.SourceID"}}})],f.prototype,"sourceId",void 0),(0,o._)([(0,u.MZ)({json:{read:{source:"attributes.SourceOID"}}})],f.prototype,"sourceOid",void 0),(0,o._)([(0,u.MZ)({type:y.$r.apiValues,json:{read:{source:"attributes.Status",reader:y.$r.read}}})],f.prototype,"status",void 0),(0,o._)([(0,u.MZ)({types:v.Es})],f.prototype,"symbol",void 0),(0,o._)([(0,u.MZ)({type:Date,json:{name:"attributes.TimeWindowEnd"}})],f.prototype,"timeWindowEnd",void 0),(0,o._)([(0,c.K)("timeWindowEnd")],f.prototype,"writeTimeWindowEnd",null),(0,o._)([(0,u.MZ)()],f.prototype,"timeWindowEndOffset",void 0),(0,o._)([(0,u.MZ)({type:Date,json:{name:"attributes.TimeWindowStart"}})],f.prototype,"timeWindowStart",void 0),(0,o._)([(0,c.K)("timeWindowStart")],f.prototype,"writeTimeWindowStart",null),(0,o._)([(0,u.MZ)()],f.prototype,"timeWindowStartOffset",void 0),(0,o._)([(0,u.MZ)({readOnly:!0,json:{read:!1}})],f.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"violations",void 0),(0,o._)([(0,p.w)("violations",["attributes"])],f.prototype,"readViolations",null),(0,o._)([(0,u.MZ)()],f.prototype,"waitDuration",void 0),(0,o._)([(0,u.MZ)()],f.prototype,"wait",void 0),(0,o._)([(0,p.w)("wait",["attributes"])],f.prototype,"readWait",null),f=i=(0,o._)([(0,d.$)("esri.rest.support.Stop")],f);const g=f},69265:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var i=r(93800),o=r(85715),n=r(19455),s=r(48602),a=(r(21265),r(50925),r(14746),r(47332)),l=r(75269),u=r(78629),p=r(54723),d=r(93074);let c=class extends(o.A.ClonableMixin(n.A)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,s.MZ)({types:p.yR,json:{read:u.fromJSON,write:!0}})],c.prototype,"geometry",void 0),(0,i._)([(0,a.e)(d.Vj)],c.prototype,"geometryType",void 0),(0,i._)([(0,s.MZ)({type:String,json:{name:"layerName",write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,a.e)(d.vS,{name:"spatialRel"})],c.prototype,"spatialRelationship",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"type",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"where",void 0),c=(0,i._)([(0,l.$)("esri.rest.support.DataLayer")],c);const m=c},69985:(e,t,r)=>{r.d(t,{BO:()=>u,RU:()=>d,a3:()=>p,jW:()=>a});var i=r(92143),o=r(6579),n=r(23224);const s=new Map([["arrive","route-to"],["bear-left","bear-left"],["bear-right","bear-right"],["boundary-crossing","blank"],["central-fork","fork-middle"],["clockwise-roundabout","round-about-right"],["counter-clockwise-roundabout","round-about"],["depart","route-from"],["door","walk-through-door"],["down-elevator","elevator-down"],["down-escalator","escalator-down"],["down-stairs","stairs-down"],["elevator","elevator"],["escalator","escalator"],["general-event","information"],["header","blank"],["landmark","map-pin"],["lane","blank"],["left-fork","fork-left"],["left-handed-u-turn","u-turn"],["left-ramp","ramp-left"],["left-turn","left"],["left-turn-and-immediate-left-turn","left-left"],["left-turn-and-immediate-right-turn","left-right"],["off-ferry","disembark"],["on-ferry","embark"],["pedestrian-ramp","take-pedestrian-ramp"],["restriction-violation","exclamation-mark-triangle"],["right-fork","fork-right"],["right-handed-u-turn","u-turn-right"],["right-ramp","ramp-right"],["right-turn","right"],["right-turn-and-immediate-left-turn","right-left"],["right-turn-and-immediate-right-turn","right-right"],["roundabout","round-about"],["scaled-cost-barrier-event","blank"],["sharp-left","sharp-left"],["sharp-right","sharp-right"],["stairs","stairs"],["straight","straight"],["time-zone-change","clock"],["traffic-event","exclamation-mark-triangle"],["u-turn","u-turn"],["up-elevator","elevator-up"],["up-escalator","escalator-up"],["up-stairs","stairs-up"]]);var a;function l(e,t){return(0,n.ZV)(e,{style:"unit",unit:t,unitDisplay:"short"})}function u(e,t,r){if(0===t)return"";let n,s,a=0;const l=(0,i.d_)(t,"meters");switch(r){case"metric":l.value<.01?({value:n,unit:s}=(0,i.kM)(l,"millimeters")):l.value<1?({value:n,unit:s}=(0,i.kM)(l,"centimeters")):l.value<1e3?({value:n,unit:s}=(0,i.kM)(l,"meters")):l.value<1e5?(({value:n,unit:s}=(0,i.kM)(l,"kilometers")),a=1):({value:n,unit:s}=(0,i.kM)(l,"kilometers"));break;case"imperial":l.value<.254?({value:n,unit:s}=(0,i.kM)(l,"inches")):l.value<160.9344?({value:n,unit:s}=(0,i.kM)(l,"feet")):l.value<160934.4?(({value:n,unit:s}=(0,i.kM)(l,"miles")),a=1):({value:n,unit:s}=(0,i.kM)(l,"miles"));break;default:({value:n,unit:s}=(0,i.kM)(l,r)),a=2}return(0,o.zJ)(e,n,s,a)}function p(e){if(0===e)return"";if(e<1)return l(Math.floor(60*e),"second");if(e<60)return l(Math.floor(e),"minute");const t=Math.floor(e/60);if(e<1440){const r=Math.floor(e%60);return 0===r?`${l(t,"hour")}`:`${l(t,"hour")} ${l(r,"minute")}`}return l(t,"hour")}function d(e){return null!=e&&s.has(e)?s.get(e):"blank"}!function(e){e.NOW="now",e.DEPART_AT="depart-at",e.UNSPECIFIED="unspecified"}(a||(a={}))},76614:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var i,o=r(93800),n=r(89129),s=r(74719),a=r(58448),l=r(50925),u=r(49959),p=r(79953),d=r(48602),c=(r(21265),r(14746),r(75269)),m=r(66845),h=r(12711),y=r(70363),v=r(54697),f=r(56702),g=r(65241),w=r(72520),b=r(73210),T=r(40731),_=r(69985),S=r(53826),M=r(30920),O=r(51536);function A(e){return"no"===e||"nb"===e}function Z(e,t){return e===t||A(e)&&A(t)}!function(e){e[e.Active=0]="Active",e[e.Complete=1]="Complete",e[e.Failed=2]="Failed",e[e.Idle=3]="Idle",e[e.Suspended=4]="Suspended"}(i||(i={}));let C=class extends((0,M.A)(a.A.EventedAccessor)){constructor(e){super(e),this._debouncedSolveHandler=(0,u.debounce)((async e=>{switch(e.type){case"create":if("complete"!==e.state)return;break;case"delete":break;case"update":switch(e.state){case"start":return void(this._networkFeatureUpdated=!1);case"active":return void(this._networkFeatureUpdated=!0);case"complete":if(!this._networkFeatureUpdated)return}}if(!((this.layer?.stops.filter((e=>{let{geometry:t}=e;return!!t})).length??0)<2)&&this.autoSolve)try{await this.getDirections({zoomToSolvedRoute:!1})}catch(t){l.A.getLogger(this).error(t)}})),this._highlight=null,this._loadController=null,this._loadPromise=null,this._networkFeatureUpdated=!1,this._layerView=null,this._routeController=null,this._serviceDescriptionStatus=i.Idle,this.apiKey=void 0,this.autoSolve=!0,this.defaultTravelMode=null,this.departureIsoDate=void 0,this.departureIsoTime=void 0,this.departureOption=_.jW.NOW,this.departureTime="now",this.lastError=null,this.lastRoute=null,this.layer=null,this.maxStops=50,this.routeParameters=new v.default({directionsLengthUnits:"kilometers",findBestSequence:!1,preserveFirstStop:!0,preserveLastStop:!0,returnZ:!0,useTimeWindows:!1}),this.serviceDescription=null,this.view=null}initialize(){this.addHandles([(0,p.watch)((()=>this.layer),(e=>{if(null!=e){for(;e.stops.length<2;)e.stops.add(new f.default);this._set("defaultTravelMode",null),this.addHandles((0,p.when)((()=>this.serviceDescription?e.routeInfo?.analysisSettings?.travelMode:null),(e=>{this.defaultTravelMode=this._resolveDefaultTravelMode(e)}),{once:!0}))}}),p.syncAndInitial),(0,p.watch)((()=>[this.layer,this.view]),(async()=>{this._layerView=await this._getRouteLayerView()}),p.syncAndInitial),(0,p.on)((()=>this._layerView),["create","delete","update"],(e=>{this._debouncedSolveHandler(e).catch((e=>{if(!(0,u.isAbortError)(e))throw e}))}))]);const e=(0,m.wj)(this.view?.timeZone??b.qU),t=O.c9.fromMillis(Date.now());this.departureIsoDate=t.toFormat(w.mo,(0,S.OM)(e)),this.departureIsoTime=t.toFormat(w.Fj,(0,S.OM)(e))}get _directionsLanguage(){const e=this.serviceDescription?.directionsSupportedLanguages;if(!e)return;const t=this.routeParameters.directionsLanguage??(0,h.JK)(),r=(0,h.ZS)(t),i=r?.language,o=r?.region;return i?function(e,t){return e.find((e=>{let{parts:r}=e;return Z(r.language,t.language)&&r.region===t.region}))?.locale??e.find((e=>{let{parts:r}=e;return Z(r.language,t.language)}))?.locale}(function(e){return e.map((e=>({locale:e,parts:(0,h.ZS)(e)}))).filter((e=>{let{parts:t}=e;return!!t}))}(e),{language:i,region:o}):void 0}get formattedEta(){const e=this.layer?.routeInfo?.endTime,t=this.layer?.routeInfo?.endTimeOffset;if(this.departureOption===_.jW.UNSPECIFIED||!e||!t)return null;const r=O.c9.fromJSDate(e,{zone:O.mQ.instance(t)}),i=O.c9.fromJSDate(e,{zone:O.oh.create((0,m.wj)(this.view?.timeZone??b.qU))}),o=O.c9.fromJSDate(new Date,{zone:O.oh.create((0,m.wj)(this.view?.timeZone??b.qU))}),n=o.year===i.year&&o.month===i.month&&o.day===i.day,s=i.offset===t?void 0:T.dS,a=n?void 0:(0,m.J2)("short-date"),l=(0,m.J2)("short-time");return(0,m.Ey)(r.toISO(),{...a,...l,timeZoneName:s})}get impedanceAttribute(){const e=this.routeParameters.travelMode?.impedanceAttributeName??this.routeParameters.impedanceAttribute??this.serviceDescription?.impedance??null;return this.getCostAttribute(e)}get selectedNetworkFeatures(){return this._layerView?.selectedNetworkFeatures??null}get selectedTravelMode(){return this.serviceDescription?this.defaultTravelMode??this.serviceDescription.defaultTravelMode??this.serviceDescription.supportedTravelModes?.[0]??null:null}set selectedTravelMode(e){this._override("selectedTravelMode",e)}get state(){if(this._routeController)return"routing";if(this.lastError)return"error";switch(this._serviceDescriptionStatus){case i.Suspended:return"unauthenticated";case i.Idle:return"disabled";case i.Active:return"initializing";case i.Failed:return"error";default:return"ready"}}get timeAttribute(){const e=this.routeParameters.travelMode?.timeAttributeName??this.routeParameters.directionsTimeAttribute??this.serviceDescription?.directionsTimeAttribute??null;return this.getCostAttribute(e)}get travelModes(){const e=this.serviceDescription?.supportedTravelModes?.slice()??[];return null==this.defaultTravelMode||e.includes(this.defaultTravelMode)||e.unshift(this.defaultTravelMode),e}async load(){if(this._loadPromise)return this._loadPromise;this._loadPromise=this._load(),await this._loadPromise,this._loadPromise=null}async highlight(e){if(this.clearHighlights(),!this.view||!this.layer)return;const t=await this.view.whenLayerView(this.layer);this._highlight=t.highlight(e)}clearHighlights(){null!=this._highlight&&(this._highlight.remove(),this._highlight=null)}centerAt(e){if(!this.view)return;const t=function(e){return"esri.rest.support.Stop"===e?.declaredClass}(e)||function(e){return"esri.Graphic"===e?.declaredClass}(e)?e.geometry:e;t&&this.callGoTo({target:t})}clearResults(){this._set("lastRoute",null),this.layer?.removeResult()}async create(e){await(this._layerView?.create(e))}async getDirections(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{zoomToSolvedRoute:!0};const{apiKey:t,layer:r,state:o}=this;if(!r)throw new s.default("directions-view-model:missing-route-layer","A route layer must be associated with the view model.");if("unauthenticated"===o||"initializing"===o||"disabled"===o||this._serviceDescriptionStatus===i.Failed)throw new s.default("directions-view-model:not-loaded","Cannot get directions until view model loads.");null!=this._routeController&&(this._routeController.abort(),this._routeController=null);const{startTime:n,startTimeIsUTC:a}=this._getStartTimeParameters(),l=this.view?.spatialReference??null,p=this.routeParameters.clone();if(p.set({apiKey:t,directionsLanguage:this._directionsLanguage,outSpatialReference:l,startTime:n,startTimeIsUTC:a}),this.selectedTravelMode&&(p.travelMode=this.selectedTravelMode),r.stops.filter((e=>{let{geometry:t}=e;return null!=t})).length<2){const e=new s.default("directions-view-model:not-enough-stops","Not enough stops for routing");throw this._set("lastError",e),e}this._routeController=new AbortController;const{signal:d}=this._routeController;let c=null;try{c=await r.solve(p,{signal:d})}catch(m){if(!(0,u.isAbortError)(m)){const e=new s.default("directions-view-model:unable-to-route","Unable to route to these addresses",{error:m});throw this._set("lastError",e),this.clearResults(),e}}finally{this._routeController=null}this._set("lastError",null);for(const i of c.stops)null==i.geometry&&(i.name=null);return r.update(c),this._set("lastRoute",c),e.zoomToSolvedRoute&&this.zoomToRoute(),c}getCostAttribute(e){return(this.serviceDescription?.networkDataset?.networkAttributes??[]).find((t=>{let{name:r,usageType:i}=t;return r===e&&"cost"===i}))??null}remove(e){this._layerView?.remove(e)}reset(){this.clearHighlights(),this.clearResults(),null!=this.layer&&(this.layer.removeAll(),this.layer.stops=new n.default([new f.default,new f.default]))}save(){if(!this.layer)throw new s.default("directions-view-model:missing-layer","save() requires a layer");return this.layer.save()}saveAs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.layer)throw new s.default("directions-view-model:missing-layer","saveAs() requires a layer");return this.layer.saveAs(e,t)}async startEditing(){this._layerView&&(this._layerView.interactive=!0)}async stopEditing(){this._layerView&&(this._layerView.interactive=!1)}updateDepartureTime(){if(this.departureIsoDate&&this.departureIsoTime)switch(this.departureOption){case _.jW.NOW:this.departureTime="now";break;case _.jW.DEPART_AT:{const e=O.c9.fromISO(`${this.departureIsoDate}T${this.departureIsoTime}`,{zone:O.mQ.instance(0)});this.departureTime=e.toJSDate();break}case _.jW.UNSPECIFIED:this.departureTime=null}}zoomToRoute(){const{view:e,layer:t}=this,r=t?.routeInfo?.geometry?.extent;if(!e||!r)return;const i=r.width>r.height,o=r.clone().expand(i?2:1);this.callGoTo({target:o})}async _getRouteLayerView(){return this.view&&this.layer?this.view.whenLayerView(this.layer):null}_getStartTimeParameters(){return"now"===this.departureTime?{startTime:this.serviceDescription?.capabilities.supportsNow?"now":new Date,startTimeIsUTC:!0}:null==this.departureTime?{startTime:void 0,startTimeIsUTC:void 0}:{startTime:this.departureTime,startTimeIsUTC:!1}}async _load(){if(null==this.layer)return;null!=this._loadController&&(this._loadController.abort(),this._loadController=null),this._loadController=new AbortController;const{signal:e}=this._loadController;try{this._serviceDescriptionStatus=i.Active;const t=await(0,y.fetchServiceDescription)(this.layer.url,this.apiKey,{signal:e});this._set("serviceDescription",t),this._serviceDescriptionStatus=i.Complete}catch(t){if((0,u.isAbortError)(t))return void(this._serviceDescriptionStatus=i.Idle);if("identity-manager:user-aborted"===t.name)return void(this._serviceDescriptionStatus=i.Suspended);const e=new s.default("directions-view-model:service-metadata-unavailable","Cannot load route service metadata",{error:t});throw this._serviceDescriptionStatus=i.Failed,this._set("lastError",e),e}finally{this._loadController=null}}_resolveDefaultTravelMode(e){if(null==this.serviceDescription)return null;const{defaultTravelMode:t,supportedTravelModes:r}=this.serviceDescription,i=/^<(?<name>.*)>$/i.exec(e.name)?.groups?.name;if(i){const o=r?.find((e=>{let{name:t}=e;return t.toLocaleLowerCase()===i.trim().toLocaleLowerCase()})),n=o??t;return g.default.fromJSON({...n?.toJSON(),...e.toJSON()})}const o=r?.find((t=>{let{name:r}=t;return r.toLocaleLowerCase()===e.name.toLocaleLowerCase()}));return o??t}};(0,o._)([(0,d.MZ)()],C.prototype,"_directionsLanguage",null),(0,o._)([(0,d.MZ)()],C.prototype,"_layerView",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"_routeController",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"_serviceDescriptionStatus",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"apiKey",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"autoSolve",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"defaultTravelMode",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"departureTime",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"formattedEta",null),(0,o._)([(0,d.MZ)({readOnly:!0})],C.prototype,"impedanceAttribute",null),(0,o._)([(0,d.MZ)()],C.prototype,"lastError",void 0),(0,o._)([(0,d.MZ)({readOnly:!0})],C.prototype,"lastRoute",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"layer",void 0),(0,o._)([(0,d.MZ)({type:Number,range:{min:2,max:50},nonNullable:!0})],C.prototype,"maxStops",void 0),(0,o._)([(0,d.MZ)({type:v.default,nonNullable:!0})],C.prototype,"routeParameters",void 0),(0,o._)([(0,d.MZ)({readOnly:!0})],C.prototype,"selectedNetworkFeatures",null),(0,o._)([(0,d.MZ)({type:g.default})],C.prototype,"selectedTravelMode",null),(0,o._)([(0,d.MZ)({readOnly:!0})],C.prototype,"serviceDescription",void 0),(0,o._)([(0,d.MZ)({readOnly:!0})],C.prototype,"state",null),(0,o._)([(0,d.MZ)({readOnly:!0})],C.prototype,"timeAttribute",null),(0,o._)([(0,d.MZ)()],C.prototype,"travelModes",null),(0,o._)([(0,d.MZ)()],C.prototype,"view",void 0),(0,o._)([(0,d.MZ)()],C.prototype,"zoomToRoute",null),C=(0,o._)([(0,c.$)("esri.widgets.Directions.DirectionsViewModel")],C);const D=C},78307:(e,t,r)=>{r.d(t,{Zn:()=>l,_s:()=>d,aZ:()=>s,lh:()=>o,nA:()=>a,o9:()=>p,p3:()=>n,r9:()=>u});var i=r(93074);function o(e,t){if(null==e)return null;const r={},o=new RegExp(`^${t}`,"i");for(const n of Object.keys(e))if(o.test(n)){const o=n.slice(t.length);r[i.et.fromJSON(o)]=e[n]}return r}function n(e,t,r){if(null!=e){t.attributes||(t.attributes={});for(const o in e){const n=i.et.toJSON(o);t.attributes[`${r}${n}`]=e[o]}}}function s(e){const t={};for(const r of Object.keys(e)){const o=r;t[i.et.fromJSON(o)]=e[r]}return t}function a(e){const t={};for(const r of Object.keys(e)){const o=r;t[i.et.toJSON(o)]=e[r]}return t}function l(e,t){return null==e||null==t?null:Math.round((e-t)/6e4)}function u(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.stops&&=JSON.stringify(t.stops),r.travelMode&&=JSON.stringify(t.travelMode),r}function p(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.facilities&&=JSON.stringify(t.facilities),r.incidents&&=JSON.stringify(t.incidents),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.travelMode&&=JSON.stringify(t.travelMode),r}function d(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.defaultBreaks&&=t.defaultBreaks?.join(),r.excludeSourcesFromPolygons&&=t.excludeSourcesFromPolygons?.join(),r.facilities&&=JSON.stringify(t.facilities),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.travelMode&&=JSON.stringify(t.travelMode),r}},87436:(e,t,r)=>{var i;r.d(t,{u:()=>i}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(i||(i={}))},92143:(e,t,r)=>{r.d(t,{IV:()=>y,LF:()=>o,T9:()=>p,Wq:()=>a,d_:()=>n,g2:()=>c,gT:()=>s,hs:()=>d,iT:()=>h,kM:()=>l,l3:()=>u,n0:()=>v,r7:()=>m});var i=r(84190);function o(e){return{value:e}}function n(e,t){return{type:(0,i.t$)(t),value:e,unit:t}}function s(e,t){return{type:(0,i.t$)(t),value:e,unit:t}}function a(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,i.t$)(t),value:e,unit:t,rotationType:r}}function l(e,t){const r=u(e,t);return"angle"===e.type?a(r,t,e.rotationType):function(e,t){return{type:(0,i.t$)(t),value:e,unit:t}}(r,t)}function u(e,t){return(0,i.oU)(e.value,e.unit,t)}function p(e,t){return null==e?t:null==t||e.value>(0,i.oU)(t.value,t.unit,e.unit)?e:t}function d(e,t){return null==e?null:{...e,value:e.value*t}}function c(e,t,r){if(t===r)return e;switch(r){case"arithmetic":case"geographic":return 90-e}}const m=n(0,"meters"),h=s(0,"square-meters"),y=(a(0,"radians"),a(0,"degrees")),v=a(0,"degrees","geographic")}}]);