"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[7848,74549,76455],{1277:(e,t,n)=>{n.d(t,{C:()=>c,Cr:()=>g,H6:()=>b,LV:()=>u,_I:()=>h,dz:()=>y,fA:()=>d,kb:()=>p,ld:()=>v,sd:()=>f,vt:()=>l});var r=n(64682),i=n(32636),s=n(89227),o=n(28473),a=n(1696);function l(e){return e?{origin:(0,o.o8)(e.origin),vector:(0,o.o8)(e.vector)}:{origin:(0,o.vt)(),vector:(0,o.vt)()}}function u(e,t){const n=I.get();return n.origin=e,n.vector=t,n}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return d(e.origin,e.vector,t)}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,s.c)(n.origin,e),(0,s.c)(n.vector,t),n}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,s.c)(n.origin,e),(0,s.d)(n.vector,t,e),n}function p(e,t){const n=(0,s.d)(a.rq.get(),t,e.origin),i=(0,s.f)(e.vector,n),o=(0,s.f)(e.vector,e.vector),l=(0,r.qE)(i/o,0,1),u=(0,s.d)(a.rq.get(),(0,s.h)(a.rq.get(),e.vector,l),n);return(0,s.f)(u,u)}function h(e,t,n){return b(e,t,0,1,n)}function f(e,t,n){return(0,s.g)(n,e.origin,(0,s.h)(n,e.vector,t))}function b(e,t,n,i,o){const{vector:l,origin:u}=e,c=(0,s.d)(a.rq.get(),t,u),d=(0,s.f)(l,c)/(0,s.k)(l);return(0,s.h)(o,l,(0,r.qE)(d,n,i)),(0,s.g)(o,o,e.origin)}function y(e,t){if(m(e,u(t.origin,t.direction),!1,w)){const{tA:t,pB:n,distance2:r}=w;if(t>=0&&t<=1)return r;if(t<0)return(0,s.s)(e.origin,n);if(t>1)return(0,s.s)((0,s.g)(a.rq.get(),e.origin,e.vector),n)}return null}function v(e,t,n){return!!m(e,t,!0,w)&&((0,s.c)(n,w.pA),!0)}function m(e,t,n,i){const o=1e-6,l=e.origin,u=(0,s.g)(a.rq.get(),l,e.vector),c=t.origin,d=(0,s.g)(a.rq.get(),c,t.vector),g=a.rq.get(),p=a.rq.get();if(g[0]=l[0]-c[0],g[1]=l[1]-c[1],g[2]=l[2]-c[2],p[0]=d[0]-c[0],p[1]=d[1]-c[1],p[2]=d[2]-c[2],Math.abs(p[0])<o&&Math.abs(p[1])<o&&Math.abs(p[2])<o)return!1;const h=a.rq.get();if(h[0]=u[0]-l[0],h[1]=u[1]-l[1],h[2]=u[2]-l[2],Math.abs(h[0])<o&&Math.abs(h[1])<o&&Math.abs(h[2])<o)return!1;const f=g[0]*p[0]+g[1]*p[1]+g[2]*p[2],b=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],y=g[0]*h[0]+g[1]*h[1]+g[2]*h[2],v=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],m=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*v-b*b;if(Math.abs(m)<o)return!1;let w=(f*b-y*v)/m,I=(f+b*w)/v;n&&(w=(0,r.qE)(w,0,1),I=(0,r.qE)(I,0,1));const M=a.rq.get(),_=a.rq.get();return M[0]=l[0]+w*h[0],M[1]=l[1]+w*h[1],M[2]=l[2]+w*h[2],_[0]=c[0]+I*p[0],_[1]=c[1]+I*p[1],_[2]=c[2]+I*p[2],i.tA=w,i.tB=I,i.pA=M,i.pB=_,i.distance2=(0,s.s)(M,_),!0}const w={tA:0,tB:0,pA:(0,o.vt)(),pB:(0,o.vt)(),distance2:0},I=new i.I((()=>l()))},8455:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(93800),i=n(38432),s=n(86925),o=n(89129),a=n(40736),l=n(5839),u=n(64682),c=n(79953),d=n(48602),g=(n(21265),n(50925),n(14746),n(75269)),p=n(12560),h=n(96913);const f=o.default.ofType(s.default);let b=class extends i.A{constructor(e){super(e),this.type="viewshed",this._extent=null}initialize(){this.addHandles((0,c.watch)((()=>this._computeExtent()),(e=>{null==e.pending&&(this._extent=e.extent)}),c.syncAndInitial))}get viewsheds(){return this._get("viewsheds")||new f}set viewsheds(e){this._set("viewsheds",(0,a.V)(e,this.viewsheds,f))}get spatialReference(){for(const e of this.viewsheds)if(null!=e.observer)return e.observer.spatialReference;return null}get extent(){return this._extent}get requiredPropertiesForEditing(){return this.viewsheds.items.map((e=>{let{observer:t}=e;return t}))}async waitComputeExtent(){const e=this._computeExtent();null!=e.pending&&await e.pending}_computeExtent(){const{spatialReference:e}=this;if(null==e)return{pending:null,extent:null};const t=this.viewsheds.filter((e=>null!=e.observer)),n=t.map((e=>e.observer)).toArray(),r=(0,h.projectOrLoadMany)(n,e);return null!=r.pending?{pending:r.pending,extent:null}:{pending:null,extent:r.geometries.map(((e,n)=>{const r=t.at(n);return null!=e&&null!=r?this._computeViewshedExtent(this.viewsheds.at(n),e):null})).filter((e=>null!=e)).reduce(((e,t)=>function(e,t){return null==e?t:null==t?e:e.union(t)}(e,t)),null)}}_computeViewshedExtent(e,t){const{farDistance:n,heading:r,tilt:i,horizontalFieldOfView:s,verticalFieldOfView:o}=e,{spatialReference:a}=t,c=s/2,d=o/2,g=n/a.metersPerUnit,h=[l.ie.normalize(r-c),r,l.ie.normalize(r+c)],f=p.default.fromPoint(t),b=e=>{const t=h.map((t=>l.ie.normalize(t-e)));if(t[0]>t[2]||360===s)return g;const n=t.map((e=>Math.abs(e>180?360-e:e))).reduce(((e,t)=>e>t?t:e));return n>90?0:g*Math.cos((0,u.kU)(n))};f.xmax+=b(90),f.xmin-=b(-90),f.ymax+=b(0),f.ymin-=b(180);const m=t.z;if(null!=m){let e=m,t=m;const r=i-90,s=(0,u.qE)(r+d,-90,90),o=(0,u.qE)(r-d,-90,90),l=a?.isGeographic?n:g;e+=l*v(s),t+=l*v(o);const p=y(d)*l,h=v(r)*p*(1-y(c));i<90&&(e-=h),i>90&&(t-=h),f.zmax=Math.max(e,m),f.zmin=Math.min(t,m)}return f}clear(){this.viewsheds.removeAll()}};function y(e){return Math.cos((0,u.kU)(e))}function v(e){return Math.sin((0,u.kU)(e))}(0,r._)([(0,d.MZ)({type:["viewshed"]})],b.prototype,"type",void 0),(0,r._)([(0,d.MZ)({cast:a.H,type:f,nonNullable:!0})],b.prototype,"viewsheds",null),(0,r._)([(0,d.MZ)({readOnly:!0})],b.prototype,"spatialReference",null),(0,r._)([(0,d.MZ)()],b.prototype,"_extent",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],b.prototype,"extent",null),(0,r._)([(0,d.MZ)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),b=(0,r._)([(0,g.$)("esri.analysis.ViewshedAnalysis")],b);const m=b},10323:(e,t,n)=>{n.d(t,{Aw:()=>u,Jb:()=>l,Q5:()=>g,W3:()=>p,d:()=>o,db:()=>d,kV:()=>c,rb:()=>a});var r=n(92453),i=n(15828),s=n(27464);class o extends i.R6{constructor(e,t,n,r){super(t,n),this.point=e,this.createGraphic=r}}function a(e){return(0,s.i3)(e)&&e.intersector===r.dz.PCL&&!!e.target}class l extends i.HE{constructor(e,t,n,r,i){super(e),this.layerUid=e,this.sublayerUid=t,this.nodeIndex=n,this.componentIndex=r,this.triangleNr=i}}class u extends i.R6{constructor(e,t,n){super(t,null),this.point=e,this.createVoxelGraphic=n}}class c extends i.R6{constructor(e,t){super(e,null),this.createTiles3DGraphic=t}}function d(e){return(0,s.i3)(e)&&e.intersector===r.dz.I3S&&!!e.target}function g(e){return(0,s.i3)(e)&&e.intersector===r.dz.VOXEL&&!!e.target}function p(e){return(0,s.i3)(e)&&e.intersector===r.dz.TILES3D&&!!e.target}},11432:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(93800),i=n(86925),s=n(8455),o=n(89129),a=n(59321),l=n(79953),u=n(48602),c=(n(21265),n(50925),n(14746),n(75269)),d=n(15484),g=n(57457),p=n(8592);let h=class extends((0,p.q)((0,a.P)(g.default))){constructor(e){super(e),this.type="viewshed",this.operationalLayerType="ViewshedLayer",this.source=new s.default,this.opacity=1}initialize(){this.addHandles((0,l.watch)((()=>this.source),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),l.syncAndInitial))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new s.default)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,t,n,r){t.viewsheds=e.filter((e=>e.isValid())).map((e=>e.toJSON(r))).toJSON()}};(0,r._)([(0,u.MZ)({json:{read:!1},readOnly:!0})],h.prototype,"type",void 0),(0,r._)([(0,u.MZ)({type:["ViewshedLayer"]})],h.prototype,"operationalLayerType",void 0),(0,r._)([(0,u.MZ)({type:s.default,nonNullable:!0})],h.prototype,"source",void 0),(0,r._)([(0,u.MZ)({readOnly:!0})],h.prototype,"spatialReference",null),(0,r._)([(0,u.MZ)({readOnly:!0})],h.prototype,"fullExtent",null),(0,r._)([(0,u.MZ)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],h.prototype,"opacity",void 0),(0,r._)([(0,u.MZ)({type:["show","hide"]})],h.prototype,"listMode",void 0),(0,r._)([(0,u.MZ)({type:o.default.ofType(i.default),json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{ignoreOrigin:!0}}}}})],h.prototype,"viewsheds",null),(0,r._)([(0,d.K)("web-scene","viewsheds")],h.prototype,"writeViewsheds",null),h=(0,r._)([(0,c.$)("esri.layers.ViewshedLayer")],h);const f=h},13473:(e,t,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function s(e,t,n,r,i,s,o,a,l){return[e,t,n,r,i,s,o,a,l]}n.d(t,{fA:()=>s,o8:()=>i,vt:()=>r,zK:()=>o});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},15828:(e,t,n)=>{n.d(t,{B$:()=>s,HE:()=>o,R6:()=>a});var r=n(28473);class i{constructor(e,t,n){this.object=e,this.geometryId=t,this.triangleNr=n}}class s extends i{constructor(e,t,n,i){super(e,t,n),this.center=null!=i?(0,r.o8)(i):null}}class o{constructor(e){this.layerUid=e}}class a extends o{constructor(e,t){super(e),this.graphicUid=t}}},25071:(e,t,n)=>{n.d(t,{B:()=>v,a:()=>w,b:()=>J,c:()=>V,d:()=>m,e:()=>L,f:()=>I,g:()=>x,h:()=>R,i:()=>A,n:()=>H,r:()=>F,t:()=>T,u:()=>M});n(21265);var r=n(50925),i=n(64682),s=n(32636),o=n(87752),a=n(10382),l=n(89227),u=n(28473),c=n(90772),d=n(91345),g=n(1277),p=n(10872),h=n(91102),f=n(49943),b=n(1696);const y=()=>r.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");const v=class{constructor(){this.plane=(0,p.vt)(),this.origin=(0,u.vt)(),this.basis1=(0,u.vt)(),this.basis2=(0,u.vt)()}};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return{plane:(0,p.vt)(e.plane),origin:(0,u.o8)(e.origin),basis1:(0,u.o8)(e.basis1),basis2:(0,u.o8)(e.basis2)}}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m();return I(e.origin,e.basis1,e.basis2,t)}function I(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m();return(0,l.c)(r.origin,e),(0,l.c)(r.basis1,t),(0,l.c)(r.basis2,n),M(r),function(e,t){Math.abs((0,l.f)(e.basis1,e.basis2)/((0,l.l)(e.basis1)*(0,l.l)(e.basis2)))>1e-6&&y().warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,l.f)(e.basis1,H(e)))>1e-6&&y().warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,l.f)(H(e),e.origin)-e.plane[3])>1e-6&&y().warn(t,"Plane offset is not consistent with plane origin")}(r,"fromValues()"),r}function M(e){(0,p.mR)(e.basis2,e.basis1,e.origin,e.plane)}function _(e,t,n){e!==n&&w(e,n);const r=(0,l.h)(b.rq.get(),H(e),t);return(0,l.g)(n.origin,n.origin,r),n.plane[3]-=t,n}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m();const n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return(0,l.i)(t.origin,e[0]+n,e[1]+r,0),(0,l.i)(t.basis1,n,0,0),(0,l.i)(t.basis2,0,r,0),(0,p.fA)(0,0,1,0,t.plane),t}function A(e,t,n){return!!(0,p.Ui)(e.plane,t,n)&&z(e,n)}function q(e,t,n){const r=B.get();U(e,t,r,B.get());let s=Number.POSITIVE_INFINITY;for(const o of G){const a=Z(e,o,D.get()),u=b.rq.get();if((0,p.T7)(r,a,u)){const e=(0,l.o)(b.rq.get(),t.origin,u),r=Math.abs((0,i.XM)((0,l.f)(t.direction,e)));r<s&&(s=r,(0,l.c)(n,u))}}return s===Number.POSITIVE_INFINITY?N(e,t,n):n}function V(e,t){return(t-e)/t}function N(e,t,n){if(A(e,t,n))return n;const r=B.get(),i=B.get();U(e,t,r,i);let s=Number.POSITIVE_INFINITY;for(const o of G){const a=Z(e,o,D.get()),u=b.rq.get();if((0,p.gv)(r,a,u)){const e=(0,h.kb)(t,u);if(!(0,p.Tj)(i,u))continue;e<s&&(s=e,(0,l.c)(n,u))}}return E(e,t.origin)<s&&O(e,t.origin,n),n}function O(e,t,n){const r=(0,p._I)(e.plane,t,b.rq.get()),i=(0,g.H6)(P(e,e.basis1),r,-1,1,b.rq.get()),s=(0,g.H6)(P(e,e.basis2),r,-1,1,b.rq.get());return(0,l.d)(n,(0,l.g)(b.rq.get(),i,s),e.origin),n}function j(e,t,n){const{origin:r,basis1:i,basis2:s}=e,o=(0,l.d)(b.rq.get(),t,r),a=(0,f.gr)(i,o),u=(0,f.gr)(s,o),c=(0,f.gr)(H(e),o);return(0,l.i)(n,a,u,c)}function E(e,t){const n=j(e,t,b.rq.get()),{basis1:r,basis2:i}=e,s=(0,l.l)(r),o=(0,l.l)(i),a=Math.max(Math.abs(n[0])-s,0),u=Math.max(Math.abs(n[1])-o,0),c=n[2];return a*a+u*u+c*c}function R(e,t){return Math.sqrt(E(e,t))}function L(e,t){return(0,p.Tj)(e.plane,t)&&z(e,t)}function S(e,t){const n=-e.plane[3];return(0,f.gr)(H(e),t)-n}function T(e,t,n){return e!==n&&w(e,n),(0,o.B8)(Q,t),(0,o.mg)(Q,Q),(0,l.t)(n.basis1,e.basis1,Q),(0,l.t)(n.basis2,e.basis2,Q),(0,l.t)((0,p.Qj)(n.plane),(0,p.Qj)(e.plane),Q),(0,l.t)(n.origin,e.origin,t),(0,p.mP)(n.plane,n.plane,n.origin),n}function F(e,t,n,r){return e!==r&&w(e,r),(0,o.$0)(Y,t,n),(0,l.t)(r.basis1,e.basis1,Y),(0,l.t)(r.basis2,e.basis2,Y),M(r),r}function H(e){return(0,p.Qj)(e.plane)}function z(e,t){const n=(0,l.d)(b.rq.get(),t,e.origin),r=(0,l.k)(e.basis1),i=(0,l.k)(e.basis2),s=(0,l.f)(e.basis1,n),o=(0,l.f)(e.basis2,n);return-s-r<0&&s-r<0&&-o-i<0&&o-i<0}function P(e,t){const n=D.get();return(0,l.c)(n.origin,e.origin),(0,l.c)(n.vector,t),n}function Z(e,t,n){const{basis1:r,basis2:i,origin:s}=e,o=(0,l.h)(b.rq.get(),r,t.origin[0]),a=(0,l.h)(b.rq.get(),i,t.origin[1]);(0,l.g)(n.origin,o,a),(0,l.g)(n.origin,n.origin,s);const u=(0,l.h)(b.rq.get(),r,t.direction[0]),c=(0,l.h)(b.rq.get(),i,t.direction[1]);return(0,l.h)(n.vector,(0,l.g)(u,u,c),2),n}function U(e,t,n,r){const i=H(e);(0,p.mR)(i,t.direction,t.origin,n),(0,p.mR)((0,p.Qj)(n),i,t.origin,r)}const C={plane:(0,p.vt)(),origin:(0,u.fA)(0,0,0),basis1:(0,u.fA)(1,0,0),basis2:(0,u.fA)(0,1,0)},B=new s.I(p.vt),D=new s.I(g.vt),k=(0,u.vt)(),$=new s.I((()=>m())),G=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Q=(0,a.vt)(),Y=(0,a.vt)(),J=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:v,altitudeAt:S,axisAt:function(e,t,n,r){return function(e,t,n){switch(t){case d._.X:(0,l.c)(n,e.basis1),(0,l.n)(n,n);break;case d._.Y:(0,l.c)(n,e.basis2),(0,l.n)(n,n);break;case d._.Z:(0,l.c)(n,H(e))}return n}(e,n,r)},cameraFrustumCoverage:V,closestPoint:N,closestPointOnSilhouette:q,copy:w,copyWithoutVerify:function(e,t){(0,l.c)(t.origin,e.origin),(0,l.c)(t.basis1,e.basis1),(0,l.c)(t.basis2,e.basis2),(0,p.C)(t.plane,e.plane)},create:m,distance:R,distance2:E,distanceToSilhouette:function(e,t){let n=Number.NEGATIVE_INFINITY;for(const r of G){const i=Z(e,r,D.get()),s=(0,g.kb)(i,t);s>n&&(n=s)}return Math.sqrt(n)},elevate:_,equals:function(e,t){return(0,l.p)(e.basis1,t.basis1)&&(0,l.p)(e.basis2,t.basis2)&&(0,l.p)(e.origin,t.origin)},extrusionContainsPoint:L,fromAABoundingRect:x,fromValues:I,getExtent:function(e,t){const n=e.basis1[0],r=e.basis2[1],[i,s]=e.origin;return(0,c.fA)(i-n,s-r,i+n,s+r,t)},intersectRay:A,intersectRayClosestSilhouette:function(e,t,n){if(A(e,t,n))return n;const r=q(e,t,b.rq.get());return(0,l.g)(n,t.origin,(0,l.h)(b.rq.get(),t.direction,(0,l.j)(t.origin,r)/(0,l.l)(t.direction))),n},normal:H,projectPoint:O,projectPointLocal:j,rotate:F,setAltitudeAt:function(e,t,n,r){const i=S(e,t),s=(0,l.h)(k,H(e),n-i);return(0,l.g)(r,t,s),r},setExtent:function(e,t,n){return x(t,n),_(n,S(e,e.origin),n),n},transform:T,up:C,updateUnboundedPlane:M,wrap:function(e,t,n){const r=$.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=(0,p.LV)(0,0,0,0),M(r),r}},Symbol.toStringTag,{value:"Module"}))},27464:(e,t,n)=>{n.d(t,{$I:()=>u,Q5:()=>l,hH:()=>c,i3:()=>a});var r=n(89227),i=n(28473),s=n(25071),o=n(92453);function a(e){return null!=e?.dist}function l(e){return(t,n,i)=>((0,r.m)(d,t,n,i),!(0,s.e)(e,d))}function u(e){return a(e)&&e.intersector===o.dz.OBJECT&&!!e.target}function c(e){return a(e)&&e.intersector===o.dz.HUD&&!!e.target&&"center"in e.target&&null!=e.target.center}const d=(0,i.vt)()},38432:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(93800),i=n(6946),s=n(62631),o=n(85715),a=n(93633),l=n(19455),u=n(48602),c=(n(21265),n(50925),n(75269));let d=0,g=class extends(l.A.JSONSupportMixin(o.A.ClonableMixin(a.A.IdentifiableMixin(i.default)))){constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${d++}`,this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":case"viewshed":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(s.Ru)}};(0,r._)([(0,u.MZ)({type:String,constructOnly:!0,clonable:!1})],g.prototype,"id",void 0),(0,r._)([(0,u.MZ)({type:String})],g.prototype,"title",void 0),(0,r._)([(0,u.MZ)({clonable:!1,value:null})],g.prototype,"parent",null),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"isEditable",null),g=(0,r._)([(0,c.$)("esri.analysis.Analysis")],g);const p=g},46316:(e,t,n)=>{n.d(t,{N1:()=>c,uY:()=>d,wY:()=>u,xH:()=>l});var r=n(89227),i=n(28473),s=n(91102),o=n(92453),a=n(54407);function l(e,t){return u(e)===u(t)}function u(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:"";let n=null;return n=null!=e.objectId?e.objectId:null!=e.layer&&"objectIdField"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==n?null:`o-${t}-${n}`}const c={json:{write:{writer:function(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String],isRequired:!0},"feature.objectId":{type:[Number,String],isRequired:!0}}},origins:{"web-scene":{read:function(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}}}}};function d(e,t,n,l){const{sceneIntersectionHelper:c}=e,{observer:d,observerFeatureId:p,targetFeatureId:b,target:y}=n;if(null==p&&null==b)return;l||(l=e=>e),(0,r.a)(f,d,y);const v=(0,r.l)(f);(0,r.b)(f,d,f,1/v);const m=(0,s.Cr)(f,y,h);t.options.store=o.oH.ALL,c.intersectToolIntersectorRay(m,t);let w=null,I=null,M=null,_=null;for(const r of t.results.all){const t=(0,a.Gy)(r,e);if(null==t||null==r.distanceInRenderSpace)continue;const n=u(t);null!=n&&(null!=p&&n===p&&(w??=l(g(r,e,v)),r.distanceInRenderSpace-1<w&&(M=r)),null!=b&&n===b&&(I??=l(g(r,e,v)),null==_&&r.distanceInRenderSpace-1<v&&v-r.distanceInRenderSpace+1<I&&(_=r)))}const{observerAdjusted:x,targetAdjusted:A}=n;M?.getIntersectionPoint(x)?n.observerSurfaceNormal=M.getTransformedNormal((0,i.vt)()):n.observerSurfaceNormal=null,_?.getIntersectionPoint(A)?n.targetSurfaceNormal=_.getTransformedNormal((0,i.vt)()):n.targetSurfaceNormal=null}function g(e,t,n){if((0,a.QS)(e)){const r=(0,a.SM)(e,t);if(null!=r)return Math.min(r*p,n)}return 1e-5*n}const p=.05,h=(0,s.vt)(),f=(0,i.vt)()},54232:(e,t,n)=>{n.d(t,{DC:()=>o,MQ:()=>a,mi:()=>l});var r=n(92453),i=n(15828),s=n(27464);function o(e){return(0,s.i3)(e)&&e.intersector===r.dz.TERRAIN&&!!e.target}class a extends i.R6{constructor(e,t,n){super(e,t),this.triangleNr=n}}function l(e){return(0,s.i3)(e)&&e.intersector===r.dz.OVERLAY&&!!e.target}},54407:(e,t,n)=>{n.d(t,{FI:()=>p,FV:()=>d,Gy:()=>g,QS:()=>y,SM:()=>b});var r=n(87752),i=n(28473),s=n(4309),o=n(89476),a=n(10323),l=n(54232),u=n(27464),c=n(99855);function d(e,t){return(0,u.$I)(e)||(0,u.hH)(e)?f(e.target?.object,t):(0,l.DC)(e)?t.map?.ground:(0,a.rb)(e)||(0,a.db)(e)||(0,l.mi)(e)||(0,a.Q5)(e)?f(e.target,t):null}function g(e,t){const n=p(e,t);return null!=n&&"graphic"===n.type?n.graphic:null}function p(e,t){if(null==e)return null;if((0,u.$I)(e)||(0,u.hH)(e))return h(e.target?.object,t);if((0,a.rb)(e)){const t=e.target.createGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if((0,a.Q5)(e)){const t=e.target.createVoxelGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if((0,a.W3)(e)){const t=e.target.createTiles3DGraphic();return{type:"graphic",graphic:t,layer:t.layer}}return(0,l.mi)(e)||(0,c.H)(e)?h(e.target,t):(0,a.db)(e)?function(e,t){const n=f(e,t);if(null==n)return null;const r=t.allLayerViews.find((e=>e.layer===n));return r&&!r.suspended&&"getGraphicFromIntersectorTarget"in r?function(e){return null!=e?{type:"graphic",graphic:e,layer:e.layer}:null}(r.getGraphicFromIntersectorTarget(e)):null}(e.target,t):null}function h(e,t){if(null==e?.graphicUid)return null;const n=f(e,t);if(null==n)return null;if(n===t.graphics)return null==t.graphicsView||"number"!=typeof e.graphicUid?null:t.graphicsView.getHit(e.graphicUid);const r=t.allLayerViews.find((e=>e.layer===n));return!r||r.suspended||null==e.graphicUid?null:"getHit"in r?r.getHit(e.graphicUid):null}function f(e,t){return null==e?.layerUid?null:null!=t.graphicsView&&e.layerUid===t.graphicsView.processor.layer.id?t.graphics:t.map.allLayers.find((t=>t.uid===e.layerUid))}function b(e,t){if((0,u.$I)(e)||(0,u.hH)(e))return(0,o.g)(e.target.object.boundingVolumeWorldSpace.bounds);if((0,c.H)(e)){(0,r.IL)(v,e.transformation);const t=Math.max(v[0],v[1],v[2]);return e.target.baseBoundingSphere.radius*t}if((0,a.db)(e)){const n=function(e,t){const n=f(e,t);if(null==n)return null;const r=t.allLayerViews.find((e=>e.layer===n));return r&&!r.suspended&&"getAABBFromIntersectorTarget"in r?r.getAABBFromIntersectorTarget(e):null}(e.target,t);return n?.5*(0,s._F)(n):null}return null}function y(e){return!(0,u.$I)(e)&&!(0,u.hH)(e)&&((0,c.H)(e)?e.target.numLodLevels>1:!!(0,a.db)(e))}const v=(0,i.vt)()},86925:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(93800),i=n(46316),s=n(85715),o=n(5839),a=n(19455),l=n(17741),u=n(48602),c=n(32980),d=(n(21265),n(14746),n(75269)),g=n(80556),p=n(75400);let h=class extends(a.A.JSONSupportMixin(s.A)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}isValid(){return null!=this.observer&&this.farDistance>0}equals(e){return(0,l.CM)(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&(0,i.xH)(this.feature,e.feature)}};(0,r._)([(0,u.MZ)({type:p.default,json:{write:{isRequired:!0}}})],h.prototype,"observer",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],h.prototype,"farDistance",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,c.w)((e=>o.ie.normalize((0,g.GB)(e),void 0,!0)))],h.prototype,"heading",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],h.prototype,"tilt",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],h.prototype,"horizontalFieldOfView",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],h.prototype,"verticalFieldOfView",void 0),(0,r._)([(0,u.MZ)(i.N1)],h.prototype,"feature",void 0),(0,r._)([(0,u.MZ)({json:{read:!1}})],h.prototype,"isValid",null),h=(0,r._)([(0,d.$)("esri.analysis.Viewshed")],h);const f=h},92453:(e,t,n)=>{var r,i;n.d(t,{H6:()=>s,dz:()=>r,oH:()=>i}),function(e){e[e.OBJECT=0]="OBJECT",e[e.HUD=1]="HUD",e[e.TERRAIN=2]="TERRAIN",e[e.OVERLAY=3]="OVERLAY",e[e.I3S=4]="I3S",e[e.PCL=5]="PCL",e[e.LOD=6]="LOD",e[e.VOXEL=7]="VOXEL",e[e.TILES3D=8]="TILES3D"}(r||(r={}));class s{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}!function(e){e[e.MIN=0]="MIN",e[e.MINMAX=1]="MINMAX",e[e.ALL=2]="ALL"}(i||(i={}))},99855:(e,t,n)=>{n.d(t,{H:()=>a,h:()=>o});var r=n(92453),i=n(15828),s=n(27464);class o extends i.R6{constructor(e,t,n,r,i){super(e,t),this.layerUid=e,this.graphicUid=t,this.triangleNr=n,this.baseBoundingSphere=r,this.numLodLevels=i}}function a(e){return(0,s.i3)(e)&&e.intersector===r.dz.LOD&&!!e.target}}}]);