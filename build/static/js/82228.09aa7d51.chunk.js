"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[82228],{9137:(e,t,i)=>{i.d(t,{D:()=>r,S:()=>h});var s=i(64682),l=i(50821),n=i(17745),o=i(87118);function r(e,t){let{level:i,class:s,...r}=e;const h=a(i);return(0,o.K)(`h${h}`,{...r,"aria-level":String(h),class:(0,n.Ly)(l.D.heading,s),role:"heading"},t)}function a(e){return(0,s.qE)(Math.ceil(e),1,6)}function h(e){return a(e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}},82228:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Q});var s=i(93800),l=i(48602),n=i(32980),o=(i(21265),i(14746),i(75269)),r=i(27811),a=i(77898);const h="esri-building-explorer",d={base:h,panelError:`${h}__panel--error`,loadingContainer:`${h}__loading-container`,content:`${h}__content`,section:`${h}__section`,levels:`${h}__levels`,phases:`${h}__phases`,disciplines:`${h}__disciplines`};i(50925);var c,v=i(20518),u=i(49403),_=i(17745),p=i(87118);const g={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",showSublayer:"showSublayer"},b="esri-building-disciplines-tree-node",y={base:b,label:`${b}__label`,level:e=>`${b}--level-${e}`};let m=c=class extends r.default{constructor(e){super(e),this.messages=g,this.toggleSiblingsVisibility=!1,this._onCheckboxClick=e=>{e.stopPropagation(),(e.metaKey||e.ctrlKey)&&this.toggleSiblingsVisibility&&(this.node.toggleVisibility(),this.node.toggleAllSiblingsVisibility())},this._onCheckboxToggle=e=>{this.node.toggleVisibility(e.currentTarget.checked)}}static loadDependencies(){return(0,u.W)({checkbox:()=>i.e(70879).then(i.bind(i,70879)),label:()=>i.e(60216).then(i.bind(i,60216)),tree:()=>i.e(19608).then(i.bind(i,19608)),"tree-item":()=>i.e(41830).then(i.bind(i,41830))})}loadDependencies(){return c.loadDependencies()}render(){const{node:e,messages:t}=this;if(e.isDiscipline&&!e.hasChildren)return(0,p.K)("div",{key:`${e.id}-empty`});const i=e.visible,s=!0===i,l=null===i,n=s?t?.hideSublayer:t?.showSublayer;return(0,p.K)("calcite-tree-item",{class:y.base,key:e.id},(0,p.K)("calcite-label",{class:y.label,layout:"inline"},(0,p.K)("calcite-checkbox",{checked:s,indeterminate:l,label:n,onclick:this._onCheckboxClick,title:n,onCalciteCheckboxChange:this._onCheckboxToggle}),e.title),this._renderedChildren)}get _renderedChildren(){const{node:e}=this;if(!e.hasChildren)return null;const{messages:t}=this,{toggleSiblingsVisibility:i}=this;return(0,p.K)("calcite-tree",{slot:"children"},this.node.children.toArray().reverse().map((e=>(0,p.K)(c,{messages:t,node:e,toggleSiblingsVisibility:i}))))}};m.vnodeSelector="calcite-tree-item",(0,s._)([(0,l.MZ)({type:v.M})],m.prototype,"node",void 0),(0,s._)([(0,l.MZ)()],m.prototype,"messages",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],m.prototype,"toggleSiblingsVisibility",void 0),(0,s._)([(0,l.MZ)()],m.prototype,"_renderedChildren",null),m=c=(0,s._)([(0,o.$)("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesNode")],m);const w=m,C={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",showSublayer:"showSublayer"},L="esri-building-disciplines-tree";let M=class extends r.default{constructor(e){super(e),this.toggleSiblingsVisibility=!1}loadDependencies(){return Promise.allSettled([(0,u.W)({tree:()=>i.e(19608).then(i.bind(i,19608))}),w.loadDependencies()])}render(){const{vm:e}=this,t=this.toggleSiblingsVisibility,i=this.messages??C;return(0,p.K)("calcite-tree",{class:L,scale:"s",selectionMode:"none"},e.root.children.toArray().reverse().map((e=>(0,p.K)(w,{messages:i,node:e,toggleSiblingsVisibility:t}))))}};M.vnodeSelector="calcite-tree",(0,s._)([(0,l.MZ)()],M.prototype,"vm",void 0),(0,s._)([(0,l.MZ)()],M.prototype,"messages",void 0),(0,s._)([(0,l.MZ)()],M.prototype,"toggleSiblingsVisibility",void 0),M=(0,s._)([(0,o.$)("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesTree")],M);const f=M;var P=i(63160),x=i(64682),k=i(79953);const S=Object.freeze(Object.defineProperty({__proto__:null,alphaLevelDependencyFactor:30,alphaSpreadFactor:10,levelHeightDefault:14,levelHoveredExtraHeight:30,levelHoveredExtraWidth:20,levelWidthConstant:40,levelWidthMax:80,levelWidthMin:30,levelWidthNominator:100,levelsMarginFactor:2,levelsPadding:20,levelsPointerAdjustment:.035},Symbol.toStringTag,{value:"Module"})),K="esri-building-level-picker",Z={container:K,noLevel:`${K}--no-level`,animateLevel:`${K}--animate-level`,levelsContainer:`${K}__levels-container`,innerLevelsContainer:`${K}__inner-levels-container`,labelContainer:`${K}__label-container`,arrowUp:`${K}__arrow-up`,arrowDown:`${K}__arrow-down`},$="esri-building-level-picker-label",D={base:$,active:`${$}--active`,hover:`${$}--hover`,empty:`${$}--empty`,clearButton:`${$}__clear-button`},E={clearLevel:"",selectLevel:""};let W=class extends r.default{constructor(e,t){super(e,t),this.level=null,this.active=!1,this.hovering=!1,this.onClear=()=>{}}loadDependencies(){return(0,u.W)({fab:()=>i.e(25905).then(i.bind(i,25905))})}render(){const e=this.messages??E;if(null==this.level)return(0,p.K)("div",{class:D.empty,title:e.selectLevel},e.selectLevel);const t=e.clearLevel;return(0,p.K)("div",{"aria-label":t,bind:this,class:this.classes(D.base,{[D.active]:this.active,[D.hover]:this.hovering}),onclick:this.onClear,title:t},(0,p.K)("span",null,this.level),(0,p.K)("calcite-fab",{appearance:"outline-fill",class:D.clearButton,disabled:!this.active,icon:"x",key:"clear-button",kind:"neutral",onclick:this.onClear,scale:"s"}))}};(0,s._)([(0,l.MZ)()],W.prototype,"level",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],W.prototype,"active",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],W.prototype,"hovering",void 0),(0,s._)([(0,l.MZ)()],W.prototype,"messages",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],W.prototype,"onClear",void 0),W=(0,s._)([(0,o.$)("esri.widgets.BuildingExplorer.BuildingLevelPicker.Label")],W);const B="esri-building-level-picker-item",H={container:B,base:`${B}__base`,hover:`${B}--hover`,active:`${B}--active`};let V=class extends r.default{constructor(e,t){super(e,t),this.active=!1,this.hovering=!1,this.width=0,this.height=0,this.onSelect=()=>{},this.onFocus=()=>{},this.onBlur=()=>{},this._baseElement=null}render(){return(0,p.K)("div",{bind:this,class:this.classes(H.container,{[H.active]:this.active,[H.hover]:this.hovering}),key:this,styles:{height:`${this.height}px`}},this._renderBase())}focus(){null!=this._baseElement&&this._baseElement.focus()}_renderBase(){const e=this.width,t=.8*this.width;return(0,p.K)("div",{class:H.base,styles:{width:`${Math.round(e)}px`,height:`${Math.round(e)}px`}},(0,p.K)("button",{afterCreate:_.cA,"aria-label":this.label,bind:this,class:"rect","data-node-ref":"_baseElement",onblur:this.onBlur,onclick:this.onSelect,onfocus:this.onFocus,styles:{width:`${Math.round(t)}px`,height:`${Math.round(t)}px`,transform:`translate(${(0,_.V8)(this.container),-50}%, -50%) rotateX(66deg) rotateZ(45deg)`},tabIndex:-1,title:this.label??"",type:"button"}))}};(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"level",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"active",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"hovering",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"width",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"height",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"onSelect",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"onFocus",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],V.prototype,"onBlur",void 0),V=(0,s._)([(0,o.$)("esri.widgets.BuildingExplorer.BuildingLevelPicker.LevelItem")],V);var A=i(50821);const N={selectLevel:"selectLevel",clearLevel:"clearLevel",nextLevel:"nextLevel",previousLevel:"previousLevel",currentLevel:"{{value}}"};let F=class extends r.default{constructor(e,t){super(e,t),this._levelHandlesKey="levelHandles",this._levelEventHandlesKey="levelEventHandles",this._levelWidgets=[],this._labelWidget=new W({onClear:()=>this.vm.clear()}),this._hoveredLevel=null,this._expandedLevelsHeight=void 0,this._normalizedPointerPosition=0,this._hovering=!1,this._containerPosTop=null,this._levelsContainer=null,this._onKeyDown=e=>{switch(e.key){case"ArrowDown":case"ArrowLeft":e.preventDefault(),e.stopPropagation(),this.vm.previous(),this._focusCurrentLevel();break;case"ArrowUp":case"ArrowRight":e.preventDefault(),e.stopPropagation(),this.vm.next(),this._focusCurrentLevel()}},this._onFocus=()=>{this._hoveredLevel=this._levels.length>0?this._levels[0]:null},this._onArrowUpClick=()=>{this.vm.next()},this._onArrowDownClick=()=>{this.vm.previous()},this._onPointerUp=()=>{if(window.getSelection()?.removeAllRanges(),null==this._hoveredLevel)return;const{vm:e}=this;e.enabled&&this._hoveredLevel===e.value?e.clear():e.select(this._hoveredLevel)},this._onPointerEnter=()=>{this._hovering||null==this._levelsContainer||(this._hovering=!0,this._containerPosTop=this._levelsContainer.getBoundingClientRect().top??0)},this._onPointerLeave=()=>{this._hovering&&(this._normalizedPointerPosition=0,this._hoveredLevel=null,this._hovering=!1)},this._onPointerMove=e=>{if(!this._hovering)return!1;if(window.getSelection()?.removeAllRanges(),null!=this._containerPosTop){const t=this._containerPosTop,i=40,s=this._expandedLevelsMargin;let l=this._levelsHeight,n=t+i+s;const o=this._levelHeight/2;n+=o,l-=o;let r=(e.clientY-n)/l;r+=.035,this._normalizedPointerPosition=r}return!1}}loadDependencies(){return(0,u.W)({action:()=>i.e(88342).then(i.bind(i,88342))})}postInitialize(){this.addHandles([(0,k.watch)((()=>this._levelsContainer),(()=>this._onContainerChange()),k.initial),(0,k.watch)((()=>this._levels),(()=>this._createLevelWidgets()),k.initial),(0,k.watch)((()=>this.messages),(()=>{this._labelWidget.messages=this.messages??N}),k.initial)])}destroy(){this._levelWidgets.forEach((e=>e.destroy())),this._labelWidget.destroy()}get _levels(){return this.vm.allowedValues}get _numLevels(){return this._levels.length}get _levelsHeight(){return Math.round(this._levelHeight*this._numLevels)}get _expandedLevelsMargin(){return Math.round(((this._expandedLevelsHeight??0)-this._levelsHeight)/2)}get _levelWidth(){const{levelWidthNominator:e,levelWidthConstant:t}=S,i=e/Math.sqrt(this._numLevels)+t;return Math.round((0,x.qE)(i,30,80))}get _levelHeight(){const e=28/Math.sqrt(this._numLevels);return Math.round((0,x.qE)(e,2,14))}get _gaussianFactor(){const e=this._numLevels;return e/Math.log(30*e)*10}get _levelClosestToPointer(){if(!this._hovering)return null;const e=this._numLevels-1,t=this._normalizedPointerPosition;return e>=0&&null!=t?this._levels[Math.round((1-t)*e)]:null}render(){const e=this._levelWidgets.length,t=e>1?this._levelWidgets.map((e=>e.render())):null,i=this._levelsHeight,s=i+80;return(0,p.K)("div",{class:this.classes(A.D.widget,Z.container,{[Z.animateLevel]:!this._hovering,[Z.noLevel]:e<2}),key:this,onkeydown:this._onKeyDown},this._renderLabelContainer(),(0,p.K)("div",{afterCreate:e=>this._levelsContainer=e,class:Z.levelsContainer,"data-node-ref":"",onfocus:this._onFocus,styles:{height:`${s}px`,marginBlockStart:"-20px",marginBlockEnd:"-20px"}},(0,p.K)("div",{class:Z.innerLevelsContainer,styles:{height:`${i}px`,margin:"0",marginBlockStart:20-this._expandedLevelsMargin+"px"}},t)))}_renderLabelContainer(){const{hasPrevious:e,hasNext:t}=this.vm,i=this.messages??N,s=i.previousLevel,l=i.nextLevel;return(0,p.K)("div",{class:Z.labelContainer,tabIndex:0},T({className:Z.arrowUp,disabled:!t,icon:"chevron-up",onClick:this._onArrowUpClick,text:l}),this._labelWidget.render(),T({className:Z.arrowDown,disabled:!e,icon:"chevron-down",onClick:this._onArrowDownClick,text:s}))}_updateComponents(){const e=this.messages??N,t=this.vm.enabled?this.vm.value:null,i=null!=this._hoveredLevel?this._hoveredLevel:t;this._levelWidgets.forEach((i=>{const s=this.vm.getValueLabel(i.level);i.label=null!=s?s:e.currentLevel?.replace("{{level}}",String(i.level)),i.active=i.level===t,i.hovering=i.level===this._hoveredLevel})),this._labelWidget.level=i,this._labelWidget.active=i===t,this._labelWidget.hovering=null!=this._hoveredLevel}_createLevelWidgets(){this._levelWidgets.forEach((e=>e.destroy())),this._levelWidgets=this._levels.map((e=>new V({level:e,onSelect:()=>this._onLevelToggle(e)}))),this.removeHandles(this._levelHandlesKey),this.addHandles([(0,k.watch)((()=>{const{vm:e}=this;return[this.messages,e?.value,e?.enabled,this._hoveredLevel,this._hovering]}),(()=>this._updateComponents()),k.initial),(0,k.watch)((()=>[this._normalizedPointerPosition,this._hovering]),(()=>this._onPointerPositionChange()),k.initial),(0,k.watch)((()=>this._levelWidth),(e=>this._levelWidgets.forEach((t=>t.width=e))),k.initial)],this._levelHandlesKey)}_onContainerChange(){const e=this._levelsContainer;null!=e&&(this.removeHandles(this._levelEventHandlesKey),this.addHandles([(0,P.on)(e,"pointerenter",this._onPointerEnter),(0,P.on)(e,"pointerover",this._onPointerEnter),(0,P.on)(e,"pointerleave",this._onPointerLeave),(0,P.on)(e,"pointerup",this._onPointerUp),(0,P.on)(e,"pointermove",this._onPointerMove)],this._levelEventHandlesKey))}_focusCurrentLevel(){const e=this._levelWidgets.find((e=>e.level===this.vm.value));e?.focus()}_onLevelToggle(e){const{vm:t}=this;t.enabled&&t.value===e?t.clear():t.select(e)}_onPointerPositionChange(){let e=0;this._levelWidgets.forEach(((t,i)=>{const{width:s,height:l}=this._getLevelWidgetSize(i);t.height=l,t.width=s,e+=l})),this._hoveredLevel=this._levelClosestToPointer;const t=this._expandedLevelsHeight;(null==t||Math.abs(t-e)>30)&&(this._expandedLevelsHeight=e)}_getLevelWidgetSize(e){const t={width:this._levelWidth,height:this._levelHeight};if(this._hovering){const i=this._getGaussianFactor(e,this._normalizedPointerPosition);t.width+=20*i,t.height+=30*i}return t}_getGaussianFactor(e,t){const i=this._numLevels-1,s=(i-e)/i,l=this._gaussianFactor*(s-t);return Math.exp(-(l**2))}};function T(e){return(0,p.K)("calcite-action",{appearance:"transparent",class:e.className,disabled:e.disabled,icon:e.icon,key:e.className,onclick:e.onClick,scale:"s",text:e.text,textEnabled:!1,title:e.text})}(0,s._)([(0,l.MZ)()],F.prototype,"vm",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"messages",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"_levelWidgets",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"_labelWidget",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"_hoveredLevel",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"_levels",null),(0,s._)([(0,l.MZ)()],F.prototype,"_numLevels",null),(0,s._)([(0,l.MZ)({readOnly:!0})],F.prototype,"_levelsHeight",null),(0,s._)([(0,l.MZ)()],F.prototype,"_expandedLevelsHeight",void 0),(0,s._)([(0,l.MZ)({readOnly:!0})],F.prototype,"_expandedLevelsMargin",null),(0,s._)([(0,l.MZ)({readOnly:!0})],F.prototype,"_levelWidth",null),(0,s._)([(0,l.MZ)({readOnly:!0})],F.prototype,"_levelHeight",null),(0,s._)([(0,l.MZ)({readOnly:!0})],F.prototype,"_gaussianFactor",null),(0,s._)([(0,l.MZ)({readOnly:!0})],F.prototype,"_levelClosestToPointer",null),(0,s._)([(0,l.MZ)({type:Number,range:{min:0,max:1}})],F.prototype,"_normalizedPointerPosition",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"_hovering",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"_containerPosTop",void 0),(0,s._)([(0,l.MZ)()],F.prototype,"_levelsContainer",void 0),F=(0,s._)([(0,o.$)("esri.widgets.BuildingExplorer.BuildingLevelPicker.BuildingLevelPicker")],F);const z=F,I="esri-building-phase-picker",O={base:`${I}`,phasesContainer:`${I}__phases-container`,phase:`${I}__phase`,phaseActive:`${I}__phase--active`,phaseCurrent:`${I}__phase--current`,divider:`${I}__divider`,dividerActive:`${I}__divider--active`,arrowLeft:`${I}__arrow-left`,arrowRight:`${I}__arrow-right`},R={nextPhase:"nextPhase",previousPhase:"previousPhase",currentPhase:"{{value}}"};let q=class extends r.default{constructor(e,t){super(e,t),this._phasesContainer=null,this._shouldScrollCurrentPhaseIntoView=!0,this._shouldFocusCurrentPhase=!1,this._onKeyDown=e=>{const{vm:t}=this;switch(e.key){case"ArrowDown":case"ArrowLeft":e.stopPropagation(),e.preventDefault(),t.previous(),this._shouldFocusCurrentPhase=!0;break;case"ArrowUp":case"ArrowRight":e.stopPropagation(),e.preventDefault(),t.next(),this._shouldFocusCurrentPhase=!0}},this._onArrowLeftClick=()=>{this.vm.previous()},this._onArrowRightClick=()=>{this.vm.next()},this._onPhasesContainerAfterCreate=e=>{this._phasesContainer=e,requestAnimationFrame(this._scrollOrFocusPhase)},this._scrollOrFocusPhase=()=>{const e=this._phasesContainer;if(this.destroyed||null==e)return;const t=e.querySelector(`.${O.phaseCurrent}`);if(t){if(this._shouldScrollCurrentPhaseIntoView){const i=e.offsetWidth,s=t.offsetLeft,l=t.offsetWidth;e.scrollLeft=-i/2+s+l/2,this._shouldScrollCurrentPhaseIntoView=!1}this._shouldFocusCurrentPhase&&(t.focus(),this._shouldFocusCurrentPhase=!1)}}}loadDependencies(){return(0,u.W)({action:()=>i.e(88342).then(i.bind(i,88342))})}initialize(){this.addHandles((0,k.watch)((()=>[this._currentPhase,this._phasesContainer,this.container]),(()=>{this._shouldScrollCurrentPhaseIntoView=!0,requestAnimationFrame(this._scrollOrFocusPhase)}),k.initial))}get _phases(){return this.vm.allowedValues}get _currentPhase(){const{vm:e}=this;return e.enabled?e.value:null}render(){if(this._phases.length<2)return(0,p.K)("div",{key:"no-phases"});const{vm:e,messages:t}=this,{previousPhase:i,nextPhase:s}=t??R;return(0,p.K)("div",{class:this.classes(A.D.widget,O.base),key:this,onkeydown:this._onKeyDown},U({className:O.arrowLeft,disabled:!e.hasPrevious,icon:"chevron-left",onClick:this._onArrowLeftClick,text:i}),(0,p.K)("div",{afterCreate:this._onPhasesContainerAfterCreate,class:O.phasesContainer},this._renderPhaseButtons()),U({className:O.arrowRight,disabled:!e.hasNext,icon:"chevron-right",onClick:this._onArrowRightClick,text:s}))}_renderPhaseButtons(){const e=this._phases,t=this._currentPhase,i=[];for(let s=0;s<e.length;++s){const l=e[s],n={phase:l,active:null!=t&&l<=t,current:null!=t&&l===t};s>0&&i.push(this._renderDivider(n)),i.push(this._renderPhaseButton(n))}return i}_renderPhaseButton(e){let{phase:t,active:i,current:s}=e;const{vm:l}=this,n=l.getValueLabel(t);return(0,p.K)("button",{"aria-label":n,class:this.classes(O.phase,{[O.phaseActive]:i,[O.phaseCurrent]:s}),key:`phase-${t}`,onclick:()=>l.select(t),title:n,type:"button"},t)}_renderDivider(e){let{phase:t,active:i}=e;return(0,p.K)("div",{class:this.classes(O.divider,{[O.dividerActive]:i}),key:`phase-divider-${t}`})}};function U(e){return(0,p.K)("calcite-action",{appearance:"transparent",class:e.className,disabled:e.disabled,icon:e.icon,iconFlipRtl:!0,key:e.className,onclick:e.onClick,scale:"s",text:e.text,textEnabled:!1,title:e.text})}(0,s._)([(0,l.MZ)({nonNullable:!0})],q.prototype,"vm",void 0),(0,s._)([(0,l.MZ)()],q.prototype,"messages",void 0),(0,s._)([(0,l.MZ)()],q.prototype,"_phases",null),(0,s._)([(0,l.MZ)()],q.prototype,"_currentPhase",null),(0,s._)([(0,l.MZ)()],q.prototype,"_phasesContainer",void 0),q=(0,s._)([(0,o.$)("esri.widgets.BuildingExplorer.BuildingPhasePicker.BuildingPhasePicker")],q);const G=q;var j=i(9137),X=i(76697);const Y={levels:!0,phases:!0,disciplines:!0};let J=class extends r.default{constructor(e,t){super(e,t),this._defaultViewModel=new a.default,this.viewModel=this._defaultViewModel,this.visibleElements={...Y},this.headingLevel=3,this.messages=null,this.messagesCommon=null,this.toggleSiblingsVisibility=!1}loadDependencies(){return(0,u.W)({loader:()=>Promise.resolve().then(i.bind(i,23173))})}destroy(){this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}_castVisibleElements(e){return{...Y,...e}}get icon(){return"organization"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}render(){const e=this.viewModel,t="disabled"===e.state||!e.isSupported;return(0,p.K)("div",{"aria-label":this.messages.widgetLabel,class:(0,_.Ly)(A.D.widget,d.base,A.D.panel,{[A.D.widgetDisabled]:t}),key:this},this._renderContent())}_renderContent(){const e=this.viewModel,t=this.messages;if(!e.isSupported)return(0,p.K)("p",{class:d.panelError},t.unsupported);if(!e.layers.length)return(0,p.K)("p",{class:d.panelError},t.noData);switch(e.state){case"loading":return this._renderLoadingIndicator();case"ready":return(0,p.K)("div",{class:d.content,key:"content"},this._renderLevelPickerSection(),this._renderPhasePickerSection(),this._renderDisciplinesSection());case"failed":return(0,p.K)("p",{class:d.panelError},t.failed);default:return null}}_renderLoadingIndicator(){const e=this.messagesCommon.loading;return(0,p.K)("div",{"aria-label":e,class:d.loadingContainer,key:"loading-container",role:"presentation",title:e},(0,p.K)("calcite-loader",{label:e,type:"indeterminate"}))}_renderLevelPickerSection(){const e=this.viewModel.level,t="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.levels||!t||!i)return null;const s=this.messages?.level;return(0,p.K)("div",{class:(0,_.Ly)(d.section,d.levels),key:"levels"},(0,p.K)(j.D,{level:this.headingLevel},s?.title),(0,p.K)(z,{messages:s,vm:e}))}_renderPhasePickerSection(){const e=this.viewModel.phase,t="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.phases||!t||!i)return null;const s=this.messages.phase;return(0,p.K)("div",{class:(0,_.Ly)(d.section,d.phases),key:"phases"},(0,p.K)(j.D,{level:this.headingLevel},s.title),(0,p.K)(G,{messages:s,vm:e}))}_renderDisciplinesSection(){const e=this.viewModel.disciplines,t="ready"===e.state,i=e.root.hasChildren;if(!this.visibleElements.disciplines||!t||!i)return null;const s=this.messages?.disciplines;return(0,p.K)("div",{class:(0,_.Ly)(d.section,d.disciplines),key:"disciplines"},(0,p.K)(j.D,{level:this.headingLevel},s.title),(0,p.K)(f,{messages:s,toggleSiblingsVisibility:this.toggleSiblingsVisibility,vm:e}))}};(0,s._)([(0,l.MZ)({type:a.default})],J.prototype,"viewModel",void 0),(0,s._)([(0,l.MZ)()],J.prototype,"view",null),(0,s._)([(0,l.MZ)()],J.prototype,"layers",null),(0,s._)([(0,l.MZ)()],J.prototype,"visibleElements",void 0),(0,s._)([(0,n.w)("visibleElements")],J.prototype,"_castVisibleElements",null),(0,s._)([(0,l.MZ)()],J.prototype,"headingLevel",void 0),(0,s._)([(0,l.MZ)()],J.prototype,"icon",null),(0,s._)([(0,l.MZ)()],J.prototype,"label",null),(0,s._)([(0,l.MZ)(),(0,X.G)("esri/widgets/BuildingExplorer/t9n/BuildingExplorer")],J.prototype,"messages",void 0),(0,s._)([(0,l.MZ)(),(0,X.G)("esri/t9n/common")],J.prototype,"messagesCommon",void 0),(0,s._)([(0,l.MZ)({nonNullable:!0})],J.prototype,"toggleSiblingsVisibility",void 0),(0,s._)([(0,l.MZ)()],J.prototype,"uiStrings",void 0),J=(0,s._)([(0,o.$)("esri.widgets.BuildingExplorer")],J);const Q=J}}]);