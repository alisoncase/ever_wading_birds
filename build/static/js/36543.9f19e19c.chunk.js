"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[36543],{855:(t,e,i)=>{i.d(e,{o:()=>n,q:()=>s});var n,o,r=i(93800),a=i(21484);(o=n||(n={}))[o.Gradient=0]="Gradient",o[o.Threshold=1]="Threshold",o[o.COUNT=2]="COUNT";class s extends a.K{constructor(){super(...arguments),this.visualization=n.Gradient,this.bandsEnabled=!1}}(0,r._)([(0,a.W)({count:n.COUNT})],s.prototype,"visualization",void 0),(0,r._)([(0,a.W)()],s.prototype,"bandsEnabled",void 0)},10382:(t,e,i)=>{function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function r(t,e,i,n,o,r,a,s,l,u,c,d,h,p,f,m){return[t,e,i,n,o,r,a,s,l,u,c,d,h,p,f,m]}i.d(e,{fA:()=>r,o8:()=>o,vt:()=>n,zK:()=>a});const a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:a,clone:o,create:n,createView:function(t,e){return new Float64Array(t,e,16)},fromValues:r},Symbol.toStringTag,{value:"Module"}))},11443:(t,e,i)=>{i.d(e,{S:()=>D});var n=Math.PI,o=Math.sin,r=Math.cos,a=Math.tan,s=Math.asin,l=Math.atan2,u=Math.acos,c=n/180,d=864e5,h=2440588,p=2451545,f={dec:0,ra:0};function m(t){return new Date((t+.5-h)*d)}function _(t){return function(t){return t.valueOf()/d-.5+h}(t)-p}var v=23.4397*c;function g(t,e){return l(o(t)*r(v)-a(e)*o(v),r(t))}function y(t,e){return s(o(e)*r(v)+r(e)*o(v)*o(t))}function w(t,e,i){return l(o(t),r(t)*o(e)-a(i)*r(e))}function M(t,e,i){return s(o(e)*o(i)+r(e)*r(i)*r(t))}function b(t,e){return c*(280.16+360.9856235*t)-e}function T(t){return c*(357.5291+.98560028*t)}function P(t){return c*(1.9148*o(t)+.02*o(2*t)+3e-4*o(3*t))}function A(t,e){return t+e+102.9372*c+n}function O(t,e){var i=T(t),n=A(i,P(i));return e||(e={dec:0,ra:0}),e.dec=y(n,0),e.ra=g(n,0),e}var D={PolarException:{NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2},getPosition:function(t,e,i,n){var o=c*-i,r=c*e,a=_(t),s=O(a,f),l=b(a,o)-s.ra;return n||(n={azimuth:0,altitude:0}),n.azimuth=w(l,r,s.dec),n.altitude=M(l,r,s.dec),n}},Z=[[-.83,"sunrise","sunset"]];D.addTime=function(t,e,i){Z.push([t,e,i])};var C=9e-4;function N(t,e){return Math.round(t-C-e/(2*n))}function S(t,e,i){return C+(t+e)/(2*n)+i}function x(t,e,i){return p+t+.0053*o(e)-.0069*o(2*i)}function z(t,e,i){return u((o(t)-o(e)*o(i))/(r(e)*r(i)))}function k(t){var e=c*(134.963+13.064993*t),i=c*(93.272+13.22935*t),n=c*(218.316+13.176396*t)+6.289*c*o(e),a=5.128*c*o(i),s=385001-20905*r(e);return{ra:g(n,a),dec:y(n,a),dist:s}}D.getTimes=function(t,e,i){var n=c*-i,a=c*e,s=N(_(t),n),l=S(0,n,s),u=T(l),d=P(u),h=A(u,d),p=y(h,0),f=x(l,u,h);function v(t){return x(S(z(t,a,p),n,s),u,h)}var g,w,M,b,O,C={solarNoon:m(f),nadir:m(f-.5),polarException:D.PolarException.NORMAL};for(g=0,w=Z.length;g<w;g+=1)O=f-((b=v((M=Z[g])[0]*c))-f),C[M[1]]=m(O),C[M[2]]=m(b);return C.polarException=function(t){var e=(o(t)-o(a)*o(p))/(r(a)*r(p));return e<-1?D.PolarException.MIDNIGHT_SUN:e>1?D.PolarException.POLAR_NIGHT:D.PolarException.NORMAL}(Z[0][0]*c),C},D.getMoonPosition=function(t,e,i){var n=c*-i,o=c*e,r=_(t),s=k(r),l=b(r,n)-s.ra,u=M(l,o,s.dec);return u+=.017*c/a(u+10.26*c/(u+5.1*c)),{azimuth:w(l,o,s.dec),altitude:u,distance:s.dist}},D.getMoonFraction=function(t){var e=_(t),i=O(e),n=k(e),a=149598e3,s=u(o(i.dec)*o(n.dec)+r(i.dec)*r(n.dec)*r(i.ra-n.ra)),c=l(a*o(s),n.dist-a*r(s));return(1+r(c))/2}},11741:(t,e,i)=>{i.d(e,{BI:()=>c,VV:()=>u,YH:()=>l,e9:()=>m,g7:()=>p,hG:()=>a,is:()=>h,ix:()=>_,nu:()=>d,su:()=>f,wp:()=>s});var n=i(64682),o=i(89227),r=i(28473);function a(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}function s(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),n=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),r=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return(0,o.i)(t,i,n,r),t}function l(t,e,i){i=i||t;const n=(0,o.f)(t,e);(0,o.i)(i,t[0]-n*e[0],t[1]-n*e[1],t[2]-n*e[2]),(0,o.n)(i,i)}function u(t,e,i){Math.abs(t[0])>Math.abs(t[1])?(0,o.i)(e,0,1,0):(0,o.i)(e,1,0,0),(0,o.e)(i,t,e),(0,o.e)(e,i,t),(0,o.n)(i,i),(0,o.n)(e,e)}function c(t,e,i,n,o,r){const a=t+(e-t)*o;return a+(i+(n-i)*o-a)*r}function d(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,r.vt)();const a=(0,o.l)(t),s=(0,o.l)(e),l=(0,o.f)(t,e)/(a*s);if(l<.9999999999999999){const r=Math.acos(l),u=((1-i)*a+i*s)/Math.sin(r),c=u/a*Math.sin((1-i)*r),d=u/s*Math.sin(i*r);return(0,o.h)(w,t,c),(0,o.h)(M,e,d),(0,o.g)(n,w,M)}return(0,o.m)(n,t,e,i)}function h(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,r.vt)(),a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,r.vt)();const s=(0,o.l)(t),l=(0,o.l)(e),u=(0,o.f)(t,e)/(s*l);if(u<.9999999999999999){const r=Math.acos(u),c=Math.sin(r),d=Math.sin(i*r),h=Math.sin((1-i)*r),p=(1-i)*s+i*l;{const i=p/c,r=i/l*d;(0,o.h)(w,t,i/s*h),(0,o.h)(M,e,r),(0,o.g)(n,w,M)}{const n=1/s*(-Math.cos((1-i)*r)*r*p+h*(-s+l));(0,o.h)(w,t,n);const u=1/l*(Math.cos(i*r)*r*p+d*(-s+l));(0,o.h)(M,e,u),(0,o.g)(a,w,M),(0,o.h)(a,a,1/c)}return a}return(0,o.m)(n,t,e,i),(0,o.d)(a,e,t),(0,o.n)(a,a),a}function p(t,e,i){t=(0,o.n)(w,t),e=(0,o.n)(M,e);const r=(0,n.XM)((0,o.f)(t,e));if(i){const n=(0,o.e)(y,t,e);if((0,o.f)(n,i)<0)return-r}return r}function f(t){const e=t.length;return i=>{if(i<=t[0][0])return t[0][1];if(i>=t[e-1][0])return t[e-1][1];let n=1;for(;i>t[n][0];)n++;const o=t[n-1][0],r=t[n][0],a=(r-i)/(r-o);return a*t[n-1][1]+(1-a)*t[n][1]}}function m(t,e,i,n){(0,o.d)(v,e,t),(0,o.d)(g,i,t),(0,o.e)(n,v,g),(0,o.n)(n,n),n[3]=-(0,o.f)(t,n)}function _(t,e){if((0,o.i)(e,0,0,0),t.length>0){for(let i=0;i<t.length;++i)(0,o.g)(e,e,t[i]);(0,o.h)(e,e,1/t.length)}}const v=(0,r.vt)(),g=(0,r.vt)(),y=(0,r.vt)(),w=(0,r.vt)(),M=(0,r.vt)()},20783:(t,e,i)=>{i.d(e,{Y:()=>n,m:()=>o});const n=class{},o=new n},21268:(t,e,i)=>{var n;i.d(e,{k:()=>n}),function(t){t.Continuous="continuous",t.Hourly="hourly"}(n||(n={}))},21484:(t,e,i)=>{i.d(e,{K:()=>s,W:()=>l});var n=i(74719),o=i(62631);class r{constructor(t){this._bits=[...t]}equals(t){return(0,o.aI)(this._bits,t.bits)}get code(){return this._code??=String.fromCharCode(...this._bits),this._code}get bits(){return this._bits}}var a=i(20783);class s extends a.Y{constructor(){super(),this._parameterBits=this._parameterBits?.map((()=>0))??[],this._parameterNames??=[]}get key(){return this._key??=new r(this._parameterBits),this._key}decode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.key;const e=this._parameterBits;this._parameterBits=[...t.bits];const i=this._parameterNames.map((t=>`    ${t}: ${this[t]}`)).join("\n");return this._parameterBits=e,i}}function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e,i)=>{e.hasOwnProperty("_parameterNames")||Object.defineProperty(e,"_parameterNames",{value:e._parameterNames?.slice()??[],configurable:!0,writable:!0}),e.hasOwnProperty("_parameterBits")||Object.defineProperty(e,"_parameterBits",{value:e._parameterBits?.slice()??[0],configurable:!0,writable:!0}),e._parameterNames.push(i);const o=t.count||2,r=Math.ceil(Math.log2(o)),a=e._parameterBits;let s=0;for(;a[s]+r>16;)s++,s>=a.length&&a.push(0);const l=a[s],u=(1<<r)-1<<l;a[s]+=r,t.count?Object.defineProperty(e,i,{get(){return(this._parameterBits[s]&u)>>l},set(e){if(this[i]!==e){if(this._key=null,this._parameterBits[s]=this._parameterBits[s]&~u|+e<<l&u,"number"!=typeof e)throw new n.default(`Configuration value for ${i} must be a number, got ${typeof e}`);if(null==t.count)throw new n.default(`Configuration value for ${i} must provide a count option`)}}}):Object.defineProperty(e,i,{get(){return!!((this._parameterBits[s]&u)>>l)},set(t){if(this[i]!==t&&(this._key=null,this._parameterBits[s]=this._parameterBits[s]&~u|+t<<l&u,"boolean"!=typeof t))throw new n.default(`Configuration value for ${i} must be boolean, got ${typeof t}`)}})}}},29940:(t,e,i)=>{function n(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t>=e)return i;if(i.push(t),e-t<2)return i;const n=e-1;i.push(n);const r=o(t+1,n);for(;;){const t=r.next();if(t.done)break;i.push(t.value)}return i}function*o(t,e){if(t>=e)return;const i=t+Math.floor((e-t)/2);yield i;const n=o(t,i),r=o(i+1,e);for(;;){const t=n.next(),e=r.next();if(t.done&&e.done)break;t.done||(yield t.value),e.done||(yield e.value)}}i.d(e,{s:()=>n})},32687:(t,e,i)=>{var n;i.d(e,{H:()=>n}),function(t){t.Disabled="disabled",t.Ready="ready"}(n||(n={}))},36543:(t,e,i)=>{i.r(e),i.d(e,{default:()=>L});var n=i(93800),o=i(88102),r=i(6946),a=i(62631),s=i(58828),l=(i(21265),i(17741)),u=i(49959),c=i(79953),d=i(16804),h=i(87431),p=i(48602),f=(i(50925),i(75269)),m=i(28473),_=i(66797),v=i(74871),g=i(855),y=i(89129),w=i(40736);i(14746);let M=class extends r.default{constructor(){super({}),this.color=new o.default([50,50,50,.7]),this.intervalOptions=new y.default([(0,h.t)(15,"minutes","milliseconds"),(0,h.t)(30,"minutes","milliseconds"),(0,h.t)(1,"hours","milliseconds"),(0,h.t)(2,"hours","milliseconds"),(0,h.t)(3,"hours","milliseconds")]),this.interval=this.intervalOptions.at(0)}set intervalOptions(t){this._set("intervalOptions",(0,w.V)(t,this._get("intervalOptions")))}};(0,n._)([(0,p.MZ)({type:o.default})],M.prototype,"color",void 0),(0,n._)([(0,p.MZ)()],M.prototype,"interval",void 0),(0,n._)([(0,p.MZ)({type:y.default})],M.prototype,"intervalOptions",null),M=(0,n._)([(0,f.$)("esri.widgets.ShadowCast.DiscreteOptions")],M);const b=M;var T=i(21268);let P=class extends r.default{constructor(){super(...arguments),this.color=new o.default([0,0,255,.7]),this.mode=T.k.Continuous}};(0,n._)([(0,p.MZ)({type:o.default})],P.prototype,"color",void 0),(0,n._)([(0,p.MZ)()],P.prototype,"mode",void 0),P=(0,n._)([(0,f.$)("esri.widgets.ShadowCast.DurationOptions")],P);const A=P;var O,D,Z=i(32687),C=i(42198),N=i(76469);(D=O||(O={})).PointerMove="pointer-move",D.Main="main";let S=class extends r.default{constructor(t){super(t),this._screenPoint=null,this._accumulatedShadowTime=null,this._shadowTimeTask=null,this._updateAccumulatedShadowTime=(t,e)=>{this._shadowTimeTask=(0,l.DC)(this._shadowTimeTask),this._shadowTimeTask=(0,s.UT)((async i=>{const{results:n,ground:o}=await t.hitTest(e);if((0,u.throwIfAborted)(i),0===n.length&&!o.mapPoint)return void(this._accumulatedShadowTime=null);const r=await this.getDuration(e,i);this._accumulatedShadowTime=r}))},this._throttledUpdateAccumulatedShadowTime=(0,N.n)(this._updateAccumulatedShadowTime,300)}initialize(){this.addHandles((0,c.watch)((()=>({enabled:this.enabled,view:this.view})),(t=>{let{enabled:e,view:i}=t;e&&null!=i?this._startTracking(i):this._stopTracking()}),c.syncAndInitial))}get screenPoint(){return this.enabled?this._screenPoint:null}get accumulatedShadowTime(){return this.enabled?this._accumulatedShadowTime:null}get testData(){}_startTracking(t){if(this.hasHandles(O.Main))return;const e=()=>{this.hasHandles(O.PointerMove)||this.addHandles(t.on("pointer-move",(e=>{const i=(0,d.tc)(e.x,e.y);this._screenPoint=i,this._throttledUpdateAccumulatedShadowTime(t,i)})),O.PointerMove)},i=()=>{this.removeHandles(O.PointerMove),this._screenPoint=null,this._accumulatedShadowTime=null};this.addHandles([this._throttledUpdateAccumulatedShadowTime,t.on("pointer-enter",e),t.on("pointer-leave",i),t.on("pointer-down",i),t.on("pointer-drag",i),t.on("pointer-up",e),t.on("click",(e=>{const i=(0,d.tc)(e.x,e.y);this._screenPoint=i,this._updateAccumulatedShadowTime(t,i)})),(0,C.hA)((()=>{this._shadowTimeTask=(0,l.DC)(this._shadowTimeTask)}))],O.Main),e()}_stopTracking(){this.removeHandles(O.Main)}};(0,n._)([(0,p.MZ)()],S.prototype,"getDuration",void 0),(0,n._)([(0,p.MZ)()],S.prototype,"view",void 0),(0,n._)([(0,p.MZ)()],S.prototype,"enabled",void 0),(0,n._)([(0,p.MZ)()],S.prototype,"screenPoint",null),(0,n._)([(0,p.MZ)()],S.prototype,"accumulatedShadowTime",null),(0,n._)([(0,p.MZ)()],S.prototype,"_screenPoint",void 0),(0,n._)([(0,p.MZ)()],S.prototype,"_accumulatedShadowTime",void 0),(0,n._)([(0,p.MZ)()],S.prototype,"_shadowTimeTask",void 0),S=(0,n._)([(0,f.$)("esri.widgets.ShadowCast.ShadowTooltipViewModel")],S);var x=i(89379);let z=class extends r.default{constructor(){super(...arguments),this.color=new o.default([255,0,0,.7]),this.value=(0,h.t)(4,"hours","milliseconds"),this.minValue=0,this.maxValue=(0,h.t)(8,"hours","milliseconds")}};(0,n._)([(0,p.MZ)({type:o.default})],z.prototype,"color",void 0),(0,n._)([(0,p.MZ)()],z.prototype,"value",void 0),(0,n._)([(0,p.MZ)()],z.prototype,"minValue",void 0),(0,n._)([(0,p.MZ)()],z.prototype,"maxValue",void 0),z=(0,n._)([(0,f.$)("esri.widgets.ShadowCast.ThresholdOptions")],z);const k=z;var E=i(29940);const U=[],I=(0,m.vt)(),R=[],V=(0,h.t)(1,"hours","milliseconds");let H=class extends r.default{constructor(t){super(t),this.view=null,this.tooltip=new S({getDuration:(t,e)=>this.getDuration(t,e)}),this.startTimeOfDay=(0,h.t)(10,"hours","milliseconds"),this.endTimeOfDay=(0,h.t)(16,"hours","milliseconds"),this.visualizationType=x.J.Threshold,this.thresholdOptions=new k,this.durationOptions=new A,this.discreteOptions=new b,this._running=!0,this._stopPreviewingTask=null,this._forcePreview=!1,this._autoRestoreForcePreviewEnabled=!0,this._utcOffset=null,this.date=new Date}initialize(){this.addHandles([(0,c.watch)((()=>({view:this.view,tooltipEnabled:this._tooltipEnabled})),(t=>{let{view:e,tooltipEnabled:i}=t;this.tooltip.view=e,this.tooltip.enabled=i}),c.syncAndInitial),(0,c.watch)((()=>this._forcePreviewDependencies),(()=>{(0,l.DC)(this._stopPreviewingTask),this._forcePreview=!0,this._autoRestoreForcePreviewEnabled&&(this._stopPreviewingTask=(0,s.UT)((async t=>{await(0,u.after)(500,t),(0,u.throwIfAborted)(t),this._forcePreview=!1})))}),c.syncAndInitial),(0,c.watch)((()=>({renderer:this.renderer,parameters:this._visualizationParameters})),(t=>G(t.renderer,t.parameters)),c.syncAndInitial),(0,c.watch)((()=>({renderer:this.renderer,parameters:{lightDirections:this._lightDirections}})),(t=>G(t.renderer,t.parameters)),c.syncAndInitial),(0,c.watch)((()=>({renderer:this.renderer,parameters:{enabled:this._running}})),(t=>G(t.renderer,t.parameters)),c.syncAndInitial),(0,c.watch)((()=>({renderer:this.renderer,parameters:{previewing:this._previewing}})),(t=>G(t.renderer,t.parameters)),c.syncAndInitial)])}destroy(){this.stop(),G(this.renderer,{enabled:!1}),(0,l.pR)(this.tooltip)}get state(){return null!=this.view&&this.view.ready&&null!=this._referencePosition?Z.H.Ready:Z.H.Disabled}set date(t){const e=new Date(t);e.setHours(0,0,0,0),this._set("date",e)}get utcOffset(){return this._utcOffset??this._utcOffsetAuto}set utcOffset(t){this._utcOffset=t}get testData(){}get _previewing(){const{view:t}=this;return null==t?.allLayerViews||this._forcePreview||!t.stationary||t.allLayerViews.some((t=>B(t)&&t.updating))}get _utcOffsetAuto(){const t=this._referencePosition;return null!=t?(0,_.uu)(t[0],!1):0}get _dateUTCOffset(){let t=this.date;return t=(0,h.mi)(t,-t.getTimezoneOffset(),"minutes"),t=(0,h.mi)(t,-this.utcOffset,"hours"),t}get _startDateTimeUTC(){return(0,h.mi)(this._dateUTCOffset,this.startTimeOfDay)}get _endDateTimeUTC(){return(0,h.mi)(this._dateUTCOffset,this.endTimeOfDay)}get _referencePosition(){return this.view?.environmentManager?.referencePositionGeographic}get _interval(){const t=this._duration>0?Math.floor(this._duration/255):255,e=this.discreteOptions.interval;switch(this.visualizationType){case x.J.Threshold:case x.J.Duration:return t;case x.J.Discrete:return e>0?e:t}}get _sampleCount(){return this._lightDirections.length}get _duration(){return this.endTimeOfDay-this.startTimeOfDay}get _lightDirections(){const{view:t}=this;if(null==t)return U;const e="global"===t.viewingMode?I:this._referencePosition;if(null==e)return U;const i=this._interval,n=(0,v.ld)(this._startDateTimeUTC,this._endDateTimeUTC,i,e,t.state.viewingMode),o=n.length;R.length=0;const r=(0,E.s)(0,o,R),a=new Array(o);for(let s=0;s<o;++s)a[s]=n[r[s]];return a}get _tooltipEnabled(){return this.state===Z.H.Ready&&this.visualizationType!==x.J.Discrete&&this._running&&!this._previewing}get _visualizationParameters(){if(!this._running)return null;switch(this.visualizationType){case x.J.Threshold:return this._thresholdVisualizationParameters;case x.J.Duration:return this._durationVisualizationParameters;case x.J.Discrete:return this._discreteVisualizationParameters}}get _thresholdVisualizationParameters(){const{value:t,color:e}=this.thresholdOptions,i=this._duration;return{visualization:g.o.Threshold,color:o.default.toUnitRGBA(e),threshold:i>0?t/this._duration:0}}get _durationVisualizationParameters(){const{color:t,mode:e}=this.durationOptions,i=this._duration,n=i>0&&e===T.k.Hourly?V/i:0;return{color:o.default.toUnitRGBA(t),visualization:g.o.Gradient,bandsEnabled:n>0,bandSize:n}}get _discreteVisualizationParameters(){return{color:o.default.toUnitRGBA(this.discreteOptions.color),visualization:g.o.Gradient,bandsEnabled:!1,bandSize:0}}get _forcePreviewDependencies(){const{view:t}=this;if(null==t)return null;const e=t.slicePlane,i=t.allLayerViews.toArray().filter(B),n=i.map((t=>t.layer)).filter(a.Ru),o=i.map((t=>t.visible)),r=n.map((t=>t.visible)),s=n.map((t=>t.opacity)),l=n.filter((t=>"definitionExpression"in t)).map((t=>t.definitionExpression)),u=i.filter((t=>"filter"in t)).map((t=>t.filter));return{slicePlane:e,startDateUTC:this._startDateTimeUTC,endDateUTC:this._endDateTimeUTC,layerViewVisibilities:o,layerVisibilities:r,layerOpacities:s,filters:u,definitionExpressions:l}}get renderer(){const{view:t}=this;if(null==t)return null;const e=t._stage;return null==e?null:e.renderer}start(){this.setRunning(!0)}stop(){this.setRunning(!1)}setRunning(t){this._running=t}async getDuration(t,e){const{view:i,renderer:n,_sampleCount:o}=this;if(null==i||null==n||0===o)return 0;const r=i.state.camera.screenToRender((0,d.gs)(t.x,t.y),(0,d.QG)());return n.readAccumulatedShadow(r)*this._duration}};function G(t,e){null!=t&&null!=e&&t.setParameters({shadowCast:e})}function B(t){if(t.suspended)return!1;switch(t.type){case"building-scene-3d":case"csv-3d":case"elevation-3d":case"feature-3d":case"geojson-3d":case"graphics-3d":case"integrated-mesh-3d":case"integrated-mesh-3dtiles":case"ogc-feature-3d":case"route-3d":case"scene-layer-3d":case"scene-layer-graphics-3d":case"stream-3d":case"wms-3d":return!0;case"base-dynamic-3d":case"catalog-3d":case"catalog-footprint-3d":case"catalog-dynamic-group-3d":case"dimension-3d":case"imagery-3d":case"imagery-tile-3d":case"line-of-sight-3d":case"map-image-3d":case"point-cloud-3d":case"tile-3d":case"vector-tile-3d":case"viewshed-3d":case"voxel-3d":case"wfs-3d":case"wmts-3d":case"media-3d":default:return!1;case"group":return t.layerViews.toArray().some((t=>B(t)))}}(0,n._)([(0,p.MZ)()],H.prototype,"state",null),(0,n._)([(0,p.MZ)()],H.prototype,"view",void 0),(0,n._)([(0,p.MZ)()],H.prototype,"tooltip",void 0),(0,n._)([(0,p.MZ)({type:Date,nonNullable:!0})],H.prototype,"date",null),(0,n._)([(0,p.MZ)({nonNullable:!0})],H.prototype,"utcOffset",null),(0,n._)([(0,p.MZ)({nonNullable:!0})],H.prototype,"startTimeOfDay",void 0),(0,n._)([(0,p.MZ)({nonNullable:!0})],H.prototype,"endTimeOfDay",void 0),(0,n._)([(0,p.MZ)({nonNullable:!0})],H.prototype,"visualizationType",void 0),(0,n._)([(0,p.MZ)({type:k,nonNullable:!0})],H.prototype,"thresholdOptions",void 0),(0,n._)([(0,p.MZ)({type:A,nonNullable:!0})],H.prototype,"durationOptions",void 0),(0,n._)([(0,p.MZ)({type:b,nonNullable:!0})],H.prototype,"discreteOptions",void 0),(0,n._)([(0,p.MZ)()],H.prototype,"_running",void 0),(0,n._)([(0,p.MZ)()],H.prototype,"_stopPreviewingTask",void 0),(0,n._)([(0,p.MZ)()],H.prototype,"_forcePreview",void 0),(0,n._)([(0,p.MZ)()],H.prototype,"_autoRestoreForcePreviewEnabled",void 0),(0,n._)([(0,p.MZ)()],H.prototype,"_previewing",null),(0,n._)([(0,p.MZ)()],H.prototype,"_utcOffset",void 0),(0,n._)([(0,p.MZ)()],H.prototype,"_utcOffsetAuto",null),(0,n._)([(0,p.MZ)()],H.prototype,"_dateUTCOffset",null),(0,n._)([(0,p.MZ)()],H.prototype,"_startDateTimeUTC",null),(0,n._)([(0,p.MZ)()],H.prototype,"_endDateTimeUTC",null),(0,n._)([(0,p.MZ)()],H.prototype,"_referencePosition",null),(0,n._)([(0,p.MZ)()],H.prototype,"_interval",null),(0,n._)([(0,p.MZ)()],H.prototype,"_sampleCount",null),(0,n._)([(0,p.MZ)()],H.prototype,"_duration",null),(0,n._)([(0,p.MZ)()],H.prototype,"_lightDirections",null),(0,n._)([(0,p.MZ)()],H.prototype,"_tooltipEnabled",null),(0,n._)([(0,p.MZ)()],H.prototype,"_visualizationParameters",null),(0,n._)([(0,p.MZ)()],H.prototype,"_thresholdVisualizationParameters",null),(0,n._)([(0,p.MZ)()],H.prototype,"_durationVisualizationParameters",null),(0,n._)([(0,p.MZ)()],H.prototype,"_discreteVisualizationParameters",null),(0,n._)([(0,p.MZ)()],H.prototype,"_forcePreviewDependencies",null),(0,n._)([(0,p.MZ)()],H.prototype,"renderer",null),H=(0,n._)([(0,f.$)("esri.widgets.ShadowCast.ShadowCastViewModel")],H);const L=H},66797:(t,e,i)=>{i.d(e,{J_:()=>s,aE:()=>c,cq:()=>l,uu:()=>u});var n=i(64682),o=i(30142),r=i(75400);function a(t,e,i){if(null==e.longitude||null==e.latitude||null==i.longitude||null==i.latitude)throw new Error("Invalid points: no lon/lat");return function(t,e,i,o,r){const a=(0,n.kU)(i),s=(0,n.kU)(r),l=a-s,u=(0,n.kU)(e)-(0,n.kU)(o),c=Math.sin(l/2),d=Math.sin(u/2),h=2*(0,n.YN)(Math.sqrt(c*c+Math.cos(a)*Math.cos(s)*d*d))*t;return Math.round(1e4*h)/1e4}(t,e.longitude,e.latitude,i.longitude,i.latitude)}function s(t,e,i){const n=e.spatialReference,s=(0,o.tO)(n),l=new r.default(e.x,t.y,n),u=new r.default(i.x,t.y,n),c=new r.default(t.x,e.y,n),d=new r.default(t.x,i.y,n);return{lon:a(s.radius,l,u),lat:a(s.radius,c,d)}}function l(t,e,i){const o=e/i,r=(0,n.kU)(t),a=Math.sin(o/2),s=Math.cos(r),l=2*(0,n.YN)(Math.sqrt(a*a/(s*s)));return(0,n.KJ)(l)}function u(t,e){let i=t/15;return e||(i=Math.round(i)),i}function c(t,e){const i=t?.[0];if(null==i)return null;e||(e={hours:0,minutes:0,seconds:0}),e.hours=u(i,!0);const n=e.hours%1;e.hours-=n,e.minutes=60*n;const o=e.minutes%1;return e.minutes-=o,e.seconds=Math.round(60*o),e}},74871:(t,e,i)=>{i.d(e,{$8:()=>m,Md:()=>g,ld:()=>y,qI:()=>_,uf:()=>M});var n=i(64682),o=i(87752),r=i(10382),a=i(32006),s=i(98080),l=i(89227),u=i(28473),c=i(51064),d=i(11443),h=i(11741);const p={local:{altitude:1500,ambientAtNight:.1,ambientAtNoon:.45,ambientAtTwilight:.2,directAtNoon:.65,directAtTwilight:.7},global:{altitude:8e5,ambient:.015,direct:.75},planarDirection:{localAltitude:1e4,globalAltitude:1e6,globalAngles:{azimuth:1.3*Math.PI,altitude:.6*Math.PI}}};class f{constructor(t,e){this.direct=t,this.ambient=e}}function m(t,e,i,o,r,c){(0,l.i)(c.ambient.color,1,1,1),c.ambient.intensity=p.global.ambient,(0,l.i)(c.direct.color,1,1,1),c.direct.intensity=p.global.direct;const h=e[2],f=(0,n.qE)((Math.abs(h)-p.local.altitude)/(p.global.altitude-p.local.altitude),0,1);let m;if(c.globalFactor=f,null!=t&&(m=d.S.getTimes(t,e[1],e[0])),f<1){let e;if(null!=t)e=function(t,e,i){const n=t.valueOf();let o,r;e.polarException===d.S.PolarException.MIDNIGHT_SUN?(o=n-60*(t.getHours()+48)*60*1e3-60*t.getMinutes()*1e3,r=o+432e6):e.polarException===d.S.PolarException.POLAR_NIGHT?(o=n-2,r=n-1):(o=e.sunrise.valueOf(),r=e.sunset.valueOf());const c=r-o,h=o+c/2,p=c/4,f=h-p,m=h+p,_=.06*c,v=o-_/2,g=o+_/2,y=r-_/2,w=r+_/2,M=(0,s.vt)(),b=(0,u.vt)(),T=(0,u.vt)();let $="";if(n<v||n>w)(0,a.C)(M,k),(0,l.c)(b,O),(0,l.c)(T,N),$="night";else if(n<g){const t=(n-v)/(g-v);(0,a.Cc)(M,k,E,t),(0,l.m)(b,O,D,t),(0,l.m)(T,N,S,t),$="sun rising"}else if(n<f){const t=(n-g)/(f-g);(0,a.Cc)(M,E,U,t),(0,l.m)(b,D,Z,t),(0,l.m)(T,S,x,t),$="early morning"}else if(n<h){const t=(n-f)/(h-f);(0,a.Cc)(M,U,I,t),(0,l.m)(b,Z,C,t),(0,l.m)(T,x,z,t),$="late morning"}else if(n<m){const t=(n-h)/(m-h);(0,a.Cc)(M,I,R,t),(0,l.m)(b,C,V,t),(0,l.m)(T,z,H,t),$="early afternoon"}else if(n<y){const t=(n-m)/(y-m);(0,a.Cc)(M,R,G,t),(0,l.m)(b,V,B,t),(0,l.m)(T,H,L,t),$="late afternoon"}else if(n<w){const t=(n-y)/(w-y);(0,a.Cc)(M,G,k,t),(0,l.m)(b,B,O,t),(0,l.m)(T,L,N,t),$="sun setting"}let q=0;switch(i){case"rainy":case"foggy":q=.8;break;case"snowy":q=.5}q>0&&(A(b,q),A(T,q));const J=P(i);return{direct:{intensity:M[0]*J.direct,color:b},ambient:{intensity:M[1]*J.ambient,color:T},timeOfDay:$}}(t,m,o);else{const t=P(o);e={direct:{intensity:p.local.directAtNoon*t.direct,color:(0,u.fA)(1,1,1)},ambient:{intensity:p.local.ambientAtNoon*t.ambient,color:(0,u.fA)(1,1,1)},timeOfDay:"early afternoon"}}(0,l.m)(c.ambient.color,e.ambient.color,c.ambient.color,f),c.ambient.intensity=(0,n.Cc)(e.ambient.intensity,c.ambient.intensity,f),(0,l.m)(c.direct.color,e.direct.color,c.direct.color,f),c.direct.intensity=(0,n.Cc)(e.direct.intensity,c.direct.intensity,f),c.specularStrength="rainy"===o||"snowy"===o||"foggy"===o?0:1,c.environmentStrength="rainy"===o?.7:"snowy"===o||"foggy"===o?.75:1}c.noonFactor=null!=t?function(t,e){const i=t.valueOf();let o,r;e.polarException===d.S.PolarException.MIDNIGHT_SUN?(o=i-60*(t.getHours()+48)*60*1e3-60*t.getMinutes()*1e3,r=o+432e6):e.polarException===d.S.PolarException.POLAR_NIGHT?(o=i-2,r=i-1):(o=e.sunrise.valueOf(),r=e.sunset.valueOf());const a=o+(r-o)/2;return 1-(0,n.qE)(Math.abs(i-a)/432e5,0,1)}(t,m):1,null!=t?v(t,e,i,c.direct.directionToLightSource):_(r,i,c.direct.directionToLightSource)}function _(t,e,i){e===c.RT.Global?(0,l.n)(J,t.eye):(0,l.i)(J,0,0,1),(0,l.h)(F,t.viewForward,-1);const n=(0,h.g7)(F,J),r=Math.max(n-2*Y,0),a=.85*r/(r+1),s=Math.max(Y,n-Y-a);(0,o.$0)(q,-s,t.viewRight),(0,l.t)(i,F,q),(0,l.g)(i,i,(0,l.h)(j,t.viewRight,K)),(0,l.n)(i,i)}function v(t,e,i,r){const a=T,s=(0,o.D_)(b);if(i===c.RT.Global)d.S.getPosition(t,0,0,a),(0,l.i)(r,0,0,-1),(0,o.eL)(s,s,-a.azimuth),(0,o.Z8)(s,s,-a.altitude),(0,l.t)(r,r,s);else{const i=p.planarDirection,u=i.globalAngles,c=e[2];let h=(Math.abs(c)-i.localAltitude)/(i.globalAltitude-i.localAltitude);h=(0,n.qE)(h,0,1),h<1?(d.S.getPosition(t,e[1],e[0],a),a.azimuth=(1-h)*a.azimuth+h*u.azimuth,a.altitude=(1-h)*a.altitude+h*u.altitude):(a.azimuth=u.azimuth,a.altitude=u.altitude),(0,l.i)(r,0,-1,0),(0,o.Qr)(s,s,-a.azimuth),(0,o.eL)(s,s,-a.altitude),(0,l.t)(r,r,s)}}function g(t,e){if(e===c.RT.Global)return!0;const i=p.planarDirection;return Math.abs(t)<i.localAltitude}function y(t,e,i,n,o){const r=t.getTime(),a=e.getTime()-r,s=Math.floor(a/i)+1,l=new Array(s);for(let c=0;c<s;++c)$.setTime(r+i*c),l[c]=(0,u.vt)(),v($,n,o,l[c]);return l}const w=(0,u.fA)(.5773502691896258,-.5773502691896258,.5773502691896258);class M{constructor(){this.ambient={color:(0,u.fA)(1,1,1),intensity:.55},this.direct={color:(0,u.fA)(1,1,1),intensity:.55,directionToLightSource:(0,u.o8)(w)},this.noonFactor=.5,this.globalFactor=0,this.specularStrength=1,this.environmentStrength=1}}const b=(0,r.vt)(),T={azimuth:0,altitude:0};function P(t){switch(t){case"disabled":case"sunny":case"cloudy":return new f(1,1);case"rainy":return new f(.4,1.2);case"snowy":return new f(.5,1.3);case"foggy":return new f(.2,1.6)}}function A(t,e){const i=(t[0]+t[1]+t[2])/3;t[0]+=(i-t[0])*e,t[1]+=(i-t[1])*e,t[2]+=(i-t[2])*e}const O=(0,u.fA)(.01,.01,.01),D=(0,u.fA)(1,.6,.5),Z=(0,u.fA)(1,.98,.98),C=(0,u.fA)(1,1,1),N=(0,u.fA)(.8,.8,1),S=(0,u.fA)(.8,.8,1),x=(0,u.fA)(.98,.98,1),z=(0,u.fA)(1,1,1),k=(0,s.fA)(.01,p.local.ambientAtNight),E=(0,s.fA)(p.local.directAtTwilight,p.local.ambientAtTwilight),U=(0,s.fA)(.9*p.local.directAtNoon,p.local.ambientAtNoon),I=(0,s.fA)(p.local.directAtNoon,p.local.ambientAtNoon),R=U,V=Z,H=x,G=E,B=D,L=S;const $=new Date(0),q=(0,r.vt)(),J=(0,u.vt)(),F=(0,u.vt)(),j=(0,u.vt)(),Y=.25,K=.2},76469:(t,e,i)=>{function n(t,e,i,n){let o=null,r=1e3;"number"==typeof e?(r=e,n=i):(o=e??null,r=i);let a,s=0;const l=()=>{s=0,t.apply(n,a)},u=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];o&&o.apply(n,e),a=e,r?s||(s=setTimeout(l,r)):l()};return u.remove=()=>{s&&(clearTimeout(s),s=0)},u.forceUpdate=()=>{s&&(clearTimeout(s),l())},u.hasPendingUpdates=()=>!!s,u}i.d(e,{n:()=>n})},89379:(t,e,i)=>{var n;i.d(e,{J:()=>n}),function(t){t.Threshold="threshold",t.Duration="duration",t.Discrete="discrete"}(n||(n={}));n.Threshold,n.Duration,n.Discrete}}]);