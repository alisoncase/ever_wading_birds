"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[8501,29611,30882,53263,75644,96300],{29611:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var s=i(93800),r=i(49959),n=i(79953),a=i(48602),l=(i(21265),i(50925),i(14746),i(75269)),o=i(27811),d=i(96300),u=(i(17745),i(76697)),c=i(87118);const h="esri-measurement";let v=class extends o.default{constructor(e,t){super(e,t),this._widgets=new Map,this.activeWidget=null,this.messages=null,this.viewModel=new d.default}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((e=>{this._set("activeWidget",e)})),this.addHandles([(0,n.watch)((()=>[this.view,this.activeTool]),(async()=>{this._set("activeWidget",await this._getActiveWidget())})),(0,n.watch)((()=>this.activeWidget),((e,t)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),t&&(t.visible=!1)})),(0,n.watch)((()=>[this.areaUnit,this.linearUnit,this.uiStrings]),(()=>this._updateSubWidgetProperties()))])}destroy(){this._destroyWidgets()}get activeTool(){return this.viewModel.activeTool}set activeTool(e){this.viewModel.activeTool=e}get areaUnit(){return this.viewModel.areaUnit}set areaUnit(e){this.viewModel.areaUnit=e}get icon(){return"measure"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get linearUnit(){return this.viewModel.linearUnit}set linearUnit(e){this.viewModel.linearUnit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return(0,c.K)("div",{class:h},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&(0,r.ignoreAbortErrors)(e.start())}async _createWidget(e){const{areaUnit:t,linearUnit:s,view:r}=this;if(!r)return null;switch(e){case"area":{const{type:s}=r;switch(s){case"2d":return new(0,(await Promise.all([i.e(86201),i.e(30124),i.e(31329),i.e(24368),i.e(67439),i.e(62791),i.e(26584),i.e(30199),i.e(74700),i.e(40313),i.e(62570),i.e(19874)]).then(i.bind(i,19874))).default)({view:r,unit:t,uiStrings:this._createUIStringsForWidget(e)});case"3d":return new(0,(await Promise.all([i.e(86201),i.e(30124),i.e(31329),i.e(24368),i.e(99717),i.e(67439),i.e(76517),i.e(62791),i.e(60984),i.e(60111),i.e(51255),i.e(51297),i.e(83607),i.e(4791),i.e(39458),i.e(1303),i.e(70082),i.e(93609),i.e(50948),i.e(48261),i.e(36705),i.e(74700),i.e(85090),i.e(61018),i.e(94211),i.e(45614),i.e(20447)]).then(i.bind(i,20447))).default)({view:r,unit:t,uiStrings:this._createUIStringsForWidget(e)});default:return null}}case"distance":{const{type:t}=r;return"2d"===t?new(0,(await Promise.all([i.e(86201),i.e(30124),i.e(31329),i.e(24368),i.e(67439),i.e(62791),i.e(26584),i.e(30199),i.e(74700),i.e(40313),i.e(76502),i.e(81220)]).then(i.bind(i,58839))).default)({view:r,unit:s,uiStrings:this._createUIStringsForWidget(e)}):null}case"direct-line":{const{type:t}=r;return"3d"===t?new(0,(await Promise.all([i.e(86201),i.e(30124),i.e(31329),i.e(24368),i.e(99717),i.e(67439),i.e(76517),i.e(62791),i.e(60984),i.e(60111),i.e(51255),i.e(51297),i.e(83607),i.e(4791),i.e(39458),i.e(1303),i.e(70082),i.e(93609),i.e(50948),i.e(48261),i.e(36705),i.e(74700),i.e(85090),i.e(61018),i.e(94211),i.e(3830),i.e(56673)]).then(i.bind(i,56673))).default)({view:r,unit:s,uiStrings:this._createUIStringsForWidget(e)}):null}default:return null}}_destroyWidgets(){this._widgets.forEach((e=>e.destroy())),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:t}=this;if(!t||!e)return null;let i=null;if(this._widgets.has(e))i=this._widgets.get(e),i.visible=!0;else{if(i=await this._createWidget(e),!i)return null;await i.viewModel.start(),this._widgets.set(e,i)}return i}_createUIStringsForWidget(e){if(!this.uiStrings)return;const t=e+"-"+this.view?.type;return this.uiStrings[t]}_updateSubWidgetProperties(){this._widgets.forEach(((e,t)=>{const{areaUnit:i,linearUnit:s}=this;e.unit=function(e){return"esri.widgets.AreaMeasurement2D"===e?.declaredClass||"esri.widgets.AreaMeasurement3D"===e?.declaredClass}(e)?i:s,e.uiStrings=this._createUIStringsForWidget(t)}))}};(0,s._)([(0,a.MZ)()],v.prototype,"activeTool",null),(0,s._)([(0,a.MZ)({readOnly:!0})],v.prototype,"activeWidget",void 0),(0,s._)([(0,a.MZ)()],v.prototype,"areaUnit",null),(0,s._)([(0,a.MZ)()],v.prototype,"icon",null),(0,s._)([(0,a.MZ)()],v.prototype,"label",null),(0,s._)([(0,a.MZ)()],v.prototype,"linearUnit",null),(0,s._)([(0,a.MZ)(),(0,u.G)("esri/widgets/Measurement/t9n/Measurement")],v.prototype,"messages",void 0),(0,s._)([(0,a.MZ)()],v.prototype,"uiStrings",void 0),(0,s._)([(0,a.MZ)()],v.prototype,"view",null),(0,s._)([(0,a.MZ)({type:d.default})],v.prototype,"viewModel",void 0),v=(0,s._)([(0,l.$)("esri.widgets.Measurement")],v);const w=v},56062:(e,t,i)=>{i.d(t,{c:()=>n});var s=i(84190),r=i(78139);function n(e){const t="metric";if(null==e)return t;const i=e.map,n=(i&&"portalItem"in i?i.portalItem?.portal:null)??r.default.getDefault();switch(n.user?.units??n.units){case t:return t;case"english":return"imperial"}return(0,s.jM)(e.spatialReference)??t}},75644:(e,t,i)=>{i.d(t,{q:()=>r});var s=i(56062);const r={readOnly:!0,get(){return(0,s.c)(this.view)}}},96300:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var s=i(93800),r=i(6946),n=i(84190),a=i(48602),l=(i(21265),i(50925),i(14746),i(75269)),o=i(75644);let d=class extends r.default{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){this._overrideIfSome("areaUnit",e)}get linearUnit(){return this.defaultUnit}set linearUnit(e){this._overrideIfSome("linearUnit",e)}get state(){const{activeViewModel:e}=this;return e?e.state:"disabled"}};(0,s._)([(0,a.MZ)({type:["area","distance","direct-line"]})],d.prototype,"activeTool",void 0),(0,s._)([(0,a.MZ)()],d.prototype,"activeViewModel",void 0),(0,s._)([(0,a.MZ)({type:n.z3})],d.prototype,"areaUnit",null),(0,s._)([(0,a.MZ)(o.q)],d.prototype,"defaultUnit",void 0),(0,s._)([(0,a.MZ)({type:n.GB})],d.prototype,"linearUnit",null),(0,s._)([(0,a.MZ)({readOnly:!0})],d.prototype,"state",null),(0,s._)([(0,a.MZ)()],d.prototype,"view",void 0),d=(0,s._)([(0,l.$)("esri.widgets.Measurement.MeasurementViewModel")],d);const u=d}}]);