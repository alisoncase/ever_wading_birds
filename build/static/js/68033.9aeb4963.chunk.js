"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[68033],{2739:(t,e,r)=>{r.d(e,{CB:()=>v,ZD:()=>S,av:()=>m,zC:()=>R});var i=r(79625),n=r(64986),s=r(16804),o=r(28473),a=r(75400),l=r(93321),c=r(18162),u=r(46808),h=r(78076),d=r(4794),p=r(96504),f=r(8609),_=r(92453),y=r(27464),E=r(54407),g=r(64863);async function v(t,e,r,i){const n=r?S(t,r):i,o=(0,s.gs)(e.x,e.y);n.requiresGroundFeedback=!0,n.enableDraped=!0;const a=(0,f.hz)(t.state.viewingMode);a.options.selectionMode=!0,a.options.store=_.oH.ALL,t.sceneIntersectionHelper.intersectIntersectorScreen(o,a,n);const l=function(t,e,r){const i=new Array;let n=null;for(let s=0;s<e.length;s++){const o=e[s],a=(0,E.FV)(o,t);if(null!=a&&(a===t.map.ground||"type"in a&&(0,h.Eq)(a.type)))break;const l=(0,E.FI)(o,t);if(null==l)continue;if("graphic"===l.type){if(null==n&&s!==e.length-1&&(n=new Set),null!=n){const t=I(l.graphic);if(n.has(t))continue;n.add(t)}if(!O(r,l.graphic))continue}const c=T(t,o),u=o.distanceInRenderSpace;if("media"===l.type){const t=l.element.toSource(c);i.push({...l,mapPoint:c,distance:u,sourcePoint:t})}else i.push({...l,mapPoint:c,distance:u})}return i}(t,a.results.all,n.graphics),c=a.results.ground,u=(0,E.FV)(c,t),p=null!=u&&"type"in u&&(0,h.Eq)(u.type)?u:null,g={screenPoint:e,results:l,ground:{mapPoint:T(t,c),distance:(0,y.i3)(c)?c.distanceInRenderSpace:0,layer:p}};return d.b.SCENEVIEW_HITTEST_RETURN_INTERSECTOR&&(g.intersector=a),g}function m(t,e,r,i){const n=r?S(t,r):i,o=!(!n.graphics?.include&&!n.graphics?.exclude),a=!(!n.mediaElements?.include&&!n.mediaElements?.exclude),l=(0,s.WA)(e);n.enableDraped=n.include&&!n.include.has(g.fo)||n.exclude?.has(g.fo);const c=t.sceneIntersectionHelper,u=(0,f.hz)(t.state.viewingMode);if(u.options.selectionMode=!0,u.options.store=o||a?_.oH.ALL:_.oH.MIN,u.options.excludeLabels=r?.excludeLabels??!1,c.intersectIntersectorScreen(l,u,n),o||a){for(const e of u.results.all){const r=(0,E.FI)(e,t);if(null==r)return T(t,e);if(o&&("graphic"!==r.type||O(n.graphics,r.graphic)))return T(t,e);if(a&&("media"!==r.type||L(n.mediaElements,r.element)))return T(t,e)}return null}return T(t,u.results.min)}function T(t,e,r){return e.getIntersectionPoint(D)?(r=R(t,D,r),e.intersector===_.dz.TERRAIN&&t.basemapTerrain&&(r.z=(0,p.R1)(t.basemapTerrain,r)??0),r):null}function I(t){const e=t.sourceLayer,r=t.layer,i=e&&"objectIdField"in e?e:r&&"objectIdField"in r?r:e;if(i){const e=i.objectIdField??u.r,r=t.attributes?.[e];if(r)return`o-${i.id}-${r}`}return`u-${t.uid}`}function O(t,e){return L(t,I(e))}function L(t,e){return null==t||(null==t.include||t.include.has(e))&&(null==t.exclude||!t.exclude.has(e))}function R(t,e,r){let i=t.spatialReference||l.default.WGS84;return(0,c.F)(e,t.renderSpatialReference,D,i)?e=D:(i=l.default.WGS84,(0,c.F)(e,t.renderSpatialReference,D,i)&&(e=D)),r?(r.x=e[0],r.y=e[1],r.z=e[2],r.spatialReference=i):r=new a.default(e,i),r}function S(t,e){const r=M(t,e.include,A.INCLUDE),i=M(t,e.exclude,A.EXCLUDE);return{include:r.layerUids,exclude:i.layerUids,graphics:{include:r.graphicUids,exclude:i.graphicUids},mediaElements:{include:r.mediaElements,exclude:i.mediaElements}}}function M(t,e,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{layerUids:void 0,graphicUids:void 0,mediaElements:void 0};if(!e)return s;if(e instanceof i.default)o=s,a=I(e),o.graphicUids||(o.graphicUids=new Set),o.graphicUids.add(a),r===A.INCLUDE&&(null!=t.graphicsView&&e.layer===t?b(s,t.graphicsView.processor.layer.id):e.layer&&b(s,e.layer.uid));else if("layer"in e&&"element"in e)(function(t,e){t.mediaElements||(t.mediaElements=new Set),t.mediaElements.add(e)})(s,e.element),r===A.INCLUDE&&b(s,e.layer.uid);else if((0,n.xZ)(e))for(const i of e)i===t.graphics&&null!=t.graphicsView?b(s,t.graphicsView.processor.layer.id):i===t.map.ground?b(s,g.fo):M(t,i,r,s);else"uid"in e&&b(s,e.uid);var o,a;return s}function b(t,e){t.layerUids||(t.layerUids=new Set),t.layerUids.add(e)}const D=(0,o.vt)();var A,w;(w=A||(A={}))[w.INCLUDE=0]="INCLUDE",w[w.EXCLUDE=1]="EXCLUDE"},4794:(t,e,r)=>{r.d(e,{b:()=>l});var i=r(93800),n=r(6946),s=r(48602),o=(r(21265),r(50925),r(14746),r(75269));let a=class extends n.default{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1}};(0,i._)([(0,s.MZ)()],a.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"DECONFLICTOR_SHOW_GRID",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"LABELS_SHOW_BORDER",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"TEXT_SHOW_BASELINE",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"TEXT_SHOW_BORDER",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"OVERLAY_SHOW_CENTER",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"SHOW_POI",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"I3S_TREE_SHOW_TILES",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"I3S_SHOW_MODIFICATIONS",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"LINE_WIREFRAMES",void 0),a=(0,i._)([(0,o.$)("esri.views.3d.support.debugFlags")],a);const l=new a},8609:(t,e,r)=>{r.d(e,{G7:()=>I,TH:()=>_,hz:()=>g});var i=r(87752),n=r(10382),s=r(89227),o=r(28473),a=r(60548),l=r(24646),c=r(91102),u=r(51064),h=r(92453),d=r(15828),p=r(27464),f=r(64863);const _=1e-5;class y{constructor(t){this.options=new h.H6,this._results=new v,this.transform=new f.dg,this.tolerance=_,this.verticalOffset=null,this._ray=(0,c.vt)(),this._rayEnd=(0,o.vt)(),this._rayBeginTransformed=(0,o.vt)(),this._rayEndTransformed=(0,o.vt)(),this.viewingMode=t??u.RT.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,e,r){this.resetWithRay((0,c.Cr)(t,e,this._ray),r)}resetWithRay(t,e){this.camera=e,t!==this._ray&&(0,c.C)(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===u.RT.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,s.g)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;this.point=e,this.filterPredicate=i,this.tolerance=r??_;const s=(0,f.ou)(this.verticalOffset);if(t&&t.length>0){const e=n?t=>{n(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const r of t){const t=r.getSpatialQueryAccelerator?.();null!=t?(null!=s?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,e,s):t.forEachAlongRay(this._ray.origin,this._ray.direction,e),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(e)):r.objects.forAll((t=>e(t)))}}this.sortResults()}intersectObject(t){const e=t.geometries;if(!e)return;const r=t.effectiveTransformation,i=(0,f.ou)(this.verticalOffset);for(const o of e){if(!o.visible)continue;const{material:e,id:a}=o;if(!e.visible)continue;this.transform.setAndInvalidateLazyTransforms(r,o.transformation),(0,s.t)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,s.t)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const l=this.transform.transform;null!=i&&(i.objectTransform=this.transform),e.intersect(o,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((e,r,i,s,o,c)=>{if(e>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,e))return;const u=s?this._results.hud:this._results,p=s?s=>{const l=new d.B$(t,a,i,c);s.set(h.dz.HUD,l,e,r,n.zK,o)}:n=>n.set(h.dz.OBJECT,{object:t,geometryId:a,triangleNr:i},e,r,l,o);if((null==u.min.drapedLayerOrder||o>=u.min.drapedLayerOrder)&&(null==u.min.dist||e<u.min.dist)&&p(u.min),this.options.store!==h.oH.MIN&&(null==u.max.drapedLayerOrder||o<u.max.drapedLayerOrder)&&(null==u.max.dist||e>u.max.dist)&&p(u.max),this.options.store===h.oH.ALL)if(s){const t=new T(this._ray);p(t),this._results.hud.all.push(t)}else{const t=new m(this._ray);p(t),this._results.all.push(t)}}}))}}sortResults(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._results.all).sort(((t,e)=>t.dist!==e.dist?(t.dist??0)-(e.dist??0):t.drapedLayerOrder!==e.drapedLayerOrder?E(t.drapedLayerOrder,e.drapedLayerOrder):E(t.drapedLayerGraphicOrder,e.drapedLayerGraphicOrder)))}}function E(t,e){return(e??-Number.MAX_VALUE)-(t??-Number.MAX_VALUE)}function g(t){return new y(t)}class v{constructor(){this.min=new m((0,c.vt)()),this.max=new m((0,c.vt)()),this.hud={min:new T((0,c.vt)()),max:new T((0,c.vt)()),all:new Array},this.ground=new m((0,c.vt)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class m{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?((0,s.h)(O,this.ray.direction,this.dist),(0,s.l)(O)):null}withinDistance(t){return!!(0,p.i3)(this)&&this.distanceInRenderSpace<=t}getIntersectionPoint(t){return!!(0,p.i3)(this)&&((0,s.h)(O,this.ray.direction,this.dist),(0,s.g)(t,this.ray.origin,O),!0)}getTransformedNormal(t){return(0,s.c)(L,this.normal),L[3]=0,(0,a.t)(L,L,this.transformation),(0,s.c)(t,L),(0,s.n)(t,t)}constructor(t){this.intersector=h.dz.OBJECT,this.normal=(0,o.vt)(),this.transformation=(0,n.vt)(),this._ray=(0,c.vt)(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=h.dz.OBJECT,(0,c.C)(t,this._ray)}set(t,e,r,a,l,c,u){this.intersector=t,this.dist=r,(0,s.c)(this.normal,a??o.Cb),(0,i.C)(this.transformation,l??n.zK),this.target=e,this.drapedLayerOrder=c,this.drapedLayerGraphicOrder=u}copy(t){(0,c.C)(t.ray,this._ray),this.intersector=t.intersector,this.dist=t.dist,this.target=t.target,this.drapedLayerOrder=t.drapedLayerOrder,this.drapedLayerGraphicOrder=t.drapedLayerGraphicOrder,(0,s.c)(this.normal,t.normal),(0,i.C)(this.transformation,t.transformation)}}class T extends m{constructor(){super(...arguments),this.intersector=h.dz.HUD}}function I(t){return new m(t)}const O=(0,o.vt)(),L=(0,l.vt)()},10323:(t,e,r)=>{r.d(e,{Aw:()=>c,Jb:()=>l,Q5:()=>d,W3:()=>p,d:()=>o,db:()=>h,kV:()=>u,rb:()=>a});var i=r(92453),n=r(15828),s=r(27464);class o extends n.R6{constructor(t,e,r,i){super(e,r),this.point=t,this.createGraphic=i}}function a(t){return(0,s.i3)(t)&&t.intersector===i.dz.PCL&&!!t.target}class l extends n.HE{constructor(t,e,r,i,n){super(t),this.layerUid=t,this.sublayerUid=e,this.nodeIndex=r,this.componentIndex=i,this.triangleNr=n}}class c extends n.R6{constructor(t,e,r){super(e,null),this.point=t,this.createVoxelGraphic=r}}class u extends n.R6{constructor(t,e){super(t,null),this.createTiles3DGraphic=e}}function h(t){return(0,s.i3)(t)&&t.intersector===i.dz.I3S&&!!t.target}function d(t){return(0,s.i3)(t)&&t.intersector===i.dz.VOXEL&&!!t.target}function p(t){return(0,s.i3)(t)&&t.intersector===i.dz.TILES3D&&!!t.target}},15828:(t,e,r)=>{r.d(e,{B$:()=>s,HE:()=>o,R6:()=>a});var i=r(28473);class n{constructor(t,e,r){this.object=t,this.geometryId=e,this.triangleNr=r}}class s extends n{constructor(t,e,r,n){super(t,e,r),this.center=null!=n?(0,i.o8)(n):null}}class o{constructor(t){this.layerUid=t}}class a extends o{constructor(t,e){super(t),this.graphicUid=e}}},18162:(t,e,r)=>{r.d(e,{F:()=>s});r(96913);var i=r(93321),n=r(31183);function s(t,e,r,i,s){return!(null==e||null==i||t.length<2)&&(o.x=t[0],o.y=t[1],o.z=t[2],o.spatialReference=e,(0,n.g)(o,r,i,s))}const o=(0,r(62240).T)(0,0,0,i.default.WGS84)},27464:(t,e,r)=>{r.d(e,{$I:()=>c,Q5:()=>l,hH:()=>u,i3:()=>a});var i=r(89227),n=r(28473),s=r(25071),o=r(92453);function a(t){return null!=t?.dist}function l(t){return(e,r,n)=>((0,i.m)(h,e,r,n),!(0,s.e)(t,h))}function c(t){return a(t)&&t.intersector===o.dz.OBJECT&&!!t.target}function u(t){return a(t)&&t.intersector===o.dz.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center}const h=(0,n.vt)()},31183:(t,e,r)=>{r.d(e,{W:()=>a,g:()=>o});var i=r(28473),n=r(96913),s=r(67093);function o(t,e,r,i){if((0,n.canProjectWithoutEngine)(t.spatialReference,r)){l[0]=t.x,l[1]=t.y;const n=t.z;return l[2]=n??i??0,(0,s.projectBuffer)(l,t.spatialReference,0,e,r,0)}const o=(0,n.tryProjectWithZConversion)(t,r);return!!o&&(e[0]=o?.x,e[1]=o?.y,e[2]=o?.z??i??0,!0)}async function a(t,e,r,i,s){return await(0,n.initializeProjection)(t.spatialReference,r,null,s),o(t,e,r,i)}const l=(0,i.vt)()},46808:(t,e,r)=>{r.d(e,{r:()=>i});const i="OBJECTID"},49807:(t,e,r)=>{function i(t){return"point"===t.type}r.d(e,{v:()=>i})},54232:(t,e,r)=>{r.d(e,{DC:()=>o,MQ:()=>a,mi:()=>l});var i=r(92453),n=r(15828),s=r(27464);function o(t){return(0,s.i3)(t)&&t.intersector===i.dz.TERRAIN&&!!t.target}class a extends n.R6{constructor(t,e,r){super(t,e),this.triangleNr=r}}function l(t){return(0,s.i3)(t)&&t.intersector===i.dz.OVERLAY&&!!t.target}},54407:(t,e,r)=>{r.d(e,{FI:()=>p,FV:()=>h,Gy:()=>d,QS:()=>E,SM:()=>y});var i=r(87752),n=r(28473),s=r(4309),o=r(89476),a=r(10323),l=r(54232),c=r(27464),u=r(99855);function h(t,e){return(0,c.$I)(t)||(0,c.hH)(t)?_(t.target?.object,e):(0,l.DC)(t)?e.map?.ground:(0,a.rb)(t)||(0,a.db)(t)||(0,l.mi)(t)||(0,a.Q5)(t)?_(t.target,e):null}function d(t,e){const r=p(t,e);return null!=r&&"graphic"===r.type?r.graphic:null}function p(t,e){if(null==t)return null;if((0,c.$I)(t)||(0,c.hH)(t))return f(t.target?.object,e);if((0,a.rb)(t)){const e=t.target.createGraphic();return{type:"graphic",graphic:e,layer:e.layer}}if((0,a.Q5)(t)){const e=t.target.createVoxelGraphic();return{type:"graphic",graphic:e,layer:e.layer}}if((0,a.W3)(t)){const e=t.target.createTiles3DGraphic();return{type:"graphic",graphic:e,layer:e.layer}}return(0,l.mi)(t)||(0,u.H)(t)?f(t.target,e):(0,a.db)(t)?function(t,e){const r=_(t,e);if(null==r)return null;const i=e.allLayerViews.find((t=>t.layer===r));return i&&!i.suspended&&"getGraphicFromIntersectorTarget"in i?function(t){return null!=t?{type:"graphic",graphic:t,layer:t.layer}:null}(i.getGraphicFromIntersectorTarget(t)):null}(t.target,e):null}function f(t,e){if(null==t?.graphicUid)return null;const r=_(t,e);if(null==r)return null;if(r===e.graphics)return null==e.graphicsView||"number"!=typeof t.graphicUid?null:e.graphicsView.getHit(t.graphicUid);const i=e.allLayerViews.find((t=>t.layer===r));return!i||i.suspended||null==t.graphicUid?null:"getHit"in i?i.getHit(t.graphicUid):null}function _(t,e){return null==t?.layerUid?null:null!=e.graphicsView&&t.layerUid===e.graphicsView.processor.layer.id?e.graphics:e.map.allLayers.find((e=>e.uid===t.layerUid))}function y(t,e){if((0,c.$I)(t)||(0,c.hH)(t))return(0,o.g)(t.target.object.boundingVolumeWorldSpace.bounds);if((0,u.H)(t)){(0,i.IL)(g,t.transformation);const e=Math.max(g[0],g[1],g[2]);return t.target.baseBoundingSphere.radius*e}if((0,a.db)(t)){const r=function(t,e){const r=_(t,e);if(null==r)return null;const i=e.allLayerViews.find((t=>t.layer===r));return i&&!i.suspended&&"getAABBFromIntersectorTarget"in i?i.getAABBFromIntersectorTarget(t):null}(t.target,e);return r?.5*(0,s._F)(r):null}return null}function E(t){return!(0,c.$I)(t)&&!(0,c.hH)(t)&&((0,u.H)(t)?t.target.numLodLevels>1:!!(0,a.db)(t))}const g=(0,n.vt)()},62240:(t,e,r)=>{function i(t,e,r,i){return{x:t,y:e,z:r,hasZ:null!=r,hasM:!1,spatialReference:i,type:"point"}}function n(t,e,r,i,n){t.x=e,t.y=r,t.z=i,t.hasZ=null!=i,t.spatialReference=n}r.d(e,{J:()=>n,T:()=>i})},64863:(t,e,r)=>{r.d(e,{XG:()=>E,dd:()=>v,dg:()=>d,fo:()=>m,ou:()=>_});var i=r(67965),n=r(13473),s=r(87752),o=r(10382),a=r(89227),l=r(28473),c=r(89476),u=r(51064),h=r(99717);class d{constructor(){this._transform=(0,o.vt)(),this._transformInverse=new p({value:this._transform},s.B8,o.vt),this._transformInverseTranspose=new p(this._transformInverse,s.mg,o.vt),this._transformTranspose=new p({value:this._transform},s.mg,o.vt),this._transformInverseRotation=new p({value:this._transform},i.dR,n.vt)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,s.C)(this._transform,t)}multiplyTransform(t){(0,s.lw)(this._transform,this._transform,t)}set(t){(0,s.C)(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,e){this.setTransformMatrix(t),this.multiplyTransform(e),this._invalidateLazyTransforms()}}class p{constructor(t,e,r){this._original=t,this._update=e,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}const f=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.sphere=(0,c.c)(),this.tmpVertex=(0,l.vt)()}applyToVertex(t,e,r){const i=this.objectTransform.transform,n=(0,a.i)(T,t,e,r),s=(0,a.t)(n,n,i),o=this.offset/(0,a.l)(s);(0,a.b)(s,s,s,o);const l=this.objectTransform.inverse;return(0,a.t)(this.tmpVertex,s,l),this.tmpVertex}applyToMinMax(t,e){const r=this.offset/(0,a.l)(t);(0,a.b)(t,t,t,r);const i=this.offset/(0,a.l)(e);(0,a.b)(e,e,e,i)}applyToAabb(t){const e=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*e,t[1]+=t[1]*e,t[2]+=t[2]*e;const r=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*r,t[4]+=t[4]*r,t[5]+=t[5]*r,t}applyToBoundingSphere(t){const e=(0,a.l)((0,c.a)(t)),r=this.offset/e;return(0,a.b)((0,c.a)(this.sphere),(0,c.a)(t),(0,c.a)(t),r),this.sphere[3]=t[3]+t[3]*this.offset/e,this.sphere}};function _(t){return null!=t?(f.offset=t,f):null}const y=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=(0,l.vt)(),this._tmpMbs=(0,c.c)(),this._tmpObb=new h.ab,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=(0,a.l)(t)}applyToVertex(t,e,r){const i=(0,a.i)(T,t,e,r),n=(0,a.i)(I,t,e,r+this.componentLocalOriginLength),s=this._totalOffset/(0,a.l)(n);return(0,a.b)(this._tmpVertex,i,n,s),this._tmpVertex}applyToAabb(t){const e=this.componentLocalOriginLength,r=t[0],i=t[1],n=t[2]+e,s=t[3],o=t[4],a=t[5]+e,l=Math.abs(r),c=Math.abs(i),u=Math.abs(n),h=Math.abs(s),d=Math.abs(o),p=Math.abs(a),f=.5*(1+Math.sign(r*s))*Math.min(l,h),_=.5*(1+Math.sign(i*o))*Math.min(c,d),y=.5*(1+Math.sign(n*a))*Math.min(u,p),E=Math.max(l,h),g=Math.max(c,d),v=Math.max(u,p),m=Math.sqrt(f*f+_*_+y*y),T=Math.sign(l+r),I=Math.sign(c+i),O=Math.sign(u+n),L=Math.sign(h+s),R=Math.sign(d+o),S=Math.sign(p+a),M=this._totalOffset;if(m<M)return t[0]-=(1-T)*M,t[1]-=(1-I)*M,t[2]-=(1-O)*M,t[3]+=L*M,t[4]+=R*M,t[5]+=S*M,t;const b=M/Math.sqrt(E*E+g*g+v*v),D=M/m,A=D-b,w=-A;return t[0]+=r*(T*w+D),t[1]+=i*(I*w+D),t[2]+=n*(O*w+D),t[3]+=s*(L*A+b),t[4]+=o*(R*A+b),t[5]+=a*(S*A+b),t}applyToMbs(t){const e=(0,a.l)((0,c.a)(t)),r=this._totalOffset/e;return(0,a.b)((0,c.a)(this._tmpMbs),(0,c.a)(t),(0,c.a)(t),r),this._tmpMbs[3]=t[3]+t[3]*this._totalOffset/e,this._tmpMbs}applyToObb(t){return(0,h.gm)(t,this._totalOffset,this._totalOffset,u.RT.Global,this._tmpObb),this._tmpObb}};function E(t){return null!=t?(y.offset=t,y):null}const g=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.tmpVertex=(0,l.vt)()}applyToVertex(t,e,r){const i=(0,a.i)(T,t,e,r),n=(0,a.g)(I,i,this.localOrigin),s=this.offset/(0,a.l)(n);return(0,a.b)(this.tmpVertex,i,n,s),this.tmpVertex}applyToAabb(t){const e=O,r=L,i=R;for(let a=0;a<3;++a)e[a]=t[0+a]+this.localOrigin[a],r[a]=t[3+a]+this.localOrigin[a],i[a]=e[a];const n=this.applyToVertex(e[0],e[1],e[2]);for(let a=0;a<3;++a)t[a]=n[a],t[a+3]=n[a];const s=e=>{const r=this.applyToVertex(e[0],e[1],e[2]);for(let i=0;i<3;++i)t[i]=Math.min(t[i],r[i]),t[i+3]=Math.max(t[i+3],r[i])};for(let a=1;a<8;++a){for(let t=0;t<3;++t)i[t]=a&1<<t?r[t]:e[t];s(i)}let o=0;for(let a=0;a<3;++a)e[a]*r[a]<0&&(o|=1<<a);if(0!==o&&7!==o)for(let a=0;a<8;++a)if(!(o&a)){for(let t=0;t<3;++t)i[t]=o&1<<t?0:a&1<<t?e[t]:r[t];s(i)}for(let a=0;a<3;++a)t[a]-=this.localOrigin[a],t[a+3]-=this.localOrigin[a];return t}};function v(t){return null!=t?(g.offset=t,g):null}const m="terrain",T=(0,l.vt)(),I=(0,l.vt)(),O=(0,l.vt)(),L=(0,l.vt)(),R=(0,l.vt)()},68033:(t,e,r)=>{r.r(e),r.d(e,{default:()=>R});var i=r(93800),n=r(88102),s=r(42198),o=r(13561),a=r(79953),l=r(35920),c=r(84190),u=r(48602),h=(r(21265),r(50925),r(14746),r(75269)),d=r(89227),p=r(28473),f=r(30142),_=r(91102),y=r(3363),E=r(2739),g=r(8609),v=r(92453),m=r(54407),T=r(87465);let I=class extends T.default{constructor(t){super(t),this.type="view",this.color=new n.default("#cf4ccf"),this.viewVisualizationEnabled=!0,this.include=null,this.exclude=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=25,this._getQueryElevationDependencies=(0,o.B)(((t,e,r,i,n,s,o)=>({inputGraphicUid:null!=t?L(t):null,visibleLayers:e,maxIntersectionDistance:r,intersectOptions:i,view:n,stationary:s,spatialReference:o}))),this._vecA=(0,p.vt)(),this._vecB=(0,p.vt)(),this._ray=(0,_.vt)()}get minDemResolution(){const t=this._viewModel?.view;if(null==t||"3d"!==t.type)return null;const e=t.pointsOfInterest?.focus?.worldUnitsPerContentPixel;return null==e?null:e*(0,c.G9)(t.spatialReference)}get queryElevationDependencies(){const t=this._view;return t?this._getQueryElevationDependencies(this._viewModel?.input,this._visibleLayers,this._maxIntersectionDistance,this._intersectOptions,t,t.stationary,t.spatialReference):null}get _visibleLayers(){return this._view?.map?.allLayers?.filter((t=>t.visible)).toArray()??[]}get _intersectOptions(){const t=this._view;if(null==t||t.destroyed)return{};const e=(0,E.ZD)(t,{include:this.include,exclude:this.exclude}),r=(0,E.ZD)(t,{exclude:this._pointCloudLayers});return e.exclude=(0,l.KC)(e.exclude,r.exclude),e}get _pointCloudLayers(){const t=this._view;return null==t?[]:t.allLayerViews.toArray().filter((t=>"point-cloud"===t.layer?.type)).map((t=>t.layer))}get _view(){const t=this._viewModel?.view;return null!=t&&"3d"===t.type?t:null}get _maxIntersectionDistance(){const t=this._view;return t?.renderCoordsHelper?(0,f.tO)(t.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY}get _intersector(){const t=this._view;if(null==t)return null;const e=(0,g.hz)(t.state.viewingMode),r=e.options;return r.hud=!1,r.invisibleTerrain=!1,r.backfacesTerrain=!1,r.selectionMode=!1,r.store=v.oH.ALL,e}async queryElevation(t,e){let{noDataValue:r,signal:i}=e;const n=this.queryElevationDependencies;if(null==n)throw new Error("ElevationProfileLineInput: no dependencies");const s=this._intersector;if(null==s)throw new Error("ElevationProfileLineInput: no view");const{intersectOptions:o,view:a,spatialReference:l}=n,c=a.renderCoordsHelper,u=a.sceneIntersectionHelper,h=this._vecA,p=this._vecA,f=this._vecB,E=this._ray;if(!l)return{geometry:t,noDataValue:r};const g=await y.GeometryDescriptor.fromGeometry(t).project(l,i);if(!g)return{geometry:t,noDataValue:r};const v=g.coordinates,m=v.length;for(let y=0;y<m;++y){const t=v[y];(0,d.i)(f,t.x,t.y,t.z??0),c.toRenderCoords(f,l,f),c.setAltitude(h,2e5,f);const e=(0,_.Cr)(h,f,E);u.computeIntersection(e,s,o,!0);const i=O(n,s.results.all);i?(i.getIntersectionPoint(p),c.fromRenderCoords(p,p,l),t.z=p[2]):t.z=r}return{geometry:g.export(),noDataValue:r}}attach(t){const e=()=>this._onChange();return(0,s.vE)([super.attach(t),(0,a.watch)((()=>this.queryElevationDependencies),e),(0,a.on)((()=>t.elevationProvider),"elevation-change",e,{onListenerAdd:e,onListenerRemove:e})])}};function O(t,e){let{view:r,inputGraphicUid:i,maxIntersectionDistance:n}=t;for(const s of e){if(!s.withinDistance(n))continue;const t=(0,m.Gy)(s,r);if(null==t||L(t)!==i)return s}return null}function L(t){if(t.layer&&"objectIdField"in t.layer){const e=t.attributes[t.layer.objectIdField];if(e)return`o-${t.layer.id}-${e}`}return`u-${t.uid}`}(0,i._)([(0,u.MZ)({type:n.default,nonNullable:!0})],I.prototype,"color",void 0),(0,i._)([(0,u.MZ)()],I.prototype,"viewVisualizationEnabled",void 0),(0,i._)([(0,u.MZ)()],I.prototype,"include",void 0),(0,i._)([(0,u.MZ)()],I.prototype,"exclude",void 0),(0,i._)([(0,u.MZ)({readOnly:!0})],I.prototype,"minDemResolution",null),(0,i._)([(0,u.MZ)()],I.prototype,"queryElevationDependencies",null),(0,i._)([(0,u.MZ)()],I.prototype,"_visibleLayers",null),(0,i._)([(0,u.MZ)()],I.prototype,"_intersectOptions",null),(0,i._)([(0,u.MZ)()],I.prototype,"_pointCloudLayers",null),(0,i._)([(0,u.MZ)()],I.prototype,"_view",null),(0,i._)([(0,u.MZ)()],I.prototype,"_maxIntersectionDistance",null),(0,i._)([(0,u.MZ)()],I.prototype,"_intersector",null),I=(0,i._)([(0,h.$)("esri.widgets.ElevationProfile.ElevationProfileLineView")],I);const R=I},92453:(t,e,r)=>{var i,n;r.d(e,{H6:()=>s,dz:()=>i,oH:()=>n}),function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL",t[t.TILES3D=8]="TILES3D"}(i||(i={}));class s{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=n.ALL,this.normalRequired=!0,this.excludeLabels=!1}}!function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"}(n||(n={}))},96504:(t,e,r)=>{r.d(e,{R1:()=>o,aY:()=>n,cN:()=>s});var i=r(49807);class n{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.array=t,this.spatialReference=e,this.offset=r}}function s(t){return"array"in t}function o(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if((0,i.v)(e))return t.getElevation(e.x,e.y,e.z||0,e.spatialReference,r);if(s(e)){let i=e.offset;return t.getElevation(e.array[i++],e.array[i++],e.array[i]||0,e.spatialReference??t.spatialReference,r)}return t.getElevation(e[0],e[1],e[2]||0,t.spatialReference,r)}},99855:(t,e,r)=>{r.d(e,{H:()=>a,h:()=>o});var i=r(92453),n=r(15828),s=r(27464);class o extends n.R6{constructor(t,e,r,i,n){super(t,e),this.layerUid=t,this.graphicUid=e,this.triangleNr=r,this.baseBoundingSphere=i,this.numLodLevels=n}}function a(t){return(0,s.i3)(t)&&t.intersector===i.dz.LOD&&!!t.target}}}]);