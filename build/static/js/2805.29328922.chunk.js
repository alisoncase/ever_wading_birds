"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[2805,97012],{2805:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var n,a=i(93800),r=(i(88677),i(48602)),s=(i(21265),i(50925),i(14746),i(75269)),o=i(27811),l=i(97012),d=i(50821),u=i(17745),h=i(76697),c=i(87118),g=i(99961);const _="esri-histogram",p={base:_,horizontalLayout:`${_}--horizontal`,verticalLayout:`${_}--vertical`,content:`${_}__content`,svg:`${_}__svg`,bar:`${_}__bar`,bars:`${_}__bars`,label:`${_}__label`,dataLines:`${_}__data-lines`,dataLinesSubgroup:`${_}__data-lines-subgroup`,dataLine:`${_}__data-line`,averageLabel:`${_}__average-label`,averageDataLine:`${_}__average-data-line`,averageSymbol:`${_}__average-symbol`};let b=n=class extends o.default{constructor(e,t){super(e,t),this._bgFillId=`${this.id}-bg-fill`,this._containerNode=null,this._containerDimensions={width:0,height:0},this._defaultBarColor="#d8d8d8",this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.dataLineUpdatedFunction=null,this.messages=null,this.viewModel=new l.default}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get icon(){return"graph-histogram"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get state(){return this.viewModel.state}static fromHistogramResult(e){const{bins:t,maxValue:i,minValue:a}=e;return new n({bins:t,max:i,min:a})}render(){const{label:e,layout:t,state:i}=this,n=this.classes(p.base,d.D.widget,"horizontal"===t?p.horizontalLayout:p.verticalLayout,"disabled"===i?d.D.disabled:null);return(0,c.K)("div",{afterCreate:this._afterContainerNodeCreate,"aria-label":e,bind:this,class:n},"ready"===i?this._renderContent():null)}_renderContent(){if(!this._containerNode)return;const e=this._bgFillId,t=`clip-path: url(#${e})`;return(0,c.K)("div",{class:p.content},(0,c.K)("svg",{class:p.svg,xmlns:"http://www.w3.org/2000/svg"},(0,c.K)("defs",null,this._renderFillDefinition(e)),(0,c.K)("g",{style:t},this._renderBarsGroup()),this._renderLinesGroup()))}_renderBarsGroup(){return(0,c.K)("g",{class:this.classes(p.bars)},this._renderBars())}_renderBars(){const{layout:e,viewModel:{binRange:t,range:i}}=this;if(!t||!i)return;const n=t/i,{width:a,height:r}=this._containerDimensions;if(0===r&&0===a)return;if(0===r&&0!==a)return void this.scheduleRender();const[s,o]="vertical"===e?[r*n,a]:[r,a*n];return this._getBarDimensions(s,o).map(((e,t)=>{let[i,n]=e;return this._renderBar(t,i,n)}))}_renderBar(e,t,i){const{bins:n,layout:a,max:r,messages:s,viewModel:{range:o}}=this;if(!n||null==r)return;const{width:l,height:d}=this._containerDimensions,u=n.slice()[e],{count:h,maxValue:_,minValue:b}=u,m=r-_,[v,y]="vertical"===a?[0,m*(d/o)]:[l-i-m*(l/o),d-t],L=(0,g.V)(s.barLabel,{count:h,maxValue:_,minValue:b});return(0,c.K)("rect",{afterCreate:this._afterBarCreate,"aria-label":L,bind:this,class:p.bar,"data-index":e,fill:this._defaultBarColor,height:t,role:"img","shape-rendering":"crispEdges","stroke-width":"0",width:i,x:v,y:y})}_renderLinesGroup(){return(0,c.K)("g",{class:this.classes(p.dataLines)},this._renderAverageLine(),this._renderCustomLines())}_renderAverageLine(){const{average:e}=this;if(null==e)return;const t=[(0,c.K)("tspan",{class:this.classes(p.averageSymbol)},"x\u0304 "),(0,c.K)("tspan",{class:this.classes(p.averageLabel)},this.labelFormatFunction?this.labelFormatFunction(e,"average"):e)];return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup)},(0,c.K)("title",{key:"title"},e),this._renderLine(e,this.classes(p.averageDataLine)),this._renderLabel({label:t,value:e}))}_renderCustomLines(){if(this.dataLines?.length)return this.dataLines.map(((e,t)=>this._renderLineSubgroup(e,t)))}_renderLineSubgroup(e,t){const{value:i}=e;return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup),"data-index":t},(0,c.K)("title",{key:"title"},i),this._renderLine(i),this._renderLabel(e))}_renderLine(e,t){const[i,n,a,r]=this._getLinePosition(e);return(0,c.K)("line",{class:this.classes(p.dataLine,t),"shape-rendering":"crispEdges",x1:i,x2:n,y1:a,y2:r})}_renderLabel(e,t){const{label:i,value:n}=e,[a,r]=this._getLabelPosition(n);return(0,c.K)("text",{class:this.classes(p.label,t),"text-anchor":"end",transform:"horizontal"===this.layout?"rotate(270)":null,x:a,y:r-2},i??"")}_renderFillDefinition(e){const{width:t,height:i}=this._containerDimensions;return(0,c.K)("clipPath",{id:e},(0,c.K)("rect",{height:i,width:t,x:"0",y:"0"}))}_afterContainerNodeCreate(e){this._containerNode=e,this.addHandles((0,u.EV)(e,(e=>{const{width:t,height:i}=e.contentRect;this._containerDimensions={width:t,height:i}})))}_getIndexFromElement(e){const t=e.dataset?.index,i=e.getAttribute("data-index");return null!=t?parseInt(t,10):null!=i?parseInt(i,10):null}_afterBarCreate(e){if(this.barCreatedFunction){const t=this._getIndexFromElement(e)??-1;this.barCreatedFunction(t,e)}}_afterLinesSubgroupCreate(e){if(this.dataLineCreatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],n=e.childNodes[2]?e.childNodes[2]:null;this.dataLineCreatedFunction(i,n,t)}}_afterLinesSubgroupUpdate(e){if(this.dataLineUpdatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],n=e.childNodes[2]?e.childNodes[2]:null;this.dataLineUpdatedFunction(i,n,t)}}_getBarDimensions(e,t){const{bins:i,layout:n}=this,a=i?i.map((e=>e.count)):[],r=Math.max.apply(Math,a);return a.map((i=>"vertical"===n?[e/a.length,0!==r?i/r*t:0]:[0!==r?i/r*e:0,t/a.length]))}_getLinePosition(e){const{layout:t,min:i,viewModel:{range:n}}=this;if(null==i)return[0,0,0,0];const a=Math.round((e-i)/n*100)/100,{width:r,height:s}=this._containerDimensions,[o,l]=[a*r||1,s-a*s||1];return"vertical"===t?[0,"100%",l,l]:[o,o,"100%",0]}_getLabelPosition(e){const{layout:t,min:i,viewModel:{range:n}}=this;if(null==i)return[0,0];const a=Math.round((e-i)/n*100)/100,{width:r,height:s}=this._containerDimensions;return"vertical"===t?[r,s-a*s]:[0,a*r]}};(0,a._)([(0,r.MZ)()],b.prototype,"_bgFillId",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"_containerNode",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"_containerDimensions",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"_defaultBarColor",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"average",null),(0,a._)([(0,r.MZ)()],b.prototype,"barCreatedFunction",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"dataLines",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"dataLineCreatedFunction",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"dataLineUpdatedFunction",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"icon",null),(0,a._)([(0,r.MZ)()],b.prototype,"label",null),(0,a._)([(0,r.MZ)()],b.prototype,"labelFormatFunction",null),(0,a._)([(0,r.MZ)({value:"horizontal"})],b.prototype,"layout",null),(0,a._)([(0,r.MZ)()],b.prototype,"max",null),(0,a._)([(0,r.MZ)(),(0,h.G)("esri/widgets/Histogram/t9n/Histogram")],b.prototype,"messages",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"min",null),(0,a._)([(0,r.MZ)({readOnly:!0})],b.prototype,"state",null),(0,a._)([(0,r.MZ)({type:l.default})],b.prototype,"viewModel",void 0),b=n=(0,a._)([(0,s.$)("esri.widgets.Histogram")],b);const m=b},97012:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(93800),a=i(6946),r=i(48602),s=(i(21265),i(50925),i(14746),i(75269));let o=class extends a.default{constructor(e){super(e),this.average=null,this.bins=null,this.max=null,this.min=null}get binRange(){const{bins:e}=this;return e&&e.length>1?e[e.length-1].maxValue-e[0].minValue:0}set labelFormatFunction(e){this._set("labelFormatFunction",e)}get range(){const{max:e,min:t}=this;return null!=e&&null!=t?e-t:0}get state(){const{bins:e,range:t}=this;return t>0&&e?.length?"ready":"disabled"}};(0,n._)([(0,r.MZ)()],o.prototype,"average",void 0),(0,n._)([(0,r.MZ)()],o.prototype,"bins",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],o.prototype,"binRange",null),(0,n._)([(0,r.MZ)()],o.prototype,"labelFormatFunction",null),(0,n._)([(0,r.MZ)()],o.prototype,"max",void 0),(0,n._)([(0,r.MZ)()],o.prototype,"min",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],o.prototype,"range",null),(0,n._)([(0,r.MZ)({readOnly:!0})],o.prototype,"state",null),o=(0,n._)([(0,s.$)("esri.widgets.Histogram.HistogramViewModel")],o);const l=o}}]);