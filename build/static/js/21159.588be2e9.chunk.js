"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[21159],{605:(e,t,n)=>{n.d(t,{_:()=>r});class r{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=e,this.count=t,this.type=n,this.offset=r,this.stride=i,this.normalized=o,this.divisor=s}}},2925:(e,t,n)=>{n.d(t,{$:()=>b,IB:()=>c,Iy:()=>k,KV:()=>B,N2:()=>E,QP:()=>U,RH:()=>A,Vl:()=>P,Ws:()=>M,ZD:()=>O,_L:()=>S,bJ:()=>D,e$:()=>I,f6:()=>W,hw:()=>F,pW:()=>T,pf:()=>Z,rs:()=>R,sn:()=>L,we:()=>z});var r=n(88102),i=n(62631),o=n(82301),s=n(64682),a=n(60548),l=n(24646);function c(e){return"r"in e&&"g"in e&&"b"in e}function h(e){return"h"in e&&"s"in e&&"v"in e}function u(e){return"l"in e&&"a"in e&&"b"in e}function d(e){return"l"in e&&"c"in e&&"h"in e}const f=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],p=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function g(e,t){const n=[];let r,i;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,s=e[0].length;let a=0;for(r=0;r<o;r++){for(a=0,i=0;i<s;i++)a+=e[r][i]*t[i];n.push(a)}return n}function _(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),n=g(f,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function y(e){const t=g(p,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function m(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function v(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function x(e){return function(e){const t=e.l,n=e.a,r=e.b,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o=o>0?o:o+2*Math.PI,{l:t,c:i,h:o}}(m(_(e)))}function w(e){return y(v(function(e){const t=e.l,n=e.c,r=e.h;return{l:t,a:n*Math.cos(r),b:n*Math.sin(r)}}(e)))}function b(e){return c(e)?e:d(e)?w(e):u(e)?function(e){return y(v(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?y(e):h(e)?function(e){const t=(e.h+360)%360/60,n=e.s/100,r=e.v/100*255,i=r*n,o=i*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:i,g:o,b:0};break;case 1:s={r:o,g:i,b:0};break;case 2:s={r:0,g:i,b:o};break;case 3:s={r:0,g:o,b:i};break;case 4:s={r:o,g:0,b:i};break;case 5:case 6:s={r:i,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+r-i),s.g=Math.round(s.g+r-i),s.b=Math.round(s.b+r-i),s}(e):e}function E(e){return h(e)?e:function(e){const t=e.r,n=e.g,r=e.b,i=Math.max(t,n,r),o=i-Math.min(t,n,r);let s=i,a=0===o?0:i===t?(n-r)/o%6:i===n?(r-t)/o+2:(t-n)/o+4,l=0===o?0:o/s;return a<0&&(a+=6),a*=60,l*=100,s*=100/255,{h:a,s:l,v:s}}(b(e))}function O(e){return u(e)?e:function(e){return m(_(e))}(b(e))}function A(e){return d(e)?e:x(b(e))}function R(e){return C(e).isBright?"light":"dark"}function C(e){let{r:t,g:n,b:i,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),n=Math.round(o*n+255*(1-o)),i=Math.round(o*i+255*(1-o))),new r.default({r:t,g:n,b:i})}function M(e,t){const{r:n,g:r,b:i}=t?.ignoreAlpha?e:C(e);return.2126*n+.7152*r+.0722*i}var T,N;function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.High;return M(e,{ignoreAlpha:!0})>t?new r.default([0,0,0,e.a]):new r.default([255,255,255,e.a])}function I(e,t){const n=O(e);n.l*=1-t;const r=b(n),i=e.clone();return i.setColor(r),i.a=e.a,i}function S(e,t){const n=e.clone();return n.a*=t,n}function P(e,t){const n=E(e);n.s*=t;const r=b(n),i=e.clone();return i.setColor(r),i.a=e.a,i}function U(e){return r.default.toUnitRGBA(e)}function F(e,t){return e===t||null!=e&&e.equals(t)}function z(e,t){return e===t||null!=e&&null!=t&&(0,a.e)(e,t)}function Z(e){return(0,l.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function B(e){return e[0]??=0,e[1]??=0,e[2]??=0,e}function L(e){return e.length=4,B(e),e[3]??=1,(0,s.qE)(e[3],0,1),e}function W(e,t){const n=r.default.toUnitRGBA(e);return n[3]*=t,n}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new r.default(e):e))).length||1===t){const n=[],r=e[0];for(let e=0;e<t;e++)n.push(r.clone());return n}if(n.shuffle&&(e=(0,i.k4)((0,o.clone)(e),n.seed)),e.length>=t){const n=[],r=(e.length-1)/(t-1);for(let i=0;i<t;i++){const t=Math.round(i*r);n.push(e[t].clone())}return n}return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[],o=e.length-1,s=Math.ceil((t-e.length)/o);e:for(let i=0;i<o;i++){const o=e[i],a=e[i+1];for(let i=1;i<=s;i++){const l=i/(s+1);if(r.push(G(o,a,l,n)),r.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,i.k4)(r,n.seed??1)]}(e,t,n)}(N=T||(T={}))[N.Low=160]="Low",N[N.High=225]="High";const H=(e,t)=>{const n=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+n))};function G(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.r,a=e.g,l=e.b,c=t.r,h=t.g,u=t.b,d=Math.round(s+(c-s)*n),f=Math.round(a+(h-a)*n),p=Math.round(l+(u-l)*n);if(!o.offset)return new r.default([d,f,p]);const g=(0,i.Mo)(o.seed);return new r.default([H(d,g),H(f,g),H(p,g)])}},8374:(e,t,n)=>{function r(e,t,n){n=n||2;var r,o,a,l,c,h,d,f=t&&t.length,p=f?t[0]*n:e.length,g=i(e,0,p,n,!0),_=[];if(!g||g.next===g.prev)return _;if(f&&(g=u(e,t,g,n)),e.length>80*n){r=a=e[0],o=l=e[1];for(var y=n;y<p;y+=n)(c=e[y])<r&&(r=c),(h=e[y+1])<o&&(o=h),c>a&&(a=c),h>l&&(l=h);d=0!==(d=Math.max(a-r,l-o))?1/d:0}return s(g,_,n,r,o,d),_}function i(e,t,n,r,i){var o,s;if(i===D(e,t,n,r)>0)for(o=t;o<n;o+=r)s=M(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=M(o,e[o],e[o+1],s);if(s&&b(s,s.next)){var a=s.next;T(s),s=a}return s}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{var i=r.prev;if(T(r),(r=t=i)===r.next)break;n=!0}}while(n||r!==t);return t}function s(e,t,n,r,i,u,d){if(e){!d&&u&&_(e,r,i,u);for(var f,p,g=e;e.prev!==e.next;)if(f=e.prev,p=e.next,u?l(e,r,i,u):a(e))t.push(f.i/n),t.push(e.i/n),t.push(p.i/n),T(e),e=p.next,g=p.next;else if((e=p)===g){d?1===d?s(e=c(o(e),t,n),t,n,r,i,u,2):2===d&&h(e,t,n,r,i,u):s(o(e),t,n,r,i,u,1);break}}}function a(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(v(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&w(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,n,r){var i=e.prev,o=e,s=e.next;if(w(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,u=y(a,l,t,n,r),d=y(c,h,t,n,r),f=e.prevZ,p=e.nextZ;f&&f.z>=u&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=u;){if(f!==e.prev&&f!==e.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function c(e,t,n){var r=e;do{var i=r.prev,s=r.next.next;!b(i,s)&&E(i,r,r.next,s)&&R(i,s)&&R(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),T(r),T(r.next),r=e=s),r=r.next}while(r!==e);return o(r)}function h(e,t,n,r,i,a){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&x(l,c)){var h=C(l,c);return l=o(l,l.next),h=o(h,h.next),s(l,t,n,r,i,a),void s(h,t,n,r,i,a)}c=c.next}l=l.next}while(l!==e)}function u(e,t,n,r){var s,a,l,c=[];for(s=0,a=t.length;s<a;s++)(l=i(e,t[s]*r,s<a-1?t[s+1]*r:e.length,r,!1))===l.next&&(l.steiner=!0),c.push(m(l));for(c.sort(d),s=0;s<c.length;s++)n=o(n=p(c[s],n),n.next);return n}function d(e,t){return e.x-t.x}function f(e){if(e.next.prev===e)return e;let t=e;for(;;){const n=t.next;if(n.prev===t||n===t||n===e)break;t=n}return t}function p(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===s)return n;var l,c=n,h=n.x,u=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=h&&i!==r.x&&v(o<u?i:s,o,h,u,o<u?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),R(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=C(n,e),i=o(n,n.next);let s=f(r);return o(s,s.next),i=f(i),f(t===n?i:t)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function _(e,t,n,r){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}function y(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function v(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&E(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(R(e,t)&&R(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||b(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function E(e,t,n,r){var i=A(w(e,t,n)),o=A(w(e,t,r)),s=A(w(n,r,e)),a=A(w(n,r,t));return i!==o&&s!==a||!(0!==i||!O(e,n,t))||!(0!==o||!O(e,r,t))||!(0!==s||!O(n,e,r))||!(0!==a||!O(n,t,r))}function O(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function A(e){return e>0?1:e<0?-1:0}function R(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function C(e,t){var n=new N(e.i,e.x,e.y),r=new N(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function M(e,t,n,r){var i=new N(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function N(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}n.d(t,{e:()=>r}),r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(D(e,0,o,n));if(i)for(var a=0,l=t.length;a<l;a++){var c=t[a]*n,h=a<l-1?t[a+1]*n:e.length;s-=Math.abs(D(e,c,h,n))}var u=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;u+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},8696:(e,t,n)=>{n.d(t,{N:()=>c});var r=n(7951),i=n(93003),o=n(16434),s=n(29072),a=n(19416),l=n(12723);class c extends o.w{constructor(e,t){super(e,t,new i.$(s.a,(()=>n.e(73648).then(n.bind(n,73648)))))}initializePipeline(e){switch(e.blitMode){case a.d.None:case a.d.Depth:return(0,l.Ey)({colorWrite:l.kn});case a.d.Alpha:return(0,l.Ey)({blending:l.Ky,colorWrite:l.kn});default:(0,r.Xb)(e.blitMode);case a.d.PremultipliedAlpha:case a.d.COUNT:return(0,l.Ey)({blending:l.Os,colorWrite:l.kn})}}}},12288:(e,t,n)=>{n.d(t,{Wq:()=>r,lO:()=>d,oR:()=>f});var r,i,o=n(8374),s=n(91345),a=n(53053),l=n(66028),c=n(55239),h=n(79787),u=n(28983);function d(e){const t=f(e.rings,e.hasZ,r.CCW_IS_HOLE,e.spatialReference),n=new Array;let i=0,s=0;for(const r of t.polygons){const e=r.count,a=r.index,h=(0,l.l5)(t.position,3*a,3*e),u=r.holeIndices.map((e=>e-a)),d=(0,c.Dg)((0,o.e)(h,u,3));n.push({position:h,faces:d}),i+=h.length,s+=d.length}const a=function(e,t,n){if(1===e.length)return e[0];const r=(0,l.jh)(t),i=new Array(n);let o=0,s=0,a=0;for(const l of e){for(let e=0;e<l.position.length;e++)r[o++]=l.position[e];for(const e of l.faces)i[s++]=e+a;a=o/3}return{position:r,faces:(0,c.Dg)(i)}}(n,i,s),h=Array.isArray(a.position)?(0,u.b)(a.position,3,{originalIndices:a.faces}):(0,u.b)(a.position.buffer,6,{originalIndices:a.faces});return a.position=(0,l.xm)(new Float64Array(h.buffer)),a.faces=h.indices,a}function f(e,t,n,i){const o=e.length,s=new Array(o),a=new Array(o),c=new Array(o);let h=0;for(let r=0;r<o;++r)h+=e[r].length;let u=0,d=0,f=0;const _=(0,l.jh)(3*h);let y=0;for(let l=o-1;l>=0;l--){const h=e[l],m=n===r.CCW_IS_HOLE&&g(h,t,i);if(m&&1!==o)s[u++]=h;else{let e=h.length;for(let t=0;t<u;++t)e+=s[t].length;const n={index:y,pathLengths:new Array(u+1),count:e,holeIndices:new Array(u)};n.pathLengths[0]=h.length,h.length>0&&(c[f++]={index:y,count:h.length}),y=m?p(h,h.length-1,-1,_,y,h.length,t):p(h,0,1,_,y,h.length,t);for(let r=0;r<u;++r){const e=s[r];n.holeIndices[r]=y,n.pathLengths[r+1]=e.length,e.length>0&&(c[f++]={index:y,count:e.length}),y=p(e,0,1,_,y,e.length,t)}u=0,n.count>0&&(a[d++]=n)}}for(let r=0;r<u;++r){const e=s[r];e.length>0&&(c[f++]={index:y,count:e.length}),y=p(e,0,1,_,y,e.length,t)}return a.length=d,c.length=f,{position:_,polygons:a,outlines:c}}function p(e,t,n,r,i,o,s){i*=3;for(let a=0;a<o;++a){const o=e[t];r[i++]=o[0],r[i++]=o[1],r[i++]=s&&o[2]?o[2]:0,t+=n}return i/3}function g(e,t,n){if(!t)return!(0,a.$3)(e);const r=e.length-1;switch((0,h.S)(e,r,n)){case s._.X:return!(0,a.$3)(e,s._.Y,s._.Z);case s._.Y:return!(0,a.$3)(e,s._.X,s._.Z);case s._.Z:return!(0,a.$3)(e,s._.X,s._.Y)}}(i=r||(r={}))[i.NONE=0]="NONE",i[i.CCW_IS_HOLE=1]="CCW_IS_HOLE"},14960:(e,t,n)=>{n.d(t,{G:()=>r,Q:()=>i});const r={stableRendering:!1},i={rootOrigin:null}},16079:(e,t,n)=>{n.d(t,{G:()=>a});var r=n(29072),i=n(8696),o=n(19416),s=n(92156);class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.d.None;this._techniques=e,this._parameters=new r.C,this._configuration=new o.N,this._configuration.blitMode=t,e.precompile(i.N,this._configuration)}blit(e,t,n,r){e.bindFramebuffer(n.fbo),e.setClearColor(0,0,0,1),e.clear(s.NV.COLOR),this._parameters.texture=t.getTexture();const o=this._techniques.get(i.N,this._configuration);e.bindTechnique(o,r,this._parameters),e.screen.draw()}blend(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._configuration.hasOpacityFactor=o<1;const s=this._techniques.get(i.N,this._configuration);return!!s.compiled&&(e.bindFramebuffer(n.fbo),this._parameters.texture=t.getTexture(),this._parameters.opacity=o,e.bindTechnique(s,r,this._parameters),e.screen.draw(),!0)}}},19416:(e,t,n)=>{n.d(t,{N:()=>a,d:()=>r});var r,i,o=n(93800),s=n(21484);(i=r||(r={}))[i.None=0]="None",i[i.Alpha=1]="Alpha",i[i.PremultipliedAlpha=2]="PremultipliedAlpha",i[i.Depth=3]="Depth",i[i.COUNT=4]="COUNT";class a extends s.K{constructor(){super(...arguments),this.blitMode=r.None,this.hasOpacityFactor=!1}}(0,o._)([(0,s.W)({count:r.COUNT})],a.prototype,"blitMode",void 0),(0,o._)([(0,s.W)()],a.prototype,"hasOpacityFactor",void 0)},19983:(e,t,n)=>{n.d(t,{E5:()=>a,JU:()=>s,Of:()=>i,Uk:()=>o,WK:()=>l,g7:()=>c,lO:()=>h,lQ:()=>u});var r=n(74719);function i(e){return e&&"function"==typeof e.highlight}function o(e){return e&&"function"==typeof e.maskOccludee}function s(e,t,n){return null==e||e>=n&&(0===t||e<=t)}function a(e,t){if(t&&e){const{minScale:n,maxScale:r}=e;if(l(n,r))return s(t,n,r)}return!0}function l(e,t){return null!=e&&e>0||null!=t&&t>0}function c(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale}function h(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}function u(e,t,n){return new r.default("layerview:spatial-reference-incompatible",`The spatial reference of this ${e}${t?`(wkid:${t})`:""} is incompatible with the spatial reference of the view${n?`(wkid:${n})`:""}.`,{})}},25874:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(50925),i=n(17741),o=n(42080),s=n(92156),a=n(44480);const l=()=>r.A.getLogger("esri.views.webgl.VertexArrayObject");let c=class{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._context=e,this._locations=t,this._layout=n,this._buffers=r,this._indexBuffer=i,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(this._buffers.size+(this._indexBuffer?1:0))*o.i5}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=(0,i.WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&l().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(s.vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(s.vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:n}=this;e||l().error("Vertex buffer dictionary is empty!");const r=this._context.gl;this._buffers.forEach(((e,n)=>{const r=t.get(n);r?(0,a.yu)(this._context,this._locations,e,r):l().error("Vertex element descriptor is empty!")})),null!=n&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}}},26525:(e,t,n)=>{n.d(t,{P:()=>E});var r=n(58448),i=n(89227),o=n(28473),s=n(60548),a=n(24646),l=n(67093),c=n(4309),h=n(66028),u=n(62240),d=n(41317),f=n(87730),p=n(28113),g=n(48261),_=n(72249),y=n(72530),m=n(45644),v=n(60984),x=n(10625),w=n(22131),b=n(23664);class E extends p.X{constructor(e){super(e),this._attachmentOrigin=(0,u.T)(0,0,0,null),this._attachmentOriginDirty=!0,this.events=new r.A,this._geometry=null,this._width=1,this._color=(0,a.fA)(1,0,1,1),this._innerWidth=0,this._innerColor=(0,a.fA)(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._falloff=0,this._elevationInfo=null,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=v.m$.OccludeAndTransparentStencil,this._attachmentOrigin.spatialReference=e.view.spatialReference,this._laserline=new g.o({view:e.view,isDecoration:e.isDecoration}),this.applyProperties(e),this.attached=e.attached??!0}destroy(){this._laserline.destroy(),super.destroy()}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:O,recreateGeometry:(e,t)=>{e.geometries.length=0,this._recreateGeometry(t,e.material,e.geometries)}}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:O,recreateGeometry:e=>{e.geometries=this._createRenderGeometriesDraped(e.material),this._attachmentOriginChanged()}}}get _laserlineAttached(){return this.attached&&this.visible&&null!=this._laserlineStyle&&!this.isDraped&&this.laserlineEnabled}onAttachedChange(e){this._laserline.attached=this._laserlineAttached,e&&this._attachmentOriginChanged()}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){(0,s.a)(e,this._color)||((0,s.c)(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){(0,s.a)(e,this._innerColor)||((0,s.c)(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=null!=e!=(null!=this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){e&&this._stippleOffColor&&(0,s.a)(e,this._stippleOffColor)||(this._stippleOffColor=e?(0,a.o8)(e):null,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,this._laserline.attached=this._laserlineAttached,null!=e&&(this._laserline.style=e)}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,this._laserline.attached=this._laserlineAttached)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get attachmentOrigin(){if(!this._attachmentOriginDirty)return this._attachmentOrigin;const e=this.object3dResources.resources?.geometries;if(!e||0===e.length)return null;(0,i.i)(R,0,0,0);let t=0;for(const n of e)n.computeAttachmentOrigin(A)&&((0,i.g)(R,R,A),t++);return 0===t?null:((0,i.h)(R,R,1/t),this.view.renderCoordsHelper.fromRenderCoords(R,this._attachmentOrigin),this._attachmentOriginDirty=!1,this._attachmentOrigin)}_updateMaterial(){this.object3dResources.resources?.material.setParameters(this._materialParameters),this.drapedResources.resources?.material.setParameters(this._materialParameters)}get _isClosed(){return null!=this.geometry&&"polygon"===this.geometry.type}get _materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:!1,isClosed:this._isClosed,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,join:"round",hasPolygonOffset:!0,renderOccluded:this._normalizedRenderOccluded,isDecoration:this.isDecoration}}get _normalizedRenderOccluded(){return this.isDraped&&this._renderOccluded===v.m$.OccludeAndTransparentStencil?v.m$.OccludeAndTransparent:this._renderOccluded}_recreateGeometry(e,t,n){this._createRenderGeometries(t,n);for(const r of n)e.addGeometry(r);this._attachmentOriginChanged()}_attachmentOriginChanged(){this._attachmentOriginDirty=!0,this.events.emit("attachment-origin-changed")}_createObject3DResources(e){const t=new b.W(this._materialParameters),n=new Array;return this._recreateGeometry(e,t,n),{material:t,geometries:n,forEach:e=>{e(t),n.forEach(e)}}}_createDrapedResources(){const e=new b.W(this._materialParameters);return{material:e,geometries:this._createRenderGeometriesDraped(e)}}_createRenderGeometriesDraped(e){const{geometry:t,view:n}=this,r=n.basemapTerrain.spatialReference;return null==t||null==r?[]:(0,m.A)(t,r).lines.map((t=>{let{position:i}=t;const o={overlayInfo:{spatialReference:r,renderCoordsHelper:n.renderCoordsHelper},attributeData:{position:i},removeDuplicateStartEnd:this._isClosed};return new x.$((0,y.t)(e,o))}))}calculateMapBounds(e){if(null==this.object3dResources.resources)return!1;const t=this.view.renderCoordsHelper;for(const n of this.object3dResources.resources.geometries){const r=n.attributes.get(w.r.POSITION),i=(0,h.jh)(r.data.length);(0,l.projectBuffer)(r.data,t.spatialReference,0,i,this.view.spatialReference,0),(0,c.Hq)(e,i)}return!0}_createRenderGeometries(e,t){const n=this.geometry;if(null==n)return;const r=(0,m.C)(n,this.view.elevationProvider,this.view.renderCoordsHelper,_.F.fromElevationInfo(this.elevationInfo??new f.A({mode:(0,d.w7)(n,null)}))),i=new Array;for(const{position:o,mapPositions:s}of r.lines){const n={mapPositions:s,attributeData:{position:o},removeDuplicateStartEnd:this._isClosed};t.push((0,y.t)(e,n)),i.push(o)}this._laserline.pathVerticalPlane=i}}function O(e){e.geometries=[]}const A=(0,o.vt)(),R=(0,o.vt)()},28983:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(64682),i=n(55239);function o(e,t,n){const o=Array.isArray(e),h=o?e.length/t:e.byteLength/(4*t),u=o?e:new Uint32Array(e,0,h*t),d=n?.minReduction??0,f=n?.originalIndices||null,p=f?f.length:0,g=n?.componentOffsets||null;let _=0;if(g)for(let r=0;r<g.length-1;r++){const e=g[r+1]-g[r];e>_&&(_=e)}else _=h;const y=Math.floor(1.1*_)+1;(null==c||c.length<2*y)&&(c=new Uint32Array((0,r.cU)(2*y)));for(let r=0;r<2*y;r++)c[r]=0;let m=0;const v=!!g&&!!f,x=v?p:h;let w=(0,i.my)(h);const b=new Uint32Array(p),E=1.96;let O=0!==d?Math.ceil(4*E*E/(d*d)*d*(1-d)):x,A=1,R=g?g[1]:x;for(let r=0;r<x;r++){if(r===O){const e=1-m/r;if(e+E*Math.sqrt(e*(1-e)/r)<d)return null;O*=2}if(r===R){for(let e=0;e<2*y;e++)c[e]=0;if(f)for(let e=g[A-1];e<g[A];e++)b[e]=w[f[e]];R=g[++A]}const e=v?f[r]:r,n=e*t,i=l(u,n,t);let o=i%y,a=m;for(;0!==c[2*o+1];){if(c[2*o]===i){const e=c[2*o+1]-1;if(s(u,n,e*t,t)){a=w[e];break}}o++,o>=y&&(o-=y)}a===m&&(c[2*o]=i,c[2*o+1]=e+1,m++),w[e]=a}if(0!==d&&1-m/h<d)return null;if(v){for(let e=g[A-1];e<b.length;e++)b[e]=w[f[e]];w=(0,i.Dg)(b)}const C=o?new Array(m):new Uint32Array(m*t);m=0;for(let r=0;r<x;r++)w[r]===m&&(a(u,(v?f[r]:r)*t,C,m*t,t),m++);if(f&&!v){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=w[f[t]];w=(0,i.Dg)(e)}return{buffer:Array.isArray(C)?C:C.buffer,indices:w,uniqueCount:m}}function s(e,t,n,r){for(let i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function a(e,t,n,r,i){for(let o=0;o<i;o++)n[r+o]=e[t+o]}function l(e,t,n){let r=0;for(let i=0;i<n;i++)r=e[t+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let c=null},29072:(e,t,n)=>{n.d(t,{C:()=>f,a:()=>g,b:()=>p});var r=n(37379),i=n(33273),o=n(42162),s=n(15025),a=n(42403),l=n(16878),c=n(67058),h=n(19416),u=n(20783),d=n(8118);class f extends u.Y{constructor(){super(...arguments),this.opacity=1}}function p(e){const t=new d.N5;t.include(r.c),t.fragment.uniforms.add(new c.N("tex",(e=>e.texture))),e.hasOpacityFactor&&t.fragment.uniforms.add(new a.m("opacity",(e=>e.opacity)));const n=e.blitMode===h.d.Depth;return n&&(t.fragment.uniforms.add(new s.E("nearFar",(e=>e.camera.nearFar))),t.fragment.include(i.E),t.fragment.include(o.W)),t.fragment.main.add(l.H`
    ${n?l.H`
          float normalizedLinearDepth = (-linearDepthFromTexture(tex, uv) - nearFar[0]) / (nearFar[1] - nearFar[0]);
          fragColor = float2rgba(normalizedLinearDepth);`:l.H`
          fragColor = texture(tex, uv) ${e.hasOpacityFactor?"* opacity":""};`}`),t}const g=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:f,build:p},Symbol.toStringTag,{value:"Module"}))},34156:(e,t,n)=>{n.d(t,{EL:()=>_,RS:()=>y,gr:()=>c,wP:()=>u,wZ:()=>d});var r=n(79625),i=(n(21265),n(82301)),o=n(25048),s=n(93321),a=n(78629),l=n(62240);function c(e){return"declaredClass"in e}function h(e){return"declaredClass"in e}function u(e,t){return e?"declaredClass"in e?e:new r.default({layer:t,sourceLayer:t,visible:e.visible,symbol:(0,i.clone)(e.symbol),attributes:(0,i.clone)(e.attributes),geometry:d(e.geometry)}):null}function d(e){return null==e?null:c(e)?e:(0,a.fromJSON)(function(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:i}=e.spatialReference,o={wkid:t,wkt:n,wkt2:r,latestWkid:i};switch(e.type){case"point":{const{x:t,y:n,z:r,m:i}=e;return{x:t,y:n,z:r,m:i,spatialReference:o}}case"polygon":{const{rings:t,hasZ:n,hasM:r}=e;return{rings:f(t),hasZ:n,hasM:r,spatialReference:o}}case"polyline":{const{paths:t,hasZ:n,hasM:r}=e;return{paths:f(t),hasZ:n,hasM:r,spatialReference:o}}case"extent":{const{xmin:t,xmax:n,ymin:r,ymax:i,zmin:s,zmax:a,mmin:l,mmax:c,hasZ:h,hasM:u}=e;return{xmin:t,xmax:n,ymin:r,ymax:i,zmin:s,zmax:a,mmin:l,mmax:c,hasZ:h,hasM:u,spatialReference:o}}case"multipoint":{const{points:t,hasZ:n,hasM:r}=e;return{points:g(t)?p(t):t,hasZ:n,hasM:r,spatialReference:o}}default:return}}(e))}function f(e){return function(e){for(const t of e)if(0!==t.length)return g(t);return!1}(e)?e.map((e=>p(e))):e}function p(e){return e.map((e=>Array.from(e)))}function g(e){return e.length>0&&((0,o.vZ)(e[0])||(0,o.aI)(e[0]))}function _(e,t){if(!e)return null;let n;if(h(e)){if(null==t)return e.clone();if(h(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,l.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function y(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:i}=e,o={wkid:t,wkt:n,wkt2:r,latestWkid:i};return s.default.fromJSON(o)}},42080:(e,t,n)=>{n.d(t,{$B:()=>i,Qf:()=>c,Qh:()=>a,RS:()=>o,ez:()=>d,i5:()=>f,lM:()=>s,qK:()=>u,rq:()=>h});var r=n(25048);function i(e){return 32+e.length}const o=16;function s(e){if(!e)return 0;let t=u;for(const n in e)e.hasOwnProperty(n)&&(t+=l(e[n],!1));return t}function a(e){if(!e)return 0;if("number"==typeof e[0])return c(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return h(e,8);let n=d;for(let r=0;r<t;r++)n+=l(e[r]);return n}(e);let t=u;for(const n in e)e.hasOwnProperty(n)&&(t+=l(e[n]));return t}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?a(e):u;case"string":return i(e);case"number":return o;case"boolean":return 4;default:return 8}}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e+(t?(0,r.iu)(t)?t.byteLength+f:Array.isArray(t)?h(t,o):0:0)),0)}function h(e,t){return d+e.length*t}const u=32,d=16,f=145},43208:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(28473);class i{constructor(e,t){this.vec3=e,this.id=t}}function o(e,t,n,o){return new i((0,r.fA)(e,t,n),o)}},44e3:(e,t,n)=>{n.d(t,{g:()=>y});n(21265);var r=n(31923),i=n(89227),o=n(28473),s=n(24646),a=n(67093),l=n(65069),c=n(69291),h=n(25735),u=n(43208),d=n(8461),f=n(14960),p=n(22131),g=n(20196),_=n(23664);class y{constructor(e){this._originSR=e,this._rootOriginId="root/"+(0,r.c)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(e){const t=this._origins.get(this._rootOriginId);if(null==t){const t=f.Q.rootOrigin;if(null!=t)return this._origins.set(this._rootOriginId,(0,u.f)(t[0],t[1],t[2],this._rootOriginId)),this.getOrigin(e);const n=(0,u.f)(e[0]+Math.random()-.5,e[1]+Math.random()-.5,e[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,n),n}const n=this._gridSize,r=Math.round(e[0]/n),o=Math.round(e[1]/n),s=Math.round(e[2]/n),a=`${r}/${o}/${s}`;let l=this._origins.get(a);const c=.5*n;if((0,i.d)(m,e,t.vec3),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),m[0]<c&&m[1]<c&&m[2]<c){if(l){const t=Math.max(...m);if((0,i.d)(m,e,l.vec3),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),Math.max(...m)<t)return l}return t}return l||(l=(0,u.f)(r*n,o*n,s*n,a),this._origins.set(a,l)),l}_drawOriginBox(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.fA)(1,1,0,1);const n=window.view,r=n._stage,i=t.toString();if(!this._objects.has(i)){this._material=new _.W({width:2,color:t}),r.add(this._material);const e=new g.x(r,{pickable:!1}),n=new d.B({castShadow:!1});r.add(n),e.add(n),this._objects.set(i,n)}const o=this._objects.get(i),u=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],f=u.length,y=new Array(3*f),m=new Array,v=.5*this._gridSize;for(let s=0;s<f;s++)y[3*s]=e[0]+(1&u[s]?v:-v),y[3*s+1]=e[1]+(2&u[s]?v:-v),y[3*s+2]=e[2]+(4&u[s]?v:-v),s>0&&m.push(s-1,s);(0,a.projectBuffer)(y,this._originSR,0,y,n.renderSpatialReference,0,f);const x=new h.V(this._material,[[p.r.POSITION,new l.n(y,m,3,!0)]],null,c.X.Line);r.add(x),o.addGeometry(x)}get test(){}}const m=(0,o.vt)()},45644:(e,t,n)=>{n.d(t,{A:()=>c,C:()=>l});var r=n(67093),i=n(66028),o=n(12288),s=n(50190),a=n(84654);function l(e,t,n,r){const a="polygon"===e.type?o.Wq.CCW_IS_HOLE:o.Wq.NONE,l="polygon"===e.type?e.rings:e.paths,{position:c,outlines:u}=(0,o.oR)(l,!!e.hasZ,a,e.spatialReference),d=(0,i.jh)(c.length),f=(0,s.au)(c,e.spatialReference,0,d,0,c,0,c.length/3,t,n,r),p=null!=f;return{lines:p?h(u,c,d):[],projectionSuccess:p,sampledElevation:f}}function c(e,t){const n="polygon"===e.type?o.Wq.CCW_IS_HOLE:o.Wq.NONE,i="polygon"===e.type?e.rings:e.paths,{position:s,outlines:l}=(0,o.oR)(i,!1,n),c=(0,r.projectBuffer)(s,e.spatialReference,0,s,t,0);for(let r=2;r<s.length;r+=3)s[r]=a.bi;return{lines:c?h(l,s):[],projectionSuccess:c}}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=new Array;for(const{index:o,count:s}of e){if(s<=1)continue;const e=3*o,a=3*s;r.push({position:(0,i.l5)(t,3*o,3*s),mapPositions:null!=n?(0,i.l5)(n,e,a):void 0})}return r}},49008:(e,t,n)=>{n.d(t,{Ir:()=>h});var r=n(32006),i=n(98080),o=n(60548),s=n(24646),a=n(15025),l=n(34927),c=n(16878);function h(e){e.fragment.uniforms.add(new l.I("projInfo",(e=>function(e){const t=e.projectionMatrix;return 0===t[11]?(0,o.s)(u,2/(e.fullWidth*t[0]),2/(e.fullHeight*t[5]),(1+t[12])/t[0],(1+t[13])/t[5]):(0,o.s)(u,-2/(e.fullWidth*t[0]),-2/(e.fullHeight*t[5]),(1-t[8])/t[0],(1-t[9])/t[5])}(e.camera)))),e.fragment.uniforms.add(new a.E("zScale",(e=>0===e.camera.projectionMatrix[11]?(0,r.hZ)(d,0,1):(0,r.hZ)(d,1,0)))),e.fragment.code.add(c.H`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}const u=(0,s.vt)();const d=(0,i.vt)()},49979:(e,t,n)=>{n.d(t,{B:()=>i});n(21265);var r=n(79953);class i{get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e}constructor(e){this._isDecoration=!1,this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=e.view,this._handle=(0,r.watch)((()=>e.view.ready),(e=>{this._resourcesCreated&&(e?this._createResources():this._destroyResources())}))}applyProperties(e){let t=!1;for(const n in e)n in this&&("attached"===n?t=!!e[n]:this[n]=e[n]);this.attached=t}destroy(){this.attached=!1,this._handle.remove()}get attached(){return this._attached}set attached(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources(),this.onAttachedChange(e))}onAttachedChange(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.updateVisibility(this.visible)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}},50190:(e,t,n)=>{n.d(t,{I2:()=>_,Kf:()=>m,Uk:()=>w,ai:()=>x,au:()=>f,fe:()=>v,nG:()=>g,nu:()=>y,sE:()=>p,uw:()=>r});var r,i,o=n(87752),s=n(10382),a=n(28473),l=n(42276),c=n(67093),h=n(49807),u=n(96504),d=n(22131);function f(e,t,n,r,i,o,s,a,l,h,u){const d=b[u.mode];let f,p,g=0;if((0,c.projectBuffer)(e,t,n,r,l.spatialReference,i,a))return d?.requiresAlignment(u)?(g=d.applyElevationAlignmentBuffer(r,i,o,s,a,l,h,u),f=o,p=s):(f=r,p=i),(0,c.projectBuffer)(f,l.spatialReference,p,o,h.spatialReference,s,a)?g:void 0}function p(e,t,n,r,i){const o=((0,h.v)(e)?e.z:(0,u.cN)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,u.R1)(t,e,"ground")??0;return i.verticalDistanceToGround=0,i.sampledElevation=n,void(i.z=n)}case"relative-to-ground":{const s=(0,u.R1)(t,e,"ground")??0,a=n.geometryZWithOffset(o,r);return i.verticalDistanceToGround=a,i.sampledElevation=s,void(i.z=a+s)}case"relative-to-scene":{const s=(0,u.R1)(t,e,"scene")??0,a=n.geometryZWithOffset(o,r);return i.verticalDistanceToGround=a,i.sampledElevation=s,void(i.z=a+s)}case"absolute-height":{const s=n.geometryZWithOffset(o,r),a=(0,u.R1)(t,e,"ground")??0;return i.verticalDistanceToGround=s-a,i.sampledElevation=a,void(i.z=s)}default:return void(i.z=0)}}function g(e,t,n,r){return p(e,t,n,r,O),O.z}function _(e,t,n){return"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?null==t||null==n?e.definedChanged:r.UPDATE:e.onTheGroundChanged}function y(e){return"relative-to-ground"===e||"relative-to-scene"===e}function m(e){return"absolute-height"!==e}function v(e,t,n,r,i){p(t,n,i,r,O),x(e,O.verticalDistanceToGround);const s=O.sampledElevation,a=(0,o.C)(E,e.transformation);return A[0]=t.x,A[1]=t.y,A[2]=O.z,(0,l.l)(t.spatialReference,A,a,r.spatialReference)?e.transformation=a:console.warn("Could not locate symbol object properly, it might be misplaced"),s}function x(e,t){for(let n=0;n<e.geometries.length;++n){const r=e.geometries[n].getMutableAttribute(d.r.CENTEROFFSETANDDISTANCE);r&&r.data[3]!==t&&(r.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],d.r.CENTEROFFSETANDDISTANCE))}}class w{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}(i=r||(r={}))[i.NONE=0]="NONE",i[i.UPDATE=1]="UPDATE",i[i.RECREATE=2]="RECREATE";const b={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o,s,a){const l=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext;t*=3,r*=3;for(let h=0;h<i;++h){const i=e[t],o=e[t+1],s=e[t+2];n[r]=i,n[r+1]=o,n[r+2]=null==c?s+l:l,t+=3,r+=3}return 0},requiresAlignment:function(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o){let s=0;const a=o.spatialReference;t*=3,r*=3;for(let l=0;l<i;++l){const i=e[t],l=e[t+1],c=e[t+2],h=o.getElevation(i,l,c,a,"ground")??0;s+=h,n[r]=i,n[r+1]=l,n[r+2]=h,t+=3,r+=3}return s/i},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o,s,a){let l=0;const c=a.calculateOffsetRenderUnits(s),h=a.featureExpressionInfoContext,u=o.spatialReference;t*=3,r*=3;for(let d=0;d<i;++d){const i=e[t],s=e[t+1],a=e[t+2],d=o.getElevation(i,s,a,u,"ground")??0;l+=d,n[r]=i,n[r+1]=s,n[r+2]=null==h?a+d+c:d+c,t+=3,r+=3}return l/i},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o,s,a){let l=0;const c=a.calculateOffsetRenderUnits(s),h=a.featureExpressionInfoContext,u=o.spatialReference;t*=3,r*=3;for(let d=0;d<i;++d){const i=e[t],s=e[t+1],a=e[t+2],d=o.getElevation(i,s,a,u,"scene")??0;l+=d,n[r]=i,n[r+1]=s,n[r+2]=null==h?a+d+c:d+c,t+=3,r+=3}return l/i},requiresAlignment:()=>!0}},E=(0,s.vt)(),O=new w,A=(0,a.vt)()},55834:(e,t,n)=>{n.d(t,{y:()=>a});var r=n(93800),i=n(58448),o=n(48602),s=(n(21265),n(50925),n(14746),n(75269));let a=class extends i.A.EventedAccessor{constructor(e){super(e),this.tracking=!1,this.displaying=!1,this.error=null,this.isDraped=!1}};(0,r._)([(0,o.MZ)({constructOnly:!0})],a.prototype,"graphic",void 0),(0,r._)([(0,o.MZ)()],a.prototype,"tracking",void 0),(0,r._)([(0,o.MZ)()],a.prototype,"displaying",void 0),(0,r._)([(0,o.MZ)()],a.prototype,"error",void 0),(0,r._)([(0,o.MZ)()],a.prototype,"isDraped",void 0),a=(0,r._)([(0,s.$)("esri.views.3d.layers.graphics.GraphicState")],a)},60831:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(54824);function i(e,t){const n=e.samples??[],i=n.length-1,o=[];let s=[];for(let r=0;r<=i;r++){const{x:e,y:t,z:a}=n[r];null!=a&&s.push([e,t,a]),r!==i&&null!=a||!s.length||(o.push(s),s=[])}return new r.default({paths:o,hasZ:!0,spatialReference:t})}},61315:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(73031),i=n(826);class o extends i.n{constructor(e,t){super(e,"vec2",r.c.Pass,((n,r,i)=>n.setUniform2fv(e,t(r,i))))}}},61500:(e,t,n)=>{n.r(t),n.d(t,{ElevationProfileView3D:()=>M});var r=n(90834),i=n(17741),o=n(79953),s=n(92645),a=n(76264),l=n(58828),c=n(42198),h=n(49959),u=n(41317),d=n(68160),f=n(26525),p=n(55834),g=n(60984),_=n(19983);class y{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null,this._settings=new d.w({getTheme:()=>this._params.view.effectiveTheme})}destroy(){this.remove()}remove(){this._highlightTask=(0,i.DC)(this._highlightTask),this._highlightHandle=(0,i.xt)(this._highlightHandle),this._visualElementHandle=(0,i.xt)(this._visualElementHandle)}showHighlight(e){if(this.remove(),null==e||!m(e))return;const t=e.layer;this._highlightTask=(0,l.UT)((async n=>{const r=await this._params.view.whenLayerView(t);(0,h.throwIfAborted)(n),(0,_.Of)(r)&&(this._highlightHandle=r.highlight(e))}))}showReshaping(e){if(this.remove(),null==e)return;const t=this._params.view,n=new f.P({view:t,geometry:m(e)?e.geometry:null,attached:!1,elevationInfo:(0,u.bh)(e),renderOccluded:g.m$.OccludeAndTransparentStencil,isDecoration:!0}),r=new p.y({graphic:e}),i=[(0,o.watch)((()=>r.isDraped),(e=>{n.isDraped=e})),r.on("changed",(()=>{n.geometry=m(e)?e.geometry:null})),t.trackGraphicState(r),t.maskOccludee(e),(0,c.DQ)(n)];this._settings.visualElements.lineObjects.outline.apply(n),n.attached=!0,this._visualElementHandle=(0,c.vE)(i)}}function m(e){return null!=e.geometry&&"polyline"===e.geometry.type}var v=n(93800),x=n(88102),w=n(6946),b=n(76469),E=n(48602),O=(n(21265),n(50925),n(14746),n(75269)),A=n(24646),R=n(60831);let C=class extends w.default{constructor(e){super(e),this._chartData=null,this._visualElements=[],this._update=e=>{const{chartData:t}=e;if(null==t)return this.remove();if(!t.refined)return;const n=this._visualElements,r=t.lines.filter((e=>e.viewVisualizationEnabled)),i=r.length;for(;n.length>i;)n.pop().destroy();const o=(0,s.zj)().profileLinesStyle3D;for(;n.length<i;){const e=new f.P({view:this.view,elevationInfo:{mode:"absolute-height",offset:0},innerWidth:o.innerWidth,innerColor:o.innerColor,width:o.width,falloff:o.falloff,renderOccluded:o.renderOccluded,isDecoration:!0});n.push(e)}const a=e.spatialReference;for(let s=0;s<i;++s){const e=n[s],t=r[i-1-s];e.geometry=(0,R.T)(t,a),e.color=(0,A.ci)(x.default.toUnitRGBA(t.color))}}}initialize(){const e=(0,s.zj)().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const n=(0,b.n)(this._update,e);this.addHandles(n),t=n}this.addHandles([(0,o.watch)((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),t,o.syncAndInitial)])}destroy(){this._destroyVisualElements()}remove(){this._destroyVisualElements()}update(e){this._chartData=e}_destroyVisualElements(){this._visualElements.forEach((e=>e.destroy())),this._visualElements.length=0}};(0,v._)([(0,E.MZ)()],C.prototype,"view",void 0),(0,v._)([(0,E.MZ)()],C.prototype,"_chartData",void 0),C=(0,v._)([(0,O.$)("esri.widgets.ElevationProfile.support.ProfileLines3D")],C);class M{constructor(e,t){this._handles=new r.default,this._inputRepresentation=new y({view:e}),this._hoveredPoints=new a.t({view:e}),this._profileLines=new C({view:e}),this._handles.add([(0,o.watch)((()=>t.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),o.syncAndInitial),(0,o.watch)((()=>{const{state:e,editable:n,highlightEnabled:r,viewModel:i}=t,o=i.input;return o&&(o.commitProperty("geometry"),o.commitProperty("layer")),{input:o,state:e,editable:n,highlightEnabled:r}}),(e=>this._updateInputRepresentation(e)),o.syncAndInitial),(0,o.watch)((()=>t.viewModel.chartData),(e=>this._profileLines.update(e)),o.syncAndInitial),(0,o.watch)((()=>t.viewModel.input?.geometry),(()=>{this._profileLines.remove()}),o.syncAndInitial)])}destroy(){this._handles=(0,i.pR)(this._handles),this._inputRepresentation=(0,i.pR)(this._inputRepresentation),this._hoveredPoints=(0,i.pR)(this._hoveredPoints),this._profileLines=(0,i.pR)(this._profileLines)}_updateInputRepresentation(e){let{input:t,state:n,editable:r,highlightEnabled:i}=e;const o=this._inputRepresentation;if(!i)return o.remove();n===s.o8.Selected?o.showHighlight(t):n!==s.o8.Created||r?o.remove():o.showReshaping(t)}}},66458:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(92156),i=n(605);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e.stride;return Array.from(e.fields.keys()).map((r=>{const o=e.fields.get(r),a=o.constructor.ElementCount,l=s(o.constructor.ElementType),c=o.offset,h=o.optional?.glNormalized??!1;return new i._(r,a,l,c,n,h,t)}))}function s(e){const t=a[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const a={u8:r.pe.UNSIGNED_BYTE,u16:r.pe.UNSIGNED_SHORT,u32:r.pe.UNSIGNED_INT,i8:r.pe.BYTE,i16:r.pe.SHORT,i32:r.pe.INT,f32:r.pe.FLOAT}},68160:(e,t,n)=>{n.d(t,{w:()=>A});var r=n(93800),i=n(88102),o=n(6946),s=n(2925),a=n(48602),l=(n(21265),n(50925),n(14746),n(75269)),c=n(85090),h=n(60984),u=n(79678);const d=.3;function f(e,t){t&&Object.assign(e,t)}class p{constructor(e){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=h.m$.Opaque,this.color=e.accent}}class g{constructor(e){let{colors:t,...n}=e;this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=t.accent,this.outlineColor=t.outline,this.renderOccluded=h.m$.Opaque,this.hoverOutlineColor=t.selectedOutline,f(this,n)}applyColor(e){this._apply(this.color,e)}applyOutline(e){this._apply(this.outlineColor,e)}applyHoverOutline(e){this._apply(this.hoverOutlineColor,e)}_apply(e,t){t.setParameters({color:(0,s.QP)(e),renderOccluded:this.renderOccluded})}}class _{constructor(e){let{colors:t,...n}=e;this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=h.m$.Transparent,this.minSquaredEdgeLength=900,this.color=(0,s._L)(t.accent,.5),this.hoverColor=t.accent,f(this,n)}applyColor(e){this._apply(this.color,e)}applyHover(e){this._apply(this.hoverColor,e)}_apply(e,t){t.setParameters({color:(0,s.QP)(e),renderOccluded:this.renderOccluded})}}class y{constructor(e){this.vertex=new g({colors:e,color:e.accent,outlineColor:e.outline}),this.edge=new g({colors:e,color:(0,s.Vl)((0,s._L)(e.accent,2/3),.5),outlineColor:(0,s._L)(e.outline,.5),size:8,collisionPadding:8}),this.selected=new g({colors:e,color:e.selected,outlineColor:e.outline}),this.edgeOffset=new _({colors:e})}}class m{constructor(e){let{colors:t,...n}=e;this.width=1.5,this.stipplePattern=(0,u.wk)(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=h.m$.OccludeAndTransparent,this.color=t.selected,this.stippleOffColor=t.outline,this.innerColor=t.selected,f(this,n)}apply(e){e.color=(0,s.QP)(this.color),e.width=this.width,e.stipplePattern=this.stipplePattern,e.stippleOffColor=(0,s.QP)(this.stippleOffColor),e.falloff=this.falloff,e.innerWidth=this.innerWidth,e.innerColor=(0,s.QP)(this.innerColor),e.renderOccluded=this.renderOccluded}}class v{constructor(e){let{colors:t,...n}=e;this.size=4,this.outlineSize=1,this.shape="square",this.color=t.selected,this.outlineColor=t.outline,f(this,n)}apply(e){e.color=(0,s.QP)(this.color),e.size=this.size,e.outlineSize=this.outlineSize,e.outlineColor=(0,s.QP)(this.outlineColor),e.primitive=this.shape}}class x{constructor(e){let{colors:t,...n}=e;this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=d,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=t.selected,this.glowColor=t.accent,this.heightFillColor=t.accent,f(this,n)}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n={glowColor:i.default.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:i.default.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*t*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in e?e.style=n:e.laserlineStyle=n}}class w{constructor(e){this.outline=new m({colors:e,color:e.stippleOff,renderOccluded:h.m$.OccludeAndTransparentStencil,stippleOffColor:e.stippleOn,innerWidth:0}),this.staged=new m({colors:e,color:e.stippleOn,renderOccluded:h.m$.OccludeAndTransparentStencil,innerColor:e.stagedSolid,stippleOffColor:e.stippleOff}),this.shadowStyle=new x({colors:e,globalAlpha:d,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1})}}class b{constructor(e){this.outline=new v({colors:e,color:e.selected,outlineColor:e.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new x({colors:e,globalAlpha:d,glowColor:e.accent,glowFalloff:1.5,glowWidth:6,innerColor:e.selected,innerWidth:1,radius:2})}}class E extends m{constructor(e){let{colors:t,...n}=e;super({colors:t}),this.extensionType=c.A.GROUND_RAY,f(this,n)}}class O{constructor(e){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new w(e),this.pointObjects=new b(e),this.heightPlane=new x({colors:e,globalAlpha:d,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1}),this.heightBox=new x({colors:e,globalAlpha:d,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:0,heightFillColor:e.accent}),this.zVerticalLine=new E({colors:e,color:(0,s._L)(e.accent,.5),falloff:2,innerColor:(0,s._L)(e.selected,0),renderOccluded:h.m$.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:c.A.GROUND_RAY})}}let A=class extends o.default{constructor(e){super(e)}get colors(){const e=this.getTheme().accentColor,t=e.a;return{accent:e,contrast:(0,s.bJ)(e),selected:i.default.fromArray([255,255,255,t]),selectedOutline:i.default.fromArray([255,255,255,t]),staged:i.default.fromArray([12,207,255,t]),stagedSolid:i.default.fromArray([12,207,255,1]),outline:i.default.fromArray([0,0,0,.5*t]),stippleOn:i.default.fromArray([255,255,255,1]),stippleOff:i.default.fromArray([0,0,0,.5])}}get visualElements(){return new O(this.colors)}get manipulators(){return new y(this.colors)}get zManipulator(){return new p(this.colors)}};(0,r._)([(0,a.MZ)()],A.prototype,"colors",null),(0,r._)([(0,a.MZ)()],A.prototype,"visualElements",null),(0,r._)([(0,a.MZ)()],A.prototype,"manipulators",null),(0,r._)([(0,a.MZ)()],A.prototype,"zManipulator",null),(0,r._)([(0,a.MZ)()],A.prototype,"getTheme",void 0),A=(0,r._)([(0,l.$)("esri.views.3d.interactive.editingTools.settings")],A)},69436:(e,t,n)=>{var r;n.d(t,{D:()=>r}),function(e){e[e.Occluded=0]="Occluded",e[e.NotOccluded=1]="NotOccluded",e[e.Both=2]="Both",e[e.COUNT=3]="COUNT"}(r||(r={}))},71456:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(93800),i=n(58448),o=n(79953),s=n(48602),a=(n(21265),n(50925),n(14746),n(75269)),l=n(96913);let c=class extends i.A.EventedAccessor{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,o.when)((()=>{const e=this.screenLocationEnabled?this.view:null;return e?[e.size,"3d"===e.type?e.camera:e.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),(0,o.watch)((()=>this.screenLocation),((e,t)=>{null!=e&&null!=t&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:e,view:t,screenLocationEnabled:n}=this,r=t?.spatialReference,i=r?(0,l.projectOrLoad)(e,r).geometry:null;return n&&i&&t?.ready?t.toScreen(i):null}};(0,r._)([(0,s.MZ)()],c.prototype,"location",void 0),(0,r._)([(0,s.MZ)()],c.prototype,"screenLocation",null),(0,r._)([(0,s.MZ)()],c.prototype,"screenLocationEnabled",void 0),(0,r._)([(0,s.MZ)()],c.prototype,"view",void 0),c=(0,r._)([(0,a.$)("esri.widgets.support.AnchorElementViewModel")],c);const h=c},71750:(e,t,n)=>{n.d(t,{KF:()=>g,MF:()=>p,VG:()=>u,g7:()=>f,gf:()=>d,hI:()=>c,o8:()=>l,q6:()=>h});var r=n(50925),i=n(49959),o=n(34156),s=n(96247);const a=()=>r.A.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function l(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function c(e){const t=e?.expression;if("string"==typeof t){const e=y(t);if(null!=e)return{cachedResult:e}}return null}async function h(e,t,n,r){const o=e?.expression;if("string"!=typeof o)return null;const a=y(o);if(null!=a)return{cachedResult:a};const l=await(0,s.lw)();(0,i.throwIfAborted)(n);const c=l.arcadeUtils,h=c.createSyntaxTree(o);return c.dependsOnView(h)?(null!=r&&r.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:c.createFunction(h),context:c.createExecContext(null,{sr:t}),modules:l}}}function u(e,t,n){return e.arcadeUtils.createFeature(t.attributes,t.geometry,n)}function d(e,t){if(null!=e&&!_(e)){if(!t||!e.arcade)return void a().errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,o.wZ)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function f(e){if(null!=e){if(_(e))return e.cachedResult;const t=e.arcade;let n=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof n&&(e.cachedResult=0,n=0),n}return 0}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?.featureExpressionInfo;const r=n?.expression;return t||"0"===r||(n=null),n??null}const g={cachedResult:0};function _(e){return null!=e.cachedResult}function y(e){return"0"===e?0:null}},72249:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(34308),i=n(71750);class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,r.Ao)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(e){this._meterUnitOffset=e,this._renderUnitOffset=0}set offsetElevationInfoUnits(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(e){this._renderUnitOffset+=e}geometryZWithOffset(e,t){const n=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?n:e+n}calculateOffsetRenderUnits(e){let t=this._meterUnitOffset;const n=this.featureExpressionInfoContext;return null!=n&&(t+=(0,i.g7)(n)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}setFromElevationInfo(e){this.mode=e.mode,this.unit=(0,r.Tg)(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=e.offset??0}updateFeatureExpressionInfoContext(e,t,n){if(null==e)return void(this._featureExpressionInfoContext=null);const r=e?.arcade;r&&null!=t&&null!=n?(this._featureExpressionInfoContext=(0,i.o8)(e),(0,i.gf)(this._featureExpressionInfoContext,(0,i.VG)(r.modules,t,n))):this._featureExpressionInfoContext=e}static fromElevationInfo(e){const t=new o;return null!=e&&t.setFromElevationInfo(e),t}}},72530:(e,t,n)=>{n.d(t,{t:()=>_,z:()=>v});var r=n(32006),i=n(98080),o=n(24646),s=n(30142),a=n(68693),l=n(66028),c=n(46576),h=n(55239),u=n(51064),d=n(65069),f=n(69291),p=n(25735),g=n(22131);function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=[],_=t.mapPositions;!function(e,t){const{attributeData:{position:n},removeDuplicateStartEnd:r}=e,i=function(e){const t=e.length;return e[0]===e[t-3]&&e[1]===e[t-2]&&e[2]===e[t-1]}(n)&&r,o=n.length/3-(i?1:0),s=new Array(2*(o-1)),a=i?n.slice(0,-3):n;let l=0;for(let c=0;c<o-1;c++)s[l++]=c,s[l++]=c+1;t.push([g.r.POSITION,new d.n(a,s,3,i)])}(t,i);const v=i[0][1].data,x=i[0][1].indices.length,w=(0,h.EH)(x);return function(e,t,n){if(null!=e.attributeData.colorFeature)return;const r=e.attributeData.color;t.push([g.r.COLOR,new d.n(r??o.Un,n,4)])}(t,i,w),function(e,t,n){null==e.attributeData.sizeFeature&&t.push([g.r.SIZE,new d.n([e.attributeData.size??1],n,1,!0)])}(t,i,w),function(e,t,n){e.attributeData.normal&&t.push([g.r.NORMAL,new d.n(e.attributeData.normal,n,3)])}(t,i,w),function(e,t,n){null!=e.attributeData.colorFeature&&t.push([g.r.COLORFEATUREATTRIBUTE,new d.n([e.attributeData.colorFeature],n,1,!0)])}(t,i,w),function(e,t,n){null!=e.attributeData.sizeFeature&&t.push([g.r.SIZEFEATUREATTRIBUTE,new d.n([e.attributeData.sizeFeature],n,1,!0)])}(t,i,w),function(e,t,n){null!=e.attributeData.opacityFeature&&t.push([g.r.OPACITYFEATUREATTRIBUTE,new d.n([e.attributeData.opacityFeature],n,1,!0)])}(t,i,w),function(e,t,n){if(null==e.overlayInfo||e.overlayInfo.renderCoordsHelper.viewingMode!==u.RT.Global||!e.overlayInfo.spatialReference.isGeographic)return;const i=(0,l.jh)(n.length),o=(0,s.tO)(e.overlayInfo.spatialReference);for(let r=0;r<i.length;r+=3)(0,a.RC)(n,r,i,r,o);const h=n.length/3,f=(0,c.oe)(h+1);let p=y,_=m,v=0,x=0;(0,r.hZ)(p,i[x++],i[x++]),x++,f[0]=0;for(let s=1;s<h+1;++s)s===h&&(x=0),(0,r.hZ)(_,i[x++],i[x++]),x++,v+=(0,r.xg)(p,_),f[s]=v,[p,_]=[_,p];t.push([g.r.DISTANCETOSTART,new d.n(f,t[0][1].indices,1,!0)])}(t,i,v),new p.V(e,i,_,f.X.Line,n)}const y=(0,i.vt)(),m=(0,i.vt)();function v(e,t){if(null==e||0===e.length)return[];const n=[];return e.forEach((e=>{const r=e.length,i=(0,l.jh)(3*r);e.forEach(((e,t)=>{i[3*t]=e[0],i[3*t+1]=e[1],i[3*t+2]=e[2]}));const o={attributeData:{position:i,normal:t},removeDuplicateStartEnd:!1};n.push(o)})),n}},76264:(e,t,n)=>{n.d(t,{t:()=>u});var r=n(93800),i=n(6946),o=n(89129),s=n(79953),a=n(48602),l=(n(21265),n(50925),n(14746),n(75269)),c=n(92645),h=n(71456);let u=class extends i.default{constructor(e){super(e),this._hoveredPoints=new o.default}initialize(){this.addHandles((0,s.watch)((()=>this._hoveredPoints.toArray().map((e=>{let{anchor:t,element:n}=e;return{screenLocation:t.screenLocation,element:n}}))),(e=>{for(const{screenLocation:t,element:n}of e)t&&(n.style.transform=`translate(${t.x}px, ${t.y}px)`)}),s.syncAndInitial))}destroy(){this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const t=this.view,n=this._hoveredPoints,r=e.length;for(;this._hoveredPoints.length>r;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<r;){const e=this._makeHoveredPoint();n.push(e),t.surface?.appendChild(e.element)}for(let i=0;i<r;++i){const t=n.at(r-1-i),o=e[i];this._updateHoveredPoint(t,o)}}_makeHoveredPoint(){const{size:e,borderStyle:t,borderColor:n,borderWidth:r,boxShadow:i}=(0,c.zj)().hoveredPointsStyle,o=this.view,s=new h.A({view:o,screenLocationEnabled:!0}),a=document.createElement("div"),l=a.style;return l.position="absolute",l.top="0",l.left="0",l.contain="strict",l.boxSizing="border-box",l.width=`${e}px`,l.height=`${e}px`,l.marginTop=`-${e/2}px`,l.marginLeft=`-${e/2}px`,l.border=`${t} ${r}px ${n}`,l.borderRadius=`${e}px`,l.boxShadow=i,{anchor:s,element:a}}_updateHoveredPoint(e,t){let{anchor:n,element:r}=e;n.screenLocationEnabled=!0,n.location=t.hoveredPoint;const i=r.style;i.display="block",i.background=t.color.toCss()}_destroyHoveredPoint(e){let{anchor:t,element:n}=e;t.destroy(),this.view.surface?.removeChild(n)}};(0,r._)([(0,a.MZ)()],u.prototype,"view",void 0),(0,r._)([(0,a.MZ)()],u.prototype,"_hoveredPoints",void 0),u=(0,r._)([(0,l.$)("esri.widgets.ElevationProfile.support.HoveredPoints")],u)},77297:(e,t,n)=>{var r,i,o;n.d(t,{O7:()=>i,Om:()=>r,sv:()=>o}),function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(r||(r={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(i||(i={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(o||(o={}))},79678:(e,t,n)=>{n.d(t,{Xq:()=>a,wk:()=>s});const r={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},i={dash:r.dash,"dash-dot":[...r.dash,...r.dot],dot:r.dot,"long-dash":r["long-dash"],"long-dash-dot":[...r["long-dash"],...r.dot],"long-dash-dot-dot":[...r["long-dash"],...r.dot,...r.dot],none:null,"short-dash":r["short-dash"],"short-dash-dot":[...r["short-dash"],...r["short-dot"]],"short-dash-dot-dot":[...r["short-dash"],...r["short-dot"],...r["short-dot"]],"short-dot":r["short-dot"],solid:null},o=8;function s(e){return{pattern:[e,e],pixelRatio:2}}function a(e){return"style"===e?.type?function(e){return null!=e?function(e,t){return null==e?e:{pattern:e.slice(),pixelRatio:t}}(i[e],o):null}(e.style):null}},79787:(e,t,n)=>{n.d(t,{S:()=>l});var r=n(64682),i=n(84190),o=n(89227),s=n(91345),a=n(10872);function l(e,t,n){const l=function(e,t,n,r){const s=(e=>!Array.isArray(e[0]))(t)?(e,n)=>t[3*e+n]:(e,n)=>t[e][n],l=r?(0,i.GA)(r)/(0,i.G9)(r):1;return(0,a.lU)(e,((e,t)=>(0,o.i)(e,s(t,0)*l,s(t,1)*l,s(t,2))),n)}(c,e,t,n)?(0,a.Qj)(c):[0,0,1];return Math.abs(l[2])>Math.cos((0,r.kU)(80))?s._.Z:Math.abs(l[1])>Math.abs(l[0])?s._.Y:s._.X}const c=(0,a.vt)()},80861:(e,t,n)=>{n.d(t,{g:()=>c});var r=n(62631),i=(n(21265),n(50925)),o=n(25048),s=n(24591),a=n(92156);const l=()=>i.A.getLogger("esri.views.webgl.BufferObject");class c{static createIndex(e,t,n){return new c(e,a.NZ.ELEMENT_ARRAY_BUFFER,t,n)}static createVertex(e,t,n){return new c(e,a.NZ.ARRAY_BUFFER,t,n)}static createUniform(e,t,n){return new c(e,a.NZ.UNIFORM_BUFFER,t,n)}static createPixelPack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_READ,n=arguments.length>2?arguments[2]:void 0;const r=new c(e,a.NZ.PIXEL_PACK_BUFFER,t);return n&&r.setSize(n),r}static createPixelUnpack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_DRAW,n=arguments.length>2?arguments[2]:void 0;return new c(e,a.NZ.PIXEL_UNPACK_BUFFER,t,n)}static createTransformFeedback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STATIC_DRAW,n=arguments.length>2?arguments[2]:void 0;const r=new c(e,a.NZ.TRANSFORM_FEEDBACK_BUFFER,t);return r.setSize(n),r}constructor(e,t,n,r){this._context=e,this.bufferType=t,this.usage=n,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(a.vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,s.Y2)(this._context.gl),r&&this.setData(r)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===a.pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===a.pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===a.NZ.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(a.vt.BufferObject,this),this._context=null):this._glName&&l().warn("Leaked WebGL buffer object")}setSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case a.pe.UNSIGNED_SHORT:e*=2;break;case a.pe.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&((0,o.mg)(e)?this._indexType=a.pe.UNSIGNED_BYTE:(0,o.jq)(e)?(t/=2,this._indexType=a.pe.UNSIGNED_SHORT):(0,o.XJ)(e)&&(t/=4,this._indexType=a.pe.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._size=e;const n=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const r=this._context.gl;null!=t?r.bufferData(this.bufferType,t,this.usage):r.bufferData(this.bufferType,e,this.usage),(0,s.Y2)(r),this._isVAOAware&&this._context.bindVAO(n)}setSubData(e,t,n,r){if(!e)return;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:o}=this._context;o.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,n,r-n),(0,s.Y2)(o),this._isVAOAware&&this._context.bindVAO(i)}getSubData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n<0||i<0)return;const o=function(e){return(0,r.Xj)(e)}(e)?e.BYTES_PER_ELEMENT:1;if(o*((n??0)+(i??0))>e.byteLength)return;t+o*(i??0)>this.usedMemory&&l().warn("Potential problem getting subdata: requested data exceeds buffer size!");const s=this._context.gl;this.bufferType===a.NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,a.NZ.TRANSFORM_FEEDBACK_BUFFER),s.getBufferSubData(a.NZ.TRANSFORM_FEEDBACK_BUFFER,t,e,n,i),this._context.unbindBuffer(a.NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,a.NZ.COPY_READ_BUFFER),s.getBufferSubData(a.NZ.COPY_READ_BUFFER,t,e,n,i),this._context.unbindBuffer(a.NZ.COPY_READ_BUFFER))}async getSubDataAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;await this._context.clientWaitAsync(),this.getSubData(e,t,n,r)}}}}]);