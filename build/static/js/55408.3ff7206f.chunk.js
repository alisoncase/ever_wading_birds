"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[8056,55408,64768,82734],{8056:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(93800),a=i(89129),s=i(48602),o=(i(21265),i(50925),i(14746),i(75269));const r=e=>{let t=class extends e{constructor(){super(...arguments),this.analysis=null,this.tool=null,this.selectedDimension=null,this.interactive=!1,this.visible=null}get results(){return new a.default}createLengthDimensions(e){throw new Error("Method not implemented.")}};return(0,n._)([(0,s.MZ)({constructOnly:!0})],t.prototype,"view",void 0),(0,n._)([(0,s.MZ)({constructOnly:!0,nonNullable:!0})],t.prototype,"analysis",void 0),(0,n._)([(0,s.MZ)()],t.prototype,"tool",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],t.prototype,"results",null),(0,n._)([(0,s.MZ)()],t.prototype,"selectedDimension",void 0),(0,n._)([(0,s.MZ)()],t.prototype,"interactive",void 0),(0,n._)([(0,s.MZ)()],t.prototype,"visible",void 0),t=(0,n._)([(0,o.$)("esri.views.analysis.DimensionAnalysisView")],t),t}},12837:(e,t,i)=>{i.d(t,{X:()=>p});var n=i(42198),a=i(22029),s=i(89129),o=i(79953),r=i(59116),l=i(34519),c=i(35130);var d=i(62791);const u=new Map;function p(e){if(!u.has(e)){const t=function(e,t){const i=new c.default({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:t?.distance??l.N.distance,touchSensitivityMultiplier:t?.touchSensitivityMultiplier??l.N.touchSensitivityMultiplier});return{...(0,o.watch)((()=>e.map?.allLayers?.toArray()??[]),(e=>{i.featureSources=new s.default(e).map((e=>new r.default({layer:e})))}),o.syncAndInitial),options:i}}(e,{distance:10}),i=function(e,t){return new d.g({view:e,options:t})}(e,t.options);u.set(e,{referenceCount:0,snappingManager:i,remove:()=>{t.remove(),i.destroy()}})}const t=u.get(e);t.referenceCount++;const i=(0,n.hA)((()=>{return i=e,(n=t).referenceCount--,void(n.referenceCount>0||(0,a.d)((()=>{0===n.referenceCount&&(n.remove(),u.delete(i))})));var i,n}));return{snappingManager:t.snappingManager,...i}}},15155:(e,t,i)=>{var n;i.d(t,{L:()=>n,h:()=>a}),function(e){e.Horizontal="horizontal",e.Vertical="vertical",e.Direct="direct"}(n||(n={}));const a=[n.Horizontal,n.Vertical,n.Direct]},23278:(e,t,i)=>{var n;i.d(t,{n:()=>n}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(n||(n={}))},27845:(e,t,i)=>{i.d(t,{O:()=>d});var n=i(93800),a=i(6946),s=i(17741),o=i(49959),r=i(48602),l=(i(21265),i(50925),i(14746),i(75269)),c=i(19565);let d=class extends a.default{constructor(e){super(e),this.constrainResult=e=>e,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,o.debounce)((async(e,t,i,n)=>{const a=this._frameTask;if(null==a)return;const s=await a.schedule((()=>t.snap({...e,context:i,signal:n})),n);s.valid&&await a.schedule((()=>{this.stagedPoint=s.apply(),e!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=t.update({...this._snapPoints,context:i}))}),n)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){const e="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=e?e.registerTask(c.W6.SNAPPING):c.nu}destroy(){this._abortController=(0,s.DC)(this._abortController),this._frameTask=(0,s.xt)(this._frameTask)}update(e,t,i){this._snapPoints=e;const{point:n,scenePoint:a}=e,s=t.update({point:n,scenePoint:a,context:i});return this.stagedPoint=s,s}async snap(e,t,i){const{point:n,scenePoint:a}=e;return this.stagedPoint=t.update({point:n,scenePoint:a,context:i}),this._snapPoints=e,null==this._abortController&&(this._abortController=new AbortController),this._snap(e,t,i,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,t){null!=this._snapPoints&&await this.snap(this._snapPoints,e,t)}abort(){this._abortController=(0,s.DC)(this._abortController),this._snapPoints=null}};(0,n._)([(0,r.MZ)({constructOnly:!0})],d.prototype,"view",void 0),(0,n._)([(0,r.MZ)()],d.prototype,"stagedPoint",null),(0,n._)([(0,r.MZ)()],d.prototype,"constrainResult",void 0),(0,n._)([(0,r.MZ)()],d.prototype,"_stagedPoint",void 0),d=(0,n._)([(0,l.$)("esri.views.interactive.snapping.SnappingOperation")],d)},34519:(e,t,i)=>{i.d(t,{N:()=>d});var n=i(93800),a=i(88102),s=i(19455),o=i(48602),r=i(75269);let l=class extends s.A{constructor(){super(...arguments),this.enabled=!0}};(0,n._)([(0,o.MZ)({type:Boolean})],l.prototype,"enabled",void 0),l=(0,n._)([(0,r.$)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],l);let c=class extends s.A{constructor(e){super(e),this.lineSnapper=new l,this.parallelLineSnapper=new l,this.rightAngleSnapper=new l,this.rightAngleTriangleSnapper=new l,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new a.default([255,127,0]),this.orangeTransparent=new a.default([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,n._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"lineSnapper",void 0),(0,n._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"parallelLineSnapper",void 0),(0,n._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleSnapper",void 0),(0,n._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleTriangleSnapper",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"shortLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"distance",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"intersectionParallelLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"parallelLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"verticalLineThresholdMeters",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"touchSensitivityMultiplier",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointOnLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:a.default,nonNullable:!0})],c.prototype,"orange",void 0),(0,n._)([(0,o.MZ)({type:a.default,nonNullable:!0})],c.prototype,"orangeTransparent",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthReference",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthTarget",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"lineHintFadedExtensions",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"parallelLineHintWidth",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],c.prototype,"parallelLineHintLength",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"parallelLineHintOffset",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],c.prototype,"rightAngleHintSize",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],c.prototype,"rightAngleHintOutlineSize",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"satisfiesConstraintScreenThreshold",void 0),c=(0,n._)([(0,r.$)("esri.views.interactive.snapping.Settings.Defaults")],c);const d=new c},34567:(e,t,i)=>{i.d(t,{Hd:()=>l,JY:()=>r,aS:()=>c});var n=i(58828),a=i(17741),s=i(49959),o=i(79953);function r(e,t){e.interactive=!0;const{tool:i,view:r}=e;r.activeTool=i;let l=(0,s.onAbort)(t,(()=>{r.activeTool===i&&(r.activeTool=null)}));return(0,n.UT)((async e=>{await(0,o.whenOnce)((()=>null==i||!i.active),e),l=(0,a.xt)(l)}),t)}function l(e,t){return(0,o.watch)((()=>e.interactive),(()=>function(e,t){e.interactive?function(e,t){c(e);const{view:i,analysis:n}=e,a=new t({view:i,analysis:n,analysisViewData:e});e.tool=a,i.tools.add(a)}(e,t):c(e)}(e,t)),o.syncAndInitial)}function c(e){const{view:t,tool:i}=e;null!=i&&(t.tools.remove(i),e.tool=null)}},38829:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Gt});var n,a=i(93800),s=i(6946),o=i(42198),r=(i(21265),i(50925)),l=i(17741),c=i(79953),d=i(48602),u=(i(14746),i(75269)),p=i(26905),h=i(15155),m=i(84190),g=i(56062),f=i(64682),v=i(92143),_=i(87752),y=i(10382),M=i(89227),S=i(28473),w=i(91345),P=i(1696),b=i(62240),C=i(34156),D=i(30834),T=i(42050),O=i(36089),x=i(47396);class A{constructor(e,t,i,n,a,s){this.elevationAlignedStartPoint=e,this.elevationAlignedEndPoint=t,this.directSegment=i,this.dimensionSegment=n,this.primaryOffsetAxis=a,this.spatialReference=s}}function I(e){const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:i,dimension:{offset:n,measureType:a,orientation:s}}=e;return{elevationAlignedStartPoint:t,elevationAlignedEndPoint:i,offset:n,measureType:a,orientation:s}}function L(e,t){let{elevationAlignedStartPoint:i,elevationAlignedEndPoint:n,offset:a,measureType:s,orientation:o}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==i||null==n)return null;const l=H(r?.directSegment??new D.C,{elevationAlignedStartPoint:i,elevationAlignedEndPoint:n},t),c=r?.primaryOffsetAxis??(0,S.vt)();E(c,{measureType:s,elevationAlignedStartPoint:i,elevationAlignedEndPoint:n,directSegment:l,orientation:o,renderCoordsHelper:t});const d=r?.dimensionSegment??new D.C;return j({elevationAlignedStartPoint:i,elevationAlignedEndPoint:n})&&s===h.L.Vertical?((0,M.c)(d.startRenderSpace,l.startRenderSpace),(0,M.c)(d.endRenderSpace,l.endRenderSpace)):V(d,c,a,l,t),new A(i,n,l,d,c,t.spatialReference)}function z(e,t,i,a){return t===n.Start?((0,M.c)(e.startRenderSpace,i.startRenderSpace),(0,M.c)(e.endRenderSpace,a.startRenderSpace)):((0,M.c)(e.startRenderSpace,i.endRenderSpace),(0,M.c)(e.endRenderSpace,a.endRenderSpace)),e}function R(e,t,i,n){switch(t){case h.L.Direct:return H(e,i,n);case h.L.Horizontal:case h.L.Vertical:{const{elevationAlignedStartPoint:a,elevationAlignedEndPoint:s,dimension:o,geometry:r}=i;let l;o.measureType===h.L.Direct?(l=function(e,t){const i=e.directSegment.eval(.5,P.rq.get()),n=t.worldUpAtPosition(i,P.rq.get()),a=e.dimensionSegment.eval(.5,P.rq.get()),s=(0,M.a)(P.rq.get(),a,i);return!(0,M.I)(s,S.uY)&&(0,M.f)(s,n)>0}(r,n)===a.z>s.z,t===h.L.Horizontal&&(l=!l)):l=!function(e){const{startRenderSpace:t,endRenderSpace:i}=e.dimensionSegment,{startRenderSpace:n,endRenderSpace:a}=e.directSegment;return(0,M.y)(n,t)<(0,M.y)(a,i)}(r);const[c,d]=l?[a,s]:[s,a],u=(0,C.EL)(d,N);return t===h.L.Horizontal?u.z=c.z:(u.x=c.x,u.y=c.y),n.toRenderCoords(c,e.startRenderSpace),n.toRenderCoords(u,e.endRenderSpace),e}}}function H(e,t,i){return i.toRenderCoords(t.elevationAlignedStartPoint,e.startRenderSpace),i.toRenderCoords(t.elevationAlignedEndPoint,e.endRenderSpace),e}!function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(n||(n={}));const N=(0,b.T)(0,0,0,null);const Z=new D.C;function E(e,t){const{measureType:i,elevationAlignedStartPoint:n,elevationAlignedEndPoint:a,directSegment:{startRenderSpace:s,endRenderSpace:o},directSegment:r,renderCoordsHelper:l}=t,c=r.eval(.5,P.rq.get()),d=l.worldUpAtPosition(c,P.rq.get()),u=l.worldBasisAtPosition(c,w._.Y,P.rq.get());switch(i){case h.L.Horizontal:(0,M.c)(e,d);break;case h.L.Vertical:(0,M.f)(s,d)<(0,M.f)(o,d)?(0,M.a)(e,o,s):(0,M.a)(e,s,o),(0,M.e)(e,e,d),(0,M.e)(e,e,d);break;case h.L.Direct:{const i=t.orientation??0;if(j({elevationAlignedStartPoint:n,elevationAlignedEndPoint:a}))(0,_.$0)(k,-(0,f.kU)(i),d),(0,M.t)(e,u,k);else{const t=(0,M.a)(P.rq.get(),o,s),n=(0,M.e)(P.rq.get(),t,d);(0,M.e)(n,n,t),(0,_.$0)(k,(0,f.kU)(i),t),(0,M.t)(e,n,k)}break}}return(0,M.I)(e,S.uY)?(0,M.c)(e,u):(0,M.n)(e,e)}const k=(0,y.vt)();function j(e){let{elevationAlignedStartPoint:t,elevationAlignedEndPoint:i}=e;return null!=t&&null!=i&&t.x===i.x&&t.y===i.y}function V(e,t,i,n,a){const{startRenderSpace:s,endRenderSpace:o}=n,r=i/a.unitInMeters,[l,c]=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a=(0,M.f)(t,i),s=(0,M.f)(e,i),o=Math.abs(a-s)+n;return a>s?[o,n]:[n,o]}(s,o,t,r);return(0,M.b)(e.startRenderSpace,n.startRenderSpace,t,l),(0,M.b)(e.endRenderSpace,n.endRenderSpace,t,c),e}function G(e,t,i){const n=t.directSegment.eval(.5,P.rq.get());return i.worldUpAtPosition(n,e)}function U(e,t){const{startRenderSpace:i,endRenderSpace:n}=t.directSegment;return(0,M.a)(e,n,i)}function q(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{invert:!1};const{startRenderSpace:n,endRenderSpace:a}=t.dimensionSegment;return i.invert?(0,M.a)(e,n,a):(0,M.a)(e,a,n)}function F(e,t){const i=e.directSegment.eval(.5,P.rq.get());return t.headingAtPosition(i,e.primaryOffsetAxis)}const W=(0,S.vt)();function $(e){const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:i}=e;if(null==t||null==i)return!1;const n=(0,O.Ce)(t,i);return null!=n&&(0,v.kM)(n,"meters").value>x.U7}function Y(e){return null!=e.geometry}let B=class extends s.default{constructor(e){super(e)}initialize(){const e=(0,c.mapCollection)((()=>this.analysisViewData.computations),(e=>{let{computation:t}=e;return this._watchComputation(t)}));this.addHandles((0,o.DQ)(e))}get analysis(){return this.analysisViewData.analysis}get _defaultUnit(){return(0,g.c)(this.view)}_watchComputation(e){return(0,c.watch)((()=>I(e)),(t=>{const{measureType:i}=t;if($(t)&&i!==h.L.Direct){const t=Math.round((0,m.oU)(x.U7,"meters","kilometers"));return r.A.getLogger(this).warnOnce(`A ${i} dimension in the analysis (id: '${this.analysis.id}') will not display, because only direct dimensions can measure lengths greater than ${t} km. Update the measureType of the affected dimension to "direct" to display it.`),void(e.geometry=null)}const n=L(t,this.view.renderCoordsHelper,e.geometry);e.geometry=n,e.result.length=function(e,t,i){if(null==e)return null;let n;if(t===h.L.Horizontal)n=(0,T.Kt)(e.elevationAlignedStartPoint,e.elevationAlignedEndPoint);else{const{startRenderSpace:t,endRenderSpace:i}=e.dimensionSegment;n=(0,O.vp)(t,i,e.spatialReference)}if(null==n)return null;const a=t===h.L.Vertical?(0,m.jE)(n.value,n.unit,i):(0,m.Vs)(n.value,n.unit,i);return(0,v.kM)(n,a)}(n,i,this._defaultUnit)}),c.syncAndInitial)}};(0,a._)([(0,d.MZ)({constructOnly:!0})],B.prototype,"analysisViewData",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0})],B.prototype,"view",void 0),(0,a._)([(0,d.MZ)()],B.prototype,"analysis",null),(0,a._)([(0,d.MZ)()],B.prototype,"_defaultUnit",null),B=(0,a._)([(0,u.$)("esri.views.3d.analysis.Dimension.DimensionController")],B);var X=i(93687),Q=i(75400),J=i(88102),K=i(5839),ee=i(16804),te=i(24646),ie=i(10872),ne=i(2925);function ae(e){return(0,ne._L)(e.accentColor,.5)}const se=new J.default([127,127,127,.5]);var oe=i(49502),re=i(3276),le=i(9814),ce=i(32850),de=i(42402),ue=i(65069),pe=i(25735),he=i(86580),me=i(60984),ge=i(22131),fe=i(59247),ve=i(23664),_e=i(29331),ye=i(54379);class Me{constructor(e){this.start=e.start,this.end=e.end,this.offset=e.offset,this.heading=e.heading,this.rotation=e.rotation,this.direct=e.direct,this.horizontal=e.horizontal,this.vertical=e.vertical}manipulatorName(e){return Object.keys(this).find((t=>this.hasOwnProperty(t)&&e===this[t]))}values(){return[this.start,this.end,this.offset,this.heading,this.rotation,this.direct,this.horizontal,this.vertical]}forEachMeasureTypeManipulator(e){for(const t of h.h)e(this.manipulatorForMeasureType(t),t)}manipulatorForMeasureType(e){switch(e){case h.L.Direct:return this.direct;case h.L.Horizontal:return this.horizontal;case h.L.Vertical:return this.vertical}}}class Se extends oe.q{constructor(e,t){const i=(0,re.UM)(J.default.toUnitRGBA(ae(e.effectiveTheme))),n=[new le.M((0,he.CM)(i,1,32,32),Ee)];super({view:e,renderObjects:n,metadata:t.metadata,available:!1,grabCursor:"crosshair",radius:5,collisionPriority:1}),this._themeHandle=(0,c.watch)((()=>({color:J.default.toUnitRGBA(ae(e.effectiveTheme))})),(e=>i.setParameters(e)))}destroy(){this._themeHandle.remove(),super.destroy()}}class we extends oe.q{constructor(e,t){let{lineSizePt:i,material:n,metadata:a}=t;super({view:e,autoScaleRenderObjects:!1,collisionPriority:1,metadata:a}),this._options={calloutColor:(0,te.vt)(),lineSizePt:i,material:n},this._themeHandle=(0,c.watch)((()=>J.default.toUnitRGBA(ae(e.effectiveTheme))),(e=>{this._options.calloutColor=e,Ze(this,Pe({...this._options,metadata:this.metadata}))}),c.initial)}update(e){let{lineSizePt:t,material:i}=e;this._options.lineSizePt=t,this._options.material=i,Ze(this,Pe({...this._options,metadata:this.metadata}))}destroy(){this._themeHandle.remove(),super.destroy()}}function Pe(e){let{calloutColor:t,lineSizePt:i,material:n,metadata:a}=e;return{calloutLength:.25*de.PV*.8*(0,ee.Lz)(i)+18,calloutColor:t,calloutWidth:2,customStateMask:Ee,discScale:.3,focusMultiplier:2,material:n,metadata:a}}function be(e,t){let{computation:i,view:n}=t;return[(0,_e.Xt)(e,((e,t,a)=>{Ce({cancel:a,computation:i,settingHeading:!1,steps:t,view:n})})),e.events.on("immediate-click",(e=>{!function(e,t,i){const{dimension:n,geometry:a}=t;if(90===n.orientation||270===n.orientation)return n.orientation=0,void e.stopPropagation();if(null==a)return;const{renderCoordsHelper:s}=i,o=L({...I(t),orientation:90},s),r=L({...I(t),orientation:270},s);if(null==o||null==r)return;const l=F(o,s),c=F(r,s),d=Oe(a,i),u=K.ie.shortestSignedDiff(d,l),p=K.ie.shortestSignedDiff(d,c);n.orientation=Math.abs(u)<Math.abs(p)?90:270,e.stopPropagation()}(e,i,n)}))]}function Ce(e){const{cancel:t,computation:i,settingHeading:n,steps:a,view:s}=e;if(!Y(i))return;const{renderCoordsHelper:o}=s,{dimension:r,geometry:l}=i,c=(0,S.vt)(),d=Le((0,S.vt)(),l,l.directSegment,o),u=ze(P.rq.get(),{forHeading:n,geometry:l,renderCoordsHelper:o}),p=(0,ie.O_)(d,u,(0,ie.vt)()),h=n?r.orientation??F(l,s.renderCoordsHelper):r.orientation??0;a.next((0,ce.AA)(s,p)).next((e=>{"start"===e.action&&(0,M.c)(c,e.renderStart);const t=(0,ie.Qj)(p),i=(0,re.FY)(c,e.renderEnd,d,t);let a=h-(0,f.KJ)(i);n||(a=function(e){const t=K.ie.normalize(e)%90;return t<5?e-t:90-t<5?e+(90-t):e}(a)),r.orientation=a})),t.next((0,_e.VG)(r,["orientation"]))}function De(e,t){let{computation:i,manipulatorMeasureType:n,view:a}=t,s=h.L.Direct,o=0,r=0;return[e.events.on("grab-changed",(t=>{if("start"!==t.action||!Y(i))return;const{dimension:l,geometry:c}=i;s=l.measureType,o=l.offset,r=l.orientation;const d=(0,M.c)(P.rq.get(),e.renderLocation);l.measureType=n,l.offset=function(e,t,i,n){const{directSegment:a}=i,s=E(P.rq.get(),{measureType:t,directSegment:a,renderCoordsHelper:n}),o=V(Z,s,0,a,n).eval(.5,P.rq.get()),r=(0,M.a)(P.rq.get(),e,o);return(0,M.f)(r,s)*n.unitInMeters}(d,n,c,a.renderCoordsHelper),l.orientation=0})),(0,_e.Xt)(e,((e,t,l)=>{if(!Y(i))return;const{geometry:c,dimension:d}=i,{renderCoordsHelper:u}=a,p=R(Ge,n,i,u),h=E(P.rq.get(),{measureType:n,directSegment:c.directSegment,renderCoordsHelper:u}),m=(0,ce.z7)(e);t.next(m).next(Te(a,d,p,h)),l.next(m).next((e=>(d.measureType=s,d.offset=o,d.orientation=r,e)))}))]}function Te(e,t,i,n){const a=(0,M.d)(P.rq.get(),i.endRenderSpace,i.startRenderSpace);(0,M.e)(a,a,n);const s=(0,ie.O_)(i.startRenderSpace,a,(0,ie.vt)()),o=(0,ie.O_)(i.startRenderSpace,n,(0,ie.vt)()),r=t.offset;let l,c=0;const d=new _e.rh;return d.next((0,ce.AA)(e,s)).next((i=>{"start"===i.action&&(c=(0,ie.mN)(o,i.renderStart));const n=((0,ie.mN)(o,i.renderEnd)-c)*e.renderCoordsHelper.unitInMeters;t.offset=r+n,l=i})),e=>(d.execute(e),l)}function Oe(e,t){const{directSegment:i}=e,{renderCoordsHelper:n}=t,a=G(P.rq.get(),e,n),s=U(P.rq.get(),e),o=(0,M.e)(P.rq.get(),s,a),{viewForward:r}=t.state.camera;(0,M.f)(o,r)>0&&(0,M.h)(o,o,-1);const l=i.eval(.5,P.rq.get());return n.headingAtPosition(l,o)}function xe(e,t,i,n){let{forHeading:a}=n;const{dimension:s,geometry:o}=t,{primaryOffsetAxis:r}=o,l=(0,M.h)(Ae,r,s.offset>=0?1:-1),c=ze(Ie,{forHeading:a,geometry:o,renderCoordsHelper:i});(0,M.e)(c,c,l);const d=(0,re.wQ)(l,c,S.uY,Ve);e.modelTransform=d,e.renderLocation=Le(ke,o,o.dimensionSegment,i)}const Ae=(0,S.vt)(),Ie=(0,S.vt)();function Le(e,t,i,n){const{startRenderSpace:a,endRenderSpace:s}=i,o=function(e,t){const i=U(Re,e),n=G(He,e,t);return(0,M.f)(i,n)>0}(t,n)?a:s;return(0,M.c)(e,o)}function ze(e,t){let{forHeading:i,geometry:n,renderCoordsHelper:a}=t;return i?G(e,n,a):q(e,n,{invert:!0})}const Re=(0,S.vt)(),He=(0,S.vt)();function Ne(e){return(0,ee.Lz)(e)+6}function Ze(e,t){const i=t.material??new fe.r({writeDepth:!1,textureId:t.texture?.id,renderOccluded:me.m$.Opaque,isDecoration:!0}),n=t.focusMultiplier??re.eO.focusMultiplier,a=t.calloutLength??re.eO.calloutLength,s=re.eO.discRadius*(t.discScale??1),o=s*n,r=(e,t)=>{const i=[0,1,2,2,3,0];return new pe.V(t,[[ge.r.POSITION,new ue.n([a-e,-e,0,a+e,-e,0,a+e,e,0,a-e,e,0],i,3,!0)],[ge.r.UV0,new ue.n([0,0,1,0,1,1,0,1],i,2,!0)]])},l=t.calloutWidth??re.eO.calloutWidth,c=new ve.W({width:l,color:t.calloutColor,renderOccluded:me.m$.OccludeAndTransparent,isDecoration:!0}),d=(0,he.Z8)(c,[[0,0,0],[a-s,0,0]]),u=(0,he.Z8)(c,[[0,0,0],[a-o,0,0]]),p=t.customStateMask??ye.SJ.None;e.collisionType={type:"disc",direction:[0,0,1],offset:[a,0,0]},e.focusMultiplier=n,e.metadata=t.metadata,e.radius=s,e.renderObjects=[new le.M(r(s,i),ye.p7.Unfocused|p),new le.M(d,ye.p7.Unfocused|p),new le.M(r(o,i),ye.p7.Focused|p),new le.M(u,ye.p7.Focused|p)]}const Ee=ye.SJ.Custom1,ke=(0,S.vt)(),je=(0,S.vt)(),Ve=(0,y.vt)(),Ge=new D.C;var Ue,qe=i(64768),Fe=i(90834),We=i(82301),$e=i(13561),Ye=i(49959),Be=i(15492);function Xe(e,t,i){const{constraint:n,elevationAlignedStartPoint:a,elevationAlignedEndPoint:s,unconstrainedGeometry:o,view:r}=i,{dimension:l,previousConstraint:c,preConstraintProperties:d}=e;if(null==a||null==s)return;const u=()=>{"startPoint"in t?l.startPoint=t.startPoint:"endPoint"in t&&(l.endPoint=t.endPoint)};if(null==n)u(),null!=c&&null!=d&&(l.measureType=d.measureType,l.orientation=d.orientation);else switch(l.measureType=h.L.Direct,n){case Ue.Horizontal:if(n!==c&&(l.orientation=0),"startPoint"in t){const e=t.startPoint;null!=e&&(e.z=s.z),l.startPoint=e}else if("endPoint"in t){const e=t.endPoint;null!=e&&(e.z=a.z),l.endPoint=e}break;case Ue.Vertical:if(n!==c&&(l.orientation=Oe(o,r)),"startPoint"in t){const e=t.startPoint;null!=e&&(e.x=s.x,e.y=s.y),l.startPoint=e}else if("endPoint"in t){const e=t.endPoint;null!=e&&(e.x=a.x,e.y=a.y),l.endPoint=e}break;case Ue.Direct:n!==c&&null!=d&&(l.orientation=d.orientation),u()}e.previousConstraint=n,e.unconstrainedGeometry=o}!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Direct=2]="Direct"}(Ue||(Ue={}));var Qe=i(41445),Je=i(6025),Ke=i(20561),et=i(65626),tt=i(79678),it=i(50337),nt=i(77626),at=i(30124),st=i(68263),ot=i(17528),rt=i(12837),lt=i(27845),ct=i(37229);let dt=class extends s.default{constructor(e){super(e),this._stagedDimension=null,this._computationManipulators=new Map,this._computationHandles=new Fe.default,this._orientationManipulatorTexture=null,this._updatingHandles=new Be.U,this._getSnappingContext=(0,$e.B)((e=>new st.e({elevationInfo:{mode:"absolute-height",offset:0},pointer:e,editGeometryOperations:new at.p(new nt.ZE("point",(0,it.BV)(!0,!1,this.view.spatialReference)),this.view.state.viewingMode),visualizer:new Je.s})));const{view:t}=e;this._snappingManagerResult=(0,rt.X)(t),this.addHandles(this._snappingManagerResult),this._unfocusedOffsetManipulatorMaterial=this._createOffsetManipulatorMaterial(),this._focusedOffsetManipulatorMaterial=this._createOffsetManipulatorMaterial(),this._thinOffsetManipulatorMaterial=this._createOffsetManipulatorMaterial(),this._thinOffsetManipulatorMaterial.setParameters({stipplePattern:(0,tt.wk)(2)}),this._constraintSnappingIndicator=new Ke.t({view:t,attached:!0,width:1,renderOccluded:me.m$.OccludeAndTransparent,stipplePattern:(0,tt.wk)(5),isDecoration:!0});const i=J.default.toUnitRGBA(se);this._stagedStartIndicator=new et.I({view:t,attached:!1,elevationInfo:{mode:"absolute-height",offset:0},spatialReference:e.view.renderCoordsHelper.spatialReference,color:i,size:10,outlineSize:0,renderOccluded:me.m$.OccludeAndTransparent,isDecoration:!0})}initialize(){const{view:e}=this;this._snappingOperation=new lt.O({view:e});const t=!e._stage?.renderView.renderingContext.driverTest.svgPremultipliesAlpha.result;this._orientationManipulatorMaterial=new fe.r({writeDepth:!1,renderOccluded:me.m$.Opaque,isDecoration:!0}),this.addHandles((0,c.watch)((()=>{return{accentColor:ae(e.effectiveTheme),contrastColor:(t=e.effectiveTheme,(0,ne.bJ)(t.accentColor))};var t}),(i=>{let{accentColor:n,contrastColor:a}=i;const s=this._orientationManipulatorTexture,o=(0,Qe.t)(e.textures,{accentColor:n,contrastColor:a,preMultiplyAlpha:t});this._orientationManipulatorMaterial.setParameters({textureId:o.texture.id}),this._orientationManipulatorTexture=o,s?.release();const r=J.default.toUnitRGBA(n);this._unfocusedOffsetManipulatorMaterial.setParameters({color:r}),this._focusedOffsetManipulatorMaterial.setParameters({color:r}),this._thinOffsetManipulatorMaterial.setParameters({color:r}),this._constraintSnappingIndicator.color=r}),c.initial));const i=(0,c.mapCollection)((()=>this.analysisViewData.computations),(e=>{let{computation:t}=e;return this._createManipulators(t)}));this.addHandles((0,o.DQ)(i)),this.addHandles([(0,c.watch)((()=>({stagedPoint:this._snappingOperation.stagedPoint,stagedComputation:this._stagedComputation})),(e=>{let{stagedPoint:t,stagedComputation:i}=e;if(null==i||null==t)return;const n=(0,C.EL)(t,new Q.default);this._applyPointUpdate(i,{endPoint:n})}),c.sync),(0,c.watch)((()=>({stagedDimension:this._stagedDimension,selectedComputation:this.analysisViewData.selectedComputation,firstGrabbedManipulator:this.firstGrabbedManipulator})),((e,t)=>{const{stagedDimension:i,selectedComputation:n,firstGrabbedManipulator:a}=e;if(i===t?.stagedDimension&&a===t?.firstGrabbedManipulator){for(const s of[n,t?.selectedComputation])if(null!=s){const t=this._computationManipulators.get(s);null!=t&&this._updateManipulators(s,t,e)}}else for(const[s,o]of this._computationManipulators)this._updateManipulators(s,o,e)}),c.syncAndInitial),(0,c.watch)((()=>this.analysis.style.lineSize),(e=>{this._updateManipulatorStyle(e)}),c.initial),(0,c.watch)((()=>this.view.state.camera),(()=>{null!=this._stagedComputation&&this._updateStagedDimensionOffset(this._stagedComputation)})),(0,c.watch)((()=>{const e=this._stagedComputation;if(!e)return null;const t=e.elevationAlignedStartPoint,i=(0,S.vt)();return null!=t&&this.view.renderCoordsHelper.toRenderCoords(t,i)?i:null}),(e=>{null!=e?(this._stagedStartIndicator.vertices=[e],this._stagedStartIndicator.attached=!0):this._stagedStartIndicator.attached=!1}))]),this.addHandles(this._constraintHandles),this.addHandles(this._snappingIndicatorHandles),(0,ct.BY)(this,(()=>{const e=this._activeComputation,t=this._stagedComputation;if(null==e||null!=t){const e=this.view.inputManager.latestPointerType??"mouse",t=this._getSnappingContext(e);this._updatingHandles.addPromise((0,Ye.ignoreAbortErrors)(this._snappingOperation.snapAgainNearPreviousMapPoint(this._snappingManager,t)))}if(null!=e){const{start:t,end:i}=this._computationManipulators.get(e);if(t.grabbing||i.grabbing){!function(e,t,i){let{constraint:n,view:a}=i;const{unconstrainedGeometry:s}=e;if(null==s)return;const{renderCoordsHelper:o,spatialReference:r}=a,{startRenderSpace:l,endRenderSpace:c}=s.directSegment,d=o.fromRenderCoords(l,new Q.default({spatialReference:r})),u=o.fromRenderCoords(c,new Q.default({spatialReference:r}));let p;p="start"===t?{startPoint:d}:{endPoint:u},Xe(e,p,{constraint:n,elevationAlignedStartPoint:e.elevationAlignedStartPoint,elevationAlignedEndPoint:e.elevationAlignedEndPoint,unconstrainedGeometry:s,view:a})}(e,t.grabbing?"start":"end",{constraint:this._computeConstraint(e),view:this.view})}}}))}destroy(){this._snappingOperation=(0,l.pR)(this._snappingOperation),this._computationHandles.destroy(),this._constraintSnappingIndicator.destroy(),this._stagedStartIndicator.destroy(),this._orientationManipulatorTexture?.release()}get updating(){return this._updatingHandles.updating||this._snappingManager.updating}get firstGrabbedManipulator(){return this.parentTool.firstGrabbedManipulator}get hasGrabbedManipulators(){return this.parentTool.hasGrabbedManipulators}get snappingOptions(){return this._snappingManager.options}get _snappingManager(){return this._snappingManagerResult.snappingManager}get _activeComputation(){if(null!=this._stagedComputation)return this._stagedComputation;const{selectedComputation:e}=this.analysisViewData;return this.hasGrabbedManipulators&&null!=e?e:null}get _stagedComputation(){const e=this._stagedDimension,t=this.analysisViewData.computations.at(-1)?.computation;return null==e||null==t||t.dimension!==e?null:t}get _constraintHandles(){return[(0,c.when)((()=>this.analysisViewData.selectedComputation),(e=>{e.previousConstraint=this._computeConstraint(e)}),{...c.syncAndInitial,equals:We.equals}),(0,c.watch)((()=>{const e=this._activeComputation;if(null==e)return null;const{measureType:t,orientation:i}=e.dimension;return{measureType:t,orientation:i,computation:e}}),((e,t)=>{if(null!=e&&null==t){const{measureType:t,orientation:i,computation:n}=e;switch(n.previousConstraint){case Ue.Horizontal:n.preConstraintProperties={measureType:h.L.Horizontal,orientation:0};break;case Ue.Vertical:n.preConstraintProperties={measureType:h.L.Vertical,orientation:0};break;case Ue.Direct:n.preConstraintProperties={measureType:h.L.Direct,orientation:i};break;default:n.preConstraintProperties={measureType:t,orientation:i}}}null==e&&null!=t&&(t.computation.preConstraintProperties=null)}),c.sync)]}get _snappingIndicatorHandles(){const e="snapping-indicator-event-handles";return[(0,c.watch)((()=>({stagedComputation:this._stagedComputation,activeComputation:this._activeComputation})),(t=>{let{stagedComputation:i,activeComputation:n}=t;const a=this._constraintSnappingIndicator;if(this.removeHandles(e),null!=n)if(n===i)a.attached=!0;else{const{start:t,end:i}=this._computationManipulators.get(n),s=()=>{a.attached=t.grabbing||i.grabbing};s(),this.addHandles([t.events.on("grab-changed",s),i.events.on("grab-changed",s)],e)}else a.attached=!1})),(0,c.watch)((()=>{const e=this._activeComputation;return null!=e?{geometry:e.geometry,constraint:e.previousConstraint}:{}}),(e=>{let{geometry:t,constraint:i}=e;const n=this._constraintSnappingIndicator;null!=t&&null!=i&&i!==Ue.Direct?(n.visible=!0,n.setGeometryFromSegment(t.directSegment)):n.visible=!1}))]}removeStaged(){return null!=this._stagedDimension&&(this.analysis.dimensions.remove(this._stagedDimension),this._stagedDimension=null,!0)}onDeactivate(){this.removeStaged(),this._resetSnappingState()}onClick(e){const{_stagedDimension:t}=this;if(null==t){const t=this._onUnstagedClick(e);return this.analysis.dimensions.add(t),null}return this._onStagedClick(e),t}onPointerMove(e){let{mapPoint:t,pointerType:i}=e;if("touch"===i)return;const n=this._getSnappingContext(i);this._updatingHandles.addPromise((0,Ye.ignoreAbortErrors)(this._snappingOperation.snap({point:t},this._snappingManager,n)))}onManipulatorSelectionChanged(){null!=this.analysisViewData.selectedComputation&&(this._computationManipulators.get(this.analysisViewData.selectedComputation).offset.selected||(this.analysisViewData.selectedDimension=null))}_onUnstagedClick(e){let{mapPoint:t,pointerType:i}=e,n=t;if("mouse"===i){const e=this._getSnappingContext(i);n=this._snappingManager.update({point:t,context:e})}const a=new qe.default({startPoint:(0,C.EL)(n,new Q.default),endPoint:null,measureType:h.L.Horizontal});return this._stagedDimension=a,this._resetSnappingState(),a}_onStagedClick(e){let{mapPoint:t,pointerType:i}=e;const n=this._stagedComputation;if(null==n)return;let a=t;if("mouse"===i){const e=this._getSnappingContext(i);a=this._snappingManager.update({point:t,context:e})}const s=(0,C.EL)(a,new Q.default);this._applyPointUpdate(n,{endPoint:s}),this._stagedDimension=null,this._resetSnappingState()}_resetSnappingState(){this._snappingManager.doneSnapping(),this._snappingOperation.abort(),this._snappingOperation.stagedPoint=null}_createManipulators(e){const t=this._setupPointManipulator(e,{isStart:!0}),i=this._setupPointManipulator(e,{isStart:!1}),n=this._setupOffsetManipulator(e),a=this._setupHeadingManipulator(e),s=this._setupRotationManipulator(e),o=this._setupMeasureTypeManipulator(e,h.L.Direct),r=this._setupMeasureTypeManipulator(e,h.L.Horizontal),l=this._setupMeasureTypeManipulator(e,h.L.Vertical),c=new Me({start:t,end:i,offset:n,heading:a,rotation:s,direct:o,horizontal:r,vertical:l});return this._setupComputationToManipulatorsSync(e,c),this._computationManipulators.set(e,c),this.manipulators.addMany(c.values()),{manipulators:c,remove:()=>{this._computationHandles.remove(e),this._computationManipulators.delete(e);for(const e of c.values())this.manipulators.remove(e)}}}_setupComputationToManipulatorsSync(e,t){this._computationHandles.add([(0,c.watch)((()=>e.geometry),(()=>this._updateManipulators(e,t)),{...c.syncAndInitial,equals:We.equals})],e)}_setupPointManipulator(e,t){const{view:i}=this,{dimension:n}=e,a=new Se(i,{metadata:n}),s=function(e,t){let{isStart:i,createSnappingPipelineStep:n,dimension:a,onUpdate:s,view:o}=t;const r=i?"startPoint":"endPoint",l=(0,_e.Xt)(e,((e,t,i,l)=>{const c=(0,ce.z7)(e),{snappingStep:d,cancelSnapping:u}=n(l);i=i.next(c).next((0,_e.VG)(a,[r,"measureType","orientation"])).next(u),t.next(c).next((0,ce.xk)(o)).next(...d).next((e=>{const t=(0,C.EL)(e.mapEnd,new Q.default);s("startPoint"===r?{startPoint:t}:{endPoint:t})}))}));return[l]}(a,{isStart:t.isStart,createSnappingPipelineStep:e=>(0,ot.L)({snappingContext:this._getSnappingContext(e),snappingManager:this._snappingManager,updatingHandles:this._updatingHandles}),dimension:n,onUpdate:t=>this._applyPointUpdate(e,t),view:i});return this._computationHandles.add(s,e),a}_setupOffsetManipulator(e){const{view:t}=this,i=function(e,t){const i=[(0,S.fA)(-.5,0,0),(0,S.fA)(.5,0,0)],n=(0,he.Z8)(t.unfocusedMaterial,i.map((e=>(0,M.h)((0,S.vt)(),e,.5)))),a=n.instantiate({material:t.focusedMaterial});return new oe.q({view:e,renderObjects:[new le.M(n,ye.p7.Unfocused|ye.p7.Selected|Ee),new le.M(a,ye.p7.Focused|Ee)],collisionType:{type:"line",paths:[i]},radius:Ne(t.lineSizePt)/2,metadata:t.metadata,available:!1,...re.MO})}(t,{lineSizePt:this.analysis.style.lineSize,unfocusedMaterial:this._unfocusedOffsetManipulatorMaterial,focusedMaterial:this._focusedOffsetManipulatorMaterial,metadata:e.dimension}),n=function(e,t){let{computation:i,view:n}=t;return[(0,_e.Xt)(e,((e,t,a)=>{if(!Y(i)||!e.selected)return;const{geometry:s,dimension:o}=i,r=(0,ce.z7)(e);t.next(r).next(Te(n,o,s.dimensionSegment,s.primaryOffsetAxis)),a.next(r).next((0,_e.VG)(o,["offset"]))}))]}(i,{computation:e,view:t});return this._computationHandles.add(n,e),i}_setupHeadingManipulator(e){const{view:t}=this,i=new we(t,{lineSizePt:this.analysis.style.lineSize,material:this._orientationManipulatorMaterial,metadata:e.dimension}),n=function(e,t){let{computation:i,view:n}=t;return[(0,_e.Xt)(e,((e,t,a)=>{Ce({cancel:a,computation:i,settingHeading:!0,steps:t,view:n})}))]}(i,{computation:e,view:t});return this._computationHandles.add(n,e),i}_setupRotationManipulator(e){const{view:t}=this,i=new we(t,{lineSizePt:this.analysis.style.lineSize,material:this._orientationManipulatorMaterial,metadata:e.dimension}),n=be(i,{computation:e,view:t});return this._computationHandles.add(n,e),i}_setupMeasureTypeManipulator(e,t){const{view:i}=this,n=function(e,t){const i=[(0,S.fA)(-.5,0,0),(0,S.fA)(.5,0,0)],n=(0,he.Z8)(t.thinOffsetManipulatorMaterial,i),a=(0,he.Z8)(t.unfocusedMaterial,i.map((e=>(0,M.h)((0,S.vt)(),e,.5)))),s=a.instantiate({material:t.focusedMaterial});return new oe.q({view:e,renderObjects:[new le.M(a,ye.p7.Unfocused|Ee),new le.M(s,ye.p7.Focused|Ee),new le.M(n,Ee)],collisionType:{type:"line",paths:[i]},radius:Ne(t.lineSizePt)/2,available:!1,metadata:t.metadata,...re.MO})}(i,{lineSizePt:this.analysis.style.lineSize,unfocusedMaterial:this._unfocusedOffsetManipulatorMaterial,focusedMaterial:this._focusedOffsetManipulatorMaterial,thinOffsetManipulatorMaterial:this._thinOffsetManipulatorMaterial,metadata:e.dimension}),a=De(n,{computation:e,manipulatorMeasureType:t,view:i});return this._computationHandles.add(a,e),n}_updateManipulators(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{stagedDimension:this._stagedDimension,selectedComputation:this.analysisViewData.selectedComputation,firstGrabbedManipulator:this.firstGrabbedManipulator};const{stagedDimension:n,selectedComputation:a,firstGrabbedManipulator:s}=i,{start:o,end:r,offset:l,heading:c,rotation:d}=t,u=a===e,p=Y(e),{dimension:m}=e;for(const h of t.values()){const e=p&&null==n&&(null==s||h===s);h===l?(h.available=e,h.selected=u):h.available=e&&u}if(!p)return;null!=this._computeConstraint(e)?t.forEachMeasureTypeManipulator((e=>e.available=!1)):t.manipulatorForMeasureType(m.measureType).available=!1;for(const v of[c,d])m.measureType===h.L.Direct&&0!==m.offset||(v.available=!1);j(e)?d.available=!1:c.available=!1;const{geometry:g}=e;o.renderLocation=g.directSegment.startRenderSpace,r.renderLocation=g.directSegment.endRenderSpace;const{renderCoordsHelper:f}=this.view;(function(e,t,i){const{dimensionSegment:n,primaryOffsetAxis:a}=t,s=q(ke,t),o=(0,M.p)(s,S.uY)?(0,_.D_)(Ve):(0,re.wQ)(s,a,S.uY,Ve),r=Math.max((0,M.l)(s),.1/i.unitInMeters);(0,_.hs)(o,o,(0,M.i)(ke,r,r,r)),e.modelTransform=o,e.renderLocation=n.eval(.5,ke)})(l,g,f),c.available&&function(e,t,i){xe(e,t,i,{forHeading:!0})}(c,e,f),d.available&&function(e,t,i){xe(e,t,i,{forHeading:!1})}(d,e,f),t.forEachMeasureTypeManipulator(((t,i)=>{t.available&&function(e,t,i,n){const{geometry:a}=t,s=R(Ge,i,t,n),o=E(ke,{measureType:i,directSegment:a.directSegment,renderCoordsHelper:n}),r=(0,M.a)(je,s.endRenderSpace,s.startRenderSpace),l=(0,re.wQ)(r,o,S.uY,Ve),c=(0,M.l)(r);(0,_.hs)(l,l,(0,M.i)(je,c,c,c)),e.modelTransform=l,e.renderLocation=s.eval(.5,je)}(t,e,i,f)}))}_updateManipulatorStyle(e){const t=function(e){return(0,ee.Lz)(e)+4}(e),i=Ne(e),n={lineSizePt:e,material:this._orientationManipulatorMaterial};for(const{offset:a,heading:s,rotation:o}of this._computationManipulators.values())a.radius=i/2,s.update(n),o.update(n);this._unfocusedOffsetManipulatorMaterial.setParameters({width:t}),this._focusedOffsetManipulatorMaterial.setParameters({width:i})}_applyPointUpdate(e,t){const{view:i}=this,n=I(e);"startPoint"in t&&(n.elevationAlignedStartPoint=t.startPoint),"endPoint"in t&&(n.elevationAlignedEndPoint=t.endPoint);const a=L(n,i.renderCoordsHelper);if(null==a)return;const s=this._computeConstraint({...n,geometry:a});Xe(e,t,{...n,constraint:s,unconstrainedGeometry:a,view:i}),e===this._stagedComputation&&this._updateStagedDimensionOffset(e)}_updateStagedDimensionOffset(e){if(null==e.geometry)return;e.geometry.directSegment.eval(.5,ut);const{state:t,renderCoordsHelper:i}=this.view,n=t.camera.computeScreenPixelSizeAt(ut);e.dimension.offset=50*n*i.unitInMeters}_computeConstraint(e){return function(e,t){if($(e))return Ue.Direct;if(!e.enabled)return null;const{geometry:i}=e;if(null==i||(0,M.p)(i.directSegment.startRenderSpace,i.directSegment.endRenderSpace))return null;const{camera:n}=t.state,a=G(P.rq.get(),i,t.renderCoordsHelper),s=U(P.rq.get(),i),o=(0,M.h)(P.rq.get(),a,(0,M.f)(s,a)),r=(0,M.d)(P.rq.get(),s,o),l=(0,M.k)(r),c=(0,M.k)(o),{startRenderSpace:d,endRenderSpace:u}=i.directSegment,p=Math.max(10*n.computeScreenPixelSizeAt(d),10*n.computeScreenPixelSizeAt(u))**2;return l<p?Ue.Vertical:c<p?Ue.Horizontal:null}(function(e,t){return{enabled:t.effectiveFeatureEnabled,elevationAlignedStartPoint:e.elevationAlignedStartPoint,elevationAlignedEndPoint:e.elevationAlignedEndPoint,geometry:e.geometry}}(e,this._snappingManager.options),this.view)}_createOffsetManipulatorMaterial(){return new ve.W({width:1,renderOccluded:me.m$.OccludeAndTransparent,writeDepth:!1,hasPolygonOffset:!0,isDecoration:!0})}get testInfo(){}};(0,a._)([(0,d.MZ)({constructOnly:!0})],dt.prototype,"analysis",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0})],dt.prototype,"analysisViewData",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0})],dt.prototype,"manipulators",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0})],dt.prototype,"parentTool",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0,nonNullable:!0})],dt.prototype,"view",void 0),(0,a._)([(0,d.MZ)({readOnly:!0})],dt.prototype,"updating",null),(0,a._)([(0,d.MZ)()],dt.prototype,"firstGrabbedManipulator",null),(0,a._)([(0,d.MZ)()],dt.prototype,"hasGrabbedManipulators",null),(0,a._)([(0,d.MZ)()],dt.prototype,"snappingOptions",null),(0,a._)([(0,d.MZ)()],dt.prototype,"_stagedDimension",void 0),(0,a._)([(0,d.MZ)()],dt.prototype,"_activeComputation",null),(0,a._)([(0,d.MZ)()],dt.prototype,"_stagedComputation",null),dt=(0,a._)([(0,u.$)("esri.views.3d.analysis.Dimension.LengthDimensionSubTool")],dt);const ut=(0,S.vt)();var pt,ht=i(54382),mt=i(4542),gt=i(95441),ft=i(53605);!function(e){e.Ready="ready",e.Creating="creating",e.Created="created"}(pt||(pt={}));let vt=class extends ht.k{constructor(e){super(e),this.automaticManipulatorSelection=!1,this.removeIncompleteOnCancel=!1,this._pointerMoveTimerMs=2500,this._prevPointerMoveTimeout=null}initialize(){this._intersector=(0,gt.T)(this.view.state.viewingMode),this._lengthDimensionSubTool=new dt({analysis:this.analysis,analysisViewData:this.analysisViewData,manipulators:this.manipulators,parentTool:this,view:this.view}),this.addHandles([(0,o.DQ)(this._lengthDimensionSubTool),(0,o.hA)((()=>this._clearPointerMoveTimeout())),(0,c.watch)((()=>this.state),(e=>{e===pt.Created&&this.finishToolCreation()}),c.syncAndInitial),(0,c.when)((()=>this.firstGrabbedManipulator),(e=>{this.selectedDimension=e.metadata}),c.syncAndInitial),(0,c.watch)((()=>this.selectedDimension),(()=>this._resetPointerMoveTimeout()),c.syncAndInitial)])}get state(){return this.analysis.dimensions.some((e=>"length"===e.type))?null!=this._activeSubTool?pt.Creating:pt.Created:pt.Ready}get updating(){return this._lengthDimensionSubTool.updating}get cursor(){return this.active?"crosshair":null}get selectedDimension(){return this.analysisViewData.selectedDimension}set selectedDimension(e){this.analysisViewData.selectedDimension=e}onInputEvent(e){switch(e.type){case"immediate-click":this._clickHandler(e);break;case"immediate-double-click":this._doubleClickHandler(e);break;case"pointer-move":this._pointerMoveHandler(e);break;case"key-down":if(mt.NE.cancel===e.key){if(null!=this._activeSubTool&&this._activeSubTool.removeStaged())return void e.stopPropagation();this.active||(this.selectedDimension=null)}else mt.NE.delete.includes(e.key)&&this._deleteKeyHandler()}}onActivate(){this._activeSubTool=this._lengthDimensionSubTool}onDeactivate(){null!=this._activeSubTool&&(this._activeSubTool.onDeactivate(),this._activeSubTool=null)}onShow(){this._resetPointerMoveTimeout()}onManipulatorSelectionChanged(){this._lengthDimensionSubTool.onManipulatorSelectionChanged()}onHide(){this.selectedDimension=null}_clickHandler(e){if(this.hasFocusedManipulators)return void e.stopPropagation();if(null==this._activeSubTool)return;const t=this._intersectScreen(e);null!=t&&(this.selectedDimension=this._activeSubTool.onClick({mapPoint:t,pointerType:e.pointerType}),e.stopPropagation())}_doubleClickHandler(e){this.active&&(this.view.activeTool=null,e.stopPropagation())}_pointerMoveHandler(e){if(this._resetPointerMoveTimeout(),null==this._activeSubTool)return;if(this.hasFocusedManipulators)return;const t=this._intersectScreen(e);null!=t&&this._activeSubTool.onPointerMove({mapPoint:t,pointerType:e.pointerType})}_deleteKeyHandler(){null!=this._activeSubTool&&this._activeSubTool.removeStaged(),this._removeSelected()}_intersectScreen(e){const t=(0,ft.sC)(e);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(t,this._intersector);const i=this._intersector.results.min,n=P.rq.get();return i.getIntersectionPoint(n)?this.view.renderCoordsHelper.fromRenderCoords(n,new Q.default({spatialReference:this.view.spatialReference})):null}_removeSelected(){null!=this.selectedDimension&&(this.analysis.dimensions.remove(this.selectedDimension),this.selectedDimension=null)}_clearPointerMoveTimeout(){this._prevPointerMoveTimeout=(0,l.xt)(this._prevPointerMoveTimeout)}_resetPointerMoveTimeout(){this._clearPointerMoveTimeout(),this.manipulators.forEach((e=>e.manipulator.state|=Ee)),this._prevPointerMoveTimeout=X.p.setTimeout((()=>{this.manipulators.forEach((e=>e.manipulator.state&=~Ee))}),this._pointerMoveTimerMs)}get testInfo(){}};(0,a._)([(0,d.MZ)({constructOnly:!0})],vt.prototype,"view",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0})],vt.prototype,"analysis",void 0),(0,a._)([(0,d.MZ)({readOnly:!0})],vt.prototype,"state",null),(0,a._)([(0,d.MZ)({readOnly:!0})],vt.prototype,"updating",null),(0,a._)([(0,d.MZ)({readOnly:!0})],vt.prototype,"cursor",null),(0,a._)([(0,d.MZ)({constructOnly:!0})],vt.prototype,"analysisViewData",void 0),(0,a._)([(0,d.MZ)()],vt.prototype,"selectedDimension",null),(0,a._)([(0,d.MZ)()],vt.prototype,"automaticManipulatorSelection",void 0),(0,a._)([(0,d.MZ)()],vt.prototype,"_activeSubTool",void 0),(0,a._)([(0,d.MZ)()],vt.prototype,"_lengthDimensionSubTool",void 0),vt=(0,a._)([(0,u.$)("esri.views.3d.analysis.Dimension.DimensionTool")],vt);i(88677);var _t=i(1278),yt=i(82321),Mt=i(1021),St=i(75075),wt=i(72530),Pt=i(6961);class bt extends St.X{constructor(e,t){super(e),this._hasExternalMaterial=!1,this._renderOccluded=me.m$.OccludeAndTransparent,this._width=1,this._color=(0,Mt.fA)(1,0,1,1),this._placement="end",this._markerPrimitive="arrow",this._material=t,this._hasExternalMaterial=null!=t,this.applyProperties(e)}setGeometryFromSegment(e,t){const i=e.endRenderSpace;this.transform=(0,_.kN)(Ct,i),this._normal=t;const{points:n}=e.createRenderGeometry(i,this.view.renderCoordsHelper);this.geometry=[n]}get renderOccluded(){return null!=this._material?this._material.parameters.renderOccluded:this._renderOccluded}set renderOccluded(e){this._renderOccluded=e,null!=this._material&&this._material.setParameters({renderOccluded:e})}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get normal(){return this._normal}set normal(e){this._normal=e,this.recreateGeometry()}get width(){return null!=this._material?this._material.parameters.width:this._width}set width(e){this._width=e,null!=this._material&&this._material.setParameters({width:e})}get color(){return null!=this._material?this._material.parameters.color:this._color}set color(e){this._color=(0,Mt.o8)(e),null!=this._material&&this._material.setParameters({color:this._color})}get placement(){return null!=this._material?this._material.parameters.placement:this._placement}set placement(e){this._placement=e,null!=this._material&&this._material.setParameters({placement:this._placement})}get markerPrimitive(){return this._material?.parameters.markerPrimitive??this._markerPrimitive}set markerPrimitive(e){this._markerPrimitive=e,null!=this._material&&this._material.setParameters({markerPrimitive:e})}createExternalResources(){this._hasExternalMaterial||(this._material=new Pt.i({width:this._width,color:this._color,placement:this._placement,renderOccluded:this._renderOccluded,markerPrimitive:this._markerPrimitive,isDecoration:this.isDecoration}))}destroyExternalResources(){this._hasExternalMaterial||(this._material=null)}createGeometries(e){for(const t of(0,wt.z)(this.geometry,this.normal)){const i=(0,wt.t)(this._material,t);e.addGeometry(i)}}forEachExternalMaterial(e){this._hasExternalMaterial||e(this._material)}}const Ct=(0,y.vt)();class Dt{set visible(e){for(const t of this._visualElements.values())t.attached=e}constructor(e){this.destroyed=!1,this._handles=new Fe.default,this._messages=null,this._labelSegment=new D.C;const{analysis:t,computation:i,view:n,messages:a,isDecoration:s}=e;this.analysis=t,this.computation=i,this.view=n,this._messages=a;const o=e.visible,r={view:n,attached:o,isDecoration:s},{fontSize:l,textColor:d,textBackgroundColor:u}=t.style;this._visualElements=new At({marker:new bt(r,e.markerMaterial),dimension:new Ke.t(r,e.dimensionLineMaterial),startOffset:new Ke.t(r,e.offsetLineMaterial),endOffset:new Ke.t(r,e.offsetLineMaterial),dimensionSmall:new Ke.t(r,e.smallDimensionLineMaterial),startOffsetSmall:new Ke.t(r,e.smallOffsetLineMaterial),endOffsetSmall:new Ke.t(r,e.smallOffsetLineMaterial),label:new yt.N({view:n,attached:o,distance:0,geometry:{type:"segment",sampleLocation:"center",segment:this._labelSegment,callout:!1},fontSize:(0,ee.Lz)(l),textColor:d.clone(),backgroundColor:u.clone(),isDecoration:s})}),this._handles.add([(0,c.watch)((()=>i.geometry),(e=>{this.updateCameraDependentElements(n.state.camera,e,t.style),null!=i.geometry&&this._updateLines(i.geometry)}),{...c.initial,equals:We.equals}),(0,c.watch)((()=>i.length),(e=>this._updateLabelContent(e)),c.initial)])}destroy(){this.destroyed=!0,this._handles=(0,l.pR)(this._handles);for(const e of this._visualElements.values())e.destroy()}get testInfo(){}_updateLines(e){const t=z(Tt,n.Start,e.directSegment,e.dimensionSegment),i=z(Ot,n.End,e.directSegment,e.dimensionSegment),a=this._visualElements;a.marker.setGeometryFromSegment(e.dimensionSegment,e.primaryOffsetAxis),a.dimension.setGeometryFromSegment(e.dimensionSegment),a.startOffset.setGeometryFromSegment(t),a.endOffset.setGeometryFromSegment(i),a.dimensionSmall.setGeometryFromSegment(e.dimensionSegment),a.startOffsetSmall.setGeometryFromSegment(t),a.endOffsetSmall.setGeometryFromSegment(i)}updateCameraDependentElements(e,t,i){const n=this._visualElements;if(null==t){for(const e of n.values())e.visible=!1;return}const a=e.computeScreenPixelSizeAt(t.dimensionSegment.eval(.5,xt)),s=function(e,t){return(0,M.k)(q(W,e))/t**2}(t,a),o=s<(2*(0,ee.Lz)(i.lineSize))**2,r=!o;n.marker.visible=r,n.dimension.visible=r,n.startOffset.visible=r,n.endOffset.visible=r,n.dimensionSmall.visible=o,n.startOffsetSmall.visible=o,n.endOffsetSmall.visible=o;const l=5*(0,ee.Lz)(i.fontSize),{label:c}=n;if(c.visible=s>=l**2,!c.visible)return;const{dimensionSegment:d,primaryOffsetAxis:u}=t,{offset:p}=this.computation.dimension,h=(Math.sign(p)>=0?1:-1)*function(e){return 1.5*(0,ee.Lz)(e.fontSize)+20+(0,ee.Lz)(e.lineSize/2)}(i)*a;(function(e,t,i,n){(0,M.b)(e.startRenderSpace,t.startRenderSpace,i,n),(0,M.b)(e.endRenderSpace,t.endRenderSpace,i,n)})(this._labelSegment,d,u,h),c.updateLabelPosition()}updateLabelStyle(e){const{label:t}=this._visualElements;t.fontSize=(0,ee.Lz)(e.fontSize),t.textColor=e.textColor,t.backgroundColor=e.textBackgroundColor}updateUnitsMessages(e){this._messages=e;const{length:t}=this.computation;this._updateLabelContent(t)}_updateLabelContent(e){const{label:t}=this._visualElements;null!=e&&null!=this._messages?t.text=(0,_t.zJ)(this._messages,e,e.unit):t.text=""}}const Tt=new D.C,Ot=new D.C,xt=(0,S.vt)();class At{constructor(e){this.marker=e.marker,this.dimension=e.dimension,this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.dimensionSmall=e.dimensionSmall,this.startOffsetSmall=e.startOffsetSmall,this.endOffsetSmall=e.endOffsetSmall,this.label=e.label}values(){return[this.marker,this.dimension,this.startOffset,this.endOffset,this.dimensionSmall,this.startOffsetSmall,this.endOffsetSmall,this.label]}}var It=i(93570),Lt=i(12711),zt=i(53957);let Rt=class extends s.default{get analysis(){return this.analysisViewData.analysis}get visible(){return this.analysisViewData.visible}constructor(e){super(e),this.loadingMessages=!1,this._messages=null}initialize(){const e=this.isDecoration;this._markerMaterial=new Pt.i({width:1,anchor:It.kJ.Tip,color:te.uY,placement:"begin-end",worldSpace:!0,hideOnShortSegments:!0,hasTip:!0,renderOccluded:me.m$.OccludeAndTransparent,markerPrimitive:"triangle",isDecoration:e}),this._dimensionLineMaterial=new ve.W({width:1,color:te.uY,renderOccluded:me.m$.OccludeAndTransparent,markerParameters:this._markerMaterial.parameters,isDecoration:e}),this._offsetLineMaterial=new ve.W({width:1,color:te.uY,renderOccluded:me.m$.OccludeAndTransparent,stipplePattern:(0,tt.wk)(5),isDecoration:e}),this._smallDimensionLineMaterial=new ve.W({width:1,color:te.uY,renderOccluded:me.m$.OccludeAndTransparent,isDecoration:e}),this._smallOffsetLineMaterial=new ve.W({width:1,color:te.uY,renderOccluded:me.m$.OccludeAndTransparent,stipplePattern:(0,tt.wk)(5),isDecoration:e});for(const i of this._lineMaterials())this.view._stage.add(i),this.addHandles((0,o.hA)((()=>{this.view._stage?.remove(i)})));const t=(0,c.mapCollection)((()=>this.analysisViewData.computations),(e=>{let{computation:t}=e;return this._createVisualization(t)}));this._dimensionVisualizations=t,this.addHandles([(0,o.DQ)(t),(0,c.watch)((()=>J.default.toUnitRGBA(this.analysis.style.color)),(e=>{for(const t of this._lineMaterials())t.setParameters({color:e})}),c.syncAndInitial),(0,c.watch)((()=>this.analysis.style.lineSize),(e=>{const t=(0,ee.Lz)(e);this._markerMaterial.setParameters({width:.8*t}),this._dimensionLineMaterial.setParameters({width:t,markerParameters:this._markerMaterial.parameters});const i=Math.max(.25*t,1);this._offsetLineMaterial.setParameters({width:i})}),c.syncAndInitial),(0,c.watch)((()=>({camera:this.view.state.camera,style:Ht(this.analysis)})),(e=>{let{camera:t,style:i}=e;for(const{visualization:n}of this._dimensionVisualizations)n.updateCameraDependentElements(t,n.computation.geometry,i),n.updateLabelStyle(i)})),(0,c.watch)((()=>this.visible),(e=>{for(const{visualization:t}of this._dimensionVisualizations)t.visible=e}))]),this.addHandles([(0,Lt.oQ)((()=>this._updateMessageBundle())),(0,c.when)((()=>!this.loadingMessages),(()=>{for(const{visualization:e}of this._dimensionVisualizations)e.updateUnitsMessages(this._messages)}),c.sync)]),this._updateMessageBundle()}get testInfo(){}_createVisualization(e){const t=new Dt({analysis:this.analysis,computation:e,view:this.view,visible:this.visible,markerMaterial:this._markerMaterial,dimensionLineMaterial:this._dimensionLineMaterial,offsetLineMaterial:this._offsetLineMaterial,smallDimensionLineMaterial:this._smallDimensionLineMaterial,smallOffsetLineMaterial:this._smallOffsetLineMaterial,messages:this._messages,isDecoration:this.isDecoration});return{visualization:t,remove:()=>t.destroy()}}_lineMaterials(){return[this._markerMaterial,this._dimensionLineMaterial,this._offsetLineMaterial,this._smallDimensionLineMaterial,this._smallOffsetLineMaterial]}async _updateMessageBundle(){this.loadingMessages=!0;try{this._messages=await(0,zt.ud)("esri/core/t9n/Units")}finally{this.loadingMessages=!1}}};function Ht(e){const{fontSize:t,lineSize:i,textColor:n,textBackgroundColor:a}=e.style;return{fontSize:t,lineSize:i,textBackgroundColor:a.clone(),textColor:n.clone()}}(0,a._)([(0,d.MZ)({constructOnly:!0})],Rt.prototype,"analysisViewData",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0,nonNullable:!0})],Rt.prototype,"view",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0})],Rt.prototype,"isDecoration",void 0),(0,a._)([(0,d.MZ)()],Rt.prototype,"analysis",null),(0,a._)([(0,d.MZ)()],Rt.prototype,"visible",null),(0,a._)([(0,d.MZ)()],Rt.prototype,"loadingMessages",void 0),Rt=(0,a._)([(0,u.$)("esri.views.3d.analysis.Dimension.DimensionVisualization")],Rt);var Nt=i(82734);let Zt=class extends s.default{constructor(e){super(e),this.geometry=null,this.unconstrainedGeometry=null,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null}normalizeCtorArgs(e){const{dimension:t,...i}=e;return{result:new Nt.default({dimension:t}),...i}}initialize(){this.addHandles([(0,c.watch)((()=>this.dimension.startPoint),(e=>this.elevationAlignedStartPoint=this.projectAndAlignPoint(e)),c.syncAndInitial),(0,c.watch)((()=>this.dimension.endPoint),(e=>this.elevationAlignedEndPoint=this.projectAndAlignPoint(e)),c.syncAndInitial)])}get dimension(){return this.result.dimension}get length(){return this.result.length}};(0,a._)([(0,d.MZ)({constructOnly:!0,nonNullable:!0})],Zt.prototype,"result",void 0),(0,a._)([(0,d.MZ)({constructOnly:!0,nonNullable:!0})],Zt.prototype,"projectAndAlignPoint",void 0),(0,a._)([(0,d.MZ)()],Zt.prototype,"dimension",null),(0,a._)([(0,d.MZ)()],Zt.prototype,"length",null),(0,a._)([(0,d.MZ)()],Zt.prototype,"geometry",void 0),(0,a._)([(0,d.MZ)()],Zt.prototype,"unconstrainedGeometry",void 0),(0,a._)([(0,d.MZ)()],Zt.prototype,"elevationAlignedStartPoint",void 0),(0,a._)([(0,d.MZ)()],Zt.prototype,"elevationAlignedEndPoint",void 0),(0,a._)([(0,d.MZ)()],Zt.prototype,"preConstraintProperties",void 0),(0,a._)([(0,d.MZ)()],Zt.prototype,"previousConstraint",void 0),Zt=(0,a._)([(0,u.$)("esri.views.3d.analysis.Dimension.LengthDimensionComputation")],Zt);var Et=i(66983),kt=i(34567),jt=i(8056);let Vt=class extends((0,jt.default)((0,p.P)(s.default))){constructor(e){super(e),this.type="dimension-view-3d",this.tool=null,this.selectedDimension=null,this._dimensionsToComputations=new Map,this._placementTask=null,this._projectAndAlignPoint=null}initialize(){this._projectAndAlignPoint=e=>{if(null==e)return null;const{spatialReference:t,elevationProvider:i}=this.view,n=(0,Et.B)(e,t,i);return null==n&&(0,Et.V)(this.analysis,e.spatialReference,r.A.getLogger(this)),n};const e=(0,c.mapCollection)((()=>this.analysis.dimensions),(e=>this._createComputation(e)));this.computations=e,this.addHandles([(0,kt.Hd)(this,vt),(0,o.DQ)(e)]),this._analysisVisualization=new Rt({analysisViewData:this,view:this.view,isDecoration:!this.parent}),this._analysisController=new B({analysisViewData:this,view:this.view})}destroy(){this._placementTask=(0,l.DC)(this._placementTask),this._analysisVisualization=(0,l.pR)(this._analysisVisualization),(0,kt.aS)(this)}get updating(){return this._analysisVisualization?.loadingMessages??!1}get results(){return this.analysis.dimensions.map((e=>this._dimensionsToComputations.get(e).result))}get selectedComputation(){const{selectedDimension:e}=this;return null==e?null:this._dimensionsToComputations.get(e)}get testInfo(){}async createLengthDimensions(e){return this.selectedDimension=null,this._placementTask=(0,l.DC)(this._placementTask),this._placementTask=(0,kt.JY)(this,e),this._placementTask.promise}_createComputation(e){const{_dimensionsToComputations:t}=this,i=new Zt({dimension:e,projectAndAlignPoint:this._projectAndAlignPoint});return t.set(e,i),{computation:i,remove:()=>this._removeComputation(i)}}_removeComputation(e){const{dimension:t}=e;t===this.selectedDimension&&(this.selectedDimension=null),this._dimensionsToComputations.delete(t),e.destroy()}};(0,a._)([(0,d.MZ)({readOnly:!0})],Vt.prototype,"type",void 0),(0,a._)([(0,d.MZ)()],Vt.prototype,"tool",void 0),(0,a._)([(0,d.MZ)()],Vt.prototype,"updating",null),(0,a._)([(0,d.MZ)({readOnly:!0})],Vt.prototype,"results",null),(0,a._)([(0,d.MZ)()],Vt.prototype,"computations",void 0),(0,a._)([(0,d.MZ)()],Vt.prototype,"selectedDimension",void 0),(0,a._)([(0,d.MZ)()],Vt.prototype,"selectedComputation",null),(0,a._)([(0,d.MZ)()],Vt.prototype,"_analysisVisualization",void 0),(0,a._)([(0,d.MZ)()],Vt.prototype,"_analysisController",void 0),(0,a._)([(0,d.MZ)()],Vt.prototype,"_dimensionsToComputations",void 0),(0,a._)([(0,d.MZ)()],Vt.prototype,"_placementTask",void 0),Vt=(0,a._)([(0,u.$)("esri.views.3d.analysis.DimensionAnalysisView3D")],Vt);const Gt=Vt},41445:(e,t,i)=>{i.d(t,{t:()=>d,k:()=>u});const n="theme-style";function a(e,t){return function(e,t){const i=new Image(t,t);return i.src=e,i}(function(e){const t=(new XMLSerializer).serializeToString(e);return`data:image/svg+xml;base64,${btoa(t)}`}(s(function(e){const t=e.split(",")[1],i=atob(t);return(new DOMParser).parseFromString(i,"image/svg+xml")}(e),t)),t.size)}function s(e,t){let{accentColor:i,contrastColor:a}=t;const s=i.toHex(),o=i.a,r=a.toHex(),l=a.a,c=e.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem(n);return c&&(c.innerHTML=`\n      .contrast-fill { fill: ${r}; fill-opacity: ${l}; }\n      .contrast-stroke { stroke: ${r}; stroke-opacity: ${l};  }\n      .accent-fill { fill: ${s}; fill-opacity: ${o}; }\n      .accent-stroke { stroke: ${s}; stroke-opacity:  ${o}; }`),e}const o="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NiIgY2xhc3M9ImFjY2VudC1maWxsIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI0Ljk5IiBkPSJNMjAuMDUgNDAuODZhMTUuMDUgMTUuMDUgMCAwIDAgMTcuMTQtMS41IDE1LjA1IDE1LjA1IDAgMCAwIDQuNDctMTYuNjUgMTUuMDUgMTUuMDUgMCAwIDAtMjIuNzItNy4xNSAxNS4wNSAxNS4wNSAwIDAgMC01LjUgNy4xNSIgY2xhc3M9ImNvbnRyYXN0LXN0cm9rZSIvPjxwYXRoIGQ9Im0xMC45NyAzNS41NyA1LjM4IDEyLjA3IDcuNzktMTMuNDd6IiBjbGFzcz0iY29udHJhc3QtZmlsbCIvPjwvc3ZnPg==",r="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTggMTEuOTggMCAwIDAtOS44IDcuNTA3IiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIGNvbnRyYXN0LWZpbGwiLz48cGF0aCBkPSJtMjkuODE4IDIyLjgwOC02LjE4NCA0LjYtLjU0MS04LjM2NHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+";var l=i(51446);const c=64;function d(e,t){const{accentColor:i,contrastColor:n,preMultiplyAlpha:s}=t;return e.fromData(`heading-rotate:[accent:${i},contrast:${n},size:${c}]`,(()=>new l.g(a(o,{accentColor:i,contrastColor:n,size:c}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:s})))}function u(e,t){const{accentColor:i,contrastColor:n,preMultiplyAlpha:s}=t;return e.fromData(`tilt-rotate:[accent:${i},contrast:${n},size:${c}]`,(()=>new l.g(a(r,{accentColor:i,contrastColor:n,size:c}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:s})))}},42050:(e,t,i)=>{i.d(t,{Do:()=>l,Kt:()=>r,ob:()=>o});var n=i(28473),a=i(36089),s=i(90968);function o(e){return(0,s.mh)(e)??(0,a.Xg)(e)}function r(e,t){return(0,s.Og)(e,t)??(0,a.ll)(e,t)}function l(e,t,i){return c[0]=e[0],c[1]=e[1],c[2]=3===e.length?e[2]:0,d[0]=t[0],d[1]=t[1],d[2]=3===t.length?t[2]:0,(0,s.n3)(c,d,i)??(0,a.sT)(c,d,i)}const c=(0,n.vt)(),d=(0,n.vt)()},43536:(e,t,i)=>{i.d(t,{m:()=>n});class n{constructor(e,t){this.isDraped=e,this.domain=t}}},47752:(e,t,i)=>{i.d(t,{I:()=>y,a:()=>v,b:()=>_});var n=i(96236),a=i(75304),s=i(50366),o=i(78731),r=i(61535),l=i(66652),c=i(35490),d=i(42403),u=i(16878),p=i(67058),h=i(22131),m=i(14480),g=i(20783),f=i(8118);class v extends g.Y{}function _(e){const t=new f.N5,{vertex:i,fragment:g}=t,{output:v,perspectiveInterpolation:_}=e;return(0,c.NB)(i,e),t.include(s.d,e),t.include(r.Z,e),t.fragment.include(a.HQ,e),t.include(o.g,e),t.include(m.z,e),t.attributes.add(h.r.POSITION,"vec3"),t.attributes.add(h.r.UV0,"vec2"),_&&t.attributes.add(h.r.PERSPECTIVEDIVIDE,"float"),i.main.add(u.H`
    vpos = position;
    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);
    vTexCoord = uv0;
    gl_Position = transformPosition(proj, view, vpos);
    ${(0,u.If)(_,"gl_Position *= perspectiveDivide;")}`),t.varyings.add("vpos","vec3"),t.varyings.add("vTexCoord","vec2"),g.include(l.a),g.uniforms.add(new d.m("opacity",(e=>e.opacity)),new p.N("tex",(e=>e.texture))).main.add(u.H`
    discardBySlice(vpos);
    discardByTerrainDepth();
    ${(0,u.If)(v===n.V.ObjectAndLayerIdColor,"fragColor = vec4(0, 0, 0, 1); return;")}
    vec4 finalColor = texture(tex, vTexCoord) * opacity;
    outputColorHighlightOID(finalColor, vpos);`),t}const y=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:v,build:_},Symbol.toStringTag,{value:"Module"}))},54382:(e,t,i)=>{i.d(t,{k:()=>r});var n=i(93800),a=i(79953),s=(i(50925),i(21265),i(14746),i(74719),i(75269)),o=i(88204);let r=class extends o.g{constructor(e){super(e)}initialize(){this.addHandles((0,a.watch)((()=>this.analysisViewData.visible),(e=>this.visible=e),a.syncAndInitial))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};r=(0,n._)([(0,s.$)("esri.views.interactive.AnalysisToolBase")],r)},59247:(e,t,i)=>{i.d(t,{r:()=>A});var n=i(76517),a=i(96236),s=i(71723),o=i(35694),r=i(60984),l=i(85645),c=i(53801),d=i(89893),u=i(22131),p=i(19236),h=i(92434),m=i(38319),g=i(33050),f=i(93003),v=i(16434),_=i(86836),y=i(92804),M=i(47752),S=i(12723);class w extends v.w{constructor(e,t){super(e,t,new f.$(M.I,(()=>i.e(63336).then(i.bind(i,63336)))),P)}_getPipelineState(e,t){const{oitPass:i,output:n,hasOccludees:s,enableOffset:o,cullFace:r}=e,c=i===_.Y.NONE,d=i===_.Y.FrontFace;return(0,S.Ey)({blending:(0,a.RN)(n)?c?S.Os:(0,l.ez)(i):null,culling:(0,S.Xt)(r),depthTest:{func:(0,l.K_)(i)},depthWrite:(0,l.z5)(e),drawBuffers:(0,l.m6)(i,n),colorWrite:S.kn,stencilWrite:s?y.v0:null,stencilTest:s?t?y.a9:y.qh:null,polygonOffset:c||d?null:(0,l.aB)(o)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const P=new Map([[u.r.POSITION,0],[u.r.UV0,2],[u.r.PERSPECTIVEDIVIDE,3]]);var b=i(93800),C=i(69261),D=i(82606),T=i(21484),O=i(51448);class x extends O.E{constructor(){super(...arguments),this.cullFace=s.s2.None,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=C.I.None,this.emissionSource=D.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,b._)([(0,T.W)({count:s.s2.COUNT})],x.prototype,"cullFace",void 0),(0,b._)([(0,T.W)()],x.prototype,"enableOffset",void 0),(0,b._)([(0,T.W)()],x.prototype,"writeDepth",void 0),(0,b._)([(0,T.W)()],x.prototype,"hasOccludees",void 0),(0,b._)([(0,T.W)()],x.prototype,"terrainDepthTest",void 0),(0,b._)([(0,T.W)()],x.prototype,"cullAboveTerrain",void 0),(0,b._)([(0,T.W)()],x.prototype,"perspectiveInterpolation",void 0);class A extends m.W{constructor(e){super(e,z),this._configuration=new x,this.vertexAttributeLocations=P,this.supportsEdges=!0,this.produces=new Map([[c.N.OPAQUE_MATERIAL,e=>(0,a.CL)(e)],[c.N.TRANSPARENT_MATERIAL,e=>(0,a._o)(e)&&this.parameters.writeDepth],[c.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,a._o)(e)&&!this.parameters.writeDepth],[c.N.DRAPED_MATERIAL,e=>(0,a._o)(e)||(0,a.CL)(e)]])}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<l.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new I(e)}createBufferWriter(){const e=h.zK.clone();return this.parameters.perspectiveInterpolation&&e.f32(u.r.PERSPECTIVEDIVIDE),new L(e)}}class I extends o.m8{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(w,e)}}class L extends p.Z{write(e,t,i,a,s,o){for(const r of this.vertexBufferLayout.fields.keys()){const a=i.get(r);if(a)if(r===u.r.PERSPECTIVEDIVIDE){(0,d.vA)(1===a.size);const e=s.getField(r,n.Y$);e&&(0,g.uO)(a,e,o)}else(0,g.zC)(r,a,e,t,s,o)}}}class z extends r.qA{constructor(e){super(),this.textureId=e,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=s.s2.None,this.opacity=1,this.perspectiveInterpolation=!1}}},61073:(e,t,i)=>{i.d(t,{l:()=>o});i(21265),i(50925);var n=i(89227),a=i(23278),s=i(43536);class o extends s.m{constructor(e,t,i,n){super(n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.n.ALL),this.previousVertex=e,this.centerVertex=t,this.nextVertex=i}equals(e){return e instanceof o&&(0,n.p)(this.previousVertex,e.previousVertex)&&(0,n.p)(this.centerVertex,e.centerVertex)&&(0,n.p)(this.nextVertex,e.nextVertex)}}},64768:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var n=i(93800),a=i(15155),s=i(85715),o=i(5839),r=i(19455),l=i(48602),c=i(32980),d=(i(21265),i(14746),i(75269)),u=i(80556),p=i(75400);let h=class extends(r.A.JSONSupportMixin(s.A)){constructor(e){super(e),this.type="length",this.startPoint=null,this.endPoint=null,this.measureType=a.L.Direct,this.offset=0,this.orientation=0}};(0,n._)([(0,l.MZ)({type:["length"],json:{write:{isRequired:!0}}})],h.prototype,"type",void 0),(0,n._)([(0,l.MZ)({type:p.default,json:{write:{isRequired:!0}}})],h.prototype,"startPoint",void 0),(0,n._)([(0,l.MZ)({type:p.default,json:{write:{isRequired:!0}}})],h.prototype,"endPoint",void 0),(0,n._)([(0,l.MZ)({type:a.h,nonNullable:!0,json:{write:{isRequired:!0}}})],h.prototype,"measureType",void 0),(0,n._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],h.prototype,"offset",void 0),(0,n._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,c.w)((e=>o.ie.normalize((0,u.GB)(e),0,!0)))],h.prototype,"orientation",void 0),h=(0,n._)([(0,d.$)("esri.analysis.LengthDimension")],h);const m=h},65022:(e,t,i)=>{i.d(t,{c:()=>o});i(21265),i(50925);var n=i(89227),a=i(23278),s=i(43536);class o extends s.m{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.n.ALL,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];super(n,s),this.type=e,this.lineStart=t,this.lineEnd=i,this.fadeLeft=o,this.fadeRight=r}equals(e){return e instanceof o&&this.type===e.type&&(0,n.p)(this.lineStart,e.lineStart)&&(0,n.p)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return(0,n.j)(this.lineStart,this.lineEnd)}}},65626:(e,t,i)=>{i.d(t,{I:()=>g});var n=i(89227),a=i(28473),s=i(60548),o=i(24646),r=i(75075),l=i(72249),c=i(66028),d=i(50190);var u=i(71723),p=i(86580),h=i(60984),m=i(24487);class g extends r.X{constructor(e){super(e),this.view=null,this._renderOccluded=h.m$.OccludeAndTransparent,this._vertices=null,this._spatialReference=null,this._color=(0,o.ci)([1,127/255,0,1]),this._size=11,this._outlineColor=(0,o.ci)([0,0,0,.5]),this._outlineSize=1,this._elevationInfo=null,this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial(),this._updateOutlineMaterial())}get vertices(){return this._vertices}set vertices(e){this._vertices=e,this.recreateGeometry()}get spatialReference(){return this._spatialReference}set spatialReference(e){this._spatialReference=e,this.recreateGeometry()}get color(){return this._color}set color(e){(0,s.a)(e,this._color)||((0,s.c)(this._color,e),this._updateMaterial())}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,s.a)(e,this._outlineColor)||((0,s.c)(this._outlineColor,e),this._updateOutlineMaterial())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateOutlineMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get _vertexMaterialParameters(){return{color:this._color,screenSizeScale:this.size,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}get _vertexOutlineMaterialParameters(){return{color:this._outlineColor,screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateMaterial(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)}_updateOutlineMaterial(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)}_createRenderGeometries(){const e=this.vertices;if(null==e||0===e.length)return[];const t=function(e,t,i,n,a){const s=(0,c.jh)(3*e.length),o=(0,c.jh)(s.length);e.forEach(((e,t)=>{s[3*t]=e[0],s[3*t+1]=e[1],s[3*t+2]=e.length>2?e[2]:0}));const r=(0,d.au)(s,t,0,o,0,s,0,s.length/3,i,n,a),l=null!=r;return{numVertices:e.length,position:s,mapPositions:o,projectionSuccess:l,sampledElevation:r}}(e,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,l.F.fromElevationInfo(this.elevationInfo)),i=[],a=t.numVertices,s=t.position;for(let o=0;o<a;++o){const e=(0,n.i)(f,s[3*o],s[3*o+1],s[3*o+2]),t=v(this._vertexMaterial,.5,e),a=v(this._vertexOutlineMaterial,.5,e);i.push({vertexGeometry:t,vertexOutlineGeometry:a})}return i}createGeometries(e){const t=this._createRenderGeometries();for(const{vertexGeometry:i,vertexOutlineGeometry:n}of t)e.addGeometry(i),e.addGeometry(n)}createExternalResources(){this._vertexMaterial=new m.A({...this._vertexMaterialParameters,writeDepth:!0,cullFace:u.s2.Back,screenSizeEnabled:!0}),this._vertexOutlineMaterial=new m.A({...this._vertexOutlineMaterialParameters,forceTransparentMode:!0,writeDepth:!0,cullFace:u.s2.Front,screenSizeEnabled:!0,shadingEnabled:!1})}destroyExternalResources(){this._vertexMaterial=null,this._vertexOutlineMaterial=null}forEachExternalMaterial(e){e(this._vertexMaterial),e(this._vertexOutlineMaterial)}}const f=(0,a.vt)();function v(e,t,i){return(0,p.CM)(e,t,16,16,{offset:i})}},70755:(e,t,i)=>{i.d(t,{r:()=>o});i(21265),i(50925);var n=i(89227),a=i(23278),s=i(43536);class o extends s.m{constructor(e,t,i){super(i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.n.ALL),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&(0,n.p)(this.lineStart,e.lineStart)&&(0,n.p)(this.lineEnd,e.lineEnd)}}},74309:(e,t,i)=>{i.d(t,{v:()=>o});var n=i(89227),a=i(23278),s=i(43536);class o extends s.m{constructor(e,t){super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.n.ALL),this.intersectionPoint=e}equals(e){return e instanceof o&&(0,n.p)(this.intersectionPoint,e.intersectionPoint)}}},82734:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(93800),a=i(6946),s=i(48602),o=(i(21265),i(50925),i(14746),i(75269));let r=class extends a.default{constructor(e){super(e),this.dimension=null,this.length=null}};(0,n._)([(0,s.MZ)({constructOnly:!0,nonNullable:!0})],r.prototype,"dimension",void 0),(0,n._)([(0,s.MZ)()],r.prototype,"length",void 0),r=(0,n._)([(0,o.$)("esri.views.analysis.LengthDimensionResult")],r);const l=r},95441:(e,t,i)=>{i.d(t,{T:()=>s});var n=i(8609),a=i(92453);function s(e){const t=(0,n.hz)(e);return t.options.store=a.oH.MIN,t.options.excludeLabels=!0,t}}}]);