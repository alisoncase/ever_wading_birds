"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[3092],{24158:(e,t,i)=>{i.d(t,{CA:()=>l,Yb:()=>o,p5:()=>s});i(88677);var n=i(99961);function o(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function s(e){return e?{backgroundImage:`url(${e})`}:{}}function l(e){let{action:t,feature:i}=e;const o=i?.attributes,s="image"in t?t.image:void 0;return s&&o?(0,n.V)(s,o):s??""}},53430:(e,t,i)=>{i.d(t,{o:()=>n});const n=["label","description","metadata"]},97431:(e,t,i)=>{i.d(t,{A:()=>h});var n,o=i(93800),s=i(48602),l=(i(21265),i(50925),i(14746),i(75269)),a=i(9674),r=i(24158),c=i(27811),d=i(9399),p=i(49403),u=i(87118),g=i(17745);let m=n=class extends c.default{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=e=>{this.item.actionsOpen=e.currentTarget.open},this._setTooltipReference=e=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,e)},this._removeTooltipReference=()=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,null)}}loadDependencies(){return(0,p.W)({"action-group":()=>Promise.all([i.e(86290),i.e(74597),i.e(11484)]).then(i.bind(i,11484)),"action-menu":()=>Promise.all([i.e(86290),i.e(74597),i.e(71564)]).then(i.bind(i,71564)),action:()=>i.e(88342).then(i.bind(i,88342)),icon:()=>Promise.resolve().then(i.bind(i,92439)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),notice:()=>i.e(51132).then(i.bind(i,51132))})}render(){const e=this.parentTitles??[],{_title:t,item:i,activeItem:n,selectionMode:o,selectedItems:s,messages:l,parent:a,css:r}=this,c="visibleAtCurrentTimeExtent"in i&&"layerInvisibleAtTime"in l&&!i.visibleAtCurrentTimeExtent?`${t} (${l.layerInvisibleAtTime})`:"visibleAtCurrentScale"in i&&"layerInvisibleAtScale"in l&&!i.visibleAtCurrentScale?`${t} (${l.layerInvisibleAtScale})`:t,d="parent"in i&&"catalog"===i.parent?.layer?.type,{layer:p}=i,g="visibleAtCurrentScale"in i&&!i.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in i&&!i.visibleAtCurrentTimeExtent;return(0,u.K)("calcite-list-item",{afterCreate:e=>this._focusSelectedDragEl(e,i),afterUpdate:e=>this._focusSelectedDragEl(e,i),class:this.classes(r.item,"itemActive"in r&&{[r.itemActive]:n===i}),"data-item":i,"data-layer-id":p?.id,dragDisabled:!i.sortable||d,id:p?.uid,key:`list-item-${p?.uid}`,label:t,metadata:{parentTitles:e,_title:t},open:"open"in i&&i.open,selected:"none"!==o&&s.includes(i),title:c,unavailable:g,value:p?.uid,onCalciteListItemSelect:e=>"visible"in i&&this._handleCalciteListItemSelect(e,i,a),onCalciteListItemToggle:e=>"open"in i&&this._handleCalciteListItemToggle(e,i)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:t,visibleElements:i,css:n}=this;if(!i.statusIndicators)return null;const{publishing:o}=e,s="updating"in e&&e.updating&&!t,l="connectionStatus"in e?e.connectionStatus:void 0,a=!!l;return(0,u.K)("calcite-icon",{class:this.classes(n.statusIndicator,{[n.publishing]:o},"updating"in n&&{[n.updating]:s},"connectionStatus"in n&&{[n.connectionStatus]:a},"connectionStatusConnected"in n&&{[n.connectionStatusConnected]:a&&"connected"===l}),icon:(0,d.cR)({connectionStatus:l,publishing:o}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:t,css:i}=this,{layer:n}=e,o="temporaryLayerIndicators"in t&&t.temporaryLayerIndicators,s="temporaryTableIndicators"in t&&t.temporaryTableIndicators,l=n&&"persistenceEnabled"in n&&((0,a.isLayerFromCatalog)(n)||!n.persistenceEnabled);return(o||s)&&l?(0,u.K)("calcite-icon",{class:i.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:e,parent:t,messages:i,visibilityAppearance:n,css:o}=this;if(!("visible"in e&&"layerVisibility"in i&&"visibleToggle"in o&&n))return null;const{visible:s}=e,l=this._getParentVisibilityMode(t);if("inherited"===l)return null;const a=(0,d.cg)({visible:s,exclusive:"exclusive"===l,visibilityAppearance:n}),r="checkbox"===n,c=i.layerVisibility;return(0,u.K)("calcite-action",{appearance:"transparent",class:o.visibleToggle,icon:r?a:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:r?"actions-start":"actions-end",text:c,title:c},r?null:(0,u.K)("calcite-icon",{class:this.classes({[o.visibleIcon]:"exclusive"!==l&&s}),icon:a,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!e?.open||e.disabled||e.flowEnabled?null:(0,u.K)("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!e?.visible)return null;const{open:t,title:i,disabled:n}=e;return(0,u.K)("calcite-action",{active:t,appearance:"transparent",disabled:n,icon:(0,r.Yb)(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:t}=this,i=t.options;return(0,u.K)("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:t.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},(0,u.K)("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map((e=>(0,u.K)("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map((e=>this._renderAction({action:e,textEnabled:!0}))))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,t=this.item.layer,i="catalog-footprint"===t?.type,n="sublayer"===t?.type&&(0,a.isCatalogSublayer)(t,"footprints");return"itemCatalogIcon"in e&&(i||n)?(0,u.K)("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,t=this.item.layer,i="catalog-dynamic-group"===t?.type,n="sublayer"===t?.type&&(0,a.isCatalogSublayer)(t,"layers-in-view");return"itemCatalogIcon"in e&&(i||n)?(0,u.K)("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:t,visibleElements:i}=this;if(!("visible"in t))return;const{layer:n}=t,o="catalog-dynamic-group"===n?.type;return"catalogLayerList"in i&&i.catalogLayerList&&o?(0,u.K)("calcite-action",{appearance:"transparent",disabled:!n.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(t),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:t,rootGroupUid:i,listModeDisabled:n,selectionMode:o,displayMode:s}=this;if(!("children"in t))return;const l=[...this.parentTitles??[],t.title],{children:a,layer:r}=t,c="catalog-dynamic-group"!==r?.type&&(0,d.do)(t),p=!n&&(0,d.Mq)(r),g="group"===r?.type,m=!p&&!c&&e&&g,h=!!e&&"childrenSortable"in t&&t.childrenSortable&&(0,d.dL)(t);return c||m?(0,u.K)("calcite-list",{canPull:e=>!!this.canMove&&this.canMove(e,"pull"),canPut:e=>!!this.canMove&&this.canMove(e,"put"),"data-item":t,"data-layer-type":i,displayMode:s,dragEnabled:h,group:g?i:`${i}-${r?.uid}`,key:`child-list-${r?.uid}`,label:t.title,selectionAppearance:"border",selectionMode:o},a?.filter((e=>!e.hidden&&(this.visibleElements.errors||!e.error))).toArray().map((e=>this._renderItem(e,t,l))),this._renderedTablesItem):null}get _hasTables(){const{layerTablesEnabled:e}=this,t=this.item.layer;if(!e||!t)return!1;switch(t.type){case"knowledge-graph":return e.includes(t.type)&&"tables"in t&&!!t.tables?.length;case"map-image":case"tile":return e.includes(t.type)&&"subtables"in t&&!!t.subtables?.length;default:return!1}}get _renderedTablesItem(){const{item:e,messages:t,css:i}=this,{layer:n}=e;return"itemTableIcon"in i&&"visible"in e&&"tables"in t&&this._hasTables?(0,u.K)("calcite-list-item",{class:i.item,"data-layer-id":n?.id,dragDisabled:!0,key:`list-item-table-list-tables-${n?.uid}`,label:t.tables,title:t.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},(0,u.K)("calcite-icon",{class:i.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),(0,u.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:t,css:i}=this;return e.error?(0,u.K)("div",{class:i.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},(0,u.K)("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},(0,u.K)("div",{slot:"message"},"tableError"in t?t.tableError:t.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in t?(0,u.K)("div",{class:i.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},(0,u.K)("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},(0,u.K)("div",{slot:"message"},t.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:(0,d.Vq)(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map((e=>e.filter((e=>e.visible))))}get _actionsCount(){return this.item.actionsSections.reduce(((e,t)=>e+t.length),0)}_renderAction(e){const{item:t}=this,{action:i,textEnabled:n}=e;if(!i)return null;const{active:o,disabled:s,title:l,type:a,indicator:c}=i;return(0,u.K)("calcite-action",{active:"toggle"===a&&i.value,appearance:"transparent","data-action-id":i.id,disabled:s,icon:(0,r.Yb)(i),indicator:c,key:`action-${i.uid}`,loading:o,onclick:()=>this._triggerAction(t,i),scale:"s",slot:n?void 0:"actions-end",text:l??"",textEnabled:n,title:l??void 0},this._renderFallbackIcon(i))}_renderFallbackIcon(e){const{css:t}=this,{className:i,icon:n}=e;if(n)return null;const o="image"in e?e.image:void 0,s={[t.itemActionIcon]:!!i,[t.itemActionImage]:!!o};return i&&(s[i]=!0),o||i?(0,u.K)("span",{"aria-hidden":"true",class:this.classes(t.itemActionIcon,s),key:"icon",styles:(0,r.p5)(o)}):null}_renderItem(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0,u.K)(n,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,t){t&&e&&("toggle"===t.type&&(t.value=!t.value),this.onAction(t,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){e&&this.onCatalogOpen?.(e)}_focusSelectedDragEl(e,t){this.selectedDragItemLayerUid===t.layer?.uid&&((0,g.Z6)(e),this.onSelectedDragItemLayerUidChange?.(null))}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,t,i){if((0,d.Gq)(e.target)!==t)return;const n=this._getParentVisibilityMode(i);"none"===this.selectionMode&&"inherited"!==n&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,t){e&&"visible"in e&&("exclusive"===this._getParentVisibilityMode(t)&&e.visible||(e.visible=!e.visible))}};m.vnodeSelector="calcite-list-item",(0,o._)([(0,s.MZ)()],m.prototype,"activeItem",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"canMove",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"css",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"displayMode",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"dragEnabled",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"item",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"layerTablesEnabled",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"listModeDisabled",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"messages",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"messagesCommon",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"onAction",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"onPanelOpen",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"onCatalogOpen",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"onTablesOpen",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"onSelectedDragItemLayerUidChange",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"onTooltipReferenceChange",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"parent",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"parentTitles",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"rootGroupUid",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"selectionMode",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"selectedItems",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"selectedDragItemLayerUid",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"visibleElements",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"visibilityAppearance",void 0),(0,o._)([(0,s.MZ)()],m.prototype,"_title",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedItemStatus",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedItemTemporaryIcon",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedItemToggle",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedPanel",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedPanelAction",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedActions",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedActionMenu",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedActionMenuContent",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedCatalogFootprintIcon",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedCatalogDynamicIcon",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedCatalogSelectNode",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedChildList",null),(0,o._)([(0,s.MZ)()],m.prototype,"_hasTables",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedTablesItem",null),(0,o._)([(0,s.MZ)()],m.prototype,"_renderedItemMessage",null),(0,o._)([(0,s.MZ)()],m.prototype,"_singleAction",null),(0,o._)([(0,s.MZ)()],m.prototype,"_filteredSections",null),(0,o._)([(0,s.MZ)()],m.prototype,"_actionsCount",null),m=n=(0,o._)([(0,l.$)("esri.widgets.LayerList.LayerListItem")],m);const h=m}}]);