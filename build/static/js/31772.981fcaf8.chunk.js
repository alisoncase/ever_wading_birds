"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[10963,31772,66201,88582,96772],{31772:(t,e,i)=>{i.r(e),i.d(e,{default:()=>w});var o=i(93800),r=i(56082),s=i(50925),a=i(48602),n=(i(21265),i(14746),i(75269)),l=i(27811),c=i(49403),d=i(50821),h=(i(17745),i(76697)),g=i(66201),p=i(87118),u=i(96772);const _="esri-track";let v=class extends l.default{constructor(t,e){super(t,e),this.messages=null,this.viewModel=new u.default,this._toggleTracking=()=>{const t=this.viewModel;t&&"feature-unsupported"!==t.state&&"disabled"!==t.state&&("tracking"!==t.state&&"waiting"!==t.state?this.viewModel.start():this.viewModel.stop())},(0,r.ED)(s.A.getLogger(this),"Track","arcgis-track",{version:"4.32"})}loadDependencies(){return(0,c.W)({button:()=>Promise.resolve().then(i.bind(i,20423)),tooltip:()=>Promise.resolve().then(i.bind(i,75703))})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(t){this.viewModel.geolocationOptions=t}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(t){this.viewModel.goToLocationEnabled=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"compass-north-circle"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get rotationEnabled(){return this.viewModel.rotationEnabled}set rotationEnabled(t){this.viewModel.rotationEnabled=t}get scale(){return this.viewModel.scale}set scale(t){this.viewModel.scale=t}get tracking(){return this.viewModel.tracking}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}start(){this.viewModel.start()}stop(){this.viewModel.stop()}render(){const{viewModel:t,messages:e,icon:i}=this,o=t?.state,r="tracking"===o,s=this._localizeError(this.viewModel?.error),a=(r?e?.stopTracking:e?.startTracking)??"",n="feature-unsupported"===o,l=("tracking"===o?"pause":void 0)??i;return(0,p.K)("div",{class:this.classes(_,d.D.widget)},!n&&(0,p.K)("calcite-button",{class:d.D.widgetButton,disabled:"disabled"===o,iconStart:l,kind:"neutral",label:a,loading:"waiting"===o,onclick:this._toggleTracking,title:a}),s?(0,p.K)("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},s):null)}_localizeError(t){return t instanceof GeolocationPositionError?t.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:t.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable:t instanceof Error?t.message:void 0}};(0,o._)([(0,a.MZ)()],v.prototype,"geolocationOptions",null),(0,o._)([(0,a.MZ)()],v.prototype,"goToLocationEnabled",null),(0,o._)([(0,a.MZ)()],v.prototype,"goToOverride",null),(0,o._)([(0,a.MZ)()],v.prototype,"graphic",null),(0,o._)([(0,a.MZ)()],v.prototype,"icon",null),(0,o._)([(0,a.MZ)()],v.prototype,"label",null),(0,o._)([(0,a.MZ)(),(0,h.G)("esri/widgets/Track/t9n/Track")],v.prototype,"messages",void 0),(0,o._)([(0,a.MZ)()],v.prototype,"rotationEnabled",null),(0,o._)([(0,a.MZ)()],v.prototype,"scale",null),(0,o._)([(0,a.MZ)({readOnly:!0})],v.prototype,"tracking",null),(0,o._)([(0,a.MZ)()],v.prototype,"view",null),(0,o._)([(0,a.MZ)({type:u.default}),(0,g.U)(["track","track-error"])],v.prototype,"viewModel",void 0),v=(0,o._)([(0,n.$)("esri.widgets.Track")],v);const w=v},66201:(t,e,i)=>{function o(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,o=Array.isArray(t)?t:function(t){return t.split(",").map((t=>t.trim()))}(t);i.push(...o)}}i.d(e,{U:()=>o})},96772:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var o=i(93800),r=i(49959),s=i(48602),a=(i(21265),i(50925),i(14746),i(75269)),n=i(25780);let l=class extends n.A{constructor(t){super(t),this._watchId=void 0,this._trackStartingTimeoutId=void 0,this._settingPosition=null,this._trackController=null,this.error=void 0,this.positionFilterFunction=null}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?"disabled":this._settingPosition||void 0!==this._trackStartingTimeoutId?"waiting":this.tracking?"tracking":null!=this.error?"error":"ready":"feature-unsupported"}get tracking(){return void 0!==this._watchId}start(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._startTracking()}stop(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._stopTracking()}_stopWatchingPosition(){void 0!==this._watchId&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=void 0)}_stopTracking(){this._abortTrack(),this._clearWaitingTimer(),this._stopWatchingPosition(),this._clearGraphic()}_startTracking(){this._stopTracking();const t=(0,r.debounce)((async t=>{this._abortTrack();const e=new AbortController;this._trackController=e;const{timestamp:i,coords:o}=t,s={timestamp:i,coords:{...o}};this.error=void 0;try{if("function"==typeof this.positionFilterFunction&&!this.positionFilterFunction.call(null,{position:s}))return;if(await this.updatePosition(t,e),this._trackController!==e)return;this._clearWaitingTimer(),this._addGraphic(),this.emit("track",{position:t}),this._trackController=null}catch(a){if((0,r.isAbortError)(a))return;throw this._trackController=null,this._emitError(a),this._clearWaitingTimer(),a}}),0);this._watchId=navigator.geolocation.watchPosition((e=>{this._settingPosition=t(e).catch(r.ignoreAbortErrors)}),this._handleWatchPositionError.bind(this),this.geolocationOptions??void 0),this._trackStartingTimeoutId=setTimeout((()=>{this._trackStartingTimeoutId=void 0}),15e3)}_handleWatchPositionError(t){t.code===t.PERMISSION_DENIED&&this._stopTracking(),this._emitError(t)}_abortTrack(){this._trackController?.abort(),this._trackController=null}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=void 0,this._settingPosition=null}_emitError(t){this.error=t,this.emit("track-error",{error:t})}};(0,o._)([(0,s.MZ)()],l.prototype,"_watchId",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"_trackStartingTimeoutId",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"_settingPosition",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"error",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"positionFilterFunction",void 0),(0,o._)([(0,s.MZ)({readOnly:!0})],l.prototype,"state",null),(0,o._)([(0,s.MZ)({readOnly:!0})],l.prototype,"tracking",null),(0,o._)([(0,s.MZ)()],l.prototype,"start",null),(0,o._)([(0,s.MZ)()],l.prototype,"stop",null),l=(0,o._)([(0,a.$)("esri.widgets.Track.TrackViewModel")],l);const c=l}}]);