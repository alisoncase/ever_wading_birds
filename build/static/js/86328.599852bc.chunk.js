"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[16214,39899,86328],{1277:(t,e,n)=>{n.d(e,{C:()=>c,Cr:()=>g,H6:()=>b,LV:()=>l,_I:()=>f,dz:()=>v,fA:()=>d,kb:()=>p,ld:()=>y,sd:()=>h,vt:()=>u});var r=n(64682),i=n(32636),o=n(89227),s=n(28473),a=n(1696);function u(t){return t?{origin:(0,s.o8)(t.origin),vector:(0,s.o8)(t.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function l(t,e){const n=x.get();return n.origin=t,n.vector=e,n}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return d(t.origin,t.vector,e)}function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,o.c)(n.origin,t),(0,o.c)(n.vector,e),n}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,o.c)(n.origin,t),(0,o.d)(n.vector,e,t),n}function p(t,e){const n=(0,o.d)(a.rq.get(),e,t.origin),i=(0,o.f)(t.vector,n),s=(0,o.f)(t.vector,t.vector),u=(0,r.qE)(i/s,0,1),l=(0,o.d)(a.rq.get(),(0,o.h)(a.rq.get(),t.vector,u),n);return(0,o.f)(l,l)}function f(t,e,n){return b(t,e,0,1,n)}function h(t,e,n){return(0,o.g)(n,t.origin,(0,o.h)(n,t.vector,e))}function b(t,e,n,i,s){const{vector:u,origin:l}=t,c=(0,o.d)(a.rq.get(),e,l),d=(0,o.f)(u,c)/(0,o.k)(u);return(0,o.h)(s,u,(0,r.qE)(d,n,i)),(0,o.g)(s,s,t.origin)}function v(t,e){if(m(t,l(e.origin,e.direction),!1,I)){const{tA:e,pB:n,distance2:r}=I;if(e>=0&&e<=1)return r;if(e<0)return(0,o.s)(t.origin,n);if(e>1)return(0,o.s)((0,o.g)(a.rq.get(),t.origin,t.vector),n)}return null}function y(t,e,n){return!!m(t,e,!0,I)&&((0,o.c)(n,I.pA),!0)}function m(t,e,n,i){const s=1e-6,u=t.origin,l=(0,o.g)(a.rq.get(),u,t.vector),c=e.origin,d=(0,o.g)(a.rq.get(),c,e.vector),g=a.rq.get(),p=a.rq.get();if(g[0]=u[0]-c[0],g[1]=u[1]-c[1],g[2]=u[2]-c[2],p[0]=d[0]-c[0],p[1]=d[1]-c[1],p[2]=d[2]-c[2],Math.abs(p[0])<s&&Math.abs(p[1])<s&&Math.abs(p[2])<s)return!1;const f=a.rq.get();if(f[0]=l[0]-u[0],f[1]=l[1]-u[1],f[2]=l[2]-u[2],Math.abs(f[0])<s&&Math.abs(f[1])<s&&Math.abs(f[2])<s)return!1;const h=g[0]*p[0]+g[1]*p[1]+g[2]*p[2],b=p[0]*f[0]+p[1]*f[1]+p[2]*f[2],v=g[0]*f[0]+g[1]*f[1]+g[2]*f[2],y=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],m=(f[0]*f[0]+f[1]*f[1]+f[2]*f[2])*y-b*b;if(Math.abs(m)<s)return!1;let I=(h*b-v*y)/m,x=(h+b*I)/y;n&&(I=(0,r.qE)(I,0,1),x=(0,r.qE)(x,0,1));const A=a.rq.get(),w=a.rq.get();return A[0]=u[0]+I*f[0],A[1]=u[1]+I*f[1],A[2]=u[2]+I*f[2],w[0]=c[0]+x*p[0],w[1]=c[1]+x*p[1],w[2]=c[2]+x*p[2],i.tA=I,i.tB=x,i.pA=A,i.pB=w,i.distance2=(0,o.s)(A,w),!0}const I={tA:0,tB:0,pA:(0,s.vt)(),pB:(0,s.vt)(),distance2:0},x=new i.I((()=>u()))},2178:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var r=n(93800),i=n(38432),o=n(64880),s=n(73043),a=n(89129),u=n(40736),l=n(79953),c=n(48602),d=(n(21265),n(50925),n(14746),n(75269)),g=n(96913),p=n(4309),f=n(41317);const h=a.default.ofType(s.default);let b=class extends i.A{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,l.watch)((()=>this._computeExtent()),(t=>{null==t?.pending&&this._set("extent",null!=t?t.extent:null)}),l.syncAndInitial))}get targets(){return this._get("targets")||new h}set targets(t){this._set("targets",(0,u.V)(t,this.targets,h))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[this.observer?.position]}async waitComputeExtent(){const t=this._computeExtent();return null!=t?t.pending:Promise.resolve()}_computeExtent(){const t=this.spatialReference;if(null==this.observer?.position||null==t)return null;const e=t=>"absolute-height"===(0,f.w7)(t.position,t.elevationInfo),n=this.observer.position,r=(0,p.fA)(n.x,n.y,n.z,n.x,n.y,n.z);for(const o of this.targets)if(null!=o.position){const e=(0,g.projectOrLoad)(o.position,t);if(null!=e.pending)return{pending:e.pending,extent:null};if(null!=e.geometry){const{x:t,y:n,z:i}=e.geometry;(0,p.iT)(r,[t,n,i])}}const i=(0,p.w1)(r,t);return e(this.observer)&&this.targets.every(e)||(i.zmin=void 0,i.zmax=void 0),{pending:null,extent:i}}clear(){this.observer=null,this.targets.removeAll()}};(0,r._)([(0,c.MZ)({type:["line-of-sight"]})],b.prototype,"type",void 0),(0,r._)([(0,c.MZ)({type:o.default,json:{read:!0,write:!0}})],b.prototype,"observer",void 0),(0,r._)([(0,c.MZ)({cast:u.H,type:h,nonNullable:!0,json:{read:!0,write:!0}})],b.prototype,"targets",null),(0,r._)([(0,c.MZ)({value:null,readOnly:!0})],b.prototype,"extent",void 0),(0,r._)([(0,c.MZ)({readOnly:!0})],b.prototype,"spatialReference",null),(0,r._)([(0,c.MZ)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),b=(0,r._)([(0,d.$)("esri.analysis.LineOfSightAnalysis")],b);const v=b},10323:(t,e,n)=>{n.d(e,{Aw:()=>l,Jb:()=>u,Q5:()=>g,W3:()=>p,d:()=>s,db:()=>d,kV:()=>c,rb:()=>a});var r=n(92453),i=n(15828),o=n(27464);class s extends i.R6{constructor(t,e,n,r){super(e,n),this.point=t,this.createGraphic=r}}function a(t){return(0,o.i3)(t)&&t.intersector===r.dz.PCL&&!!t.target}class u extends i.HE{constructor(t,e,n,r,i){super(t),this.layerUid=t,this.sublayerUid=e,this.nodeIndex=n,this.componentIndex=r,this.triangleNr=i}}class l extends i.R6{constructor(t,e,n){super(e,null),this.point=t,this.createVoxelGraphic=n}}class c extends i.R6{constructor(t,e){super(t,null),this.createTiles3DGraphic=e}}function d(t){return(0,o.i3)(t)&&t.intersector===r.dz.I3S&&!!t.target}function g(t){return(0,o.i3)(t)&&t.intersector===r.dz.VOXEL&&!!t.target}function p(t){return(0,o.i3)(t)&&t.intersector===r.dz.TILES3D&&!!t.target}},10876:(t,e,n)=>{function r(t){return t&&"getAtOrigin"in t&&"originOf"in t}n.d(e,{H:()=>r})},13473:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function o(t,e,n,r,i,o,s,a,u){return[t,e,n,r,i,o,s,a,u]}n.d(e,{fA:()=>o,o8:()=>i,vt:()=>r,zK:()=>s});const s=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:r,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},15828:(t,e,n)=>{n.d(e,{B$:()=>o,HE:()=>s,R6:()=>a});var r=n(28473);class i{constructor(t,e,n){this.object=t,this.geometryId=e,this.triangleNr=n}}class o extends i{constructor(t,e,n,i){super(t,e,n),this.center=null!=i?(0,r.o8)(i):null}}class s{constructor(t){this.layerUid=t}}class a extends s{constructor(t,e){super(t),this.graphicUid=e}}},24589:(t,e,n)=>{n.d(e,{n:()=>i});var r=n(43103);function i(t){return o[function(t){return"json"===t.type?"application/json":"blob"===t.type?t.blob.type:function(t){const e=(0,r.getPathExtension)(t);return u[e]||s}(t.url)}(t)]||a}const o={},s="text/plain",a=o[s],u={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const l in u)o[u[l]]=l},25071:(t,e,n)=>{n.d(e,{B:()=>y,a:()=>I,b:()=>J,c:()=>S,d:()=>m,e:()=>O,f:()=>x,g:()=>M,h:()=>R,i:()=>j,n:()=>z,r:()=>U,t:()=>T,u:()=>A});n(21265);var r=n(50925),i=n(64682),o=n(32636),s=n(87752),a=n(10382),u=n(89227),l=n(28473),c=n(90772),d=n(91345),g=n(1277),p=n(10872),f=n(91102),h=n(49943),b=n(1696);const v=()=>r.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");const y=class{constructor(){this.plane=(0,p.vt)(),this.origin=(0,l.vt)(),this.basis1=(0,l.vt)(),this.basis2=(0,l.vt)()}};function m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;return{plane:(0,p.vt)(t.plane),origin:(0,l.o8)(t.origin),basis1:(0,l.o8)(t.basis1),basis2:(0,l.o8)(t.basis2)}}function I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m();return x(t.origin,t.basis1,t.basis2,e)}function x(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m();return(0,u.c)(r.origin,t),(0,u.c)(r.basis1,e),(0,u.c)(r.basis2,n),A(r),function(t,e){Math.abs((0,u.f)(t.basis1,t.basis2)/((0,u.l)(t.basis1)*(0,u.l)(t.basis2)))>1e-6&&v().warn(e,"Provided basis vectors are not perpendicular"),Math.abs((0,u.f)(t.basis1,z(t)))>1e-6&&v().warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,u.f)(z(t),t.origin)-t.plane[3])>1e-6&&v().warn(e,"Plane offset is not consistent with plane origin")}(r,"fromValues()"),r}function A(t){(0,p.mR)(t.basis2,t.basis1,t.origin,t.plane)}function w(t,e,n){t!==n&&I(t,n);const r=(0,u.h)(b.rq.get(),z(t),e);return(0,u.g)(n.origin,n.origin,r),n.plane[3]-=e,n}function M(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m();const n=(t[2]-t[0])/2,r=(t[3]-t[1])/2;return(0,u.i)(e.origin,t[0]+n,t[1]+r,0),(0,u.i)(e.basis1,n,0,0),(0,u.i)(e.basis2,0,r,0),(0,p.fA)(0,0,1,0,e.plane),e}function j(t,e,n){return!!(0,p.Ui)(t.plane,e,n)&&F(t,n)}function E(t,e,n){const r=C.get();Z(t,e,r,C.get());let o=Number.POSITIVE_INFINITY;for(const s of Q){const a=V(t,s,B.get()),l=b.rq.get();if((0,p.T7)(r,a,l)){const t=(0,u.o)(b.rq.get(),e.origin,l),r=Math.abs((0,i.XM)((0,u.f)(e.direction,t)));r<o&&(o=r,(0,u.c)(n,l))}}return o===Number.POSITIVE_INFINITY?q(t,e,n):n}function S(t,e){return(e-t)/e}function q(t,e,n){if(j(t,e,n))return n;const r=C.get(),i=C.get();Z(t,e,r,i);let o=Number.POSITIVE_INFINITY;for(const s of Q){const a=V(t,s,B.get()),l=b.rq.get();if((0,p.gv)(r,a,l)){const t=(0,f.kb)(e,l);if(!(0,p.Tj)(i,l))continue;t<o&&(o=t,(0,u.c)(n,l))}}return P(t,e.origin)<o&&N(t,e.origin,n),n}function N(t,e,n){const r=(0,p._I)(t.plane,e,b.rq.get()),i=(0,g.H6)(H(t,t.basis1),r,-1,1,b.rq.get()),o=(0,g.H6)(H(t,t.basis2),r,-1,1,b.rq.get());return(0,u.d)(n,(0,u.g)(b.rq.get(),i,o),t.origin),n}function _(t,e,n){const{origin:r,basis1:i,basis2:o}=t,s=(0,u.d)(b.rq.get(),e,r),a=(0,h.gr)(i,s),l=(0,h.gr)(o,s),c=(0,h.gr)(z(t),s);return(0,u.i)(n,a,l,c)}function P(t,e){const n=_(t,e,b.rq.get()),{basis1:r,basis2:i}=t,o=(0,u.l)(r),s=(0,u.l)(i),a=Math.max(Math.abs(n[0])-o,0),l=Math.max(Math.abs(n[1])-s,0),c=n[2];return a*a+l*l+c*c}function R(t,e){return Math.sqrt(P(t,e))}function O(t,e){return(0,p.Tj)(t.plane,e)&&F(t,e)}function L(t,e){const n=-t.plane[3];return(0,h.gr)(z(t),e)-n}function T(t,e,n){return t!==n&&I(t,n),(0,s.B8)(G,e),(0,s.mg)(G,G),(0,u.t)(n.basis1,t.basis1,G),(0,u.t)(n.basis2,t.basis2,G),(0,u.t)((0,p.Qj)(n.plane),(0,p.Qj)(t.plane),G),(0,u.t)(n.origin,t.origin,e),(0,p.mP)(n.plane,n.plane,n.origin),n}function U(t,e,n,r){return t!==r&&I(t,r),(0,s.$0)(Y,e,n),(0,u.t)(r.basis1,t.basis1,Y),(0,u.t)(r.basis2,t.basis2,Y),A(r),r}function z(t){return(0,p.Qj)(t.plane)}function F(t,e){const n=(0,u.d)(b.rq.get(),e,t.origin),r=(0,u.k)(t.basis1),i=(0,u.k)(t.basis2),o=(0,u.f)(t.basis1,n),s=(0,u.f)(t.basis2,n);return-o-r<0&&o-r<0&&-s-i<0&&s-i<0}function H(t,e){const n=B.get();return(0,u.c)(n.origin,t.origin),(0,u.c)(n.vector,e),n}function V(t,e,n){const{basis1:r,basis2:i,origin:o}=t,s=(0,u.h)(b.rq.get(),r,e.origin[0]),a=(0,u.h)(b.rq.get(),i,e.origin[1]);(0,u.g)(n.origin,s,a),(0,u.g)(n.origin,n.origin,o);const l=(0,u.h)(b.rq.get(),r,e.direction[0]),c=(0,u.h)(b.rq.get(),i,e.direction[1]);return(0,u.h)(n.vector,(0,u.g)(l,l,c),2),n}function Z(t,e,n,r){const i=z(t);(0,p.mR)(i,e.direction,e.origin,n),(0,p.mR)((0,p.Qj)(n),i,e.origin,r)}const $={plane:(0,p.vt)(),origin:(0,l.fA)(0,0,0),basis1:(0,l.fA)(1,0,0),basis2:(0,l.fA)(0,1,0)},C=new o.I(p.vt),B=new o.I(g.vt),k=(0,l.vt)(),D=new o.I((()=>m())),Q=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],G=(0,a.vt)(),Y=(0,a.vt)(),J=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:y,altitudeAt:L,axisAt:function(t,e,n,r){return function(t,e,n){switch(e){case d._.X:(0,u.c)(n,t.basis1),(0,u.n)(n,n);break;case d._.Y:(0,u.c)(n,t.basis2),(0,u.n)(n,n);break;case d._.Z:(0,u.c)(n,z(t))}return n}(t,n,r)},cameraFrustumCoverage:S,closestPoint:q,closestPointOnSilhouette:E,copy:I,copyWithoutVerify:function(t,e){(0,u.c)(e.origin,t.origin),(0,u.c)(e.basis1,t.basis1),(0,u.c)(e.basis2,t.basis2),(0,p.C)(e.plane,t.plane)},create:m,distance:R,distance2:P,distanceToSilhouette:function(t,e){let n=Number.NEGATIVE_INFINITY;for(const r of Q){const i=V(t,r,B.get()),o=(0,g.kb)(i,e);o>n&&(n=o)}return Math.sqrt(n)},elevate:w,equals:function(t,e){return(0,u.p)(t.basis1,e.basis1)&&(0,u.p)(t.basis2,e.basis2)&&(0,u.p)(t.origin,e.origin)},extrusionContainsPoint:O,fromAABoundingRect:M,fromValues:x,getExtent:function(t,e){const n=t.basis1[0],r=t.basis2[1],[i,o]=t.origin;return(0,c.fA)(i-n,o-r,i+n,o+r,e)},intersectRay:j,intersectRayClosestSilhouette:function(t,e,n){if(j(t,e,n))return n;const r=E(t,e,b.rq.get());return(0,u.g)(n,e.origin,(0,u.h)(b.rq.get(),e.direction,(0,u.j)(e.origin,r)/(0,u.l)(e.direction))),n},normal:z,projectPoint:N,projectPointLocal:_,rotate:U,setAltitudeAt:function(t,e,n,r){const i=L(t,e),o=(0,u.h)(k,z(t),n-i);return(0,u.g)(r,e,o),r},setExtent:function(t,e,n){return M(e,n),w(n,L(t,t.origin),n),n},transform:T,up:$,updateUnboundedPlane:A,wrap:function(t,e,n){const r=D.get();return r.origin=t,r.basis1=e,r.basis2=n,r.plane=(0,p.LV)(0,0,0,0),A(r),r}},Symbol.toStringTag,{value:"Module"}))},27464:(t,e,n)=>{n.d(e,{$I:()=>l,Q5:()=>u,hH:()=>c,i3:()=>a});var r=n(89227),i=n(28473),o=n(25071),s=n(92453);function a(t){return null!=t?.dist}function u(t){return(e,n,i)=>((0,r.m)(d,e,n,i),!(0,o.e)(t,d))}function l(t){return a(t)&&t.intersector===s.dz.OBJECT&&!!t.target}function c(t){return a(t)&&t.intersector===s.dz.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center}const d=(0,i.vt)()},38432:(t,e,n)=>{n.d(e,{A:()=>p});var r=n(93800),i=n(6946),o=n(62631),s=n(85715),a=n(93633),u=n(19455),l=n(48602),c=(n(21265),n(50925),n(75269));let d=0,g=class extends(u.A.JSONSupportMixin(s.A.ClonableMixin(a.A.IdentifiableMixin(i.default)))){constructor(t){super(t),this.id=`${Date.now().toString(16)}-analysis-${d++}`,this.title=null}get parent(){return this._get("parent")}set parent(t){const e=this.parent;if(null!=e)switch(e.type){case"line-of-sight":case"dimension":case"viewshed":e.releaseAnalysis(this);break;case"2d":case"3d":e.analyses.includes(this)&&e.analyses.remove(this)}this._set("parent",t)}get isEditable(){return this.requiredPropertiesForEditing.every(o.Ru)}};(0,r._)([(0,l.MZ)({type:String,constructOnly:!0,clonable:!1})],g.prototype,"id",void 0),(0,r._)([(0,l.MZ)({type:String})],g.prototype,"title",void 0),(0,r._)([(0,l.MZ)({clonable:!1,value:null})],g.prototype,"parent",null),(0,r._)([(0,l.MZ)({readOnly:!0})],g.prototype,"isEditable",null),g=(0,r._)([(0,c.$)("esri.analysis.Analysis")],g);const p=g},41317:(t,e,n)=>{n.d(e,{$7:()=>j,B:()=>M,Fo:()=>x,M7:()=>q,NN:()=>g,Q5:()=>A,Tq:()=>_,Up:()=>w,XF:()=>S,Ze:()=>v,bK:()=>a,bh:()=>d,id:()=>y,ky:()=>c,qt:()=>N,tW:()=>E,v9:()=>p,w7:()=>u,wF:()=>s,wS:()=>m,wz:()=>h,x:()=>f,xS:()=>I,ze:()=>l});var r=n(84190),i=n(34308);function o(t){return t?N:_}function s(t,e){return e?.mode?e.mode:o(t).mode}function a(t,e){return null!=e?e:o(t)}function u(t,e){return s(null==t||(t.hasZ??!1),e)}function l(t,e){return a(null==t||(t.hasZ??!1),e)}function c(t){const e=b(t);return u(t.geometry,e)}function d(t){const e=b(t),n=u(t.geometry,e),r=null!=e&&"on-the-ground"!==n?q(e):0,i=e?.featureExpressionInfo;return{mode:n,offset:r,featureExpressionInfo:i}}function g(t){return h(d(t))}function p(t){return h(t)||f(t)}function f(t){return"0"===t?.featureExpressionInfo?.expression}function h(t){if(!t)return!1;if("on-the-ground"===t.mode)return!1;const e=t?.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||"0"===e)}function b(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function v(t,e){if(!t?.offset)return 0;const{offset:n,unit:i}=t;if("decimal-degrees"===i)return 0;const o="unknown"!==i&&i?i:"meters",s=(0,r.mq)(e);return s?(0,r.oU)(n,o,s):0}function y(t,e,n){if(!n?.mode)return;const r=t.hasZ?t.z:0,i=v(n,t.spatialReference);switch(n.mode){case"absolute-height":return r-i;case"on-the-ground":return 0;case"relative-to-ground":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"ground")??0)+i);case"relative-to-scene":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"scene")??0)+i)}}function m(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return x(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,n,r)}function I(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return x(t,e[0],e[1],e.length>2?e[2]:0,n,r,i)}function x(t,e,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==o)return;const a=null!=s?s.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:u}=A(e,n,r,i,t,o);return function(t,e,n,r,i,o,s,a){const u=v(s,i);switch(a){case"absolute-height":return t-u;case"relative-to-ground":return t-((o.elevationProvider.getElevation(e,n,r,i,"ground")??0)+u);case"relative-to-scene":return t-((o.elevationProvider.getElevation(e,n,r,i,"scene")??0)+u)}}(u,e,n,r,i,t,s,a)}function A(t,e,n,r,i,o){const s=v(o,r);switch(o.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":{const n=i.elevationProvider.getElevation(t,e,0,r,"ground")??0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{const o=i.elevationProvider.getElevation(t,e,n,r,"ground")??0;return{absoluteZ:n+o+s,elevation:o}}case"relative-to-scene":{const o=i.elevationProvider.getElevation(t,e,n,r,"scene")??0;return{absoluteZ:n+o+s,elevation:o}}}}function w(t,e){if(null==e)return!1;const{mode:n}=e;return null!=n&&("scene"===t&&"relative-to-scene"===n||"ground"===t&&"absolute-height"!==n)}function M(t,e,n){return n&&n.mode!==e?`${t} only support ${e} elevation mode`:null}function j(t,e,n){return n?.mode===e?`${t} do not support ${e} elevation mode`:null}function E(t,e){return null!=e?.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression?`${t} do not support featureExpressionInfo`:null}function S(t,e){e&&t.warn(".elevationInfo=",e)}function q(t){return(t?.offset??0)*(0,i.Ao)(t?.unit)}const N={mode:"absolute-height",offset:0},_={mode:"on-the-ground",offset:null}},46316:(t,e,n)=>{n.d(e,{N1:()=>c,uY:()=>d,wY:()=>l,xH:()=>u});var r=n(89227),i=n(28473),o=n(91102),s=n(92453),a=n(54407);function u(t,e){return l(t)===l(e)}function l(t){if(null==t)return null;const e=null!=t.layer?t.layer.id:"";let n=null;return n=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==n?null:`o-${e}-${n}`}const c={json:{write:{writer:function(t,e){null!=t?.layer?.objectIdField&&null!=t.attributes&&(e.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String],isRequired:!0},"feature.objectId":{type:[Number,String],isRequired:!0}}},origins:{"web-scene":{read:function(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}}}}};function d(t,e,n,u){const{sceneIntersectionHelper:c}=t,{observer:d,observerFeatureId:p,targetFeatureId:b,target:v}=n;if(null==p&&null==b)return;u||(u=t=>t),(0,r.a)(h,d,v);const y=(0,r.l)(h);(0,r.b)(h,d,h,1/y);const m=(0,o.Cr)(h,v,f);e.options.store=s.oH.ALL,c.intersectToolIntersectorRay(m,e);let I=null,x=null,A=null,w=null;for(const r of e.results.all){const e=(0,a.Gy)(r,t);if(null==e||null==r.distanceInRenderSpace)continue;const n=l(e);null!=n&&(null!=p&&n===p&&(I??=u(g(r,t,y)),r.distanceInRenderSpace-1<I&&(A=r)),null!=b&&n===b&&(x??=u(g(r,t,y)),null==w&&r.distanceInRenderSpace-1<y&&y-r.distanceInRenderSpace+1<x&&(w=r)))}const{observerAdjusted:M,targetAdjusted:j}=n;A?.getIntersectionPoint(M)?n.observerSurfaceNormal=A.getTransformedNormal((0,i.vt)()):n.observerSurfaceNormal=null,w?.getIntersectionPoint(j)?n.targetSurfaceNormal=w.getTransformedNormal((0,i.vt)()):n.targetSurfaceNormal=null}function g(t,e,n){if((0,a.QS)(t)){const r=(0,a.SM)(t,e);if(null!=r)return Math.min(r*p,n)}return 1e-5*n}const p=.05,f=(0,o.vt)(),h=(0,i.vt)()},46751:(t,e,n)=>{n.d(e,{P:()=>p});var r=n(74719),i=n(99521),o=n(10876),s=n(43103),a=n(12130),u=n(54391),l=n(70605),c=n(48602),d=n(24589),g=n(85042);function p(t){const e=t?.origins??[void 0];return(n,r)=>{const i=function(t,e,n){if("resource"===t?.type)return function(t,e,n){const r=(0,u.z4)(e,n);return{type:String,read:(t,e,n)=>{const i=(0,g.r)(t,e,n);return r.type===String?i:"function"==typeof r.type?new r.type({url:i}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(e,i,a,u){if(!u?.resources)return"string"==typeof e?void(i[a]=(0,g.t)(e,u)):void(i[a]=e.write({},u));const c=function(t){return null==t?null:"string"==typeof t?t:t.url}(e),p=(0,g.t)(c,{...u,verifyItemRelativeUrls:u?.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},g.M.NO),v=r.type!==String&&(!(0,o.H)(this)||u?.origin&&this.originIdOf(n)>(0,l.aB)(u.origin)),y={object:this,propertyName:n,value:e,targetUrl:p,dest:i,targetPropertyName:a,context:u,params:t};u?.portalItem&&p&&!(0,s.isAbsolute)(p)?v&&t?.contentAddressed?f(y):v?function(t){const{context:e,targetUrl:n,params:r,value:i,dest:o,targetPropertyName:a}=t;if(!e.portalItem)return;const u=e.portalItem.resourceFromPath(n),l=b(i,n,e),c=(0,d.n)(l),g=(0,s.getPathExtension)(u.path),p=r?.compress??!1;c===g?(e.resources&&h({...t,resource:u,content:l,compress:p,updates:e.resources.toUpdate}),o[a]=n):f(t)}(y):function(t){let{context:e,targetUrl:n,dest:r,targetPropertyName:i}=t;e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(n),compress:!1}),r[i]=n)}(y):u?.portalItem&&(null==p||null!=(0,g.i)(p)||(0,s.isBlobProtocol)(p)||v)?f(y):i[a]=p}}}}(t,e,n);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:e}=g.b;return{read:t,write:e}}}}(t,n,r);for(const t of e){const e=(0,c.rM)(n,t,r);for(const t in i)e[t]=i[t]}}}function f(t){const{targetUrl:e,params:n,value:o,context:u,dest:l,targetPropertyName:c}=t;if(!u.portalItem)return;const p=(0,g.p)(e),f=b(o,e,u);if(n?.contentAddressed&&"json"!==f.type)return void u.messages?.push(new r.default("persistable:contentAddressingUnsupported",`Property "${c}" is trying to serializing a resource with content of type ${f.type} with content addressing. Content addressing is only supported for json resources.`,{content:f}));const v=n?.contentAddressed&&"json"===f.type?(0,i.d)(f.jsonString):p?.filename??(0,a.lk)(),y=(0,s.join)(n?.prefix??p?.prefix,v),m=`${y}.${(0,d.n)(f)}`;if(n?.contentAddressed&&u.resources&&"json"===f.type){const t=u.resources.toKeep.find((t=>{let{resource:e}=t;return e.path===m}))??u.resources.toAdd.find((t=>{let{resource:e}=t;return e.path===m}));if(t)return void(l[c]=t.resource.itemRelativeUrl)}const I=u.portalItem.resourceFromPath(m);(0,s.isBlobProtocol)(e)&&u.resources&&u.resources.pendingOperations.push((0,s.blobUrlToBlob)(e).then((t=>{I.path=`${y}.${(0,d.n)({type:"blob",blob:t})}`,l[c]=I.itemRelativeUrl})).catch((()=>{})));const x=n?.compress??!1;u.resources&&h({...t,resource:I,content:f,compress:x,updates:u.resources.toAdd}),l[c]=I.itemRelativeUrl}function h(t){let{object:e,propertyName:n,updates:r,resource:i,content:o,compress:s}=t;r.push({resource:i,content:o,compress:s,finish:t=>{!function(t,e,n){"string"==typeof t[e]?t[e]=n.url:t[e].url=n.url}(e,n,t)}})}function b(t,e,n){return"string"==typeof t?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(n))}}},54232:(t,e,n)=>{n.d(e,{DC:()=>s,MQ:()=>a,mi:()=>u});var r=n(92453),i=n(15828),o=n(27464);function s(t){return(0,o.i3)(t)&&t.intersector===r.dz.TERRAIN&&!!t.target}class a extends i.R6{constructor(t,e,n){super(t,e),this.triangleNr=n}}function u(t){return(0,o.i3)(t)&&t.intersector===r.dz.OVERLAY&&!!t.target}},54407:(t,e,n)=>{n.d(e,{FI:()=>p,FV:()=>d,Gy:()=>g,QS:()=>v,SM:()=>b});var r=n(87752),i=n(28473),o=n(4309),s=n(89476),a=n(10323),u=n(54232),l=n(27464),c=n(99855);function d(t,e){return(0,l.$I)(t)||(0,l.hH)(t)?h(t.target?.object,e):(0,u.DC)(t)?e.map?.ground:(0,a.rb)(t)||(0,a.db)(t)||(0,u.mi)(t)||(0,a.Q5)(t)?h(t.target,e):null}function g(t,e){const n=p(t,e);return null!=n&&"graphic"===n.type?n.graphic:null}function p(t,e){if(null==t)return null;if((0,l.$I)(t)||(0,l.hH)(t))return f(t.target?.object,e);if((0,a.rb)(t)){const e=t.target.createGraphic();return{type:"graphic",graphic:e,layer:e.layer}}if((0,a.Q5)(t)){const e=t.target.createVoxelGraphic();return{type:"graphic",graphic:e,layer:e.layer}}if((0,a.W3)(t)){const e=t.target.createTiles3DGraphic();return{type:"graphic",graphic:e,layer:e.layer}}return(0,u.mi)(t)||(0,c.H)(t)?f(t.target,e):(0,a.db)(t)?function(t,e){const n=h(t,e);if(null==n)return null;const r=e.allLayerViews.find((t=>t.layer===n));return r&&!r.suspended&&"getGraphicFromIntersectorTarget"in r?function(t){return null!=t?{type:"graphic",graphic:t,layer:t.layer}:null}(r.getGraphicFromIntersectorTarget(t)):null}(t.target,e):null}function f(t,e){if(null==t?.graphicUid)return null;const n=h(t,e);if(null==n)return null;if(n===e.graphics)return null==e.graphicsView||"number"!=typeof t.graphicUid?null:e.graphicsView.getHit(t.graphicUid);const r=e.allLayerViews.find((t=>t.layer===n));return!r||r.suspended||null==t.graphicUid?null:"getHit"in r?r.getHit(t.graphicUid):null}function h(t,e){return null==t?.layerUid?null:null!=e.graphicsView&&t.layerUid===e.graphicsView.processor.layer.id?e.graphics:e.map.allLayers.find((e=>e.uid===t.layerUid))}function b(t,e){if((0,l.$I)(t)||(0,l.hH)(t))return(0,s.g)(t.target.object.boundingVolumeWorldSpace.bounds);if((0,c.H)(t)){(0,r.IL)(y,t.transformation);const e=Math.max(y[0],y[1],y[2]);return t.target.baseBoundingSphere.radius*e}if((0,a.db)(t)){const n=function(t,e){const n=h(t,e);if(null==n)return null;const r=e.allLayerViews.find((t=>t.layer===n));return r&&!r.suspended&&"getAABBFromIntersectorTarget"in r?r.getAABBFromIntersectorTarget(t):null}(t.target,e);return n?.5*(0,o._F)(n):null}return null}function v(t){return!(0,l.$I)(t)&&!(0,l.hH)(t)&&((0,c.H)(t)?t.target.numLodLevels>1:!!(0,a.db)(t))}const y=(0,i.vt)()},64880:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var r=n(93800),i=n(46316),o=n(6946),s=n(85715),a=n(19455),u=n(17741),l=n(48602),c=(n(21265),n(50925),n(14746),n(75269)),d=n(46751),g=n(75400),p=n(87730);let f=class extends(a.A.JSONSupportMixin(s.A.ClonableMixin(o.default))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,u.CM)(this.position,t.position)&&(0,u.CM)(this.elevationInfo,t.elevationInfo)&&(0,i.xH)(this.feature,t.feature)}};(0,r._)([(0,l.MZ)({type:g.default,json:{write:{isRequired:!0}}})],f.prototype,"position",void 0),(0,r._)([(0,l.MZ)({type:p.A}),(0,d.P)()],f.prototype,"elevationInfo",void 0),(0,r._)([(0,l.MZ)(i.N1)],f.prototype,"feature",void 0),f=(0,r._)([(0,c.$)("esri.analysis.LineOfSightAnalysisObserver")],f);const h=f},73043:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var r=n(93800),i=n(46316),o=n(85715),s=n(19455),a=n(17741),u=n(48602),l=(n(21265),n(50925),n(14746),n(75269)),c=n(46751),d=n(75400),g=n(87730);let p=class extends(s.A.JSONSupportMixin(o.A)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,a.CM)(this.position,t.position)&&(0,a.CM)(this.elevationInfo,t.elevationInfo)&&(0,i.xH)(this.feature,t.feature)}};(0,r._)([(0,u.MZ)({type:d.default,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),(0,c.P)()],p.prototype,"position",void 0),(0,r._)([(0,u.MZ)({type:g.A}),(0,c.P)()],p.prototype,"elevationInfo",void 0),(0,r._)([(0,u.MZ)(i.N1)],p.prototype,"feature",void 0),p=(0,r._)([(0,l.$)("esri.analysis.LineOfSightAnalysisTarget")],p);const f=p},92453:(t,e,n)=>{var r,i;n.d(e,{H6:()=>o,dz:()=>r,oH:()=>i}),function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL",t[t.TILES3D=8]="TILES3D"}(r||(r={}));class o{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}!function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"}(i||(i={}))},99855:(t,e,n)=>{n.d(e,{H:()=>a,h:()=>s});var r=n(92453),i=n(15828),o=n(27464);class s extends i.R6{constructor(t,e,n,r,i){super(t,e),this.layerUid=t,this.graphicUid=e,this.triangleNr=n,this.baseBoundingSphere=r,this.numLodLevels=i}}function a(t){return(0,o.i3)(t)&&t.intersector===r.dz.LOD&&!!t.target}}}]);