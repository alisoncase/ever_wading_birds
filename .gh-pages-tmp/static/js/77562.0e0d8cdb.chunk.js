"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[2020,77562,79538,81060],{2020:(e,t,n)=>{n.r(t),n.d(t,{cloneScheme:()=>b,getSchemes:()=>g,getThemes:()=>y});var o=n(88102),a=n(28245),r=n(42648);const i=[128,128,128,1],c=[128,128,128,1],s="4px",l="40px",m={primary:{color:[227,139,79,1],noDataColor:i,outline:{color:[255,255,255,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:s,maxSize:l,opacity:.8},secondary:[{color:[128,128,128,1],noDataColor:i,outline:{color:[255,255,255,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:s,maxSize:l,opacity:.8},{color:[255,255,255,1],noDataColor:i,outline:{color:[128,128,128,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:s,maxSize:l,opacity:.8}]},u={primary:{color:[227,139,79,1],noDataColor:c,outline:{color:[92,92,92,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:s,maxSize:l,opacity:.8},secondary:[{color:[178,178,178,1],noDataColor:c,outline:{color:[92,92,92,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:s,maxSize:l,opacity:.8},{color:[26,26,26,1],noDataColor:c,outline:{color:[128,128,128,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:s,maxSize:l,opacity:.8}]},d=[0,0,0,0],p={color:d,outline:{color:[166,166,166,.25],width:"1px"}},h={color:d,outline:{color:[153,153,153,.25],width:"1px"}},f=(0,a.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features by varying their size to show data.",schemes:{point:{light:m,dark:u},polyline:{light:{primary:{color:[226,119,40,1],noDataColor:i,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},secondary:[{color:[77,77,77,1],noDataColor:i,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},{color:[153,153,153,1],noDataColor:i,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"}]},dark:{primary:{color:[226,119,40,1],noDataColor:c,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},secondary:[{color:[255,255,255,1],noDataColor:c,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},{color:[153,153,153,1],noDataColor:c,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"}]}},polygon:{light:{primary:{marker:m.primary,background:h,opacity:m.primary.opacity},secondary:[{marker:m.secondary[0],background:h,opacity:m.secondary[0].opacity},{marker:m.secondary[1],background:h,opacity:m.secondary[1].opacity}]},dark:{primary:{marker:u.primary,background:p,opacity:u.primary.opacity},secondary:[{marker:u.secondary[0],background:p,opacity:u.secondary[0].opacity},{marker:u.secondary[1],background:p,opacity:u.secondary[1].opacity}]}}}}}});function y(e){return(0,a.vt)(f,e)}function g(e){if("mesh"===e.geometryType)return null;const t=(0,a.Fq)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:f.get("default")});if(!t)return;const{schemesInfo:n,basemapId:o,basemapTheme:r}=t;return{primaryScheme:w(e,n.primary),secondarySchemes:n.secondary.map((t=>w(e,t))).filter(Boolean),basemapId:o,basemapTheme:r}}function b(e){if(!e)return;const t={...e};return"color"in t&&t.color&&(t.color=new o.default(t.color)),"noDataColor"in t&&t.noDataColor&&(t.noDataColor=new o.default(t.noDataColor)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new o.default(t.outline.color),width:t.outline.width}),"marker"in t&&t.marker&&(t.marker=b(t.marker)),"background"in t&&t.background&&(t.background=b(t.background)),t}function w(e,t){const n="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=t;return x({color:e.color,noDataColor:e.noDataColor,outline:e.outline,size:e.size,noDataSize:e.noDataSize,minSize:e.minSize,maxSize:e.maxSize,opacity:e.opacity||1},n)}case"polyline":{const e=t;return function(e,t){return{color:new o.default(e.color),noDataColor:new o.default(e.noDataColor),width:t?(0,r._J)(e.width,t):e.width,noDataWidth:t?(0,r._J)(e.noDataWidth,t):e.noDataWidth,minWidth:t?(0,r._J)(e.minWidth,t):e.minWidth,maxWidth:t?(0,r._J)(e.maxWidth,t):e.maxWidth,opacity:1}}({color:e.color,noDataColor:e.noDataColor,width:e.width,noDataWidth:e.noDataWidth,minWidth:e.minWidth,maxWidth:e.maxWidth},n)}case"polygon":{const e=t,a=e.marker;return delete a.opacity,function(e,t){const n=x(e.marker,t);return delete n.opacity,{marker:n,background:{color:new o.default(e.background.color),outline:{color:new o.default(e.background.outline.color),width:e.background.outline.width}},opacity:e.opacity}}({marker:a,background:e.background,opacity:e.opacity||1},n)}}}function x(e,t){return{color:new o.default(e.color),noDataColor:new o.default(e.noDataColor),outline:{color:new o.default(e.outline.color),width:e.outline.width},size:t?(0,r._J)(e.size,t):e.size,noDataSize:t?(0,r._J)(e.noDataSize,t):e.noDataSize,minSize:t?(0,r._J)(e.minSize,t):e.minSize,maxSize:t?(0,r._J)(e.maxSize,t):e.maxSize,opacity:e.opacity}}},2925:(e,t,n)=>{n.d(t,{$:()=>D,IB:()=>l,Iy:()=>O,KV:()=>U,N2:()=>S,QP:()=>$,RH:()=>k,Vl:()=>I,Ws:()=>M,ZD:()=>v,_L:()=>B,bJ:()=>q,e$:()=>_,f6:()=>E,hw:()=>F,pW:()=>W,pf:()=>N,rs:()=>C,sn:()=>A,we:()=>Z});var o=n(88102),a=n(62631),r=n(82301),i=n(64682),c=n(60548),s=n(24646);function l(e){return"r"in e&&"g"in e&&"b"in e}function m(e){return"h"in e&&"s"in e&&"v"in e}function u(e){return"l"in e&&"a"in e&&"b"in e}function d(e){return"l"in e&&"c"in e&&"h"in e}const p=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function f(e,t){const n=[];let o,a;if(e[0].length!==t.length)throw new Error("dimensions do not match");const r=e.length,i=e[0].length;let c=0;for(o=0;o<r;o++){for(c=0,a=0;a<i;a++)c+=e[o][a]*t[a];n.push(c)}return n}function y(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),n=f(p,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function g(e){const t=f(h,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function b(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function w(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function x(e){return function(e){const t=e.l,n=e.a,o=e.b,a=Math.sqrt(n*n+o*o);let r=Math.atan2(o,n);return r=r>0?r:r+2*Math.PI,{l:t,c:a,h:r}}(b(y(e)))}function z(e){return g(w(function(e){const t=e.l,n=e.c,o=e.h;return{l:t,a:n*Math.cos(o),b:n*Math.sin(o)}}(e)))}function D(e){return l(e)?e:d(e)?z(e):u(e)?function(e){return g(w(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?g(e):m(e)?function(e){const t=(e.h+360)%360/60,n=e.s/100,o=e.v/100*255,a=o*n,r=a*(1-Math.abs(t%2-1));let i;switch(Math.floor(t)){case 0:i={r:a,g:r,b:0};break;case 1:i={r:r,g:a,b:0};break;case 2:i={r:0,g:a,b:r};break;case 3:i={r:0,g:r,b:a};break;case 4:i={r:r,g:0,b:a};break;case 5:case 6:i={r:a,g:0,b:r};break;default:i={r:0,g:0,b:0}}return i.r=Math.round(i.r+o-a),i.g=Math.round(i.g+o-a),i.b=Math.round(i.b+o-a),i}(e):e}function S(e){return m(e)?e:function(e){const t=e.r,n=e.g,o=e.b,a=Math.max(t,n,o),r=a-Math.min(t,n,o);let i=a,c=0===r?0:a===t?(n-o)/r%6:a===n?(o-t)/r+2:(t-n)/r+4,s=0===r?0:r/i;return c<0&&(c+=6),c*=60,s*=100,i*=100/255,{h:c,s:s,v:i}}(D(e))}function v(e){return u(e)?e:function(e){return b(y(e))}(D(e))}function k(e){return d(e)?e:x(D(e))}function C(e){return T(e).isBright?"light":"dark"}function T(e){let{r:t,g:n,b:a,a:r}=e;return r<1&&(t=Math.round(r*t+255*(1-r)),n=Math.round(r*n+255*(1-r)),a=Math.round(r*a+255*(1-r))),new o.default({r:t,g:n,b:a})}function M(e,t){const{r:n,g:o,b:a}=t?.ignoreAlpha?e:T(e);return.2126*n+.7152*o+.0722*a}var W,J;function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W.High;return M(e,{ignoreAlpha:!0})>t?new o.default([0,0,0,e.a]):new o.default([255,255,255,e.a])}function _(e,t){const n=v(e);n.l*=1-t;const o=D(n),a=e.clone();return a.setColor(o),a.a=e.a,a}function B(e,t){const n=e.clone();return n.a*=t,n}function I(e,t){const n=S(e);n.s*=t;const o=D(n),a=e.clone();return a.setColor(o),a.a=e.a,a}function $(e){return o.default.toUnitRGBA(e)}function F(e,t){return e===t||null!=e&&e.equals(t)}function Z(e,t){return e===t||null!=e&&null!=t&&(0,c.e)(e,t)}function N(e){return(0,s.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function U(e){return e[0]??=0,e[1]??=0,e[2]??=0,e}function A(e){return e.length=4,U(e),e[3]??=1,(0,i.qE)(e[3],0,1),e}function E(e,t){const n=o.default.toUnitRGBA(e);return n[3]*=t,n}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new o.default(e):e))).length||1===t){const n=[],o=e[0];for(let e=0;e<t;e++)n.push(o.clone());return n}if(n.shuffle&&(e=(0,a.k4)((0,r.clone)(e),n.seed)),e.length>=t){const n=[],o=(e.length-1)/(t-1);for(let a=0;a<t;a++){const t=Math.round(a*o);n.push(e[t].clone())}return n}return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=[],r=e.length-1,i=Math.ceil((t-e.length)/r);e:for(let a=0;a<r;a++){const r=e[a],c=e[a+1];for(let a=1;a<=i;a++){const s=a/(i+1);if(o.push(L(r,c,s,n)),o.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,a.k4)(o,n.seed??1)]}(e,t,n)}(J=W||(W={}))[J.Low=160]="Low",J[J.High=225]="High";const G=(e,t)=>{const n=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+n))};function L(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.r,c=e.g,s=e.b,l=t.r,m=t.g,u=t.b,d=Math.round(i+(l-i)*n),p=Math.round(c+(m-c)*n),h=Math.round(s+(u-s)*n);if(!r.offset)return new o.default([d,p,h]);const f=(0,a.Mo)(r.seed);return new o.default([G(d,f),G(p,f),G(h,f)])}},28245:(e,t,n)=>{n.d(t,{bG:()=>i,Ty:()=>s,YJ:()=>l,Fq:()=>m,vt:()=>c});var o=n(82301),a=n(79538);class r{constructor(e){const{name:t,label:n,description:o,schemes:r}=e;this.name=t,this.label=n,this.description=o,this.schemes=r;const i=e.basemapGroups||a.Np;let c=[];Object.keys(i).forEach((e=>{c=c.concat(i[e])})),this.supportedBasemaps=c,this.basemapGroups=i}isBasemapSupported(e){const t=(0,a.T1)(e,this.supportedBasemaps);return!(!t||!this.supportedBasemaps.includes(t))}getRawSchemes(e){const{basemapId:t,basemapTheme:n}=function(e,t,n){let o=null,r=null;if(t&&(o=(0,a.T1)(t,e,!1),o)){const e=(0,a.BV)(o);null!=e&&(r=e)}return!o&&n&&(o="dark"===n?"dark-gray":"gray",r=n),o||r||(o="gray",r="light"),{basemapId:o,basemapTheme:r}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let r=n;if(t){const e=(0,a.BV)(t,this.basemapGroups);null!=e&&(r=e)}let i=e.geometryType;"multipoint"===i?i="point":"mesh"===i&&(i="polygon");const c=this.schemes[i]||this.schemes.default;return{schemesInfo:(0,o.clone)(c[r]),basemapId:t,basemapTheme:n}}}function i(e){const t=e.themeDictionary,n=new Map;for(const o in t){const e=t[o];n.set(o,new r(e))}return n}function c(e,t){const n=[];return e.forEach((e=>{e.isBasemapSupported(t)&&n.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),n}function s(e,t){if(!e)return;if(!t)return;let n=null;const o=[t.primaryScheme,...t.secondarySchemes];for(const a of o)if(a.name?.toLowerCase()===e.toLowerCase()){n=a;break}return n}function l(e,t,n){if(!e&&!t)return[];if(!n)return[];const o=!e?.length,a=!t?.length,r=[n.primaryScheme,...n.secondarySchemes],i=[];for(const c of r){const n=!!o||e.some((e=>c.tags.includes(e))),r=!a&&t.some((e=>c.tags.includes(e)));n&&!r&&i.push(c)}return i}function m(e){const t=e.theme;if(t)return t.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},42648:(e,t,n)=>{n.d(t,{_J:()=>l,_t:()=>s});var o=n(16804),a=n(79538);const r=a.Np.light,i=a.Np.dark;function c(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b}function s(e,t){let n=0;if(e.length===t.length){let o=e.every(((e,n)=>c(e,t[n])));o?n=1:(o=e.slice().reverse().every(((e,n)=>c(e,t[n]))),o&&(n=-1))}return n}function l(e,t){return Math.ceil(function(e){const t=e.width,n=e.height;let a=e.pixelSizeAt(e.toMap((0,o.tc)(.5*t,.5*n),{exclude:[]}));if(a<=0&&(a=e.pixelSizeAt(e.toMap((0,o.tc)(.5*t,.95*n),{exclude:[]})),a<=0&&"camera"in e)){const t=e.camera.position.clone();t.z=0,a=2*e.pixelSizeAt(t)}return a}(t)*(0,o.Lz)((0,o.cr)(e)))}},77562:(e,t,n)=>{n.r(t),n.d(t,{cloneScheme:()=>w,getSchemeByName:()=>g,getSchemes:()=>y,getSchemesByTag:()=>b,getThemes:()=>f});var o=n(88102),a=n(62631),r=n(2925),i=n(2020),c=n(43073),s=n(28245),l=n(42648);const m={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},u="#aaaaaa",d=["tropical-bliss","desert-blooms","under-the-sea","vibrant-rainbow","ocean-bay","prairie-summer","pastel-chalk"],p=["cat-symbols-strong","cat-symbols-autumnal","cat-symbols-bright","cat-symbols-midrange","cat-symbols-subdued","cat-symbols-pastel","cat-symbols-red","cat-symbols-blue","cat-symbols-green","cat-symbols-gray"],h=(0,s.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features by their predominant category.",schemes:{point:{light:{common:{noDataColor:u,outline:m.light,size:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(d)},dark:{common:{noDataColor:u,outline:m.darker,size:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(d)}},polyline:{light:{common:{noDataColor:u,width:"2px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(d)},dark:{common:{noDataColor:u,width:"2px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(d)}},polygon:{light:{common:{noDataColor:u,outline:m.light,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(d)},dark:{common:{noDataColor:u,outline:m.dark,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(d)}}}}}});function f(e){return(0,s.vt)(h,e)}function y(e){const t=(0,s.Fq)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:h.get("default")});if(!t)return;const{schemesInfo:n,basemapId:o,basemapTheme:r}=t,c=n.common,l=(0,i.getSchemes)({basemap:e.basemap,geometryType:e.geometryType,worldScale:e.worldScale,view:e.view}),m=l?.primaryScheme;return{primaryScheme:x(e,n.primary,c,m),secondarySchemes:n.secondary.map((t=>x(e,t,c,m))).filter(a.Ru),basemapId:o,basemapTheme:r}}function g(e){return(0,s.Ty)(e.name,y(e))}function b(e){return(0,s.YJ)(e.includedTags,e.excludedTags,y(e))}function w(e){if(!e)return;const t={...e};return t.colors=t.colors.map((e=>new o.default(e))),t.tags=[...t.tags],t.noDataColor&&(t.noDataColor=new o.default(t.noDataColor)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new o.default(t.outline.color),width:t.outline.width}),"sizeScheme"in t&&t.sizeScheme&&(t.sizeScheme=(0,i.cloneScheme)(t.sizeScheme)),t}function x(e,t,n,a){const i=c.A[t];if(!i)return;const{numColors:s}=e,m=s?i[s]??(0,r.Iy)(i.stops,s):i.stops,u="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=n;return function(e,t){return{name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new o.default(e))),noDataColor:new o.default(e.noDataColor),outline:{color:new o.default(e.outline.color),width:e.outline.width},size:t?(0,l._J)(e.size,t):e.size,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:i.name,tags:i.tags,colors:m,noDataColor:e.noDataColor,opacity:1,sizeScheme:a,outline:e.outline,size:e.size},u)}case"polyline":{const e=n;return function(e,t){return{name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new o.default(e))),noDataColor:new o.default(e.noDataColor),width:t?(0,l._J)(e.width,t):e.width,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:i.name,tags:i.tags,colors:m,noDataColor:e.noDataColor,opacity:1,sizeScheme:a,width:e.width},u)}case"polygon":{const e=n,t=a;return t&&t.marker&&null!=e.markerSize&&(t.marker.size=e.markerSize),function(e,t){const{sizeScheme:n}=e;return n.marker.size=t?(0,l._J)(n.marker.size,t):n.marker.size,{name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new o.default(e))),noDataColor:new o.default(e.noDataColor),outline:{color:new o.default(e.outline.color),width:e.outline.width},sizeScheme:n,opacity:e.opacity}}({name:i.name,tags:i.tags,colors:m,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline,sizeScheme:t},u)}case"mesh":{const e=n;return function(e){return{name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new o.default(e))),noDataColor:new o.default(e.noDataColor),opacity:e.opacity}}({name:i.name,tags:i.tags,colors:m,noDataColor:e.noDataColor,opacity:e.fillOpacity})}default:return}}},79538:(e,t,n)=>{n.d(t,{BV:()=>k,EG:()=>w,Lk:()=>v,Ll:()=>M,Np:()=>m,R3:()=>T,SO:()=>h,T1:()=>C,UH:()=>l,Wy:()=>x,XR:()=>p,aM:()=>S,fs:()=>b,i0:()=>W,i3:()=>g});var o=n(66845),a=n(95011),r=n(96247),i=n(76983),c=n(73210),s=n(40731);const l=",",m={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},u="percent-of-total",d="field",p={exclude:["median"]},h={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},f=new Set(["integer","small-integer"]);let y=null;const g=["date","date-only","timestamp-offset"];function b(e){return(0,a.isDateField)(e)||(0,a.isDateOnlyField)(e)||(0,a.isTimestampOffsetField)(e)}async function w(e){const{field:t,field2:n,field3:o,normalizationField:a,valueExpression:i}=e;let c=[];if(i){if(!y){const{arcadeUtils:e}=await(0,r.lw)();y=e}c=y.extractFieldNames(i)}return t&&c.push(t),n&&c.push(n),o&&c.push(o),a&&c.push(a),c}function x(e){let t=e.normalizationType;return t||(e.normalizationField?t=d:null!=e.normalizationTotal&&(t=u)),t??void 0}function z(e){return String(e).padStart(2,"0")}function D(e,t,n){let o;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),o=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${z((n?e.getMonth():e.getUTCMonth())+1)}-${z(n?e.getDate():e.getUTCDate())} ${z(n?e.getHours():e.getUTCHours())}:${z(n?e.getMinutes():e.getUTCMinutes())}:${z(n?e.getSeconds():e.getUTCSeconds())}'`):o=e,o}function S(e,t,n,o){const{hasQueryEngine:a}=e,r=`(${D(n,v(e,n),a)} - ${D(t,v(e,t),a)})`;let i=h[o],c="/";return i<1&&(i=1/i,c="*"),{sqlExpression:1===i?r:`(${r} ${c} ${i})`,sqlWhere:null}}function v(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,a.isDateField)(n))return"field"}}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;for(const n in t)if(t[n].includes(e))return n}function C(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=null;return e&&("string"==typeof e?t.includes(e)&&(o=e):o=(0,i.q3)(e)),n?o||"gray":o}function T(e,t){const n=t&&e.getField(t);return!!n&&f.has(n.type)}function M(e){return`cast(${e} as float)`}function W(e,t){const{format:n,timeZoneOptions:a,fieldType:r}=t??{};let i,l;if(a&&({timeZone:i,timeZoneName:l}=(0,s.hv)(a.layerTimeZone,a.datesInUnknownTimezone,a.viewTimeZone,(0,o.J2)(n||"short-date-short-time"),r)),"string"==typeof e&&isNaN(Date.parse("time-only"===r?`1970-01-01T${e}Z`:e)))return e;switch(r){case"date-only":{const t=(0,o.J2)(n||"short-date");return"string"==typeof e?(0,o.iS)(e,{...t}):(0,o.Yq)(e,{...t,timeZone:c.n$})}case"time-only":{const t=(0,o.J2)(n||"short-time");return"string"==typeof e?(0,o.F8)(e,t):(0,o.Yq)(e,{...t,timeZone:c.n$})}case"timestamp-offset":{if(!i&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||a?(0,o.J2)(n||"short-date-short-time"):void 0,r=t?{...t,timeZone:i,timeZoneName:l}:void 0;return"string"==typeof e?(0,o.Ey)(e,r):(0,o.Yq)(e,r)}default:{const t=n||a?(0,o.J2)(n||"short-date-short-time"):void 0;return(0,o.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:i,timeZoneName:l}:void 0)}}}}}]);