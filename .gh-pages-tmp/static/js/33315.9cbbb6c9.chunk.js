"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[33315,39960,42717,51413],{39960:(e,a,t)=>{t.d(a,{L:()=>y});var r=t(13248),n=t(23060),i=t(74719),l=t(49959),s=t(65073),o=t(78139),u=t(34587);async function y(e,a){const t=(0,s.qg)(e);if(!t)throw new i.default("invalid-url","Invalid scene service url");const y={...a,sceneServerUrl:t.url.path,layerId:t.sublayer??void 0};if(y.sceneLayerItem??=await async function(e){const a=(await c(e)).serviceItemId;if(!a)return null;const t=new u.default({id:a,apiKey:e.apiKey}),i=await async function(e){const a=r.id?.findServerInfo(e.sceneServerUrl);if(a?.owningSystemUrl)return a.owningSystemUrl;const t=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const a=(await(0,n.default)(t,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(a)return a}catch(f){(0,l.throwIfAbortError)(f)}return null}(e);null!=i&&(t.portal=new o.default({url:i}));try{return await t.load({signal:e.signal})}catch(w){return(0,l.throwIfAbortError)(w),null}}(y),null==y.sceneLayerItem)return d(y.sceneServerUrl.replace("/SceneServer","/FeatureServer"),y);const f=await async function(e){let{sceneLayerItem:a,signal:t}=e;if(!a)return null;try{const e=(await a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:t})).find((e=>"Feature Service"===e.type))||null;if(!e)return null;const r=new u.default({portal:e.portal,id:e.id});return await r.load(),r}catch(r){return(0,l.throwIfAbortError)(r),null}}(y);if(!f?.url)throw new i.default("related-service-not-found","Could not find feature service through portal item relationship");y.featureServiceItem=f;const w=await d(f.url,y);return w.portalItem=f,w}async function c(e){if(e.rootDocument)return e.rootDocument;const a={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const t=await(0,n.default)(e.sceneServerUrl,a);e.rootDocument=t.data}catch{e.rootDocument={}}return e.rootDocument}async function d(e,a){const t=(0,s.qg)(e);if(!t)throw new i.default("invalid-feature-service-url","Invalid feature service url");const r=t.url.path,l=a.layerId;if(null==l)return{serverUrl:r};const o=c(a),u=a.featureServiceItem?await a.featureServiceItem.fetchData("json"):null,y=(u?.layers?.[0]||u?.tables?.[0])?.customParameters,d=e=>{const t={query:{f:"json",...y},responseType:"json",authMode:e,signal:a.signal};return(0,n.default)(r,t)},f=d("anonymous").catch((()=>d("no-prompt"))),[w,h]=await Promise.all([f,o]),b=h?.layers,m=w.data&&w.data.layers;if(!Array.isArray(m))throw new Error("expected layers array");if(Array.isArray(b)){for(let n=0;n<Math.min(b.length,m.length);n++)if(b[n].id===l)return{serverUrl:r,layerId:m[n].id}}else if(null!=l&&l<m.length)return{serverUrl:r,layerId:m[l].id};throw new Error("could not find matching associated sublayer")}},51413:(e,a,t)=>{t.d(a,{K:()=>d,Q:()=>i});var r=t(91706);const n=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function i(e,a){const{loadContext:t,...n}=a||{},i=t?await t.fetchServiceMetadata(e,n):await(0,r.V)(e,n);c(i),o(i);const l={serviceJSON:i};if((i.currentVersion??0)<10.5)return l;const s=`${e}/layers`,u=t?await t.fetchServiceMetadata(s,n):await(0,r.V)(s,n);return c(u),o(u),l.layersJSON={layers:u.layers,tables:u.tables},l}function l(e){const{type:a}=e;return!!a&&n.has(a)}function s(e){return"Table"===e.type}function o(e){e.layers=e.layers?.filter(l),e.tables=e.tables?.filter(s)}function u(e){e.type||="Feature Layer"}function y(e){e.type||="Table"}function c(e){e.layers?.forEach(u),e.tables?.forEach(y)}function d(e){switch(e){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}},90596:(e,a,t)=>{t.d(a,{S:()=>r});const r={BingMapsLayer:async()=>(await t.e(64354).then(t.bind(t,64354))).default,BuildingSceneLayer:async()=>(await Promise.all([t.e(86201),t.e(99717),t.e(69270),t.e(17055),t.e(34787),t.e(97684)]).then(t.bind(t,68199))).default,CSVLayer:async()=>(await t.e(76958).then(t.bind(t,76958))).default,CatalogLayer:async()=>(await Promise.all([t.e(81765),t.e(29071),t.e(68584),t.e(85793),t.e(44486),t.e(73254),t.e(86450)]).then(t.bind(t,86450))).default,DimensionLayer:async()=>(await t.e(68151).then(t.bind(t,68151))).default,ElevationLayer:async()=>(await t.e(52622).then(t.bind(t,52622))).default,FeatureLayer:async()=>(await Promise.resolve().then(t.bind(t,77969))).default,GeoJSONLayer:async()=>(await t.e(44317).then(t.bind(t,44317))).default,GeoRSSLayer:async()=>(await t.e(89644).then(t.bind(t,89644))).default,GroupLayer:async()=>(await Promise.all([t.e(63638),t.e(51413)]).then(t.bind(t,63638))).default,ImageryLayer:async()=>(await Promise.all([t.e(29071),t.e(21543),t.e(78496),t.e(31640),t.e(45643),t.e(46768),t.e(95856),t.e(61682),t.e(98701),t.e(68127)]).then(t.bind(t,86482))).default,ImageryTileLayer:async()=>(await Promise.all([t.e(21543),t.e(78496),t.e(31640),t.e(45643),t.e(46768),t.e(90801),t.e(95856),t.e(65231),t.e(33622),t.e(32203),t.e(11493)]).then(t.bind(t,32203))).default,IntegratedMesh3DTilesLayer:async()=>(await t.e(10743).then(t.bind(t,10743))).default,IntegratedMeshLayer:async()=>(await Promise.all([t.e(34787),t.e(93461)]).then(t.bind(t,32993))).default,KMLLayer:async()=>(await t.e(42303).then(t.bind(t,42303))).default,KnowledgeGraphLayer:async()=>(await Promise.all([t.e(81765),t.e(68584),t.e(75106),t.e(60897),t.e(13791),t.e(99055),t.e(59858),t.e(51107),t.e(38394),t.e(91411),t.e(21761),t.e(63337)]).then(t.bind(t,63337))).default,LineOfSightLayer:async()=>(await Promise.all([t.e(86201),t.e(86328),t.e(49715)]).then(t.bind(t,49715))).default,LinkChartLayer:async()=>(await Promise.all([t.e(81765),t.e(68584),t.e(75106),t.e(60897),t.e(13791),t.e(99055),t.e(59858),t.e(51107),t.e(38394),t.e(91411),t.e(21761),t.e(88211)]).then(t.bind(t,88211))).default,MapImageLayer:async()=>(await Promise.all([t.e(81765),t.e(29071),t.e(85793),t.e(3509),t.e(56036)]).then(t.bind(t,56036))).default,MapNotesLayer:async()=>(await t.e(45180).then(t.bind(t,45180))).default,MediaLayer:async()=>(await Promise.all([t.e(45641),t.e(73414)]).then(t.bind(t,65207))).default,OGCFeatureLayer:async()=>(await Promise.all([t.e(81765),t.e(59661),t.e(4052)]).then(t.bind(t,94430))).default,OpenStreetMapLayer:async()=>(await t.e(60678).then(t.bind(t,60678))).default,OrientedImageryLayer:async()=>(await t.e(88455).then(t.bind(t,88455))).default,PointCloudLayer:async()=>(await Promise.all([t.e(34787),t.e(51669)]).then(t.bind(t,88513))).default,RouteLayer:async()=>(await Promise.all([t.e(92744),t.e(6569),t.e(48028)]).then(t.bind(t,48028))).default,SceneLayer:async()=>(await Promise.all([t.e(86201),t.e(99717),t.e(69270),t.e(34787),t.e(14854)]).then(t.bind(t,75918))).default,StreamLayer:async()=>(await t.e(33148).then(t.bind(t,33148))).default,SubtypeGroupLayer:async()=>(await t.e(86366).then(t.bind(t,86366))).default,TileLayer:async()=>(await Promise.all([t.e(81765),t.e(29071),t.e(85793),t.e(3509),t.e(14281)]).then(t.bind(t,14281))).default,UnknownLayer:async()=>(await t.e(57049).then(t.bind(t,57049))).default,UnsupportedLayer:async()=>(await t.e(34202).then(t.bind(t,34202))).default,VectorTileLayer:async()=>(await Promise.all([t.e(22210),t.e(83901)]).then(t.bind(t,78334))).default,VideoLayer:async()=>(await Promise.all([t.e(8582),t.e(25385)]).then(t.bind(t,51817))).default,ViewshedLayer:async()=>(await Promise.all([t.e(86201),t.e(7848)]).then(t.bind(t,11432))).default,VoxelLayer:async()=>(await Promise.all([t.e(34787),t.e(35754)]).then(t.bind(t,22732))).default,WCSLayer:async()=>(await Promise.all([t.e(21543),t.e(78496),t.e(31640),t.e(45643),t.e(46768),t.e(90801),t.e(95856),t.e(65231),t.e(33622),t.e(1072),t.e(32887)]).then(t.bind(t,32887))).default,WFSLayer:async()=>(await Promise.all([t.e(7641),t.e(52147)]).then(t.bind(t,23185))).default,WMSLayer:async()=>(await t.e(62163).then(t.bind(t,62163))).default,WMTSLayer:async()=>(await t.e(56569).then(t.bind(t,56569))).default,WebTileLayer:async()=>(await t.e(39917).then(t.bind(t,39917))).default}},91706:(e,a,t)=>{t.d(a,{V:()=>n});var r=t(23060);async function n(e,a){const{data:t}=await(0,r.default)(e,{responseType:"json",query:{f:"json",...a?.customParameters,token:a?.apiKey}});return t}}}]);