"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[13373,17577],{5572:(e,t,o)=>{o.d(t,{A:()=>p});var a=o(93800),i=o(6946),r=o(48602),n=(o(21265),o(50925),o(14746),o(75269));let s=class extends i.default{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"area",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"coordinates",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"direction",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"distance",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"elevation",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"header",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"helpMessage",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"orientation",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"radius",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"rotation",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"scale",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"size",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"totalLength",void 0),s=(0,a._)([(0,n.$)("esri.views.interactive.sketch.SketchTooltipVisibleElements")],s);const p=s},12759:(e,t,o)=>{o.d(t,{c:()=>i,d:()=>a});var a;o(21265);function i(e){switch(e){case a.SUPPORTED:break;case a.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case a.GEOMETRY_MISSING:return"no geometry";case a.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case a.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case a.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}!function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"}(a||(a={}))},13373:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var a=o(93800),i=o(6946),r=o(48602),n=(o(21265),o(50925),o(14746),o(75269));let s=class extends i.default{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};(0,a._)([(0,r.MZ)({type:String,nonNullable:!0})],s.prototype,"mode",void 0),s=(0,a._)([(0,n.$)("esri.views.interactive.sketch.SketchTooltipElevationOptions")],s);var p=o(5572);let l=class extends i.default{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new s,this.placement="auto",this.offset=null,this.visibleElements=new p.A,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"enabled",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"forceEnabled",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"effectiveEnabled",null),(0,a._)([(0,r.MZ)()],l.prototype,"helpMessage",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"helpMessageIcon",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"inputEnabled",void 0),(0,a._)([(0,r.MZ)({type:s,nonNullable:!0})],l.prototype,"elevation",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"placement",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"offset",void 0),(0,a._)([(0,r.MZ)({type:p.A,nonNullable:!0})],l.prototype,"visibleElements",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"visualVariables",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"xyMode",void 0),l=(0,a._)([(0,n.$)("esri.views.interactive.sketch.SketchTooltipOptions")],l);const h=l},17577:(e,t,o)=>{o.r(t),o.d(t,{default:()=>se});var a=o(93800),i=o(89129),r=o(74719),n=o(58448),s=o(42198),p=(o(21265),o(50925)),l=o(17741),h=o(49959),d=o(79953),c=o(48602),u=(o(14746),o(75269)),y=o(15492),v=o(30142),g=o(96913),m=o(53053),_=o(70576),f=o(70674),b=o(78076),E=o(46144),w=o(39677),M=o(92744),O=o(99071),G=o(83031),T=o(38602),S=o(12759),A=o(55770),P=o(41317);function R(e){return function(e){if(e.graphic&&"graphics"!==e.graphic.layer?.type)return{result:S.d.GRAPHICS_LAYER_MISSING};if(!e.operations)return{result:S.d.GEOMETRY_MISSING};if((0,P.wz)(e.elevationInfo))return{result:S.d.ELEVATION_MODE_UNSUPPORTED};const t=e.operations.data.type,o=e.operations.data.geometry;return"point"===t||"mesh"===t||"polyline"===t||"polygon"===t?{result:S.d.SUPPORTED,geometry:o}:{result:S.d.GEOMETRY_TYPE_UNSUPPORTED}}(e).result}var C=o(22093),k=o(51232),I=o(4542),D=o(64053),H=o(91690),U=o(13373),Z=o(98258),N=o(62791),x=o(35130),L=o(37229),V=o(54404),Y=o(53605),F=o(7951);let j=class extends n.A.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:(0,F.Xb)(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())}set undo(e){this._set("undo",(()=>{this.canUndo()&&e()}))}set redo(e){this._set("redo",(()=>{this.canRedo()&&e()}))}};(0,a._)([(0,c.MZ)()],j.prototype,"activeComponent",void 0),(0,a._)([(0,c.MZ)()],j.prototype,"cancelled",void 0),(0,a._)([(0,c.MZ)()],j.prototype,"history",void 0),(0,a._)([(0,c.MZ)()],j.prototype,"tool",null),(0,a._)([(0,c.MZ)()],j.prototype,"type",void 0),(0,a._)([(0,c.MZ)()],j.prototype,"canUndo",null),(0,a._)([(0,c.MZ)()],j.prototype,"canRedo",null),(0,a._)([(0,c.MZ)()],j.prototype,"onEnd",void 0),(0,a._)([(0,c.MZ)()],j.prototype,"undo",null),(0,a._)([(0,c.MZ)()],j.prototype,"redo",null),(0,a._)([(0,c.MZ)()],j.prototype,"toggleTool",void 0),(0,a._)([(0,c.MZ)()],j.prototype,"addToSelection",void 0),(0,a._)([(0,c.MZ)()],j.prototype,"removeFromSelection",void 0),j=(0,a._)([(0,u.$)("esri.widgets.Sketch.support.OperationHandle")],j);let B=class extends j{};(0,a._)([(0,c.MZ)()],B.prototype,"activeComponent",void 0),B=(0,a._)([(0,u.$)("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],B);let K=class extends j{};(0,a._)([(0,c.MZ)()],K.prototype,"activeComponent",void 0),K=(0,a._)([(0,u.$)("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],K);var W=o(42265);const q={defaultZ:0},$={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let z=class extends n.A.EventedAccessor{constructor(e){super(e),this._defaultSnappingManager=null,this._updatingHandles=new y.U,this._internalGraphicsLayer=new f.default({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new G.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new M.default({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new O.default({color:[130,130,130,1],width:2}),this.meshSymbol=new w.default({symbolLayers:new i.default([new E.default])}),this.updateGraphics=new i.default,this.updateOnGraphicClick=!0,this.creationMode="single",this.vertexSymbol=new G.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new H.A,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._sketchContinuationFlag=!1,this._originalPopupEnabled=null,this.defaultCreateOptions=q,this.defaultUpdateOptions=$,this.snappingOptions=e?.snappingManager?.options??e?.snappingOptions??new x.default}initialize(){this.addHandles([(0,d.on)((()=>this.view?.map?.layers),"change",(e=>{e.removed.includes(this.layer)&&this.cancel()})),(0,d.on)((()=>this.layer?.graphics),"change",(e=>{if(null!=this._operationHandle)for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())})),(0,d.watch)((()=>this.layer?.elevationInfo??null),(e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)}),d.syncAndInitial),(0,d.watch)((()=>this.view),(e=>{this._defaultSnappingManager=(0,l.pR)(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new N.g({view:e,options:this.snappingOptions})),"2d"===e.type?Promise.all([o.e(30124),o.e(31329),o.e(67439),o.e(26584),o.e(58005),o.e(95329),o.e(11846),o.e(13497),o.e(78548),o.e(28328),o.e(7636)]).then(o.bind(o,97265)):"3d"===e.type&&(Promise.all([o.e(30124),o.e(31329),o.e(99717),o.e(67439),o.e(76517),o.e(60984),o.e(26584),o.e(60111),o.e(51255),o.e(51297),o.e(83607),o.e(4791),o.e(39458),o.e(1303),o.e(70082),o.e(93609),o.e(50948),o.e(48261),o.e(58005),o.e(36705),o.e(85090),o.e(95329),o.e(61018),o.e(11846),o.e(13497),o.e(78548),o.e(67754),o.e(81239),o.e(43882),o.e(3839)]).then(o.bind(o,43882)),Promise.all([o.e(81765),o.e(99717),o.e(76517),o.e(60984),o.e(60111),o.e(51255),o.e(51297),o.e(21899),o.e(4791),o.e(39458),o.e(1303),o.e(60071),o.e(93609),o.e(66836),o.e(9789),o.e(52415),o.e(60976)]).then(o.bind(o,53417))))}),d.syncAndInitial),(0,d.watch)((()=>this.view?.spatialReference),((e,t)=>{e&&t&&!e.equals(t)&&this.cancel()}))]),(0,L.BY)(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=(0,l.pR)(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this._updatingHandles.destroy(),this.emit("destroy")}get updating(){return this._updatingHandles.updating||null!=this.snappingManager&&this.snappingManager.updating}get activeTool(){return this._operationHandle?.tool??null}get activeCreateToolDrawMode(){return"create"===this._operationHandle?.type&&this._operationHandle.activeComponent&&"mode"in this._operationHandle.activeComponent?this._operationHandle.activeComponent.mode:null}get activeTooltip(){const{activeComponent:e,destroyed:t}=this,o=!t&&e&&"tooltip"in e?e.tooltip:null;return o?.visible?o:null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return null==this.activeComponent||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...q,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...$,...e,reshapeOptions:{...$.reshapeOptions,...e?.reshapeOptions},highlightOptions:{...$.highlightOptions,...e?.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){return this.snappingManager?.options??this._get("snappingOptions")}set snappingOptions(e){null!=this._defaultSnappingManager&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=(0,l.pR)(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:e}=this;!this._defaultSnappingManager&&e&&(this._defaultSnappingManager=new N.g({options:this.snappingOptions,view:e})),this._clearOverride("snappingManager")}}get state(){const e=!(!this.view?.ready||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:e,map:o}=t;e&&(t.cursor=null),o?.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const o="view-ready";this.removeHandles(o),e&&this.addHandles((0,d.when)((()=>e.ready),(t=>{this.removeHandles(this._viewHandlesKey),t&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)}),d.syncAndInitial),o),this._set("view",e)}cancel(){this._moduleLoaderAbortController=(0,l.DC)(this._moduleLoaderAbortController),this._viewReadyAbortController=(0,l.DC)(this._viewReadyAbortController),this._sketchContinuationFlag=!0,this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if("active"===e&&t.length){const{activeTool:e,layer:o}=this,a=t.toArray();o.removeMany(a),this.cancel(),this._emitDeleteEvent({graphics:a,tool:e})}}duplicate(){if("active"===this.state&&this.updateGraphics.length){const e=this.updateGraphics.map((e=>e.clone())).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,t){this.cancel(),await this._waitViewReady();const{view:o,layer:a}=this;if(!o||"disabled"===this.state)throw a||this._logMissingLayer(),(0,h.createAbortError)();if(null!=o.activeTool&&(o.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");(0,C.Y)(o,this._internalGraphicsLayer);const i=await this._updatingHandles.addPromise(this._setupCreateOperation(e,t));if(null==i||this.destroyed)return void o.map.remove(this._internalGraphicsLayer);i.on("complete",(()=>{if(i===this._operationHandle){const o=this.createGraphic,r=this._operationHandle.cancelled;if(this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view?.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||null==o||a.add(o),this._sketchContinuationFlag=!1,this.emit("create",{graphic:o,state:r?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"}),r||this._sketchContinuationFlag)return;const{creationMode:n}=this;if("continuous"===n){if(t?.geometryToPlace)return;this._updatingHandles.addPromise((0,h.ignoreAbortErrors)(this.create(e,t)))}else"update"===n&&o&&this._updatingHandles.addPromise((0,h.ignoreAbortErrors)(this.update([o])))}})),this._operationHandle=i,o.ready&&o.focus()}async place(e,t){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...t})}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:o,view:a,state:i}=this;if(!a||"disabled"===i)throw o||this._logMissingLayer(),(0,h.createAbortError)();null!=a.activeTool&&(a.activeTool=null);const r=Array.isArray(e)?e:[e];if(null==e||!r?.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(r.some((e=>e.layer!==o?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):null==e.geometry&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0))))return;const n=await this._updatingHandles.addPromise(this._setupUpdateOperation(r,t));this.destroyed||null==n||ne(n)||((0,C.Y)(a,this._internalGraphicsLayer),this._setUpdateOperationHandle(n,t),this.emit("update",{graphics:r,state:"start",aborted:!1,tool:n.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const t=this.view;if(t){e=Array.isArray(e)?e:[e];for(const o of e)null==o.geometry||"mesh"===o.geometry.type||(0,_.aI)(o.geometry.spatialReference,t.spatialReference)||((0,g.canProjectWithoutEngine)(o.geometry.spatialReference,t.spatialReference)||(0,g.isLoaded)()||await(0,g.load)(),o.geometry=(0,g.project)(o.geometry,t.spatialReference))}else this._logMissingView()}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!!this._operationHandle?.canUndo()}canRedo(){return!!this._operationHandle?.canRedo()}toggleUpdateTool(){this._operationHandle?.toggleTool()}async _getFirstHit(e){const t=this.view;if(!t)return this._logMissingView(),null;if("2d"===t.type){const o=[];t.map.allLayers.forEach((e=>{"vector-tile"!==e.type&&"imagery"!==e.type||o.push(e)}));const a=await t.hitTest(e,{exclude:o});return(0,V.zF)(a.results)}const o=[t.map.ground];t.map.allLayers.forEach((e=>{(0,b.Eq)(e.type)&&o.push(e)}));const a=await t.hitTest(e,{exclude:o});if(a.results.length>0){const e=a.results[0];if(null!=e&&"graphic"===e.type&&e.graphic&&(!a.ground.mapPoint||t.map.ground.opacity<1||a.ground.distance-(e.distance??0)>-Math.min(3*a.ground.distance,"global"===t.viewingMode?(0,v.tO)(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return e}return null}_generateViewHandles(e){return[e.on("immediate-click",(async e=>{const t="active"===this.state&&"create"===this._operationHandle?.type;"disabled"!==this.state&&!t&&this.updateOnGraphicClick&&await this._updatingHandles.addPromise(this._handleImmediateClick(e))}),k.o.WIDGET)]}async _handleImmediateClick(e){const t=await e.async((()=>this._getFirstHit((0,Y.ZV)(e))));let o=null;if(null!=t){const a=t.graphic;this.updateGraphics.includes(a)||a.layer===this.layer?(e.stopPropagation(),o=a):"2d"!==this.view?.type||this._isComponentGraphic(a)||"active"!==this.state||this.cancel()}else"active"===this.state&&this.cancel();null==o||this.updateGraphics.includes(o)||await this.update([o],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}})}async _setupCreateOperation(e,t){const o=this.view;if(!o)return this._logMissingView(),null;const a={hasZ:"3d"===o.type,...this.defaultCreateOptions,...t},i=await this._setupDrawGraphicTool(e,o,a);return null==i?null:(o.tools.add(i),o.activeTool=i,this._setupCreateOperationHandle(i))}async _setupDrawGraphicTool(e,t,o){if("multipoint"===e&&"3d"===t.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;const{cursor:a,defaultZ:i,hasZ:r,geometryToPlace:n,graphicProperties:s,mode:p,preserveAspectRatio:l}=o,h=(0,W.qv)(p,e),d=(0,W.tk)(e),c=o?.optionsPerTool?.has(e)?o.optionsPerTool.get(e):{},u=c?.preserveAspectRatio??l??"rectangle"!==e,y={centered:"rectangle"!==e&&!("circle"===e&&!u),cursor:a,defaultZ:i,forceUniformSize:u,graphicProperties:{...s,attributes:{...s?.attributes}},geometryToPlace:n,geometryType:d,mode:h,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:r,snappingManager:this.snappingManager,snapToScene:!1,view:t,...c};return"2d"===t.type?this._makeDrawGraphicTool2D(y):this._makeDrawGraphicTool3D(y)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(Promise.all([o.e(30124),o.e(31329),o.e(67439),o.e(26584),o.e(58005),o.e(95329),o.e(11846),o.e(13497),o.e(78548),o.e(28328),o.e(7636)]).then(o.bind(o,97265)));return ne(t)||this.destroyed?null:new t.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:Q(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(Promise.all([o.e(30124),o.e(31329),o.e(99717),o.e(67439),o.e(76517),o.e(60984),o.e(26584),o.e(60111),o.e(51255),o.e(51297),o.e(83607),o.e(4791),o.e(39458),o.e(1303),o.e(70082),o.e(93609),o.e(50948),o.e(48261),o.e(58005),o.e(36705),o.e(85090),o.e(95329),o.e(61018),o.e(11846),o.e(13497),o.e(78548),o.e(67754),o.e(81239),o.e(43882),o.e(3839)]).then(o.bind(o,43882)));if(ne(t)||this.destroyed)return null;const{elevationInfo:a}=this.layer;return new t.module.DrawGraphicTool3D({...e,elevationInfo:a,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const t=this.view;if(!t)return this._logMissingView(),null;let o=null;const a=e.forceUniformSize,i=e.centered,r=[t.on("key-down",(t=>{if(t.key===I.NE.pan)t.stopPropagation(),t.repeat||(e.enabled=!1);else if(t.key===I.NE.complete)t.stopPropagation(),e.completeCreateOperation();else if(t.key!==I.NE.vertexAdd||t.repeat)t.key===I.NE.undo?(t.stopPropagation(),n.undo()):t.key===I.NE.redo?(t.stopPropagation(),n.redo()):t.key!==I.NE.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType||t.repeat?t.key===I.NE.center&&(t.repeat||(e.centered=!i,t.stopPropagation())):(e.forceUniformSize=!a,t.stopPropagation());else{const o=e.drawOperation.geometryType;"polyline"!==o&&"polygon"!==o&&"multipoint"!==o||(t.stopPropagation(),e.drawOperation.commitStagedVertex())}}),k.o.WIDGET),t.on("key-up",(t=>{t.key===I.NE.pan?e.enabled=!0:t.key!==I.NE.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType?t.key===I.NE.center&&(e.centered=i,t.stopPropagation()):(e.forceUniformSize=a,t.stopPropagation())}),k.o.WIDGET),e.on("vertex-add",(t=>{switch(o=null==o?"start":"active",t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:o,tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("cursor-update",(t=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:t.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),e.on("vertex-remove",(t=>{switch(t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("complete",(e=>{this._set("createGraphic",e.graphic),o="complete",e.aborted?n&&n.cancel():n&&n.complete()})),(0,d.watch)((()=>this._getGraphicSymbolFromTool(e.geometryType)),(t=>{e.graphicSymbol=t}))],n=new B({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{(0,s.ei)(r),t.tools?.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return n}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":case"freehandPolyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":case"freehandPolygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,t){const{layer:o,view:a}=this;if(!a)return this._logMissingView(),null;const i={...this.defaultUpdateOptions,...t,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...t?.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...t?.highlightOptions}};let r=i.tool??$.tool;for(const n of e)o.remove(n),o.add(n);if("3d"===a.type){if(0===e.length)return null;switch(r){case"move":return this._setupMove3DOperation(e,i,a,r);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],i,a);case"transform":return this._setupGraphicTransform3DOperation(e,i,a)}}switch(r){case"move":return this._setupMove2DOperation(e,i,a);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,r,i,a);case"transform":if(1===e.length){const t=e[0].geometry?.type;"point"!==t&&"multipoint"!==t||(r="reshape")}return this._setupTransformOrReshape2DOperation(e,r,i,a)}}async _setupMove3DOperation(e,t,a,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const n=await this._requireModule(Promise.all([o.e(30124),o.e(31329),o.e(99717),o.e(67439),o.e(76517),o.e(60984),o.e(26584),o.e(60111),o.e(51255),o.e(51297),o.e(83607),o.e(4791),o.e(39458),o.e(1303),o.e(70082),o.e(93609),o.e(50948),o.e(48261),o.e(58005),o.e(36705),o.e(85090),o.e(95329),o.e(61018),o.e(11846),o.e(13497),o.e(78548),o.e(67754),o.e(81239),o.e(43882),o.e(3839)]).then(o.bind(o,43882)));if(ne(n))return n;const{ManipulatedObject3DGraphic:p,MoveTool3D:l}=n.module,h=new Map,d=()=>{h.forEach((e=>e.destroy())),h.clear()};for(const o of e){const e=new p({view:a,graphic:o}),t=(0,A.Y)(e);if(t!==S.d.SUPPORTED)return d(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${(0,S.c)(t)}).`),null;h.set(o,e)}const c=new l({view:a,enableZ:t.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});a.tools.add(c),c.objects.addMany(Array.from(h.values())),r||this.updateGraphics.addMany(e);const u=[],y=new K({activeComponent:c,tool:i,type:"update",onEnd:()=>{(0,s.ei)(u),re(a,c),d()},undo:()=>{ae(this.view,c),ee(y,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{te(y,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:e=>{this.updateGraphics.push(e);const t=new p({view:a,graphic:e});h.set(e,t),c.objects.push(t),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);if(y.history.undo.forEach((e=>e.updates.splice(t,1))),y.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0===this.updateGraphics.length)return void y.complete();const o=h.get(e);o&&(c.objects.remove(o),o.destroy(),h.delete(e))},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;if("transform"!==i)return;const e=this.updateGraphics.at(0),o=await this._setupReshape3DOperation(e,t,a,!0);o&&!ne(o)&&(y.onEnd(),y.destroy(),this._setUpdateOperationHandle(o,t))}});return u.push(...this._getHandlesForComponent(y,t),a.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(y,e,t)),k.o.WIDGET),a.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(y,e)}),k.o.WIDGET)),y}_setupGraphicTransform3DOperation(e,t,o){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(1===e.length&&function(e){if("graphics"!==e.layer?.type)return S.d.GRAPHICS_LAYER_MISSING;if(null==e.geometry)return S.d.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return S.d.SUPPORTED;default:return S.d.GEOMETRY_TYPE_UNSUPPORTED}const t=null!=e.symbol&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return t&&t.some((e=>"object"===e.type))?"on-the-ground"!==(0,P.ky)(e)&&(0,P.NN)(e)?S.d.ELEVATION_MODE_UNSUPPORTED:S.d.SUPPORTED:S.d.SYMBOL_TYPE_UNSUPPORTED}(e[0])===S.d.SUPPORTED){const i=e[0],r=i.geometry;if(null!=r&&("point"===r.type||"mesh"===r.type))return this._setupPointTransform3DOperation(i,t,o);if(null!=r&&("polygon"===r.type||"polyline"===r.type))return this._setupPolyTransform3DOperation(i,t,o,a)}return this._setupMove3DOperation(e,t,o,"transform",a)}async _setupPointTransform3DOperation(e,t,a){const i="transform",{enableRotation:r,enableScaling:n,enableZ:p}=t,l=await this._requireModule(Promise.all([o.e(30124),o.e(31329),o.e(99717),o.e(67439),o.e(76517),o.e(60984),o.e(26584),o.e(60111),o.e(51255),o.e(51297),o.e(83607),o.e(4791),o.e(39458),o.e(1303),o.e(70082),o.e(93609),o.e(50948),o.e(48261),o.e(58005),o.e(36705),o.e(85090),o.e(95329),o.e(61018),o.e(11846),o.e(13497),o.e(78548),o.e(67754),o.e(81239),o.e(43882),o.e(3839)]).then(o.bind(o,43882)));if(ne(l))return l;const{TransformTool3D:h,ManipulatedObject3DGraphic:d}=l.module,c=new d({graphic:e,view:a}),u=new h({object:c,view:a,enableRotation:r,enableScaling:n,enableZ:p,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});a.tools.add(u),this.updateGraphics.add(e);const y=[],v=new K({activeComponent:u,tool:i,type:"update",onEnd:()=>{(0,s.ei)(y),re(a,u),c.destroy()},undo:()=>{ae(this.view,u),ee(v,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{te(v,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),v.onEnd(),v.destroy();const o=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,a,"transform",!0);ne(o)||this._setUpdateOperationHandle(o,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),v.complete()},toggleTool:()=>{}});return y.push(...this._getHandlesForComponent(v,t),a.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(v,e,t)),k.o.WIDGET),a.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(v,e)}),k.o.WIDGET)),v}async _setupPolyTransform3DOperation(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r="transform",{enableRotation:n,enableScaling:p,enableZ:l,preserveAspectRatio:h}=t,d=await this._requireModule(Promise.all([o.e(30124),o.e(31329),o.e(99717),o.e(67439),o.e(76517),o.e(60984),o.e(26584),o.e(60111),o.e(51255),o.e(51297),o.e(83607),o.e(4791),o.e(39458),o.e(1303),o.e(70082),o.e(93609),o.e(50948),o.e(48261),o.e(58005),o.e(36705),o.e(85090),o.e(95329),o.e(61018),o.e(11846),o.e(13497),o.e(78548),o.e(67754),o.e(81239),o.e(43882),o.e(3839)]).then(o.bind(o,43882)));if(ne(d))return d;const{ManipulatedObject3DGraphic:c,ExtentTransformTool:u}=d.module,y=this.view?.inputManager?.isModifierKeyDown(I.NE.constraint),v=new c({view:a,graphic:e}),g=new u({object:v,view:a,enableRotation:n,enableScaling:p,enableZ:l,preserveAspectRatio:!!h!=!!y,sketchOptions:this.sketchOptions});a.tools.add(g),i||this.updateGraphics.add(e);const m=[],_=new K({activeComponent:g,tool:r,type:"update",onEnd:()=>{(0,s.ei)(m),re(a,g),v.destroy()},canUndo:()=>!g.destroyed&&g.canUndo,undo:()=>{g.destroyed||(g.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!g.destroyed&&g.canRedo,redo:()=>{g.destroyed||(g.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),_.onEnd(),_.destroy();const o=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,a,"transform",!0);ne(o)||this._setUpdateOperationHandle(o,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),_.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;const o=await this._setupReshape3DOperation(e,t,a,!0);o&&!ne(o)&&(_.onEnd(),_.destroy(),this._setUpdateOperationHandle(o,t))}});return m.push(...this._getHandlesForComponent(_,t),a.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(_,e,t)),k.o.WIDGET),a.on("key-down",(e=>this._getCommonUpdateOperationKeyDownHandlers(_,e)),k.o.WIDGET),a.on("key-down",(e=>{e.key!==I.NE.constraint||e.repeat||(g.preserveAspectRatio=!g.preserveAspectRatio,e.stopPropagation())}),k.o.WIDGET),a.on("key-up",(e=>{e.key===I.NE.constraint&&(g.preserveAspectRatio=!g.preserveAspectRatio,e.stopPropagation())}),k.o.WIDGET)),_}async _setupMove2DOperation(e,t,o){const a="move";this.updateGraphics.addMany(e),await this._updatingHandles.addPromise(this._updateSpatialReference(e));const i=await this._getGraphicMover(e,t,o);if(ne(i))return i;const r=new K({activeComponent:i,tool:a,type:"update",onEnd:()=>{this._displayDefaultCursor(),(0,s.ei)(l),(0,s.ei)(p),i.destroy(),this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const e=this.updateGraphics.toArray();ee(r,e),r.refreshComponent(),this._emitUndoEvent({graphics:e,tool:a})},redo:()=>{const e=this.updateGraphics.toArray();te(r,e),r.refreshComponent(),this._emitRedoEvent({graphics:e,tool:a})},addToSelection:async e=>{await this._updatingHandles.addPromise(this._updateSpatialReference(e)),this.updateGraphics.push(e),i.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);r.history.undo.forEach((e=>e.updates.splice(t,1))),r.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const o=this.updateGraphics.toArray();this.emit("update",{graphics:o,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?i.graphics=o:r.complete()}});let n=!1;const p=[o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(r,e,t)),k.o.WIDGET),o.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(r,e),e.key!==I.NE.constraint||e.repeat||(n=!0,i.enableMoveAllGraphics=!i.enableMoveAllGraphics)}),k.o.WIDGET),o.on("key-up",(e=>{e.key===I.NE.constraint&&n&&(n=!1,i.enableMoveAllGraphics=!i.enableMoveAllGraphics)}),k.o.WIDGET)],l=this._getHandlesForComponent(r,t);return r}async _setupReshape3DOperation(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r="reshape",n=await this._requireModule(Promise.all([o.e(30124),o.e(31329),o.e(99717),o.e(67439),o.e(76517),o.e(60984),o.e(26584),o.e(60111),o.e(51255),o.e(51297),o.e(83607),o.e(4791),o.e(39458),o.e(1303),o.e(70082),o.e(93609),o.e(50948),o.e(48261),o.e(58005),o.e(36705),o.e(85090),o.e(95329),o.e(61018),o.e(11846),o.e(13497),o.e(78548),o.e(67754),o.e(81239),o.e(43882),o.e(3839)]).then(o.bind(o,43882)));if(ne(n))return n;const{ManipulatedObject3DGraphic:p,ReshapeTool3D:l}=n.module,h=new p({view:a,graphic:e}),d=R(h);if(d!==S.d.SUPPORTED)return h.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${(0,S.c)(d)}).`),null;const c=t.reshapeOptions,u=new l({view:a,object:h,enableZVertex:t.enableZ&&"move"===c?.vertexOperation,enableZShape:t.enableZ&&"move"===c?.shapeOperation,enableMoveObject:"move"===c?.shapeOperation||"move-xy"===c?.shapeOperation,enableMidpoints:"split"===c?.edgeOperation,enableEdgeOffset:"offset"===c?.edgeOperation,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});a.tools.add(u),i||this.updateGraphics.add(h.graphic);const y=[],v=new K({activeComponent:u,tool:r,type:"update",onEnd:()=>{(0,s.ei)(y),re(a,u),h.destroy()},canUndo:()=>!u.destroyed&&u.canUndo,undo:()=>{u.destroyed||(u.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!u.destroyed&&u.canRedo,redo:()=>{u.destroyed||(u.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),v.onEnd(),v.destroy();const o=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,a,"transform",!0);ne(o)||this._setUpdateOperationHandle(o,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),v.complete()},toggleTool:async()=>{if(!1===t.toggleToolOnClick)return;v.onEnd(),v.destroy();const e=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,a,!0);ne(e)||this._setUpdateOperationHandle(e,t)}});return y.push(...this._getHandlesForComponent(v,t),a.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(v,e,t)),k.o.WIDGET),a.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(v,e)}),k.o.WIDGET)),v}async _setupTransformOrReshape2DOperation(e,t,o,a){this.updateGraphics.addMany(e),await this._updatingHandles.addPromise(this._updateSpatialReference(e));const i="transform"===t?await this._getBox(e,o,a):await this._getReshape(e,o,a);if(ne(i))return i;const r=new K({activeComponent:i,type:"update",onEnd:()=>{(0,s.ei)(p),(0,s.ei)(n),r.activeComponent&&!r.activeComponent.destroyed&&r.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{ee(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},redo:()=>{te(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},addToSelection:async e=>{let t=r.activeComponent;if("reshape"===t?.type){const t=[...this.updateGraphics,e];this.updateGraphics.removeAll(),r.onEnd(),r.destroy();const i=await this._setupTransformOrReshape2DOperation(t,"transform",o,a);if(ne(i))return;this._setUpdateOperationHandle(i,o)}else this.updateGraphics.add(e),t.graphics=this.updateGraphics.toArray(),t.refresh(),r.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async e=>{const t=this.updateGraphics.indexOf(e);r.history.undo.forEach((e=>e.updates.splice(t,1))),r.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const o=this.updateGraphics.toArray();if(0===o.length)r.complete();else{const e=o[0].geometry;1!==o.length||null==e||"point"!==e.type&&"multipoint"!==e.type?r.activeComponent.graphics=o:r.toggleTool()}this.emit("update",{graphics:o,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const e=this.updateGraphics.at(0),t=e.geometry;if(null!=t&&("reshape"===r.tool&&("point"===t.type||"multipoint"===t.type)||"transform"===r.tool&&"extent"===t.type))return;let i=null;"transform"===r.tool?i=await this._getReshape([e],o,a):"reshape"===r.tool&&(i=await this._getBox([e],o,a)),ne(i)||(r.activeComponent?.destroy(),r.activeComponent=i,r.activeComponent&&((0,s.ei)(p),p=this._getHandlesForComponent(r,o)))}}),n=[a.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(r,e,o)),k.o.WIDGET),a.on("key-down",(e=>{if(this._getCommonUpdateOperationKeyDownHandlers(r,e),e.key===I.NE.constraint&&!e.repeat&&r){const e=r.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),k.o.WIDGET),a.on("key-up",(e=>{if(e.key===I.NE.constraint&&r){const e=r.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),k.o.WIDGET)];let p=this._getHandlesForComponent(r,o);return r}async _getGraphicMover(e,t,a){const{enableMoveAllGraphics:i,highlightOptions:r}=t,n=await this._requireModule(Promise.all([o.e(85525),o.e(17711)]).then(o.bind(o,85525)));return ne(n)?n:new n.module.default({enableMoveAllGraphics:i,highlightsEnabled:!!r?.enabled,indicatorsEnabled:!1,graphics:e,view:a,callbacks:{onGraphicMoveStart:e=>{let{dx:t,dy:o,graphic:a}=e;this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:a,type:"move-start"},type:"update"})},onGraphicMove:e=>{let{dx:t,dy:o,graphic:a}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:a,type:"move"},type:"update"})},onGraphicMoveStop:e=>{let{dx:t,dy:o,graphic:a}=e;this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:a,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,a){const{enableRotation:i,enableScaling:r,highlightOptions:n,preserveAspectRatio:s}=t,p=await this._requireModule(Promise.all([o.e(31329),o.e(58005),o.e(95329),o.e(11846),o.e(85525),o.e(44888),o.e(36244)]).then(o.bind(o,36244)));if(ne(p))return p;const l=this.view?.inputManager?.isModifierKeyDown(I.NE.constraint);return new p.module.default({graphics:e,enableRotation:i,enableScaling:r,highlightsEnabled:!!n?.enabled,preserveAspectRatio:!!s!=!!l,layer:this._internalGraphicsLayer,view:a,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMove:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMoveStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScale:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotate:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"})}})}async _getReshape(e,t,a){const i="split"===t.reshapeOptions?.edgeOperation,r="move"===t.reshapeOptions?.shapeOperation,n=!!t.highlightOptions?.enabled,s=await this._requireModule(Promise.all([o.e(30124),o.e(31329),o.e(58005),o.e(95329),o.e(11846),o.e(13497),o.e(85525),o.e(44888),o.e(35377)]).then(o.bind(o,25253)));return ne(s)?s:new s.module.default({enableMidpoints:i,enableMovement:r,graphic:e[0],highlightsEnabled:n,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:a,callbacks:{onReshapeStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshape:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshapeStop:e=>{let{mover:t,type:o}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t,type:o},type:"update"})},onMoveStart:e=>{let{dx:t,dy:o,mover:a,type:i}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:a,type:i},type:"update"})},onMove:e=>{let{dx:t,dy:o,mover:a,type:i}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:a,type:i},type:"update"})},onMoveStop:e=>{let{dx:t,dy:o,mover:a,type:i}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:a,type:i},type:"update"})},onVertexAdd:e=>{let{added:t,type:o,vertices:a}=e;const i=t.map((e=>(0,m.$K)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:i,vertices:a,type:o},type:"update"})},onVertexRemove:e=>{let{removed:t,type:o,vertices:a}=e;const i=t.map((e=>(0,m.$K)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:i,vertices:a,type:o},type:"update"})}}})}_getHandlesForComponent(e,t){const o=e.activeComponent;if(!o)return[];switch(o.type){case"graphic-mover":return[o.on("graphic-click",(t=>{let{graphic:o,viewEvent:a}=t;a.native?.shiftKey&&(a.stopPropagation(),e.removeFromSelection(o))})),o.on("graphic-move-start",(t=>e.addToHistory(ie(t.allGraphics))))];case"box":return[o.on("graphic-click",(o=>this._onTransformOrReshape2DGraphicClick(e,t,o))),o.on("move-start",(t=>e.addToHistory(ie(t.graphics)))),o.on("rotate-start",(t=>e.addToHistory(ie(t.graphics)))),o.on("scale-start",(t=>e.addToHistory(ie(t.graphics))))];case"reshape":return[o.on("graphic-click",(o=>this._onTransformOrReshape2DGraphicClick(e,t,o))),o.on("move-start",(t=>e.addToHistory(ie([t.mover])))),o.on("reshape-start",(t=>e.addToHistory(ie([t.graphic])))),o.on("vertex-add",(t=>e.addToHistory(ie([t.oldGraphic])))),o.on("vertex-remove",(t=>e.addToHistory(ie([t.oldGraphic]))))];case"move-3d":return[o.events.on("record-undo",(t=>{let{updates:o}=t;e.addToHistory({updates:o})})),o.events.on("move-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-start"},type:"update"})})),o.events.on("move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move"},type:"update"})})),o.events.on("move-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-stop"},type:"update"})})),o.events.on("immediate-click",(o=>{o.shiftKey?this._toggleSelection([o.object.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[o.events.on("record-undo",(t=>{let{updates:o}=t;e.addToHistory({updates:o})})),o.events.on("translate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-start"},type:"update"})})),o.events.on("translate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),o.events.on("rotate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-start"},type:"update"})})),o.events.on("rotate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),o.events.on("scale-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-start"},type:"update"})})),o.events.on("scale-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),o.events.on("translate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),o.events.on("rotate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate"},type:"update"})})),o.events.on("scale",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),o.events.on("immediate-click",(o=>{o.shiftKey?this._toggleSelection([o.object.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[o.events.on("reshape",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e,mover:e.object.graphic},type:"update"})})),o.events.on("move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e,mover:e.object.graphic},type:"update"})})),o.events.on("vertex-add",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),o.events.on("vertex-remove",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),o.events.on("immediate-click",(o=>{o.shiftKey?this._toggleSelection([o.object.graphic],e,t):e.toggleTool()}))]}}_onTransformOrReshape2DGraphicClick(e,t,o){const{graphic:a,viewEvent:i}=o;return i.native?.shiftKey&&a.layer===this.layer?(i.stopPropagation(),e.removeFromSelection(a)):t.toggleToolOnClick?(i.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;const o=this.view?.map;this._disablePopup(t);e.on("complete",(()=>{if(e===this._operationHandle){const a=this.updateGraphics.toArray(),i=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),o&&o.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:a,state:"complete",aborted:e.cancelled,tool:i,toolEventInfo:null,type:"update"})}}))}async _getCommonUpdateOperationClickHandlers(e,t,o){const a=(0,Y.ZV)(t),i=await t.async((()=>this._getFirstHit(a)));null!=i&&(t.native.shiftKey&&this._toggleSelection([i.graphic],e,o)||this.updateGraphics.includes(i.graphic))?t.stopPropagation():e.complete()}_toggleSelection(e,t,o){const a=!!o.multipleSelectionEnabled;return e.some((e=>null!=e&&!(!a||e.layer!==this.layer)&&(this.updateGraphics.includes(e)?t.removeFromSelection(e):t.addToSelection(e),!0)))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const o=t.key;o===I.NE.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):o===I.NE.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):o===I.NE.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&I.NE.delete.includes(o)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||"update"!==this._operationHandle.type)return;const t=this.activeComponent,o=this.updateGraphics.toArray();null!=t&&("reshape"!==t.type||1===o.length&&"point"===o[0].geometry?.type)&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=(0,l.pR)(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||null==t)&&(e.attributes?.esriSketchTool||"draw-2d"===t.type&&t.graphic===e||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}_displayPointerCursor(){this.view?.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view?.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view?.container&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(e,t,o){p.A.getLogger(this).error(new r.default(e,t,o))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const o=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:o}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return(0,d.whenOnce)((()=>!this.updating))}_disablePopupEnabled(e){return"3d"!==this.view?.type||this.updateOnGraphicClick||(e?.toggleToolOnClick??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&null==this._originalPopupEnabled&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&null!=this._originalPopupEnabled&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?((0,l.DC)(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await(0,h.whenOrAbort)((0,d.whenOnce)((()=>e?.ready)),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",X("view"))}_logMissingLayer(){this._logError(J,X("layer"))}};(0,a._)([(0,c.MZ)()],z.prototype,"_defaultSnappingManager",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"updating",null),(0,a._)([(0,c.MZ)({readOnly:!0})],z.prototype,"_updatingHandles",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"_operationHandle",void 0),(0,a._)([(0,c.MZ)({readOnly:!0})],z.prototype,"activeTool",null),(0,a._)([(0,c.MZ)({readOnly:!0})],z.prototype,"activeCreateToolDrawMode",null),(0,a._)([(0,c.MZ)()],z.prototype,"activeTooltip",null),(0,a._)([(0,c.MZ)({types:T.Es})],z.prototype,"activeFillSymbol",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"activeLineSymbol",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"activeVertexSymbol",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"allowDeleteKey",void 0),(0,a._)([(0,c.MZ)({readOnly:!0})],z.prototype,"createGraphic",null),(0,a._)([(0,c.MZ)()],z.prototype,"defaultCreateOptions",null),(0,a._)([(0,c.MZ)()],z.prototype,"defaultUpdateOptions",null),(0,a._)([(0,c.MZ)({type:D.default,nonNullable:!0})],z.prototype,"labelOptions",null),(0,a._)([(0,c.MZ)()],z.prototype,"layer",void 0),(0,a._)([(0,c.MZ)({types:T.Es})],z.prototype,"pointSymbol",void 0),(0,a._)([(0,c.MZ)({types:T.Es})],z.prototype,"polygonSymbol",void 0),(0,a._)([(0,c.MZ)({types:T.Es})],z.prototype,"polylineSymbol",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"meshSymbol",void 0),(0,a._)([(0,c.MZ)({type:x.default,nonNullable:!0})],z.prototype,"snappingOptions",null),(0,a._)([(0,c.MZ)()],z.prototype,"snappingManager",null),(0,a._)([(0,c.MZ)({readOnly:!0})],z.prototype,"state",null),(0,a._)([(0,c.MZ)({type:U.default,nonNullable:!0})],z.prototype,"tooltipOptions",null),(0,a._)([(0,c.MZ)({readOnly:!0})],z.prototype,"updateGraphics",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"updateOnGraphicClick",void 0),(0,a._)([(0,c.MZ)()],z.prototype,"creationMode",void 0),(0,a._)([(0,c.MZ)({type:Z.default,nonNullable:!0})],z.prototype,"valueOptions",null),(0,a._)([(0,c.MZ)({types:T.Es})],z.prototype,"vertexSymbol",void 0),(0,a._)([(0,c.MZ)({value:null})],z.prototype,"view",null),(0,a._)([(0,c.MZ)({constructOnly:!0,type:H.A})],z.prototype,"sketchOptions",void 0),z=(0,a._)([(0,u.$)("esri.widgets.Sketch.SketchViewModel")],z);const J="sketch:missing-property",X=e=>`Property '${e}' is missing on SketchViewModel.`;function Q(e){return"polygon"===e||"rectangle"===e||"circle"===e}function ee(e,t){oe("undo",e.history.undo,e.history.redo,t)}function te(e,t){oe("redo",e.history.redo,e.history.undo,t)}function oe(e,t,o,a){const i=t.pop();if(!i)return;const r=i.updates,n=[];a.forEach(((t,o)=>{const a=r[o];null!=a&&("geometry"in a&&null!=a.geometry&&(n.push({geometry:t.geometry}),t.geometry=a.geometry),"symbol"in a&&null!=a.symbol&&(n.push({symbol:t.symbol}),t.symbol=a.symbol),"undo"in a&&(n.push(a),a[e](t)))})),o.push({updates:n})}function ae(e,t){null!=e&&t.hasGrabbedManipulators&&(e.activeTool=null)}function ie(e){return{updates:e.map((e=>{let{geometry:t}=e;return"mesh"===t?.type?{geometry:t.cloneShallow()}:{geometry:t}}))}}function re(e,t){e.tools?.remove(t),t.destroyed||t.destroy()}function ne(e){return"requireError"in e&&"aborted"===e.requireError}const se=z},22093:(e,t,o)=>{function a(e,t,o){if(!t||!e?.map)return;const{map:a}=e,i=a.layers.find((e=>e===t));i||a.add(t,o),i&&null!=o&&a.layers.reorder(i,o)}function i(e,t){const o="subtype-sublayer"===t?.type?t.parent:t;return e.allLayerViews.find((e=>{const t=e.layer;return t===o||"sublayers"in t&&null!=t.sublayers&&t.sublayers.includes(o)}))}o.d(t,{Y:()=>a,i:()=>i})},42265:(e,t,o)=>{function a(e,t){return"freehandPolygon"===t||"freehandPolyline"===t?"freehand":e??("rectangle"===t||"circle"===t?"hybrid":"click")}function i(e){switch(e){case"freehandPolygon":return"polygon";case"freehandPolyline":return"polyline";default:return e}}function r(e){return!!e&&("draw-2d"===e.type||"draw-3d"===e.type)}var n;o.d(t,{Jl:()=>n,qv:()=>a,tk:()=>i,xJ:()=>r}),function(e){e[e.ForceCollapse=-1]="ForceCollapse",e[e.Low=0]="Low",e[e.Medium=10]="Medium",e[e.High=100]="High",e[e.Max=1e3]="Max"}(n||(n={}))},55770:(e,t,o)=>{o.d(t,{Y:()=>r});o(21265);var a=o(41317),i=o(12759);function r(e){if(e.graphic&&"graphics"!==e.graphic.layer?.type)return i.d.GRAPHICS_LAYER_MISSING;const t=e.operations?.data.type;if(!t)return i.d.GEOMETRY_TYPE_UNSUPPORTED;switch(t){case"polygon":case"point":case"polyline":case"mesh":break;default:return i.d.GEOMETRY_TYPE_UNSUPPORTED}const o=e.elevationInfo;return(0,a.wz)(o)?i.d.ELEVATION_MODE_UNSUPPORTED:i.d.SUPPORTED}},91690:(e,t,o)=>{o.d(t,{A:()=>d});var a=o(93800),i=o(6946),r=o(48602),n=(o(21265),o(50925),o(14746),o(75269)),s=o(64053),p=o(13373),l=o(98258);let h=class extends i.default{constructor(e){super(e),this.labels=new s.default,this.tooltips=new p.default,this.values=new l.default}};(0,a._)([(0,r.MZ)({nonNullable:!0,type:s.default})],h.prototype,"labels",void 0),(0,a._)([(0,r.MZ)({nonNullable:!0,type:p.default})],h.prototype,"tooltips",void 0),(0,a._)([(0,r.MZ)({nonNullable:!0,type:l.default})],h.prototype,"values",void 0),h=(0,a._)([(0,n.$)("esri.views.interactive.sketch.SketchOptions")],h);const d=h},98258:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d});var a=o(93800),i=o(6946),r=o(48602),n=(o(21265),o(50925),o(14746),o(75269));let s=class extends i.default{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};(0,a._)([(0,r.MZ)()],s.prototype,"length",void 0),(0,a._)([(0,r.MZ)()],s.prototype,"verticalLength",void 0),(0,a._)([(0,r.MZ)()],s.prototype,"area",void 0),s=(0,a._)([(0,n.$)("esri.views.interactive.sketch.Units")],s);const p=s;var l=o(95095);let h=class extends i.default{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?l.rZ.RelativeBilateral:l.rZ.Relative;case"absolute":return l.rZ.Absolute}}get displayUnits(){return this._get("displayUnits")??new p}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new p}set inputUnits(e){this._set("inputUnits",e)}};(0,a._)([(0,r.MZ)({type:String,nonNullable:!0})],h.prototype,"directionMode",void 0),(0,a._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],h.prototype,"relativeDirectionIsBilateral",void 0),(0,a._)([(0,r.MZ)()],h.prototype,"effectiveDirectionMode",null),(0,a._)([(0,r.MZ)({type:p,nonNullable:!0})],h.prototype,"displayUnits",null),(0,a._)([(0,r.MZ)({type:p,nonNullable:!0})],h.prototype,"inputUnits",null),h=(0,a._)([(0,n.$)("esri.views.interactive.sketch.SketchValueOptions")],h);const d=h}}]);