"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[99994],{76004:(t,e,n)=>{n.d(e,{SD:()=>a,hO:()=>s,tV:()=>o});var i=n(21772);function a(t){const e=t.toLowerCase();return"image/bmp"===e||"image/emf"===e||"image/exif"===e||"image/gif"===e||"image/x-icon"===e||"image/jpeg"===e||"image/png"===e||"image/tiff"===e||"image/x-wmf"===e}function s(t){const e=(0,i.s)("esri/themes/base/images/files/");return t?"text/plain"===t?`${e}text-32.svg`:"application/pdf"===t?`${e}pdf-32.svg`:"text/csv"===t?`${e}csv-32.svg`:"application/gpx+xml"===t?`${e}gpx-32.svg`:"application/x-dwf"===t?`${e}cad-32.svg`:"application/postscript"===t||"application/json"===t||"text/xml"===t||"model/vrml"===t?`${e}code-32.svg`:"application/x-zip-compressed"===t||"application/x-7z-compressed"===t||"application/x-gzip"===t||"application/x-tar"===t||"application/x-gtar"===t||"application/x-bzip2"===t||"application/gzip"===t||"application/x-compress"===t||"application/x-apple-diskimage"===t||"application/x-rar-compressed"===t||"application/zip"===t?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}function o(t){return t?"text/plain"===t?"file-text":"application/pdf"===t?"file-pdf":"text/csv"===t?"file-csv":"application/gpx+xml"===t?"file-gpx":"application/x-dwf"===t?"file-cad":"application/postscript"===t||"application/json"===t||"text/xml"===t||"model/vrml"===t?"file-code":"application/x-zip-compressed"===t||"application/x-7z-compressed"===t||"application/x-gzip"===t||"application/x-tar"===t||"application/x-gtar"===t||"application/x-bzip2"===t||"application/gzip"===t||"application/x-compress"===t||"application/x-apple-diskimage"===t||"application/x-rar-compressed"===t||"application/zip"===t?"file-zip":t.includes("image/")?"file-image":t.includes("audio/")?"file-sound":t.includes("video/")?"file-video":t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?"file-excel":t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?"file-word":t.includes("powerpoint")||t.includes("presentationml")?"file-ppt":"file":"file"}},99994:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var i=n(93800),a=n(90450),s=n(48602),o=(n(21265),n(50925),n(14746),n(75269)),l=n(76004),c=n(67881),p=n(32182),r=n(17745);const m="esri-attachments-column",h={contentContainer:`${m}__content`,showAttachmentsButton:`${m}__button`};let d=class extends c.default{constructor(t){super(t),this._buttonElements=new a.A,this._thumbnailElements=new a.A,this.attachmentsViewEnabled=!0,this.cellValueFormatFunction=t=>{let{root:e,rowData:n}=t;const{_showAttachmentsViewEnabled:i,formatFunction:a}=this,s=this.getCellValue(n);if(a&&n){const{index:t,item:{attachments:i,feature:o,relatedRecords:l}}=n;return a({attachments:i,column:this,feature:o,index:t,relatedRecords:l,value:s,virtualIndex:this.getVirtualRowIndex(e)})}if(!n)return s;const{index:o,item:{attachments:l,objectId:c}}=n,p=`(${s})`;if(!this.thumbnailsEnabled&&!i)return s;const r=document.createElement("span");r.textContent=r.title=p;let m=null;if(this.thumbnailsEnabled&&(m=this._createOrSyncThumbnails(c,l??[])),this._showAttachmentsViewEnabled){const t=document.createElement("div");m&&t.appendChild(m),t.appendChild(r);const e=this._createOrSyncShowAttachmentsButton(c,o);return e.appendChild(t),e}const d=document.createElement("div");return d.classList.add(h.contentContainer),m&&d.appendChild(m),d.appendChild(r),d},this.icon="attachment",this.layer=null,this.onShowAttachments=null,this.sortable=!1,this.store=null,this.textAlign="center",this.thumbnailAppearance="image",this.thumbnailCount=8,this.thumbnailIconScale="m",this.thumbnailsEnabled=!0}get _showAttachmentsViewEnabled(){return!(!this.attachmentsViewEnabled||!this.onShowAttachments)}get _supportsResize(){return!!this.store?.supportsResizeAttachments}get effectiveLabel(){return r.W5.sanitize(this.label??(this.messages?.attachments||this.fieldName))}getCellValue(t){return t?.item?.attachments?.length??0}_createOrSyncThumbnails(t,e){const n=document.createElement("div"),i=this._thumbnailElements.get(t);return i?.length&&i.length===e.length?i.forEach((t=>n.appendChild(t))):this._thumbnailElements.set(t,this._createThumbnailElements(e,n)),n}_createOrSyncShowAttachmentsButton(t,e){const n=this._buttonElements.get(t);if(n)return n.textContent="",n.onclick=n=>this._onShowAttachmentsClick({index:e,objectId:t,event:n}),n;const i=this.createCalciteButton({alignment:"icon-end-space-between",className:`${h.showAttachmentsButton} ${p.A.contentFull}`,iconEnd:"chevron-right",iconFlipRtl:"both",scale:this.thumbnailIconScale,textContent:"",title:this.messages?.viewAttachments,width:"full",onclick:n=>this._onShowAttachmentsClick({index:e,objectId:t,event:n})});return this._buttonElements.set(t,i),i}_createThumbnailAnchor(t,e){let{name:n,url:i}=t;const a=document.createElement("a");return a.href=`${i}`,a.download=n,a.rel="noreferrer",a.target="_blank",a.appendChild(e),a}_createThumbnailElements(t,e){const{thumbnailAppearance:n,thumbnailCount:i,thumbnailIconScale:a}=this,s=[],o=Math.min(i,t.length),c=!this.onShowAttachments,p="image"===n&&!!this.store?.supportsResizeAttachments;for(let r=0;r<o;r++){const n=t[r],{name:i,contentType:o}=n,m=(0,l.SD)(o)&&p?this._createThumbnailImage(n):this.createCalciteIcon({icon:(0,l.tV)(o),scale:a,textLabel:i}),h=c?this._createThumbnailAnchor(n,m):m;e&&e.appendChild(h),s.push(h)}return s}_createThumbnailImage(t){const{name:e,size:n,url:i}=t,a=document.createElement("img"),s=`${i}${i?.includes("?")?"&":"?"}${this._supportsResize?"w=24":""}&fs=${n}`;return a.alt=this.messages?.attachmentThumbnail??e,a.src=s,a.title=e,a}_onShowAttachmentsClick(t){let{index:e,objectId:n,event:i}=t;i.preventDefault(),i.stopPropagation(),this.onShowAttachments?.({index:e,objectId:n})}};(0,i._)([(0,s.MZ)()],d.prototype,"_showAttachmentsViewEnabled",null),(0,i._)([(0,s.MZ)()],d.prototype,"_buttonElements",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"_supportsResize",null),(0,i._)([(0,s.MZ)()],d.prototype,"_thumbnailElements",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"attachmentsViewEnabled",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"cellValueFormatFunction",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"effectiveLabel",null),(0,i._)([(0,s.MZ)()],d.prototype,"icon",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"layer",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"onShowAttachments",void 0),(0,i._)([(0,s.MZ)({readOnly:!0})],d.prototype,"sortable",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"store",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"textAlign",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"thumbnailAppearance",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"thumbnailCount",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"thumbnailIconScale",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"thumbnailsEnabled",void 0),d=(0,i._)([(0,o.$)("esri.widgets.FeatureTable.AttachmentsColumn")],d);const u=d}}]);