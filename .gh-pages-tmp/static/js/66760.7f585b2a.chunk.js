"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[9036,66760],{9036:(e,t,r)=>{r.d(t,{default:()=>o});var n=r(74719),i=r(50925),s=r(73532);function o(e,t,r,n,s){if(null==e)return null;const o=e.references("geometry")&&s?l(t,n,s):t,a=e.repurposeFeature(o);try{return e.evaluate({...r,$feature:a},e.services)}catch(h){return i.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",h),null}}const a=new Map;function l(e,t,r){const{transform:o,hasZ:l,hasM:h}=r;a.has(t)||a.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,r,n,i)=>(0,s.Tr)(r,t,e,n,i);case"esriGeometryPolygon":return(e,r,n,i)=>(0,s.$X)(r,t,e,n,i);case"esriGeometryPolyline":return(e,r,n,i)=>(0,s.P5)(r,t,e,n,i);case"esriGeometryMultipoint":return(e,r,n,i)=>(0,s.SW)(r,t,e,n,i);default:return i.A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.default("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const c=a.get(t)(e.geometry,o,l,h);return{...e,geometry:c}}},12660:(e,t,r)=>{r.d(t,{previewCIMSymbol:()=>p});var n=r(16804),i=r(88116),s=r(81061),o=r(25955),a=r(61154),l=r(41182),h=r(25826);const c=new s.CIMSymbolRasterizer(null),u=(0,n.PN)(l.CB.size),f=(0,n.PN)(l.CB.maxSize),g=(0,n.PN)(l.CB.lineWidth),d=1;async function m(e,t,r){const n=t?.size;let s=null!=n&&"object"==typeof n&&"width"in n?n.width:n,a=null!=n&&"object"==typeof n&&"height"in n?n.height:n;if(null==s||null==a)if("esriGeometryPolygon"===r)s=a=t.maxSize?Math.min(t.maxSize,u):u;else{const n=await async function(e,t,r){const{feature:n,fieldMap:s,viewParams:a}=t.cimOptions||t,l=await o.OverrideHelper.resolveSymbolOverrides(e.data,n,null,s,r,null,a);if(!l)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:l},e.data.primitiveOverrides=void 0;const h=[];return i.wp.fetchResources(l,c.resourceManager,h),i.wp.fetchFonts(l,c.resourceManager,h),h.length>0&&await Promise.all(h),i.wp.getEnvelope(l,null,c.resourceManager)}(e,t,r);n&&(s=n.width,a=n.height),"esriGeometryPolyline"===r&&(s=t.maxSize?Math.min(t.maxSize,g):g),s=null!=s&&isFinite(s)?Math.min(s,f):u,a=null!=a&&isFinite(a)?Math.max(Math.min(a,f),d):u}return"legend"===t.style&&"esriGeometryPolyline"===r&&(s=g),{width:s,height:a}}async function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:r,opacity:i,symbolConfig:s}=t,o=null!=s&&"object"==typeof s&&"isSquareFill"in s&&s.isSquareFill,l=t.cimOptions||t,u=l.geometryType||(0,a.n5)(e?.data?.symbol),f=await m(e,t,u),{feature:g,fieldMap:d}=l,p=t?.geometry||o||"esriGeometryPolygon"!==u?"preview":"legend";let y=f;const w=f;if(t?.geometry&&("esriGeometryPolygon"===u||"esriGeometryPolyline"===u)){const e=200;if((0,n.Lz)(f.width)<e||(0,n.Lz)(f.height)<e){const t=f.width>f.height?(0,n.PN)(e)*f.height/f.width:(0,n.PN)(e);y={width:f.width>f.height?(0,n.PN)(e):(0,n.PN)(e)*f.width/f.height,height:t}}}const v=await c.rasterizeCIMSymbolAsync(e,g,y,p,d,u,null,l.viewParams,l.allowScalingUp,t?.geometry?.toJSON());if(!v)return null;const{width:M,height:x}=v,b=document.createElement("canvas");b.width=M,b.height=x,b.getContext("2d").putImageData(v,0,0);const C=(0,n.Lz)(w.width),P=(0,n.Lz)(w.height),I=new Image(C,P);I.src=b.toDataURL(),I.ariaLabel=t.ariaLabel??null,I.alt=t.ariaLabel??"",null!=i&&(I.style.opacity=`${i}`);let S=I;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:C,height:P,src:I.src},fill:null,stroke:null,offset:[0,0]};S=(0,h.fz)([[e]],[C,P],{effectView:t.effectView,ariaLabel:t.ariaLabel})}return r&&S&&r.appendChild(S),S}},15173:(e,t,r)=>{r.d(t,{T:()=>s,U:()=>i});var n=r(64682);function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=(0,n.qE)(e,0,l);for(let n=0;n<4;n++)t[r+n]=Math.floor(256*h(i*o[n]))}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;for(let n=0;n<4;n++)r+=e[t+n]*a[n];return r}const o=[1,256,65536,16777216],a=[1/256,1/65536,1/16777216,1/4294967296],l=s(new Uint8ClampedArray([255,255,255,255]));function h(e){return e-Math.floor(e)}},25955:(e,t,r)=>{r.d(t,{OverrideHelper:()=>c});var n=r(88102),i=r(2925),s=r(82301),o=r(96247),a=r(61154),l=r(9036);const h=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:n,a:i}=e;return[t,r,n,255*i]};class c{static findApplicableOverrides(e,t,r){if(e&&t){if(e.primitiveName){let n=!1;for(const t of r)if(t.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const i of t)i.primitiveName===e.primitiveName&&r.push(i)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)c.findApplicableOverrides(n,t,r);if(e.symbolLayers)for(const n of e.symbolLayers)c.findApplicableOverrides(n,t,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)c.findApplicableOverrides(n,t,r);if(e.markerPlacement&&c.findApplicableOverrides(e.markerPlacement,t,r),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const n of e.markerGraphics)c.findApplicableOverrides(n,t,r),c.findApplicableOverrides(n.symbol,t,r)}else"CIMCharacterMarker"===e.type?c.findApplicableOverrides(e.symbol,t,r):"CIMHatchFill"===e.type?c.findApplicableOverrides(e.lineSymbol,t,r):"CIMPictureMarker"===e.type&&c.findApplicableOverrides(e.animatedSymbolProperties,t,r)}}}static findEffectOverrides(e,t){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,a.FH)(e),!t||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=(0,a.rB)(e),n=e.primitiveName,i=[];for(const s of t)s.primitiveName===n&&i.push((0,a.rB)(s));return{type:"cim-effect-param",effect:r,overrides:(0,a.pk)(i)}}static async resolveSymbolOverrides(e,t,r,n,i,o,l){if(!e?.symbol)return null;let{symbol:h,primitiveOverrides:u}=e;const f=!!u;if(!f&&!n)return h;h=(0,s.clone)(h),u=(0,s.clone)(u);let g=!0;if(t||(t={attributes:{}},g=!1),f){if(g||(u=u.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),l||(u=u.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),u.length>0){const e={spatialReference:r,fields:(0,a.O2)(t.attributes),geometryType:i};await c.createRenderExpressions(u,e),c.evaluateOverrides(u,t,i??"esriGeometryPoint",o,l)}c.applyOverrides(h,u)}return n&&c.applyDictionaryTextOverrides(h,t,n,null),h}static async createRenderExpressions(e,t){const r=[];for(const n of e){const e=n.valueExpressionInfo;if(!e||c._expressionToRenderExpression.has(e.expression))continue;const i=(0,o.Ad)(e.expression,t.spatialReference,t.fields);r.push(i),i.then((t=>c._expressionToRenderExpression.set(e.expression,t)))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,t,r,n,s){const o={$view:{scale:s?.scale}};for(const a of e){a.value&&"object"==typeof a.value&&(0,i.IB)(a.value)&&("Color"===a.propertyName||"StrokeColor"===a.propertyName)&&(a.value=h(a.value));const e=a.valueExpressionInfo;if(!e)continue;const s=c._expressionToRenderExpression.get(e.expression);s&&(a.value=(0,l.default)(s,t,o,r,n))}}static applyDictionaryTextOverrides(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Normal";if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const s=e.symbolLayers;if(!s)return;for(const o of s)o&&"CIMVectorMarker"===o.type&&c.applyDictionaryTextOverrides(o,t,r,n,"CIMTextSymbol"===e.type?e.textCase:i)}break;case"CIMVectorMarker":{const i=e.markerGraphics;if(!i)return;for(const e of i)e&&c.applyDictionaryTextOverrides(e,t,r,n)}break;case"CIMMarkerGraphic":{const s=e.textString;if(s&&s.includes("[")){const o=(0,a.gQ)(s,r);e.textString=(0,a.FM)(t,o,n,i)}}}}static applyOverrides(e,t,r,n){if(e.primitiveName)for(const i of t)if(i.primitiveName===e.primitiveName){const t=(0,a.YF)(i.propertyName);if(n&&n.push({cim:e,nocapPropertyName:t,value:e[t]}),r){let t=!1;for(const n of r)n.primitiveName===e.primitiveName&&(t=!0);t||r.push(i)}null!=i.value&&(e[t]=i.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const i of e.effects)c.applyOverrides(i,t,r,n);if(e.symbolLayers)for(const i of e.symbolLayers)c.applyOverrides(i,t,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const i of e.effects)c.applyOverrides(i,t,r,n);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const i of e.markerGraphics)c.applyOverrides(i,t,r,n),c.applyOverrides(i.symbol,t,r,n)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(const r of e)void 0!==r.value&&(t+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return t}static toValue(e,t){if("DashTemplate"===e)return t.split(" ").map((e=>Number(e)));if("Color"===e){const e=new n.default(t).toRgba();return e[3]*=255,e}return t}}c._expressionToRenderExpression=new Map},39817:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(42080);class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new i(e.lengths,e.coords)}static fromRect(e){const[t,r,n,s]=e,o=n-t,a=s-r;return new i([5],[t,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}get usedMemory(){return 64+(0,n.Qf)(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];if(n<3)continue;let i=this.coords[2*t],s=this.coords[2*t+1];for(let r=1;r<n;r+=1){const n=this.coords[2*(r+t)],o=this.coords[2*(r+t)+1];e+=-.5*(n-i)*(o+s),i=n,s=o}t+=n}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}deltaDecode(){const e=this.clone(),{coords:t,lengths:r}=e;let n=0;for(const i of r){for(let e=1;e<i;e++)t[2*(n+e)]+=t[2*(n+e)-2],t[2*(n+e)+1]+=t[2*(n+e)-1];n+=i}return e}clone(e){if(0===this.lengths.length)return new i([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),r=this.coords.slice(0,t);return e?(e.set(r),new i(this.lengths,e)):new i(Array.from(this.lengths),Array.from(r))}}},42080:(e,t,r)=>{r.d(t,{$B:()=>i,Qf:()=>h,Qh:()=>a,RS:()=>s,ez:()=>f,i5:()=>g,lM:()=>o,qK:()=>u,rq:()=>c});var n=r(25048);function i(e){return 32+e.length}const s=16;function o(e){if(!e)return 0;let t=u;for(const r in e)e.hasOwnProperty(r)&&(t+=l(e[r],!1));return t}function a(e){if(!e)return 0;if("number"==typeof e[0])return h(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return c(e,8);let r=f;for(let n=0;n<t;n++)r+=l(e[n]);return r}(e);let t=u;for(const r in e)e.hasOwnProperty(r)&&(t+=l(e[r]));return t}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?a(e):u;case"string":return i(e);case"number":return s;case"boolean":return 4;default:return 8}}function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>e+(t?(0,n.iu)(t)?t.byteLength+g:Array.isArray(t)?c(t,s):0:0)),0)}function c(e,t){return f+e.length*t}const u=32,f=16,g=145},73532:(e,t,r)=>{r.d(t,{$X:()=>k,B2:()=>o,Gy:()=>P,IE:()=>s,P5:()=>A,Q1:()=>i,QE:()=>S,SW:()=>O,Tr:()=>R,VV:()=>n,wp:()=>I});r(78629);function n(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function i(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:r,translate:n}=e,i=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[i,"lowerLeft"===t?s:-s,r[2]??1,r[3]??1],translate:[n[0]??0,n[1]??0,n[2]??0,n[3]??0]}}function s(e,t){let{scale:r,translate:n}=e;return Math.round((t-n[0])/r[0])}function o(e,t){let{scale:r,translate:n}=e;return Math.round((t-n[1])/r[1])}function a(e,t){let{scale:r,translate:n}=e;return Math.round(((t??0)-n[2])/r[2])}function l(e,t){let{scale:r,translate:n}=e;return t?Math.round((t-n[3])/r[3]):0}function h(e,t){return e&&t?g:e&&!t?u:!e&&t?f:c}const c=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),a=o(e,n[1]);r.push([i,a]);for(let l=1;l<t.length;l++){const[n,h]=t[l],c=s(e,n),u=o(e,h);c===i&&u===a||r.push([c-i,u-a]),i=c,a=u}return r},u=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),l=o(e,n[1]),h=a(e,n[2]);r.push([i,l,h]);for(let c=1;c<t.length;c++){const[n,u,f]=t[c],g=s(e,n),d=o(e,u),m=a(e,f);g===i&&d===l&&m===h||r.push([g-i,d-l,m]),i=g,l=d,h=m}return r},f=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),a=o(e,n[1]),h=l(e,n[2]);r.push([i,a,h]);for(let c=1;c<t.length;c++){const[n,u,f]=t[c],g=s(e,n),d=o(e,u),m=l(e,f);g===i&&d===a&&m===h||r.push([g-i,d-a,m]),i=g,a=d,h=m}return r},g=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),h=o(e,n[1]),c=a(e,n[2]),u=l(e,n[3]);r.push([i,h,c,u]);for(let f=1;f<t.length;f++){const[n,g,d,m]=t[f],p=s(e,n),y=o(e,g),w=a(e,d),v=l(e,m);p===i&&y===h&&w===c&&v===u||r.push([p-i,y-h,w,v]),i=p,h=y,c=w,u=v}return r};function d(e,t){let{scale:r,translate:n}=e;return t*r[0]+n[0]}function m(e,t){let{scale:r,translate:n}=e;return t*r[1]+n[1]}function p(e,t){let{scale:r,translate:n}=e;return(t??0)*r[2]+n[2]}function y(e,t){let{scale:r,translate:n}=e;return t?t*r[3]+n[3]:0}function w(e,t){return e&&t?b:e&&!t?M:!e&&t?x:v}const v=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=d(e,n[0]),s=m(e,n[1]);r[0]=[i,s];const{scale:o,originPosition:a}=e,l=o[0],h="lowerLeft"===a?o[1]:-o[1];for(let c=1;c<t.length;c++){const[e,n]=t[c];i+=l*e,s+=h*n,r[c]=[i,s]}return r},M=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=d(e,n[0]),s=m(e,n[1]);r[0]=[i,s,p(e,n[2])];const{scale:o,originPosition:a}=e,l=o[0],h="lowerLeft"===a?o[1]:-o[1];for(let c=1;c<t.length;c++){const[n,o,a]=t[c];i+=l*n,s+=h*o,r[c]=[i,s,p(e,a)]}return r},x=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=d(e,n[0]),s=m(e,n[1]);r[0]=[i,s,y(e,n[2])];const{scale:o,originPosition:a}=e,l=o[0],h="lowerLeft"===a?o[1]:-o[1];for(let c=1;c<t.length;c++){const[n,o,a]=t[c];i+=l*n,s+=h*o,r[c]=[i,s,y(e,a)]}return r},b=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=d(e,n[0]),s=m(e,n[1]);r[0]=[i,s,p(e,n[2]),y(e,n[3])];const{scale:o,originPosition:a}=e,l=o[0],h="lowerLeft"===a?o[1]:-o[1];for(let c=1;c<t.length;c++){const[n,o,a,u]=t[c];i+=l*n,s+=h*o,r[c]=[i,s,p(e,a),y(e,u)]}return r};function C(e,t,r){const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=t(e,r[i]);return n}function P(e,t,r){const n=i(e);return t.x=s(n,r.x),t.y=o(n,r.y),null!=r.z&&(t.z=a(n,r.z)),null!=r.m&&(t.m=l(n,r.m)),t}function I(e,t,r){const n=function(e,t,r,n){const i=[],s=h(r,n);for(let o=0;o<t.length;o++){const r=s(e,t[o]);r&&r.length>=3&&i.push(r)}return i.length?i:null}(i(e),r.rings,r.hasZ,r.hasM);return n?(t.rings=n,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}function S(e,t,r){const n=function(e,t,r,n){const i=[],s=h(r,n);for(let o=0;o<t.length;o++){const r=s(e,t[o]);r&&r.length>=2&&i.push(r)}return i.length?i:null}(i(e),r.paths,r.hasZ,r.hasM);return n?(t.paths=n,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}function O(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r?.hasZ??!1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r?.hasM??!1;if(null!=r){const o=i(e);t.points=w(n,s)(o,r.points),t.hasZ=n,t.hasM=s}return t}function R(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!=r?.z,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!=r?.m;if(null==r)return t;const o=i(e);return t.x=d(o,r.x),t.y=m(o,r.y),n&&(t.z=p(o,r.z)),s&&(t.m=y(o,r.m)),t}function k(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r?.hasZ??!1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r?.hasM??!1;if(null!=r){const o=i(e);t.rings=C(o,w(n,s),r.rings),t.hasZ=n,t.hasM=s}return t}function A(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r?.hasZ??!1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r?.hasM??!1;if(null!=r){const o=i(e);t.paths=C(o,w(n,s),r.paths),t.hasZ=n,t.hasM=s}return t}},75201:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(74715);class i{constructor(e,t,r,i){this.transformedX=0,this.transformedY=0,this.center=(0,n.fA)(e,t),this.centerT=(0,n.vt)(),this.halfWidth=r/2,this.halfHeight=i/2,this.width=r,this.height=i}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new i(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const r=Math.abs(e.centerT[0]-this.centerT[0]),n=Math.abs(e.centerT[1]-this.centerT[1]),i=(e.halfWidth+this.halfWidth+t)/r,s=(e.halfHeight+this.halfHeight+t)/n,o=Math.min(i,s);return Math.log2(o)}extend(e){const t=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),n=Math.max(this.xmax,e.xmax)-t,i=Math.max(this.ymax,e.ymax)-r,s=t+n/2,o=r+i/2;this.width=n,this.height=i,this.halfWidth=n/2,this.halfHeight=i/2,this.x=s,this.y=o}static deserialize(e){const t=e.readF32(),r=e.readF32(),n=e.readInt32(),s=e.readInt32();return new i(t,r,n,s)}}},81061:(e,t,r)=>{r.r(t),r.d(t,{CIMSymbolRasterizer:()=>c});var n=r(94505),i=r(75119),s=r(88116),o=r(25955),a=r(52316),l=r(61154);const h=96/72;class c{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new n.A}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,r,n,i,h,c,f,g,d){if(!e)return null;const{data:m}=e;if(!m||"CIMSymbolReference"!==m.type||!m.symbol)return null;const{symbol:p}=m;h||(h=(0,l.n5)(p));const y=await o.OverrideHelper.resolveSymbolOverrides(m,t,this._spatialReference,i,h,c,f),w=this._cimResourceManager,v=[];s.wp.fetchResources(y,w,v),s.wp.fetchFonts(y,w,v),v.length>0&&await Promise.all(v);const{width:M,height:x}=r;let b=u(h,M,x,n,d);const C=s.wp.getEnvelope(y,b,w);if(!C)return null;C.x===1/0&&(C.x=M+2),C.y===1/0&&(C.y=-x/2),C.width===-1/0&&(C.width=M),C.height===-1/0&&(C.height=x);let P=1,I=0,S=0;switch(p.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;C.width>M&&(e=M/C.width);let t=1;C.height>x&&(t=x/C.height),"preview"===n&&(C.width<M&&(e=M/C.width),C.height<x&&(t=x/C.height)),P=Math.min(e,t),I=C.x+C.width/2,S=C.y+C.height/2}break;case"CIMLineSymbol":if(d){S=C.y+C.height/2,I=C.x+C.width/2;const e=C.width-M,t=C.height-x;b={paths:(0,a.hs)(b.paths,{xmin:-1*C.width/2+e,xmax:C.width/2-e,ymin:-1*C.height/2+t,ymax:C.height/2-t,width:C.width-2*e,height:C.height-2*t})}}else{(g||C.height>x)&&(P=x/C.height),S=C.y+C.height/2;const e=C.x*P+M/2,t=(C.x+C.width)*P+M/2,{paths:r}=b;r[0][0][0]-=e/P,r[0][2][0]-=(t-M)/P}break;case"CIMPolygonSymbol":if(d){S=C.y+C.height/2,I=C.x+C.width/2;const e=C.width-M,t=C.height-x;b={paths:(0,a.hs)(b.rings,{xmin:-1*C.width/2+e,xmax:C.width/2-e,ymin:-1*C.height/2+t,ymax:C.height/2-t,width:C.width-2*e,height:C.height-2*t})}}else{I=C.x+C.width/2,S=C.y+C.height/2;const e=C.x*P+M/2,t=(C.x+C.width)*P+M/2,r=C.y*P+x/2,n=(C.y+C.height)*P+x/2,{rings:i}=b;e<0&&(i[0][0][0]-=e,i[0][3][0]-=e,i[0][4][0]-=e),r<0&&(i[0][0][1]+=r,i[0][1][1]+=r,i[0][4][1]+=r),t>M&&(i[0][1][0]-=t-M,i[0][2][0]-=t-M),n>x&&(i[0][2][1]+=n-x,i[0][3][1]+=n-x)}}const O={type:"cim",data:{type:"CIMSymbolReference",symbol:y}};return this.rasterize(O,M,x,I,S,P,h,1,b)}rasterize(e,t,r,n,s,o,a){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:window.devicePixelRatio||1;const{data:d}=e;if(!d||"CIMSymbolReference"!==d.type||!d.symbol)return null;const{symbol:m}=d,p=this._canvas,y=g*h;p.width=t*y,p.height=r*y,a||(a=(0,l.n5)(m)),f||(f=u(a,t,r,"legend")),p.width+=2*c,p.height+=2*c;const w=p.getContext("2d",{willReadFrequently:!0}),v=i.IT.createIdentity();return v.translate(-n,-s),v.scale(o*y,-o*y),v.translate(t*y/2+c,r*y/2+c),w.clearRect(0,0,p.width,p.height),new i.Rj(w,this._cimResourceManager,v,!0).drawSymbol(m,f),w.getImageData(0,0,p.width,p.height)}}function u(e,t,r,n,i){const s=-t/2+1,o=t/2-1,l=r/2-1,h=-r/2+1;if(i&&("esriGeometryPolygon"===e||"esriGeometryPolyline"===e)){const n=function(e,t,r,n){return"esriGeometryPolygon"===t?{rings:(0,a.Tl)((0,a.hs)(e.rings,{xmin:0,ymin:0,xmax:r,ymax:n,width:r,height:n}),-1*r/2,-1*n/2)}:"esriGeometryPolyline"===t?{paths:(0,a.Tl)((0,a.hs)(e.paths,{xmin:0,ymin:0,xmax:r,ymax:n,width:r,height:n}),-1*r/2,-1*n/2)}:null}(i,e,t,r);if(n)return n}switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[s,0],[0,0],[o,0]]]};default:return"legend"===n?{rings:[[[s,l],[o,0],[o,h],[s,h],[s,l]]]}:{rings:[[[s,l],[o,l],[o,h],[s,h],[s,l]]]}}}},94505:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(26903),i=r(99571);class s{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,t){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let n=this._inFlightResourceMap.get(e);return n?n.then((e=>({width:e.width,height:e.height}))):(n=(0,i.M5)(e,t),this._inFlightResourceMap.set(e,n),n.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return(0,n.Al)(e)}}}}]);