"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[10963,21238,66201,72363,88582],{1262:(e,t,i)=>{i.d(t,{A:()=>M});var s=i(93800),n=i(17741),r=i(79953),o=i(56612),a=i(48602),l=(i(21265),i(50925),i(14746),i(75269)),d=i(27811),c=i(41514),h=i(60266),u=i(49403),p=i(50821),m=(i(17745),i(76697)),_=i(87118),v=i(81558);const g="esri-feature-utility-network-associations",f=`${g}__loading-container`,w={base:g,listContainer:`${g}__list`,loadingContainer:f,loadingContainerSticky:`${f}--sticky`};let y=class extends d.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this.onSelectAssociationType=()=>{},this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=5,this.viewModel=new v.A,this.messages=null,this.messagesCommon=null,this.visibleElements=new c.A}initialize(){this._featureElementInfo=new h.A,this.addHandles([(0,r.watch)((()=>[this.viewModel.description,this.viewModel.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),r.initial)])}loadDependencies(){return(0,u.W)({icon:()=>Promise.resolve().then(i.bind(i,92439)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),loader:()=>Promise.resolve().then(i.bind(i,23173)),notice:()=>i.e(51132).then(i.bind(i,51132))})}destroy(){this._featureElementInfo=(0,n.pR)(this._featureElementInfo)}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){const{state:e}=this.viewModel;return(0,_.K)("div",{class:this.classes(w.base,p.D.widget)},this._featureElementInfo?.render(),"loading"===e?this._renderLoading():"disabled"===e?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,_.K)("div",{class:w.loadingContainerSticky,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return(0,_.K)("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderLoading(){return(0,_.K)("div",{class:w.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){return(0,_.K)("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},(0,_.K)("div",{slot:"message"},this.messages?.noAssociations))}_renderAssociationType(e){const{viewModel:t}=this,i=this._getAssociationTypeTitle(e);return(0,_.K)("calcite-list-item",{description:(0,o._e)(e.description),key:`association-type-${e.type}`,label:(0,o._e)(i),value:e.type,onCalciteListItemSelect:()=>this.onSelectAssociationType({viewModel:t,listType:e,title:i})},(0,_.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderAssociations(e){const{viewModel:t}=this;return"featureForm"===t.source||t.getFeatureCountForAssociationType(e.type)>0?this._renderAssociationType(e):void 0}_renderContent(){const{messages:e,viewModel:t}=this,{state:i,associationTypes:s}=t;return(0,_.K)("div",{class:w.listContainer,key:"list-container"},"ready"===i?(0,_.K)("div",null,(0,_.K)("calcite-list",{displayMode:"flat",label:e?.associationsList},s.map((e=>this._renderAssociations(e))))):null,this._renderStickyLoading())}_getAssociationTypeTitle(e){const{messages:t}=this;if(e.title)return e.title;switch(e.type){case"attachment":return t.associationsAttachments;case"connectivity":return t.associationsConnectivity;case"structure":return t.associationsStructure;case"content":return t.associationsContents;case"container":return t.associationsContainer}}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,s=t.title&&this.title;this._featureElementInfo?.set({description:i,title:s,headingLevel:e})}};(0,s._)([(0,a.MZ)({constructOnly:!0})],y.prototype,"onSelectAssociationType",void 0),(0,s._)([(0,a.MZ)()],y.prototype,"flowType",void 0),(0,s._)([(0,a.MZ)()],y.prototype,"flowItems",void 0),(0,s._)([(0,a.MZ)()],y.prototype,"parentFeatureViewModel",void 0),(0,s._)([(0,a.MZ)()],y.prototype,"featureVisibleElements",void 0),(0,s._)([(0,a.MZ)()],y.prototype,"description",null),(0,s._)([(0,a.MZ)()],y.prototype,"headingLevel",void 0),(0,s._)([(0,a.MZ)()],y.prototype,"title",null),(0,s._)([(0,a.MZ)({type:v.A})],y.prototype,"viewModel",void 0),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/widgets/Feature/t9n/Feature")],y.prototype,"messages",void 0),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/t9n/common")],y.prototype,"messagesCommon",void 0),(0,s._)([(0,a.MZ)({type:c.A,nonNullable:!0})],y.prototype,"visibleElements",void 0),y=(0,s._)([(0,l.$)("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],y);const M=y},4500:(e,t,i)=>{i.d(t,{Q:()=>r});var s=i(56612);const n=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function r(e,t){if("string"!=typeof t||!t)return t;const i=n.find((e=>e.pattern.test(t)));if(!i)return t;const r=t.match(i.pattern),o=r?.[2],a=(0,s.HC)((0,s.HC)(i.label,{messages:e,hierPart:o}),{appName:i.appName}),l=i.target?` target="${i.target}"`:"",d="_blank"===i.target?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${l} href="$1"${d}>${a}</a>`)}},9137:(e,t,i)=>{i.d(t,{D:()=>a,S:()=>d});var s=i(64682),n=i(50821),r=i(17745),o=i(87118);function a(e,t){let{level:i,class:s,...a}=e;const d=l(i);return(0,o.K)(`h${d}`,{...a,"aria-level":String(d),class:(0,r.Ly)(n.D.heading,s),role:"heading"},t)}function l(e){return(0,s.qE)(Math.ceil(e),1,6)}function d(e){return l(e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}},21238:(e,t,i)=>{i.r(t),i.d(t,{default:()=>me});var s=i(93800),n=(i(88677),i(79953)),r=i(48602),o=i(32980),a=(i(21265),i(14746),i(75269)),l=i(27811),d=(i(50925),i(7293)),c=i(25637),h=i(60266),u=i(17745),p=i(87118);const m="esri-feature-attachments";let _=class extends l.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new d.default,this.headingLevel=2,this.viewModel=new c.A}initialize(){this._featureElementInfo=new h.A,this.addHandles([(0,n.watch)((()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),n.initial),(0,n.watch)((()=>this.viewModel),(e=>this.attachmentsWidget.viewModel=e),n.initial)])}destroy(){this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),this._featureElementInfo?.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){const{attachmentsWidget:e}=this;return(0,p.K)("div",{class:m},this._featureElementInfo?.render(),e?.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo?.set({description:e,title:t,headingLevel:i})}};(0,s._)([(0,r.MZ)({readOnly:!0})],_.prototype,"attachmentsWidget",void 0),(0,s._)([(0,r.MZ)()],_.prototype,"description",null),(0,s._)([(0,r.MZ)()],_.prototype,"displayType",null),(0,s._)([(0,r.MZ)()],_.prototype,"graphic",null),(0,s._)([(0,r.MZ)()],_.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)()],_.prototype,"title",null),(0,s._)([(0,r.MZ)({type:c.A})],_.prototype,"viewModel",void 0),_=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureAttachments")],_);const v=_;var g=i(78759),f=i(92471),w=i(72363);const y="esri-feature-content",M={base:y,loaderContainer:`${y}__loader-container`,loader:`${y}__loader`};let b=class extends l.default{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach((e=>{(0,f.shouldOpenInNewTab)(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))}}get creator(){return this.viewModel?.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){return this.viewModel?.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}render(){const e=this.viewModel?.state;return(0,p.K)("div",{class:M.base},"loading"===e?this._renderLoading():this._renderCreated())}_renderLoading(){return(0,p.K)("div",{class:M.loaderContainer,key:"loader"},(0,p.K)("div",{class:M.loader}))}_renderCreated(){const e=this.viewModel?.created;return e?e instanceof HTMLElement?(0,p.K)("div",{afterCreate:this._attachToNode,bind:e,key:e}):(0,w.isWidget)(e)?(0,p.K)("div",{key:e},!e.destroyed&&e.render()):(0,p.K)("div",{afterCreate:this._addTargetToAnchors,innerHTML:e,key:e}):null}_attachToNode(e){e.appendChild(this)}};(0,s._)([(0,r.MZ)()],b.prototype,"creator",null),(0,s._)([(0,r.MZ)()],b.prototype,"graphic",null),(0,s._)([(0,r.MZ)({type:g.A})],b.prototype,"viewModel",void 0),b=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureContent")],b);const I=b;var A=i(26723),C=i(50821),T=i(4500),E=i(76697);const F="esri-feature-fields",x={base:F,fieldHeader:`${F}__field-header`,fieldData:`${F}__field-data`,fieldDataDate:`${F}__field-data--date`};let $=class extends l.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new A.A,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new h.A,this.addHandles((0,n.watch)((()=>[this.viewModel?.description,this.viewModel?.title]),(()=>this._setupFeatureElementInfo()),n.initial))}destroy(){this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){return(0,p.K)("div",{class:x.base},this._featureElementInfo?.render(),this._renderFields())}_renderFieldInfo(e,t){const{attributes:i}=this.viewModel,s=e.fieldName||"",n=e.label||s,r=i?null==i[s]?"":i[s]:"",o=!!e.format?.dateFormat,a="number"!=typeof r||o?(0,T.Q)(this.messagesURIUtils,r):this._forceLTR(r),l={[x.fieldDataDate]:o};return(0,p.K)("tr",{key:`fields-element-info-row-${s}-${t}`},(0,p.K)("th",{class:x.fieldHeader,innerHTML:n,key:`fields-element-info-row-header-${s}-${t}`}),(0,p.K)("td",{class:this.classes(x.fieldData,l),innerHTML:a,key:`fields-element-info-row-data-${s}-${t}`}))}_renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e?.length?(0,p.K)("table",{class:C.D.table,summary:this.messages.fieldsSummary},(0,p.K)("tbody",null,e.map(((e,t)=>this._renderFieldInfo(e,t))))):null}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo?.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};(0,s._)([(0,r.MZ)()],$.prototype,"attributes",null),(0,s._)([(0,r.MZ)()],$.prototype,"description",null),(0,s._)([(0,r.MZ)()],$.prototype,"expressionInfos",null),(0,s._)([(0,r.MZ)()],$.prototype,"fieldInfos",null),(0,s._)([(0,r.MZ)()],$.prototype,"title",null),(0,s._)([(0,r.MZ)({type:A.A,nonNullable:!0})],$.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/widgets/Feature/t9n/Feature")],$.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/widgets/support/t9n/uriUtils")],$.prototype,"messagesURIUtils",void 0),$=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureFields")],$);const k=$;var K=i(15564),L=i(88171),R=i(377),Z=i(49403),S=i(5619),N=i(99961);const P="esri-feature-media",W={base:P,mediaContainer:`${P}__container`,mediaItemContainer:`${P}__item-container`,mediaItem:`${P}__item`,mediaItemText:`${P}__item-text`,mediaItemTitle:`${P}__item-title`,mediaItemCaption:`${P}__item-caption`,mediaNavigation:`${P}__item-navigation`,mediaPagination:`${P}__pagination`,mediaPaginationText:`${P}__pagination-text`,mediaPrevious:`${P}__previous`,mediaPreviousIconLTR:`${P}__previous-icon`,mediaPreviousIconRTL:`${P}__previous-icon--rtl`,mediaNext:`${P}__next`,mediaNextIconLTR:`${P}__next-icon`,mediaNextIconRTL:`${P}__next-icon--rtl`,mediaChart:`${P}__chart`,mediaPaginationButton:`${P}__pagination-button`,mediaPaginationIcon:`${P}__pagination-icon`,mediaChartRendered:`${P}__chart--rendered`},V="category",D="value";let O=class extends l.default{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new R.A,this.messages=null,this._disposeChart=e=>{this._chartRootMap.get(e)?.dispose(),this._chartRootMap.delete(e)},this._createChart=async e=>{const{destroyed:t,viewModel:s}=this;if(t||!s||!e)return;const{createRoot:n}=await Promise.all([i.e(59041),i.e(81520),i.e(93518),i.e(99213)]).then(i.bind(i,99213)),r=await n(e);this._chartRootMap.set(e,r),this._renderChart({mediaInfo:s.activeMediaInfo,root:r})}}initialize(){this._featureElementInfo=new h.A,this.addHandles([(0,n.watch)((()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex]),(()=>this._setupMediaRefreshTimer()),n.initial),(0,n.watch)((()=>[this.viewModel?.description,this.viewModel?.title]),(()=>this._setupFeatureElementInfo()),n.initial)])}loadDependencies(){return(0,Z.W)({icon:()=>Promise.resolve().then(i.bind(i,92439))})}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){return(0,p.K)("div",{bind:this,class:W.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:e,activeMediaInfoIndex:t}=this.viewModel,i=this._renderMediaText();return e?(0,p.K)("div",{class:W.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),(0,p.K)("div",{class:W.mediaNavigation},i,e>1?(0,p.K)("div",{class:W.mediaPagination},this._renderMediaPageButton("previous"),(0,p.K)("span",{class:W.mediaPaginationText},(0,N.V)(this.messages.pageText,{index:t+1,total:e})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e&&e.title?(0,p.K)("div",{class:W.mediaItemTitle,innerHTML:e.title,key:"media-title"}):null,i=e&&e.caption?(0,p.K)("div",{class:W.mediaItemCaption,innerHTML:e.caption,key:"media-caption"}):null;return t||i?(0,p.K)("div",{class:W.mediaItemText,key:"media-text"},t,i):null}_renderImageMediaInfo(e){if(!e.value)return null;const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:s}=this.viewModel,{value:n,refreshInterval:r,altText:o,title:a,type:l}=e,{sourceURL:d,linkURL:c}=n,h=(0,f.shouldOpenInNewTab)(c??void 0)?"_blank":"_self",u="_blank"===h?"noreferrer":"",m=r?t:null,_=m?m.timestamp:0,v=m?m.sourceURL:d,g=(0,p.K)("img",{alt:o||a,key:`media-${l}-${i}-${s}-${_}`,src:v??void 0});return(c?(0,p.K)("a",{href:c,rel:u,target:h,title:a},g):null)??g}_renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return(0,p.K)("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:W.mediaChart,key:`media-${e.type}-${t}-${i}`})}_renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this._renderImageMediaInfo(e):e.type.includes("chart")?this._renderChartMediaInfo(e):null:null}_renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;return e?(0,p.K)("div",{class:W.mediaItemContainer,key:"media-container"},(0,p.K)("div",{class:W.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t="previous"===e,i=t?this.messages.previous:this.messages.next,s=t?"chevron-left":"chevron-right",n=t?"media-previous":"media-next",r=t?this._previous:this._next;return(0,p.K)("button",{"aria-label":i,bind:this,class:W.mediaPaginationButton,key:n,onclick:r,tabIndex:0,title:i,type:"button"},(0,p.K)("calcite-icon",{class:W.mediaPaginationIcon,icon:s,scale:"s"}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo?.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:e,layer:t}=this.viewModel;return e&&t?.featureReduction&&"renderer"in t.featureReduction?t.featureReduction.renderer:t?.renderer}async _getSeriesColors(e){const{colorAm5:t}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708)),s=new Map;return e.forEach((e=>{e.color&&s.set(e,t(e.color.toCss(!0)))})),s}async _getRendererColors(){const{colorAm5:e}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708)),t=new Map,s=this._getRenderer();if(!s)return t;const n=await(0,L.getColorsFromRenderer)(s);return n.delete("default"),Array.from(n.values()).every((e=>1===e?.length))?(Array.from(n.keys()).forEach((i=>{const s=n.get(i)?.[0]?.toCss(!0);s&&t.set(i,e(s))})),t):t}_handleMediaKeyup(e){const{key:t}=e;"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!(0,K.O)()}_getChartAnimationMS(){return this._canAnimateChart()?250:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?500:0}async _renderChart(e){const{root:t,mediaInfo:s}=e,{value:n,type:r}=s,{ResponsiveThemeAm5:o,DarkThemeAm5:a,AnimatedThemeAm5:l,ColorSetAm5:d,ThemeAm5:c,esriChartColorSet:h}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708)),u=c.new(t);u.rule("ColorSet").set("colors",h),u.rule("ColorSet").set("reuse",!0);const p=[o.new(t),u];(0,S.g4)()&&p.push(a.new(t)),this._canAnimateChart()&&p.push(l.new(t)),t.setThemes(p);const m=await this._getRendererColors(),_=await this._getSeriesColors(n.series),v=d.new(t,{}),g=_.get(n.series[0]),f=g?{lineSettings:{stroke:g}}:void 0,w=n.series.map(((e,t)=>{const i=_.get(e)||m.get(e.fieldName)||v.getIndex(t);return{[V]:e.tooltip,[D]:e.value,columnSettings:{fill:i,stroke:i},...f}})).filter((e=>"pie-chart"!==r||null!=e.value&&e.value>0));"pie-chart"===r?this._createPieChart(e,w):this._createXYChart(e,w)}_getDirection(){return(0,u.V8)(this.container)?"rtl":"ltr"}async _customizeChartTooltip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";const{colorAm5:s}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708));e.setAll({pointerOrientation:t}),e.get("background")?.setAll({stroke:s("rgba(50, 50, 50, 1)")}),e.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:200})}async _createPieChart(e,t){const{TooltipAm5:s}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708)),{PieChartAm5:n,PieSeriesAm5:r}=await Promise.all([i.e(59041),i.e(81520),i.e(64405),i.e(52407)]).then(i.bind(i,52407)),{mediaInfo:o,root:a}=e,{title:l}=o,d=o?.altText||o?.title||"",c=a.container.children.push(n.new(a,{ariaLabel:d,focusable:!0,paddingBottom:5,paddingTop:5,paddingLeft:5,paddingRight:5})),h="{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})",u=s.new(a,{labelText:h}),p=c.series.push(r.new(a,{name:l,valueField:D,categoryField:V,tooltip:u}));p.ticks.template.set("forceHidden",!0),p.labels.template.set("forceHidden",!0),p.slices.template.states.create("active",{shiftRadius:5}),this._customizeChartTooltip(u),p.slices.template.setAll({ariaLabel:h,focusable:!0,templateField:"columnSettings"}),p.data.setAll(t),p.appear(this._getChartSeriesAnimationMS()),c.appear(this._getChartAnimationMS()),c.root.dom.classList.toggle(W.mediaChartRendered,!0)}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}async _createColumnChart(e,t,s){const{TooltipAm5:n,ScrollbarAm5:r}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708)),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:d,ColumnSeriesAm5:c}=await Promise.all([i.e(59041),i.e(81520),i.e(64405),i.e(39061),i.e(15352)]).then(i.bind(i,15352)),{mediaInfo:h,root:p}=t,{value:m,title:_}=h;e.setAll({wheelX:"panX",wheelY:"zoomX"});const v=e.xAxes.push(o.new(p,{renderer:a.new(p,{inversed:(0,u.V8)(this.container)}),categoryField:V}));v.get("renderer").labels.template.setAll({forceHidden:!0});const g=e.yAxes.push(l.new(p,{renderer:d.new(p,{inside:!1}),min:this._getMinSeriesValue(m.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const f="{categoryX}",w=n.new(p,{labelText:f}),y=e.series.push(c.new(p,{name:_,xAxis:v,yAxis:g,valueYField:D,categoryXField:V,tooltip:w}));this._customizeChartTooltip(w),y.columns.template.setAll({ariaLabel:f,focusable:!0,templateField:"columnSettings"}),m.series.length>15&&e.set("scrollbarX",r.new(p,{orientation:"horizontal"})),v.data.setAll(s),y.data.setAll(s),y.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createBarChart(e,t,s){const{TooltipAm5:n,ScrollbarAm5:r}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708)),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:d,ColumnSeriesAm5:c}=await Promise.all([i.e(59041),i.e(81520),i.e(64405),i.e(39061),i.e(15352)]).then(i.bind(i,15352)),{mediaInfo:h,root:p}=t,{value:m,title:_}=h;e.setAll({wheelX:"panY",wheelY:"zoomY"});const v=e.yAxes.push(o.new(p,{renderer:d.new(p,{inversed:!0}),categoryField:V}));v.get("renderer").labels.template.setAll({forceHidden:!0});const g=e.xAxes.push(l.new(p,{renderer:a.new(p,{inside:!1,inversed:(0,u.V8)(this.container)}),min:this._getMinSeriesValue(m.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const f="{categoryY}",w=n.new(p,{labelText:f}),y=e.series.push(c.new(p,{name:_,xAxis:g,yAxis:v,valueXField:D,categoryYField:V,tooltip:w}));this._customizeChartTooltip(w,"vertical"),y.columns.template.setAll({ariaLabel:f,focusable:!0,templateField:"columnSettings"}),m.series.length>15&&e.set("scrollbarY",r.new(p,{orientation:"vertical"})),v.data.setAll(s),y.data.setAll(s),y.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createLineChart(e,t,s){const{TooltipAm5:n,ScrollbarAm5:r}=await Promise.all([i.e(59041),i.e(24708)]).then(i.bind(i,24708)),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:d,LineSeriesAm5:c}=await Promise.all([i.e(59041),i.e(81520),i.e(64405),i.e(39061),i.e(15352)]).then(i.bind(i,15352)),{root:h,mediaInfo:p}=t,{value:m,title:_}=p;e.setAll({wheelX:"panX",wheelY:"zoomX"});const v=e.xAxes.push(o.new(h,{renderer:a.new(h,{inversed:(0,u.V8)(this.container)}),categoryField:V}));v.get("renderer").labels.template.setAll({forceHidden:!0});const g=e.yAxes.push(l.new(h,{renderer:d.new(h,{inside:!1}),min:this._getMinSeriesValue(m.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const f=s[0]?.lineSettings?.stroke,w=n.new(h,{getFillFromSprite:!f,labelText:"{categoryX}"});f&&w.get("background")?.setAll({fill:f});const y=e.series.push(c.new(h,{name:_,xAxis:v,yAxis:g,valueYField:D,categoryXField:V,tooltip:w}));y.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(w,"vertical"),m.series.length>15&&e.set("scrollbarX",r.new(h,{orientation:"horizontal"})),v.data.setAll(s),y.data.setAll(s),y.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createXYChart(e,t){const{XYChartAm5:s,XYCursorAm5:n}=await Promise.all([i.e(59041),i.e(81520),i.e(64405),i.e(39061),i.e(15352)]).then(i.bind(i,15352)),{root:r,mediaInfo:o}=e,{type:a}=o,l=o?.altText||o?.title||"",d=r.container.children.push(s.new(r,{ariaLabel:l,focusable:!0,panX:!0,panY:!0}));d.set("cursor",n.new(r,{})),"column-chart"===a&&await this._createColumnChart(d,e,t),"bar-chart"===a&&await this._createBarChart(d,e,t),"line-chart"===a&&await this._createLineChart(d,e,t),d.root.dom.classList.toggle(W.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:e&&this._getImageSource(e,t)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;"image"===e?.type&&e?.refreshInterval>0&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e,s=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const n=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL)}),s);this._refreshTimer=n}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[s,n=""]=e.split("#");return`${s}${i}timestamp=${t}${n?"#":""}${n}`}};(0,s._)([(0,r.MZ)()],O.prototype,"_refreshIntervalInfo",void 0),(0,s._)([(0,r.MZ)()],O.prototype,"attributes",null),(0,s._)([(0,r.MZ)()],O.prototype,"activeMediaInfoIndex",null),(0,s._)([(0,r.MZ)()],O.prototype,"description",null),(0,s._)([(0,r.MZ)()],O.prototype,"fieldInfoMap",null),(0,s._)([(0,r.MZ)()],O.prototype,"layer",null),(0,s._)([(0,r.MZ)()],O.prototype,"mediaInfos",null),(0,s._)([(0,r.MZ)()],O.prototype,"popupTemplate",null),(0,s._)([(0,r.MZ)()],O.prototype,"relatedInfos",null),(0,s._)([(0,r.MZ)()],O.prototype,"title",null),(0,s._)([(0,r.MZ)({type:R.A})],O.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/widgets/Feature/t9n/Feature")],O.prototype,"messages",void 0),O=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureMedia")],O);const H=O;var z=i(50939);const X="esri-feature",U={base:`${X}-expression`,loadingSpinnerContainer:`${X}__loading-container`};let B=class extends l.default{constructor(e,t){super(e,t),this._contentWidget=null,this.viewModel=new z.A}initialize(){this.addHandles((0,n.watch)((()=>this.viewModel?.contentElementViewModel),(()=>this._setupExpressionWidget()),n.initial))}loadDependencies(){return(0,Z.W)({loader:()=>Promise.resolve().then(i.bind(i,23173))})}destroy(){this._destroyContentWidget()}render(){const{state:e}=this.viewModel;return(0,p.K)("div",{class:U.base},"loading"===e?this._renderLoading():"disabled"===e?null:this._contentWidget?.render())}_renderLoading(){return(0,p.K)("div",{class:U.loadingSpinnerContainer,key:"loading-container"},(0,p.K)("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t?.type;this._destroyContentWidget();const s=e?"fields"===i?new k({viewModel:e}):"media"===i?new H({viewModel:e}):"text"===i?new I({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}};(0,s._)([(0,r.MZ)({type:z.A})],B.prototype,"viewModel",void 0),B=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureExpression")],B);const Y=B;var G,q=i(17741),j=i(49959),Q=i(56612),J=i(27531),ee=i(23224);const te="esri-feature",ie=`${te}-relationship`,se={base:ie,listContainer:`${ie}__list`,listItem:`${ie}__list-item`,listItemHidden:`${ie}__list-item--hidden`,listContainerQuerying:`${ie}__list--querying`,featureObserver:`${te}__feature-observer`,stickySpinnerContainer:`${te}__sticky-loading-container`,loadingSpinnerContainer:`${te}__loading-container`},ne={title:!0,description:!0};let re=G=class extends l.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver((e=>{let[t]=e;t?.isIntersecting&&this._increaseFeaturePage()}),{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new J.A,this.messages=null,this.messagesCommon=null,this.visibleElements={...ne},this._increaseFeaturePage=()=>{const{state:e,showAllEnabled:t,relatedFeatures:i,featuresPerPage:s,featurePage:n}=this.viewModel;"ready"===e&&t&&i.length>=s*n&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new h.A,this.addHandles([(0,n.watch)((()=>[this.viewModel.description,this.viewModel.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),n.initial),(0,n.watch)((()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode]),(()=>this._handleRelatedFeatureObserverChange())),(0,n.on)((()=>this.viewModel.relatedFeatureViewModels),"change",(()=>this._setupRelatedFeatureViewModels()))])}loadDependencies(){return(0,Z.W)({chip:()=>i.e(60382).then(i.bind(i,60382)),icon:()=>Promise.resolve().then(i.bind(i,92439)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),loader:()=>Promise.resolve().then(i.bind(i,23173)),notice:()=>i.e(51132).then(i.bind(i,51132))})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=(0,q.pR)(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i,state:s,allCategoriesCount:n}=this.viewModel;return!e&&"ready"===s&&(!!n&&(n>i||0===i)||!!t&&(t>i||0===i))}get displayListItems(){const{relatedFeatureViewModels:e,allCategoriesCount:t}=this.viewModel;return this.displayShowAllButton||!!e.length||!!t}get allItemsDescription(){const{messages:e}=this,{featureCount:t,allCategories:i,allCategoriesCount:s}=this.viewModel;return(0,N.V)(e?.numberRecords,{number:(0,ee.ZV)(i?s:t)})}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){const{activeCategory:e,title:t}=this.viewModel;return e?.name??t}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...ne,...e}}render(){const{state:e}=this.viewModel;return(0,p.K)("div",{class:this.classes(se.base,C.D.widget)},this._featureElementInfo?.render(),"loading"===e?this._renderLoading():"disabled"===e?this._renderRelationshipNotFound():this._renderRelatedFeatures())}async _selectCategory(e){const{flowItems:t,featureVisibleElements:i,viewModel:s}=this;t&&(s.activeCategory=e,s.showAllEnabled=!0,t.push(new G({flowItems:t,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:s})))}async _selectRecord(e){const{flowItems:t,featureVisibleElements:s}=this;if(!t)return;e.abilities={relationshipContent:!0};const{default:n}=await Promise.resolve().then(i.bind(i,21238));t.push(new n({flowItems:t,flowType:this.flowType,viewModel:e,visibleElements:s}))}_showAllRecords(){const{flowItems:e}=this;if(!e)return;const{viewModel:t,featureVisibleElements:i}=this;t.showAllEnabled=!0;const s=new G({flowItems:e,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:t});e.push(s)}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,p.K)("div",{class:se.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return(0,p.K)("calcite-loader",{inline:!0,label:""})}_renderLoading(){return(0,p.K)("div",{class:se.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return(0,p.K)("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const e=(0,u.V8)(this.container)?"chevron-left":"chevron-right";return(0,p.K)("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}_renderCategory(e){const{count:t,name:i,value:s}=e,n=(0,ee.ZV)(t);return(0,p.K)("calcite-list-item",{class:se.listItem,disabled:!t,key:s,label:i,onCalciteListItemSelect:()=>this._selectCategory(e)},(0,p.K)("calcite-chip",{label:n,scale:"s",slot:"content-end"},n),this._renderChevronIconNode())}_renderRelatedFeature(e){const{itemDescriptionFieldName:t}=this.viewModel,i=e.title;e.description=t&&e.formattedAttributes?.global[t];const s="loading"===e.state;return(0,p.K)("calcite-list-item",{class:this.classes(se.listItem,{[se.listItemHidden]:s}),description:(0,Q._e)(e.description??""),key:e.uid,label:(0,Q._e)(i),onCalciteListItemSelect:()=>this._selectRecord(e)},this._renderChevronIconNode())}_renderShowAllListItem(){return this.displayShowAllButton?(0,p.K)("calcite-list-item",{description:this.allItemsDescription,key:"show-all-item",label:this.messages?.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){return(0,p.K)("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},(0,p.K)("div",{slot:"message"},this.messages?.noRelatedFeatures))}_renderFeatureObserver(){return(0,p.K)("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:se.featureObserver,key:"feature-observer"})}_renderList(){const{relatedFeatureViewModels:e,categories:t}=this.viewModel;return(0,p.K)("calcite-list",{displayMode:"flat",label:this.messages?.relatedFeaturesList},t?.map((e=>this._renderCategory(e)))??e.toArray().map((e=>this._renderRelatedFeature(e))),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return(0,p.K)("div",{class:this.classes(se.listContainer,{[se.listContainerQuerying]:"querying"===t}),key:"list-container"},e?this._renderList():"ready"===t?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){return(0,p.K)("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},(0,p.K)("div",{slot:"message"},this.messages?.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e?.forEach((e=>{this.addHandles((0,n.watch)((()=>[e.title,e.state]),(()=>this.scheduleRender()),n.initial),t)})),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,s=t.title&&this.title;this._featureElementInfo?.set({description:i,title:s,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await(0,j.after)(0),this._relatedFeatureIntersectionObserverNode&&"ready"===e&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};(0,s._)([(0,r.MZ)()],re.prototype,"_relatedFeatureIntersectionObserverNode",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],re.prototype,"displayShowAllButton",null),(0,s._)([(0,r.MZ)({readOnly:!0})],re.prototype,"displayListItems",null),(0,s._)([(0,r.MZ)({readOnly:!0})],re.prototype,"allItemsDescription",null),(0,s._)([(0,r.MZ)()],re.prototype,"description",null),(0,s._)([(0,r.MZ)()],re.prototype,"featureVisibleElements",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"flowItems",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"flowType",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"title",null),(0,s._)([(0,r.MZ)({type:J.A})],re.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/widgets/Feature/t9n/Feature")],re.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/t9n/common")],re.prototype,"messagesCommon",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"visibleElements",void 0),(0,s._)([(0,o.w)("visibleElements")],re.prototype,"castVisibleElements",null),re=G=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureRelationship")],re);const oe=re;var ae=i(1262),le=i(51320),de=i(64139),ce=i(59626),he=i(9137);const ue={title:!0,content:!0,lastEditedInfo:!0};let pe=class extends((0,ce.j)(l.default)){constructor(e,t){super(e,t),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...ue},this.viewModel=new le.default}initialize(){this.addHandles((0,n.watch)((()=>this.viewModel?.contentViewModels),(()=>this._setupContentWidgets()),n.initial))}loadDependencies(){return(0,Z.W)({notice:()=>i.e(51132).then(i.bind(i,51132)),loader:()=>Promise.resolve().then(i.bind(i,23173))})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get title(){return this.viewModel.title}castVisibleElements(e){return{...ue,...e}}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}setActiveMedia(e,t){return this.viewModel.setActiveMedia(e,t)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}render(){const{state:e}=this.viewModel,t=(0,p.K)("div",{class:de.A.container,key:"container"},this._renderTitle(),"error"===e?this._renderError():"loading"===e?this._renderLoading():this._renderContentContainer());return(0,p.K)("div",{class:this.classes(de.A.base,C.D.widget)},t)}_renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return(0,p.K)("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},i.title?(0,p.K)("div",{key:"error-title",slot:"title"},e.errorMessage):null,(0,p.K)("div",{key:"error-message",slot:"message"},t.loadingError))}_renderLoading(){return(0,p.K)("div",{class:de.A.loadingSpinnerContainer,key:"loading-container"},(0,p.K)("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:e}=this;return e.content?(0,p.K)("div",{class:de.A.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:e,title:t}=this;return e.title?(0,p.K)(he.D,{class:de.A.title,innerHTML:t,level:this.headingLevel}):null}_renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?(0,p.K)("div",{class:de.A.contentNode,key:`${t}-content-elements`},e.map(this._renderContentElement,this)):null;if("string"==typeof e){const e=this._contentWidgets[0];return!e||e.destroyed?null:(0,p.K)("div",{class:this.classes(de.A.contentNode,de.A.contentNodeText),key:`${t}-content`},e.render())}return this.renderNodeContent(e)}_renderContentElement(e,t){const{visibleElements:i}=this;if("boolean"!=typeof i.content&&!i.content?.[e.type])return null;switch(e.type){case"attachments":return this._renderAttachments(t);case"custom":return this._renderCustom(e,t);case"fields":return this._renderFields(t);case"media":return this._renderMedia(t);case"text":return this._renderText(e,t);case"expression":return this._renderExpression(t);case"relationship":return this._renderRelationship(t);case"utility-network-associations":return this._renderAssociation(t);default:return null}}_renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:s}=t.viewModel;return"loading"===i||s.length>0?(0,p.K)("div",{class:this.classes(de.A.contentElement),key:this._buildKey("attachments-element",e)},t.render()):null}_renderRelationship(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?(0,p.K)("div",{class:de.A.contentElement,key:this._buildKey("relationship-element",e)},t.render()):null}_renderAssociation(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?(0,p.K)("div",{class:de.A.contentElement,key:this._buildKey("utility-network-association-element",e)},t.render()):null}_renderExpression(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&t.viewModel.contentElement?(0,p.K)("div",{class:de.A.contentElement,key:this._buildKey("expression-element",e)},t.render()):null}_renderCustom(e,t){const{creator:i}=e,s=this._contentWidgets[t];return!s||s.destroyed?null:i?(0,p.K)("div",{class:de.A.contentElement,key:this._buildKey("custom-element",t)},s.render()):null}_renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:(0,p.K)("div",{class:de.A.contentElement,key:this._buildKey("fields-element",e)},t.render())}_renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:(0,p.K)("div",{class:de.A.contentElement,key:this._buildKey("media-element",e)},t.render())}_renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:s,user:n}=i,r="edit"===i.type?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=(0,N.V)(r,{date:s,user:n});return(0,p.K)("div",{class:this.classes(de.A.lastEditedInfo,de.A.contentElement),key:"edit-info-element"},o)}_renderText(e,t){const i=e.text,s=this._contentWidgets[t];return!s||s.destroyed?null:i?(0,p.K)("div",{class:this.classes(de.A.contentElement,de.A.text),key:this._buildKey("text-element",t)},s.render()):null}_buildKey(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return`${e}__${this.viewModel?.graphic?.uid||"0"}-${i.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach((e=>this._destroyContentWidget(e))),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t,flowItems:s,viewModel:n}=this,r=n?.content,{contentViewModels:o}=n;if(Array.isArray(r))r.forEach(((r,a)=>{if("attachments"===r.type&&(this._contentWidgets[a]=new v({displayType:r.displayType,headingLevel:t.title&&e<6?e+1:e,viewModel:o[a]})),"fields"===r.type&&(this._contentWidgets[a]=new k({viewModel:o[a]})),"media"===r.type&&(this._contentWidgets[a]=new H({viewModel:o[a]})),"text"===r.type&&(this._contentWidgets[a]=new I({viewModel:o[a]})),"custom"===r.type&&(this._contentWidgets[a]=new I({viewModel:o[a]})),"expression"===r.type&&(this._contentWidgets[a]=new Y({viewModel:o[a]})),"relationship"===r.type){const e=new oe({flowItems:s,featureVisibleElements:t,viewModel:o[a]});this._contentWidgets[a]=e}if("utility-network-associations"===r.type){const e=async e=>{const{viewModel:r,listType:o,title:a}=e;if(!s)return;r.activeAssociationType=o;const{default:l}=await i.e(27939).then(i.bind(i,27939)),d=new l({viewModel:r,parentFeatureViewModel:n,listType:o,title:a,featureVisibleElements:t,description:n.title,flowItems:s});s.push(d)},r=new ae.A({flowItems:s,onSelectAssociationType:e,parentFeatureViewModel:n,featureVisibleElements:t,viewModel:o[a]});this._contentWidgets[a]=r}}),this);else{const e=o[0];e&&!e.destroyed&&(this._contentWidgets[0]=new I({viewModel:e}))}this.scheduleRender()}};(0,s._)([(0,r.MZ)()],pe.prototype,"flowType",void 0),(0,s._)([(0,r.MZ)()],pe.prototype,"graphic",null),(0,s._)([(0,r.MZ)()],pe.prototype,"defaultPopupTemplateEnabled",null),(0,s._)([(0,r.MZ)()],pe.prototype,"flowItems",void 0),(0,s._)([(0,r.MZ)()],pe.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],pe.prototype,"isTable",null),(0,s._)([(0,r.MZ)()],pe.prototype,"icon",null),(0,s._)([(0,r.MZ)()],pe.prototype,"label",null),(0,s._)([(0,r.MZ)()],pe.prototype,"location",null),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/widgets/Feature/t9n/Feature")],pe.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/t9n/common")],pe.prototype,"messagesCommon",void 0),(0,s._)([(0,r.MZ)()],pe.prototype,"spatialReference",null),(0,s._)([(0,r.MZ)()],pe.prototype,"timeZone",null),(0,s._)([(0,r.MZ)({readOnly:!0})],pe.prototype,"title",null),(0,s._)([(0,r.MZ)()],pe.prototype,"visibleElements",void 0),(0,s._)([(0,o.w)("visibleElements")],pe.prototype,"castVisibleElements",null),(0,s._)([(0,r.MZ)()],pe.prototype,"map",null),(0,s._)([(0,r.MZ)()],pe.prototype,"view",null),(0,s._)([(0,r.MZ)({type:le.default})],pe.prototype,"viewModel",void 0),pe=(0,s._)([(0,a.$)("esri.widgets.Feature")],pe);const me=pe},41514:(e,t,i)=>{i.d(t,{A:()=>l});var s=i(93800),n=i(6946),r=i(48602),o=(i(21265),i(50925),i(14746),i(75269));let a=class extends n.default{constructor(e){super(e),this.title=!0,this.description=!0}};(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"title",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"description",void 0),a=(0,s._)([(0,o.$)("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],a);const l=a},59626:(e,t,i)=>{i.d(t,{j:()=>l});var s=i(93800),n=(i(50925),i(21265),i(14746),i(74719),i(75269)),r=i(64139),o=i(72363),a=i(87118);const l=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=e=>(0,o.isWidget)(e)&&!e.destroyed?(0,a.K)("div",{class:r.A.contentNode,key:e},e.render()):e instanceof HTMLElement?(0,a.K)("div",{afterCreate:this._attachToNode,bind:e,class:r.A.contentNode,key:e}):(0,o.hasDomNode)(e)?(0,a.K)("div",{afterCreate:this._attachToNode,bind:e.domNode,class:r.A.contentNode,key:e}):null}_attachToNode(e){e.appendChild(this)}};return t=(0,s._)([(0,n.$)("esri.widgets.Feature.support.FeatureContentMixin")],t),t}},60266:(e,t,i)=>{i.d(t,{A:()=>u});var s=i(93800),n=i(48602),r=(i(21265),i(50925),i(14746),i(75269)),o=i(27811),a=i(9137),l=(i(17745),i(87118));const d="esri-feature-element-info",c={base:d,title:`${d}__title`,description:`${d}__description`};let h=class extends o.default{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,l.K)("div",{class:c.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:e}=this;return e?(0,l.K)(a.D,{class:c.title,innerHTML:e,level:this.headingLevel}):null}_renderDescription(){const{description:e}=this;return e?(0,l.K)("div",{class:c.description,innerHTML:e,key:"description"}):null}};(0,s._)([(0,n.MZ)()],h.prototype,"description",void 0),(0,s._)([(0,n.MZ)()],h.prototype,"headingLevel",void 0),(0,s._)([(0,n.MZ)()],h.prototype,"title",void 0),h=(0,s._)([(0,r.$)("esri.widgets.Feature.support.FeatureElementInfo")],h);const u=h},64139:(e,t,i)=>{i.d(t,{A:()=>n});const s="esri-feature",n={base:s,container:`${s}__size-container`,title:`${s}__title`,main:`${s}__main-container`,btn:`${s}__button`,icon:`${s}__icon`,content:`${s}__content`,contentNode:`${s}__content-node`,contentNodeText:`${s}__content-node--text`,contentElement:`${s}__content-element`,text:`${s}__text`,lastEditedInfo:`${s}__last-edited-info`,fields:`${s}__fields`,fieldHeader:`${s}__field-header`,fieldData:`${s}__field-data`,fieldDataDate:`${s}__field-data--date`,loadingSpinnerContainer:`${s}__loading-container`}},66201:(e,t,i)=>{function s(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,s=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);i.push(...s)}}i.d(t,{U:()=>s})},72363:(e,t,i)=>{i.r(t),i.d(t,{accessibleHandler:()=>s.$,additionalAllowedTags:()=>a.j9,classes:()=>a.Ly,cssTransition:()=>a.nk,discardNode:()=>a.N_,getCalciteThemeClass:()=>l.fJ,hasDomNode:()=>c,isActivationKey:()=>a.OU,isDarkTheme:()=>l.g4,isRTL:()=>a.V8,isWidget:()=>d,messageBundle:()=>n.G,onResize:()=>a.EV,renderingSanitizer:()=>a.W5,safeAttrs:()=>a.uM,setCalciteThemeClass:()=>l.hY,setFocus:()=>a.Z6,storeNode:()=>a.cA,tsx:()=>o.K,tsxFragment:()=>o.w,vmEvent:()=>r.U});var s=i(79304),n=i(76697),r=i(66201),o=i(87118),a=i(17745),l=i(5619);function d(e){return e&&"function"==typeof e.render}function c(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);