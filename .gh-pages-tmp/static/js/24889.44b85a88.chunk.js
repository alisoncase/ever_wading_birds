"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[24889,79538],{30178:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(74719),a=n(11099),r=n(46176),o=n(85151),s=n(2938);const l=500,c=1e8,u=1280,f=12,m=30,g=15;async function d(e){const{view:t,sampleSize:n}=e;if(!e||!e.layer)throw new i.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!t)throw new i.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,o.p)(e,"scale-range");const{layer:a,...r}=e,c=e.forBinning?s.Mi:s.J4,u=(0,s.Jg)(a,c,e.forBinning);if(!u)throw new i.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,s.Ho)(c).join(", "));const f={layerAdapter:u,...r};f.sampleSize=n||l,await(t?.when());const m=null!=f.signal?{signal:f.signal}:null;return await u.load(m),f}function p(e,t,n){const i=function(e,t){const n=f,i=u/4,a=m,r=u/4,o=g,s=u/2;let l=0,c=0,d=0,p=0;switch(e){case"point":case"multipoint":{const e=t;l=e.avgMinDistance??0,c=n,d=e.minDistance??0,p=i;break}case"polyline":{const e=t;l=e.avgLength??0,c=a,d=e.minLength??0,p=r;break}case"polygon":{const e=t;l=e.avgSize??0,c=o,d=e.minSize??0,p=s;break}}return{resolutionForMinScale:l>0?l/c:null,resolutionForMaxScale:d>0?d/p:null}}(e.geometryType,t),r=n?.spatialReference||e.layer.spatialReference;return{minScale:(0,a.gB)(i.resolutionForMinScale??0,r),maxScale:(0,a.gB)(i.resolutionForMaxScale??0,r)}}function y(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const i=e.constraints.effectiveLODs,a=n?i:i.slice().reverse();let r=null;for(const e of a)if(!(n?e.scale>t:e.scale<t)){r=e;break}return r}}function h(e,t,n,a){const{view:r,snapToLOD:o,layerAdapter:s}=e;if(o&&r){const e=y(r,t),i=y(r,n,!1);t=e?e.scale:t,n=i?i.scale:n}if(t<n)throw new i.default("scale-range:invalid","calculated minScale is less than maxScale.");return n>t/2&&(n=Math.floor(n/2)),t>c&&(t=0),"polygon"!==s.geometryType&&(n=0),{minScale:Math.ceil(t),maxScale:Math.floor(n),spatialStatistics:a}}async function v(e){const t=await d(e),{view:n,sampleSize:a,layerAdapter:o,signal:s,filter:l}=t,c=await o.getSampleFeatures({view:n,sampleSize:a,returnGeometry:!0,filter:l,signal:s},"json");if(!c?.length)throw new i.default("scale-range:insufficient-info","No features are available to calculate statistics");const u=await(0,r.A)({features:c,geometryType:o.geometryType}),{minScale:f,maxScale:m}=p(o,u,n);return h(t,f,m,u)}},46176:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(53053),a=n(11771);function r(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(t){for(const i of e)if(i.geometry){const e=i.geometry;n.push.apply(n,e.points)}}else n=e.map((e=>e.geometry));const a=[],r=[];let o=1/0,s=-1/0,l=0,c=0,u=0,f=0;for(const m of n){if(!m)continue;t?(a[0]=m[0],a[1]=m[1]):(a[0]=m.x,a[1]=m.y);let e=1/0,g=-1/0;for(const l of n){if(l===m)continue;if(!l)continue;t?(r[0]=l[0],r[1]=l[1]):(r[0]=l.x,r[1]=l.y);const n=(0,i.R3)(a,r);n>0&&(n<e&&(e=n),n<o&&(o=n),n>g&&(g=n),n>s&&(s=n))}e!==1/0&&(++u,l+=e),g!==-1/0&&(++f,c+=g)}return{minDistance:o!==1/0?o:null,maxDistance:s!==-1/0?s:null,avgMinDistance:u?l/u:null,avgMaxDistance:f?c/f:null}}function o(e){const{features:t}=e;let n=null;switch(e.geometryType){case"point":n=r(t);break;case"multipoint":n=r(t,!0);break;case"polyline":n=function(e){let t=0,n=0,a=1/0,r=-1/0;for(const o of e){const e=o.geometry;if(e){let o=0;for(const t of e.paths){const e=(0,i.Yl)(t);e>0&&(o+=e)}o>0&&(++t,n+=o,o<a&&(a=o),o>r&&(r=o))}}return{minLength:a!==1/0?a:null,maxLength:r!==-1/0?r:null,avgLength:t?n/t:null}}(t);break;case"polygon":n=function(e){let t=0,n=0,i=1/0,r=-1/0;for(const o of e){const e=o.geometry;if(e){const o=(0,a.v)(e);if(o){const e=Math.abs(o.xmax-o.xmin),a=Math.abs(o.ymax-o.ymin),s=Math.sqrt(e*a);s>0&&(++t,n+=s,s<i&&(i=s),s>r&&(r=s))}}}return{minSize:i!==1/0?i:null,maxSize:r!==-1/0?r:null,avgSize:t?n/t:null}}(t)}return Promise.resolve(n)}},79538:(e,t,n)=>{n.d(t,{BV:()=>M,EG:()=>w,Lk:()=>D,Ll:()=>F,Np:()=>u,R3:()=>$,SO:()=>d,T1:()=>k,UH:()=>c,Wy:()=>S,XR:()=>g,aM:()=>x,fs:()=>v,i0:()=>z,i3:()=>h});var i=n(66845),a=n(95011),r=n(96247),o=n(76983),s=n(73210),l=n(40731);const c=",",u={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},f="percent-of-total",m="field",g={exclude:["median"]},d={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},p=new Set(["integer","small-integer"]);let y=null;const h=["date","date-only","timestamp-offset"];function v(e){return(0,a.isDateField)(e)||(0,a.isDateOnlyField)(e)||(0,a.isTimestampOffsetField)(e)}async function w(e){const{field:t,field2:n,field3:i,normalizationField:a,valueExpression:o}=e;let s=[];if(o){if(!y){const{arcadeUtils:e}=await(0,r.lw)();y=e}s=y.extractFieldNames(o)}return t&&s.push(t),n&&s.push(n),i&&s.push(i),a&&s.push(a),s}function S(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=f)),t??void 0}function T(e){return String(e).padStart(2,"0")}function b(e,t,n){let i;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),i=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${T((n?e.getMonth():e.getUTCMonth())+1)}-${T(n?e.getDate():e.getUTCDate())} ${T(n?e.getHours():e.getUTCHours())}:${T(n?e.getMinutes():e.getUTCMinutes())}:${T(n?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function x(e,t,n,i){const{hasQueryEngine:a}=e,r=`(${b(n,D(e,n),a)} - ${b(t,D(e,t),a)})`;let o=d[i],s="/";return o<1&&(o=1/o,s="*"),{sqlExpression:1===o?r:`(${r} ${s} ${o})`,sqlWhere:null}}function D(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,a.isDateField)(n))return"field"}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;for(const n in t)if(t[n].includes(e))return n}function k(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;return e&&("string"==typeof e?t.includes(e)&&(i=e):i=(0,o.q3)(e)),n?i||"gray":i}function $(e,t){const n=t&&e.getField(t);return!!n&&p.has(n.type)}function F(e){return`cast(${e} as float)`}function z(e,t){const{format:n,timeZoneOptions:a,fieldType:r}=t??{};let o,c;if(a&&({timeZone:o,timeZoneName:c}=(0,l.hv)(a.layerTimeZone,a.datesInUnknownTimezone,a.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),r)),"string"==typeof e&&isNaN(Date.parse("time-only"===r?`1970-01-01T${e}Z`:e)))return e;switch(r){case"date-only":{const t=(0,i.J2)(n||"short-date");return"string"==typeof e?(0,i.iS)(e,{...t}):(0,i.Yq)(e,{...t,timeZone:s.n$})}case"time-only":{const t=(0,i.J2)(n||"short-time");return"string"==typeof e?(0,i.F8)(e,t):(0,i.Yq)(e,{...t,timeZone:s.n$})}case"timestamp-offset":{if(!o&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||a?(0,i.J2)(n||"short-date-short-time"):void 0,r=t?{...t,timeZone:o,timeZoneName:c}:void 0;return"string"==typeof e?(0,i.Ey)(e,r):(0,i.Yq)(e,r)}default:{const t=n||a?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:o,timeZoneName:c}:void 0)}}}},85151:(e,t,n)=>{n.d(t,{p:()=>r,z:()=>a});var i=n(74719);const a="aggregateCount";function r(e,t){if(!e.view)throw new i.default(`${t}:missing-parameters`,"'view' parameter is required for binning");if(e.sqlExpression)throw new i.default(`${t}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if("3d"===e.view.type)throw new i.default(`${t}:invalid-parameters`,"3d view is not supported for binning")}}}]);