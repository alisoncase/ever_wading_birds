"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[68621],{68621:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var n=i(93800),l=i(88102),a=(i(88677),i(79953)),s=i(6579),r=i(48602),o=(i(21265),i(50925),i(14746),i(75269)),c=i(27811),d=i(49403),u=i(50821),g=i(25756),p=i(17745),h=i(76697),m=i(87118),b=i(373),v=i(2035),_=i(42189),w=i(99961);const M="esri-grid-controls",C={base:M,borderedSwitch:`${M}__switch--bordered`,container:`${M}__container`,numericInputsContainer:`${M}__numeric-inputs__container`,tilegroup:`${M}__tilegroup`,tile:`${M}__tile`,tileDisabled:`${M}__tile--disabled`,tileContent:`${M}__tile__content`,suffixedInputContainer:`${M}__input-with-suffix__container`,inputSuffix:`${M}__input-with-suffix__suffix-part`,inlineIcon:`${M}__inline-icon`},f={widgetIcon:"grid-unit",gridTheme:{light:"circle",dark:"circle-area",custom:"palette"},placementState:{interactive:"maximum-territory-distance",place:"move",rotate:"rotate"},warning:"exclamation-mark-triangle"},y=l.default.fromArray([115,115,115]),K=l.default.fromArray([200,200,200]),I=["interactive","place","rotate"];let T=class extends c.default{constructor(e,t){super(e,t),this.customColor=null,this.messages=null,this.messagesUnits=null,this.viewModel=new b.default,this.visibleElements=new _.A}initialize(){this.addHandles([(0,a.watch)((()=>this.view?.grid?.majorLineColor),(e=>{!e||y.equals(e)||K.equals(e)||(this.customColor=e)}),a.initial)])}loadDependencies(){return Promise.all([(0,d.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-bar":()=>Promise.all([i.e(86290),i.e(74597),i.e(36334)]).then(i.bind(i,36334)),label:()=>i.e(60216).then(i.bind(i,60216)),icon:()=>Promise.resolve().then(i.bind(i,92439)),popover:()=>Promise.all([i.e(86290),i.e(74597)]).then(i.bind(i,74597)),tooltip:()=>Promise.resolve().then(i.bind(i,75703)),"color-picker":()=>Promise.all([i.e(42015),i.e(80747),i.e(9982),i.e(74557)]).then(i.bind(i,74557)),"input-number":()=>Promise.all([i.e(9982),i.e(86634)]).then(i.bind(i,9982))}),(0,g.m)()])}get icon(){return f.widgetIcon}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages.widgetLabel}set label(e){this._overrideIfSome("label",e)}get snappingManager(){return this.viewModel.snappingManager}set snappingManager(e){this.viewModel.snappingManager=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get theme(){const e=this.viewModel.grid?.majorLineColor;return e?y.equals(e)?"dark":K.equals(e)?"light":"custom":null}set theme(e){const{viewModel:t,customColor:i,view:n}=this;switch(e){case"light":t.gridColor=K;break;case"dark":t.gridColor=y;break;case"custom":t.gridColor=i??n?.effectiveTheme.accentColor??y}}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return(0,m.K)("div",{"aria-label":this.label,class:this.classes(C.base,u.D.widget,u.D.panel)},(0,m.K)("div",{class:C.container},this._renderContent()))}_renderContent(){const{visibleElements:e}=this;return[e.gridEnabledToggle?this._renderEnabledToggle():null,e.placementButtons?this._renderGridPlacementButtons():null,e.numericInputs?this._renderNumericInputs():null,e.lineIntervalInput?this._renderIntervalInput():null,e.gridSnapEnabledToggle&&this.viewModel.snappingOptions?this._renderSnappingToggle():null,e.dynamicScaleToggle?this._renderDynamicScaleToggle():null,e.rotateWithMapToggle?this._renderRotateToggle():null,e.colorSelection?this._renderColorSelection():null]}_renderGridPlacementButtons(){const{interactivePlacementState:e,placementDisabled:t,gridControlsEnabled:i}=this.viewModel,n=t||!i;return(0,m.K)("calcite-label",{key:"grid-placement-buttons",scale:"s"},this.messages.placementOptions,(0,m.K)("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},I.map((t=>this._renderPlacementModeButton(t,n,e)))))}_renderPlacementModeButton(e,t,i){const n=this.messages.placementState[e],l=`__placement-action-${e}`;return(0,m.K)("div",null,(0,m.K)("calcite-action",{active:i===e,alignment:"center",disabled:t,icon:f.placementState[e],id:l,onclick:()=>this.viewModel.togglePlacementState(e),text:n}),(0,m.K)("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:l},n))}_renderNumericInputs(){const{rotation:e,spacing:t,effectiveSpacingAfterDynamicScaling:i,numericSpacingInputShouldBeVisible:n,unit:l="meters"}=this.viewModel,a=this.messagesUnits.units[l].abbr,r=this.viewModel.gridControlsEnabled,o=null!=i&&i!==this.viewModel.spacing,c=`__spacing_input_scaled-${this.id}`;return(0,m.K)("div",{class:this.classes(C.numericInputsContainer)},[n?(0,m.K)("calcite-label",{key:"spacing-label",scale:"s"},(0,m.K)("span",null,this.messages.inputLabel.spacing,o?(0,m.K)("calcite-icon",{class:this.classes(C.inlineIcon),icon:f.warning,id:c,scale:"s",tabIndex:0}):void 0),(0,m.K)("div",{class:C.suffixedInputContainer},(0,m.K)("calcite-input-number",{disabled:!r,numberButtonType:"none",suffixText:a,value:`${t?.toFixed(2)}`,onCalciteInputNumberChange:e=>{let{currentTarget:t}=e;const i=parseFloat(t.value);this.viewModel.spacing=i,i!==this.viewModel.spacing&&(t.value=`${this.viewModel.spacing}`)}}),o?(0,m.K)("calcite-tooltip",{overlayPositioning:"fixed",placement:"leading",referenceElement:c},(0,w.V)(this.messages.warnings.dynamicSpacing,{actualSpacingIncludingUnit:(0,s.zJ)(this.messagesUnits,i,l,2,"plural")})):void 0)):void 0,(0,m.K)("calcite-label",{key:"angle-label",scale:"s"},this.messages.inputLabel.angle,(0,m.K)("calcite-input-number",{disabled:!r,integer:!0,numberButtonType:"none",suffixText:this.messagesUnits.units.degrees.abbr,value:`${(0,v.LG)(e)}`,onCalciteInputNumberChange:e=>{let{currentTarget:t}=e;return this.viewModel.rotation=(0,v.Xt)(t.value)}}))])}_renderIntervalInput(){const{majorLineInterval:e,gridControlsEnabled:t}=this.viewModel;return(0,m.K)("div",{class:this.classes(C.numericInputsContainer)},(0,m.K)("calcite-label",{scale:"s"},this.messages.inputLabel.interval,(0,m.K)("calcite-input-number",{disabled:!t,integer:!0,max:15,min:1,numberButtonType:"vertical",value:`${e}`,onCalciteInputNumberChange:e=>{let{currentTarget:t}=e;const i=Number.parseInt(t.value,10);this.viewModel.majorLineInterval=i,i!==this.viewModel.majorLineInterval&&(t.value=`${this.viewModel.majorLineInterval}`)}})))}_renderSnappingToggle(){const{snappingOptions:e,gridControlsEnabled:t}=this.viewModel;return(0,m.K)(g.o,{checked:!!e?.gridEnabled,disabled:!(t&&e),key:"grid-snap-enabled-toggle",label:this.messages.switchLabel.snap,onChange:e=>this.viewModel.snappingOptions?.set("gridEnabled",e)})}_renderDynamicScaleToggle(){const{viewModel:e,messages:t}=this,i=this.visibleElements.outOfScaleWarning&&e.gridOutOfScale;return(0,m.K)(g.o,{checked:e.dynamicScaling,disabled:!e.gridControlsEnabled,hint:i?t.warnings.outOfScale:void 0,hintIcon:f.warning,hintKind:"warning",key:`grid-dynamic-scale-toggle-${this.id}`,label:t.switchLabel.scaling,onChange:t=>e.dynamicScaling=t})}_renderRotateToggle(){const{gridControlsEnabled:e,rotateWithMap:t}=this.viewModel;return(0,m.K)(g.o,{checked:t,disabled:!e,key:"grid-rotate-map-toggle",label:this.messages.switchLabel.rotateWithMap,onChange:e=>this.viewModel.rotateWithMap=e})}_renderEnabledToggle(){return(0,m.K)("div",{class:C.borderedSwitch},(0,m.K)(g.o,{checked:this.viewModel.displayEnabled,disabled:!!this.viewModel.interactivePlacementState,key:"grid-enabled-toggle",label:this.messages.switchLabel.display,onChange:e=>this.viewModel.trySetDisplayEnabled(e)}))}_renderColorSelection(){const{customColor:e}=this,t=`${this.id}--custom-grid-color-button`;return(0,m.K)("calcite-label",{scale:"s"},this.messages.inputLabel.theme,(0,m.K)("div",{class:C.tilegroup},[this._renderThemeTile({value:"dark"}),this._renderThemeTile({value:"light"}),this._renderThemeTile({value:"custom",id:t}),(0,m.K)("calcite-popover",{autoClose:!0,label:this.messages.gridLineColorPopoverLabel,overlayPositioning:"fixed",referenceElement:t},(0,m.K)("calcite-color-picker",{alphaChannel:!0,savedDisabled:!0,value:e?.toHex({digits:8})??"#000000ff",onCalciteColorPickerChange:e=>{const t=l.default.fromHex(e.currentTarget.value);t&&(this.customColor=t,this.theme="custom")}}))]))}_renderThemeTile(e){const{theme:t}=this,{value:i}=e,n=this.messages.gridTheme[i],l=`${this.id}--theme_tile_${i}`,a=`${l}__label`,s=f.gridTheme[i],r=this.viewModel.gridControlsEnabled;return(0,m.K)("div",{class:(0,p.Ly)({[C.tile]:!0,[C.tileDisabled]:!r}),id:e.id,role:"button"},(0,m.K)("input",{"aria-labelledby":a,checked:t===i,disabled:!r,id:l,name:`${this.id}--theme`,onchange:e=>{this.theme=i,e.target?.focus()},tabIndex:0,type:"radio"}),(0,m.K)("div",{class:C.tileContent},(0,m.K)("calcite-icon",{icon:s,scale:"l"}),(0,m.K)("calcite-label",{for:l,id:a},n)))}};(0,n._)([(0,r.MZ)({type:l.default})],T.prototype,"customColor",void 0),(0,n._)([(0,r.MZ)()],T.prototype,"icon",null),(0,n._)([(0,r.MZ)()],T.prototype,"label",null),(0,n._)([(0,r.MZ)(),(0,h.G)("esri/widgets/support/GridControls/t9n/GridControls")],T.prototype,"messages",void 0),(0,n._)([(0,r.MZ)(),(0,h.G)("esri/core/t9n/Units")],T.prototype,"messagesUnits",void 0),(0,n._)([(0,r.MZ)()],T.prototype,"snappingManager",null),(0,n._)([(0,r.MZ)()],T.prototype,"snappingOptions",null),(0,n._)([(0,r.MZ)()],T.prototype,"theme",null),(0,n._)([(0,r.MZ)()],T.prototype,"view",null),(0,n._)([(0,r.MZ)({type:b.default})],T.prototype,"viewModel",void 0),(0,n._)([(0,r.MZ)({type:_.A,nonNullable:!0})],T.prototype,"visibleElements",void 0),T=(0,n._)([(0,o.$)("esri.widgets.support.GridControls")],T);const S=T}}]);