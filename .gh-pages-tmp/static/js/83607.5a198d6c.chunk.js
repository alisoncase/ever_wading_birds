"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[83607],{75281:(t,i,e)=>{e.d(i,{$T:()=>h,fS:()=>r,zj:()=>s});var r,s,n,o=e(99741);function h(t){const i=new Map,e=t=>{let e=i.get(t);return e||(e=new o.a0,i.set(t,e)),e};return t.removes.forAll((t=>{a(t)&&e(t.material).removes.push(t)})),t.adds.forAll((t=>{a(t)&&e(t.material).adds.push(t)})),t.updates.forAll((t=>{a(t.renderGeometry)&&e(t.renderGeometry.material).updates.push(t)})),i}function a(t){return t.geometry.indexCount>=1}(n=r||(r={}))[n.Default=0]="Default",n[n.Screenshot=1]="Screenshot",n[n.ObjectAndLayerID=2]="ObjectAndLayerID",function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT"}(s||(s={}))},83607:(t,i,e)=>{e.r(i),e.d(i,{default:()=>D});var r=e(93800),s=e(6946),n=e(50925),o=e(64682),h=e(16804),a=e(48602),p=(e(21265),e(14746),e(75269)),u=e(87752),_=e(10382),l=e(32006),v=e(98080),d=e(89227),w=e(28473),c=e(60548),y=e(24646),g=e(12096),M=e(91102),f=e(49943),m=e(51064);var x,j=e(75281);let T=x=class extends s.default{constructor(t){super(t),this._ray=(0,M.vt)(),this._viewport=(0,y.fA)(0,0,1,1),this._padding=(0,y.fA)(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=(0,v.fA)(1,1e3),this._viewDirty=!0,this._viewMatrix=(0,_.vt)(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=(0,_.vt)(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=(0,_.vt)(),this._frustumDirty=!0,this._frustum=(0,g.vt)(),this._fullViewport=(0,y.vt)(),this._pixelRatio=1,this.row=0,this.column=0,this._rows=1,this._columns=1,this._center=(0,w.vt)(),this._up=(0,w.vt)(),this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get rows(){return this._rows}set rows(t){this._rows=Math.max(1,t)}get columns(){return this._columns}set columns(t){this._columns=Math.max(1,t)}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return(0,d.d)(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){(0,u.C)(this._viewMatrix,t),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),(0,d.i)((0,w.vt)(),-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10])}get viewUp(){return this._ensureViewClean(),(0,d.i)((0,w.vt)(),this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9])}get viewRight(){return this._ensureViewClean(),(0,d.i)((0,w.vt)(),this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8])}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=(0,c.b)((0,y.vt)(),this._viewport,1/this.pixelRatio),i=this._get("screenViewport");return i&&(0,c.e)(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=(0,c.b)((0,y.vt)(),this._padding,1/this.pixelRatio),i=this._get("screenPadding");return i&&(0,c.e)(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[j.zj.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[j.zj.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[j.zj.RIGHT]+this._padding[j.zj.LEFT]}set fullWidth(t){this.width=t-(this._padding[j.zj.RIGHT]+this._padding[j.zj.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[j.zj.TOP]+this._padding[j.zj.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[j.zj.TOP]+this._padding[j.zj.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[j.zj.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[j.zj.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){(0,c.a)(this._padding,t)||(this._viewport[0]+=t[j.zj.LEFT]-this._padding[j.zj.LEFT],this._viewport[1]+=t[j.zj.BOTTOM]-this._padding[j.zj.BOTTOM],this._viewport[2]-=t[j.zj.RIGHT]+t[j.zj.LEFT]-(this._padding[j.zj.RIGHT]+this._padding[j.zj.LEFT]),this._viewport[3]-=t[j.zj.TOP]+t[j.zj.BOTTOM]-(this._padding[j.zj.TOP]+this._padding[j.zj.BOTTOM]),(0,c.c)(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&((0,u.lw)(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){return this._projectionMatrixInternal}get inverseProjectionMatrix(){return(0,u.B8)((0,_.vt)(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||(0,_.vt)()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return function(t,i,e){return 2*Math.atan(i*Math.tan(.5*t)/Math.sqrt(i*i+e*e))}(this._fov,this.width,this.height)}set fovX(t){this._fov=function(t,i,e){return 2*Math.atan(Math.sqrt(i*i+e*e)*Math.tan(.5*t)/i)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return function(t,i,e){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(i*i+e*e))}(this._fov,this.width,this.height)}set fovY(t){this._fov=function(t,i,e){return 2*Math.atan(Math.sqrt(i*i+e*e)*Math.tan(.5*t)/e)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return(0,d.j)(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&((0,u.B8)(this._viewInverseTransposeMatrix,this.viewMatrix),(0,u.mg)(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const{near:i,far:e}=this;return 2*i*e/(e+i-t*(e-i))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}get _projectionMatrixInternal(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2)*2,r=e*this._aspect,s=e/this.rows,n=r/this.columns,o=-r/2+this.column*n,h=o+n,a=-e/2+this.row*s,p=a+s,l=(0,u.$h)((0,_.vt)(),o*(1+2*this._padding[j.zj.LEFT]/t),h*(1+2*this._padding[j.zj.RIGHT]/t),a*(1+2*this._padding[j.zj.BOTTOM]/i),p*(1+2*this._padding[j.zj.TOP]/i),this.near,this.far),v=this._get("projectionMatrix");return v&&(0,u.aI)(v,l)?v:l}copyFrom(t){(0,d.c)(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,(0,c.c)(this._viewport,t.viewport),this.notifyChange("_viewport"),(0,c.c)(this._padding,t.padding),this.notifyChange("_padding"),(0,l.C)(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.row=t.row,this.column=t.column,this.rows=t.rows,this.columns=t.columns,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||((0,u.C)(this._viewMatrix,t.viewMatrix),this.notifyChange("_viewMatrix")),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||((0,g.C)(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:((0,u.C)(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),(0,c.c)(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up,this.fov=t.fov}clone(){return(new x).copyFrom(this)}equals(t){return(0,d.p)(this.eye,t.eye)&&(0,d.p)(this.center,t.center)&&(0,d.p)(this.up,t.up)&&(0,c.a)(this._viewport,t.viewport)&&(0,c.a)(this._padding,t.padding)&&(0,l.t2)(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation&&this.row===t.row&&this.column===t.column&&this.rows===t.rows&&this.columns===t.columns}almostEquals(t){const i=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||(0,c.d)(t.screenPadding,this.screenPadding)>=i||(0,c.d)(this.screenViewport,t.screenViewport)>=i||this.row!==t.row||this.column!==t.column||this.rows!==t.rows||this.columns!==t.columns)return!1;(0,d.a)(F,t.eye,t.center),(0,d.a)(Z,this.eye,this.center);const e=(0,d.f)(F,Z),r=(0,d.z)(F),s=(0,d.z)(Z),n=5e-4;return e*e>=(1-1e-10)*r*s&&(0,d.y)(t.eye,this.eye)<Math.max(r,s)*n*n}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs((0,f.gr)(this.viewForward,(0,d.d)(F,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,h.gs)();return t[0]=(this.padding[j.zj.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[j.zj.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return t[0]=this.padding[j.zj.LEFT]+this.width*i,t[1]=this.padding[j.zj.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==R&&(0,d.c)(R,t),R[3]=1,(0,c.t)(R,R,this.projectionMatrix);const e=Math.abs(R[3]);(0,d.h)(R,R,1/e);const r=this.fullViewport;i[0]=(0,o.Cc)(0,r[0]+r[2],.5+.5*R[0]),i[1]=(0,o.Cc)(0,r[1]+r[3],.5+.5*R[1]),i[2]=.5*(R[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;R[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],R[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],R[2]=(2*t[2]-1)*t[3],R[3]=t[3],null!=this.inverseProjectionMatrix&&((0,c.t)(R,R,this.inverseProjectionMatrix),i[0]=R[0],i[1]=R[1],i[2]=R[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,O),this.renderToScreen(O,i),i}projectToRenderScreen(t,i){if(R[0]=t[0],R[1]=t[1],R[2]=t[2],R[3]=1,(0,c.t)(R,R,this.viewProjectionMatrix),0===R[3])return null;const e=R;(0,d.h)(e,e,1/Math.abs(R[3]));const r=this.fullViewport,s=(0,o.Cc)(0,r[0]+r[2],.5+.5*e[0]),n=(0,o.Cc)(0,r[1]+r[3],.5+.5*e[1]);return"x"in i?(i.x=s,i.y=n):(i[0]=s,i[1]=n,i.length>2&&(i[2]=.5*(e[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,O),i)}unprojectFromRenderScreen(t,i){if((0,u.lw)(P,this.projectionMatrix,this.viewMatrix),!(0,u.B8)(P,P))return null;const e=this.fullViewport;return R[0]=2*(t[0]-e[0])/e[2]-1,R[1]=2*(t[1]-e[1])/e[3]-1,R[2]=2*t[2]-1,R[3]=1,(0,c.t)(R,R,P),0===R[3]?null:(i[0]=R[0]/R[3],i[1]=R[1]/R[3],i[2]=R[2]/R[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,n=i*this.pixelRatio,o=Math.max(s-e/2,0),h=Math.max(this.fullHeight-n-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-n-r/2,0),u=e-a- -Math.min(this.fullWidth-s-e/2,0),_=r-p- -Math.min(n-r/2,0);return[Math.round(o),Math.round(h),Math.round(u),Math.round(_)]}computeUp(t){t===m.RT.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){(0,d.d)(F,this.center,this.eye);const t=(0,d.l)(this.center);t<1?((0,d.i)(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs((0,d.f)(F,this.center))>.9999*(0,d.l)(F)*t||((0,d.e)(this._up,F,this.center),(0,d.e)(this._up,this._up,F),(0,d.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){(0,d.o)(F,this.eye,this.center),Math.abs(F[2])<=.9999&&((0,d.h)(F,F,F[2]),(0,d.i)(this._up,-F[0],-F[1],1-F[2]),(0,d.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(t,i){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"number"==typeof t[0]&&isFinite(t[0])&&"number"==typeof t[1]&&isFinite(t[1])&&"number"==typeof t[2]&&isFinite(t[2])?(0,d.p)(t,i)||((0,d.c)(i,t),this._markViewDirty(),e.length&&this.notifyChange(e)):n.A.getLogger("esri.views.3d.webgl-engine.lib.RenderCamera").warn("RenderCamera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&((0,g.ui)(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&((0,u.t5)(this._viewMatrix,this.eye,this.center,this.up),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};(0,r._)([(0,a.MZ)()],T.prototype,"_viewport",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"_padding",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"_fov",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"_nearFar",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"_viewDirty",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"_viewMatrix",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"_pixelRatio",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"pixelRatio",null),(0,r._)([(0,a.MZ)()],T.prototype,"row",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"column",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"_rows",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"rows",null),(0,r._)([(0,a.MZ)()],T.prototype,"_columns",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"columns",null),(0,r._)([(0,a.MZ)()],T.prototype,"eye",null),(0,r._)([(0,a.MZ)()],T.prototype,"center",null),(0,r._)([(0,a.MZ)()],T.prototype,"_center",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"up",null),(0,r._)([(0,a.MZ)()],T.prototype,"_up",void 0),(0,r._)([(0,a.MZ)()],T.prototype,"viewMatrix",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"viewForward",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"viewUp",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"viewRight",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"nearFar",null),(0,r._)([(0,a.MZ)()],T.prototype,"near",null),(0,r._)([(0,a.MZ)()],T.prototype,"far",null),(0,r._)([(0,a.MZ)()],T.prototype,"viewport",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"screenViewport",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"screenPadding",null),(0,r._)([(0,a.MZ)()],T.prototype,"x",null),(0,r._)([(0,a.MZ)()],T.prototype,"y",null),(0,r._)([(0,a.MZ)()],T.prototype,"width",null),(0,r._)([(0,a.MZ)()],T.prototype,"height",null),(0,r._)([(0,a.MZ)()],T.prototype,"fullWidth",null),(0,r._)([(0,a.MZ)()],T.prototype,"fullHeight",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"_aspect",null),(0,r._)([(0,a.MZ)()],T.prototype,"padding",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"projectionMatrix",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"inverseProjectionMatrix",null),(0,r._)([(0,a.MZ)()],T.prototype,"fov",null),(0,r._)([(0,a.MZ)()],T.prototype,"fovX",null),(0,r._)([(0,a.MZ)()],T.prototype,"fovY",null),(0,r._)([(0,a.MZ)()],T.prototype,"viewInverseTransposeMatrix",null),(0,r._)([(0,a.MZ)({readOnly:!0})],T.prototype,"_projectionMatrixInternal",null),(0,r._)([(0,a.MZ)()],T.prototype,"relativeElevation",void 0),T=x=(0,r._)([(0,p.$)("esri.views.3d.webgl.RenderCamera")],T);const D=T,R=(0,y.vt)(),P=(0,_.vt)(),F=(0,w.vt)(),Z=(0,w.vt)(),O=(0,h.r_)()},99741:(t,i,e)=>{e.d(i,{VR:()=>s,a0:()=>o});var r=e(15899);class s{constructor(){this.adds=new r.A,this.removes=new r.A,this.updates=new r.A({allocator:t=>t||new n,deallocator:t=>(t.renderGeometry=null,t)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}get empty(){return 0===this.adds.length&&0===this.removes.length&&0===this.updates.length}}class n{}class o{constructor(){this.adds=new Array,this.removes=new Array,this.updates=new Array}}}}]);