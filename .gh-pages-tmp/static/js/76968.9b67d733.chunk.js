"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[10963,54587,66201,72363,75066,76968,88582,92734,93118],{9399:(e,t,i)=>{i.d(t,{ES:()=>b,GB:()=>f,Gq:()=>w,MN:()=>L,Mq:()=>r,Qv:()=>d,Vq:()=>C,Yl:()=>c,_L:()=>u,cR:()=>a,cg:()=>o,dL:()=>y,do:()=>I,dv:()=>l,eF:()=>m,eY:()=>h,ep:()=>n,kL:()=>v,mk:()=>g,oU:()=>_,oZ:()=>p});const s={hide:"hide",hideChildren:"hide-children"},l=10,n=2;function o(e){let{exclusive:t,visible:i,visibilityAppearance:s}=e;const l="checkbox"===s;return i?t?"circle-f":l?"check-square-f":"view-visible":t?"circle":l?"square":"view-hide"}function a(e){let{connectionStatus:t,publishing:i}=e;return t?"connected"===t?"beacon":"offline":i?"square":"bullet-point"}function r(e){return e?.listMode===s.hideChildren}function d(e){return e?.listMode??void 0}function c(e){if(!e)return"inherited";const t=function(e){const t=M(e);return null!=t&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}(f(e)?e.layer:e);return null!=t?t?"independent":"inherited":"visibilityMode"in e&&null!=e.visibilityMode?e.visibilityMode:"independent"}function h(e){e?.removeMany(e.filter((e=>e?.destroyed)))}function p(e){if(e&&(!("type"in e)||"wmts"!==e.type))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function u(e,t){e&&(e.filterPredicate=t?e=>t(w(e)):void 0)}function y(e){const t=(e?.layer&&f(e.layer)?e.layer.layer:void 0)??e?.layer;return!!t&&"catalog"!==t.type&&(function(e){const t=M(e);return null!=t&&"supportsDynamicLayers"in t?t.supportsDynamicLayers:void 0}(t)??!0)}function _(e){return d(e)!==s.hide}function m(e,t){if(!e||null==t||isNaN(t))return!1;const i=function(e){return null!=e&&"minScale"in e&&null!=e.minScale?e.minScale:void 0}(e),s=function(e){return null!=e&&"maxScale"in e&&null!=e.maxScale?e.maxScale:void 0}(e),l=null!=i&&!isNaN(i)&&i>0&&t>i,n=null!=s&&!isNaN(s)&&s>0&&t<s;return l||n}function g(e,t){e?.sort(((e,i)=>{const s="uid"in e?t.indexOf(e.uid):-1,l="uid"in i?t.indexOf(i.uid):-1;return s>l?-1:s<l?1:0}))}function v(e,t){const i=e?.layer;if(!i)return;const s=p(i);if(!s)return;let l;"layers"===s&&"layers"in i?l=i.layers:"sublayers"===s&&"sublayers"in i&&(l=i.sublayers),g(l,t)}function b(e){const t=e?.layer;return t&&"layers"in t?t.layers:null}function f(e){return null!=e&&"layer"in e&&null!=e.layer}function M(e){return e&&"capabilities"in e&&null!=e.capabilities&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}function w(e){return e?.["data-item"]}function L(e){return e?.getAttribute("data-layer-type")}function I(e){const{children:t,error:i}=e,s="incompatible"in e&&e.incompatible;return!!t?.filter((e=>!e.hidden)).length&&!i&&!s}function C(e){for(const t of e)for(const e of t)if("button"===e.type||"toggle"===e.type)return e}},66201:(e,t,i)=>{function s(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,s=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);i.push(...s)}}i.d(t,{U:()=>s})},72363:(e,t,i)=>{i.r(t),i.d(t,{accessibleHandler:()=>s.$,additionalAllowedTags:()=>a.j9,classes:()=>a.Ly,cssTransition:()=>a.nk,discardNode:()=>a.N_,getCalciteThemeClass:()=>r.fJ,hasDomNode:()=>c,isActivationKey:()=>a.OU,isDarkTheme:()=>r.g4,isRTL:()=>a.V8,isWidget:()=>d,messageBundle:()=>l.G,onResize:()=>a.EV,renderingSanitizer:()=>a.W5,safeAttrs:()=>a.uM,setCalciteThemeClass:()=>r.hY,setFocus:()=>a.Z6,storeNode:()=>a.cA,tsx:()=>o.K,tsxFragment:()=>o.w,vmEvent:()=>n.U});var s=i(79304),l=i(76697),n=i(66201),o=i(87118),a=i(17745),r=i(5619);function d(e){return e&&"function"==typeof e.render}function c(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}},75066:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var s=i(93800),l=i(89129),n=i(58448),o=i(79953),a=i(48602),r=(i(21265),i(50925),i(14746),i(75269)),d=i(92734),c=i(9399);const h="layer-list-mode",p=l.default.ofType(d.default);let u=class extends n.A.EventedAccessor{constructor(e){super(e),this.catalogItems=new p,this.checkPublishStatusEnabled=!1,this.catalogLayer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.view=null}initialize(){this.addHandles([(0,o.watch)((()=>[this.catalogLayer?.loaded,this.view?.ready]),(()=>this._compileList()),o.initial),(0,o.on)((()=>this.catalogLayer?.dynamicGroupLayer.layers),"change",(()=>this._compileList())),(0,o.watch)((()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]),(()=>this._recompileList()))])}destroy(){this.view=null,this.catalogItems.removeAll()}get state(){const{view:e,catalogLayer:t}=this;return e?.ready&&t?.loaded?"ready":e&&t?"loading":"disabled"}get totalItems(){return this.catalogItems.flatten((e=>e.children)).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:s,listModeDisabled:l}=this;return new d.default({checkPublishStatusEnabled:s,listModeDisabled:l,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.catalogItems.removeAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter((e=>"hide"!==(0,c.Qv)(e))):void 0}_watchLayersListMode(e){this.removeHandles(h),e&&!this.listModeDisabled&&this.addHandles((0,o.watch)((()=>e.filter((e=>"listMode"in e)).map((e=>e.listMode)).toArray()),(()=>this._compileList())),h)}_compileList(){const{catalogLayer:e}=this;if(!e?.loaded)return;const t=e?.dynamicGroupLayer.layers;this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{catalogItems:t}=this;e.forEach((e=>{t.some((t=>t.layer===e))||t.add(this._createListItem(e))}))}_removeItems(e){const{catalogItems:t}=this,i=[];t.forEach((t=>{t&&e?.includes(t.layer)||i.push(t)})),t.removeMany(i)}_sortItems(e){const{catalogItems:t}=this;t.sort(((t,i)=>{const s=e.indexOf(t.layer),l=e.indexOf(i.layer);return s>l?-1:s<l?1:0}))}_recompileList(){this._removeAllItems(),this._compileList()}};(0,s._)([(0,a.MZ)({type:p})],u.prototype,"catalogItems",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"checkPublishStatusEnabled",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"catalogLayer",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"listItemCreatedFunction",void 0),(0,s._)([(0,a.MZ)({nonNullable:!0})],u.prototype,"listModeDisabled",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],u.prototype,"state",null),(0,s._)([(0,a.MZ)()],u.prototype,"totalItems",null),(0,s._)([(0,a.MZ)()],u.prototype,"view",void 0),u=(0,s._)([(0,r.$)("esri.widgets.CatalogLayerList.CatalogLayerListViewModel")],u);const y=u},76968:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var s=i(93800),l=i(89129),n=i(93633),o=i(90450),a=i(79953),r=i(48602),d=(i(21265),i(50925),i(14746),i(75269)),c=i(27811),h=i(75066),p=i(6946);let u=class extends p.default{constructor(){super(...arguments),this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"closeButton",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"collapseButton",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"errors",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"filter",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"flow",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"heading",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"statusIndicators",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"temporaryLayerIndicators",void 0),u=(0,s._)([(0,d.$)("esri.widgets.CatalogLayerList.CatalogLayerListVisibleElements")],u);const y=u,_="esri-catalog-layer-list",m=`${_}__item`,g={base:_,actionMenu:`${_}__action-menu`,actionGroup:`${_}__action-group`,filterNoResults:`${_}__filter-no-results`,item:m,itemActive:`${m}--active`,itemContentBottom:`${m}-content-bottom`,itemMessage:`${m}-message`,itemActionIcon:`${m}-action-icon`,itemActionImage:`${m}-action-image`,itemTemporaryIcon:`${m}-temporary-icon`,itemTableIcon:`${m}-table-icon`,statusIndicator:`${_}__status-indicator`,publishing:`${_}__publishing`,updating:`${_}__updating`,connectionStatus:`${_}__connection-status`,connectionStatusConnected:`${_}__connection-status--connected`,visibleToggle:`${_}__visible-toggle`,visibleIcon:`${_}__visible-icon`};var v,b=i(97431),f=i(92734),M=i(9399),w=i(49403),L=i(50821),I=i(53430),C=i(17745),Z=i(76697),A=i(66201),F=i(87118);const O=l.default.ofType(f.default),P="nested";let E=v=class extends(n.A.IdentifiableMixin(c.default)){constructor(e,t){super(e,t),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new o.A,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new o.A,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new l.default(["knowledge-graph"]),this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minFilterItems=M.dv,this.openedLayers=new l.default,this.openedLayerLists=new l.default,this.selectedItems=new O,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new h.default,this.visibilityAppearance="default",this.visibleElements=new y,this._onTablesOpen=e=>{this.onTablesOpen?this.onTablesOpen(e):(this.openedLayers.push(e.layer),this._focusLayerFlowItem=e.layer?.uid)},this._onCatalogOpen=e=>{this.onCatalogOpen?this.onCatalogOpen(e):(this.openedLayers.push(e.layer?.parent),this._focusLayerFlowItem=e.layer?.uid)},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(e,t)=>{t?this._tooltipReferenceMap.set(e,t):this._tooltipReferenceMap.delete(e)},this._onTriggerAction=(e,t)=>{this.triggerAction(e,t)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=e=>{if("default"!==this.visibilityAppearance)return;const t=Array.from(e.composedPath()).find((e=>e.classList?.contains(g.item)));this._activeItem=(0,M.Gq)(t)}}initialize(){this.addHandles([(0,a.on)((()=>this.openedLayers),"change",(()=>this._handleOpenedLayersChange()),a.initial),(0,a.on)((()=>this.viewModel.catalogItems),"change",(()=>(0,M.eY)(this.selectedItems)),a.initial),(0,a.watch)((()=>[this.filterPredicate,this._rootListEl]),(()=>(0,M._L)(this._rootListEl,this.filterPredicate)))])}loadDependencies(){return(0,w.W)({button:()=>Promise.resolve().then(i.bind(i,20423)),flow:()=>i.e(58739).then(i.bind(i,58739)),"flow-item":()=>Promise.all([i.e(86290),i.e(74597),i.e(99776),i.e(85326)]).then(i.bind(i,85326)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),notice:()=>i.e(51132).then(i.bind(i,51132)),tooltip:()=>Promise.resolve().then(i.bind(i,75703))})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _filterEnabled(){return this.viewModel.totalItems>=this.minFilterItems&&this.visibleElements.filter}get _visibleItems(){return this.catalogItems?.filter((e=>!e.hidden&&(this.visibleElements.errors||!e.error)))}get _openedPanelItems(){return this._visibleItems.flatten((e=>e.children)).filter((e=>{let{hidden:t,panel:i}=e;return!t&&i?.open&&!i.disabled&&i.flowEnabled}))}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map(((t,i)=>this._renderLayerFlowItem(t,i===e.length-1)))}get catalogItems(){return this.viewModel.catalogItems}set catalogItems(e){this.viewModel.catalogItems=e}get catalogLayer(){return this.viewModel.catalogLayer}set catalogLayer(e){this.viewModel.catalogLayer=e}get icon(){return"catalog-dataset"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){const e=this.viewModel?.state,{_visibleItems:t}=this,i={[L.D.hidden]:"loading"===e,[L.D.disabled]:"disabled"===e};return(0,F.K)("div",{class:this.classes(g.base,L.D.widget,L.D.panel,i)},t?.length?[this._renderItemTooltips(),this._renderItems()]:this._renderNoItems())}async _createFlowList(e,t){const{_layerListMap:i}=this,s=i.get(e);if(s)return s;const l="catalog"===e.type?await this._createCatalogLayerList(e):await this._createTableList(e);return t.aborted||i.set(e,l),l}async _handleOpenedLayersChange(){const{_layerListMap:e,openedLayers:t,openedLayerLists:i}=this;this._openedLayersController?.abort();const s=new AbortController,{signal:l}=s;this._openedLayersController=s,e.forEach(((i,s)=>{t.includes(s)||(i.destroy(),e.delete(s))}));const n=await Promise.all(t.map((e=>this._createFlowList(e,l))));if(l.aborted)return;i.removeAll(),i.addMany(n);const o=i.at(-1);o?"catalogLayer"in o?(this._set("catalogLayerList",o),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",o)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){const{_tooltipReferenceMap:t,messages:i}=this;return e?.layer?(0,F.K)("calcite-tooltip",{key:`tooltip-${e.layer.uid}`,overlayPositioning:"fixed",referenceElement:t.get(e.layer.uid)},i.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){return e.incompatible?this._renderItemTooltip(e):e.children?.filter((e=>!e.hidden)).toArray().map((e=>this._renderItemTooltipNodes(e)))}_renderItemTooltips(){return this._visibleItems?.toArray().map((e=>this._renderItemTooltipNodes(e)))}_renderNoItemsMessage(){return(0,F.K)("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return(0,F.K)("div",{class:g.itemMessage,key:"esri-layer-list__no-items"},(0,F.K)("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:t}=this;return e.toArray().map(((i,s)=>{let{title:l,panel:n}=i;const o=()=>this._handlePanelFlowItemBack(n);return(0,F.K)("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:l,heading:n.title,headingLevel:this.headingLevel,key:`flow-panel-${n.uid}`,selected:!t.length&&s===e.length-1,onCalciteFlowItemBack:e=>{e.preventDefault(),o()}},n.render(),(0,F.K)("calcite-button",{appearance:"transparent",onclick:o,slot:"footer-actions",width:"full"},this.messagesCommon.back))}))}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,(0,C.Z6)(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,(0,C.Z6)(e))}_renderItems(){const{visible:e,collapsed:t,_visibleItems:i,_filterEnabled:s,_rootGroupUid:l,visibleElements:{closeButton:n,collapseButton:o,heading:a,flow:r},selectionMode:d,filterText:c,filterPlaceholder:h,messages:p,openedLayers:u,_openedPanelItems:y}=this,_=[(0,F.K)("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:n,closed:!e,collapsed:t,collapsible:o,heading:a?p.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!u.length&&!y.length,onCalciteFlowItemClose:()=>this.visible=!1},(0,F.K)("calcite-list",{afterCreate:e=>{this._rootListEl=e,e.addEventListener("focusin",this._setActiveItem),e.addEventListener("focusout",this._clearActiveItem)},afterRemoved:e=>{this._rootListEl=null,e.removeEventListener("focusin",this._setActiveItem),e.removeEventListener("focusout",this._clearActiveItem)},"data-layer-type":l,displayMode:P,filterEnabled:s,filterPlaceholder:h,filterProps:I.o,filterText:s?c:"",group:l,key:"root-list",label:p.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:d,onCalciteListChange:e=>this._handleCalciteListChange(e),onCalciteListFilter:e=>this.filterText=e.currentTarget?.filterText??""},i?.toArray().map((e=>this._renderItem(e))),i?.length&&s?(0,F.K)("div",{class:g.filterNoResults,slot:"filter-no-results"},(0,F.K)("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return e?r?(0,F.K)("calcite-flow",{key:"root-flow"},_):_:null}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,(0,C.Z6)(e))}_renderLayerFlowItem(e,t){const{messages:i,openedLayers:s}=this,l=e.title||this.messages.untitledLayer;return(0,F.K)("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:l,heading:i["catalog"===e.type?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:t,onCalciteFlowItemBack:e=>{e.preventDefault(),s.pop();const t=s.at(-1);t?this._focusLayerFlowItem=t.uid:this._focusRootFlowItem=!0}},this._layerListMap.get(e)?.render())}async _createCatalogLayerList(e){const{headingLevel:t,catalogOptions:i,view:s,filterPlaceholder:l,listItemCreatedFunction:n,minFilterItems:o,selectionMode:a,visibilityAppearance:r,onCatalogOpen:d,onTablesOpen:c}=this;return new v({headingLevel:t,view:s,filterPlaceholder:l,listItemCreatedFunction:n,minFilterItems:o,selectionMode:a,visibilityAppearance:r,...i,catalogLayer:e,onCatalogOpen:d,onTablesOpen:c})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:t}=await i.e(39739).then(i.bind(i,62120)),{headingLevel:s,selectionMode:l}=this;return new t({headingLevel:s,selectionMode:l,...this._getTableListParams(e)})}_renderItem(e,t,i){return(0,F.K)(b.A,{activeItem:this._activeItem,css:g,displayMode:P,dragEnabled:!1,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this._rootGroupUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if("none"===t)return;const s=e.target.selectedItems.map((e=>(0,M.Gq)(e))).filter(Boolean);i.removeAll(),i.addMany(s)}};(0,s._)([(0,r.MZ)()],E.prototype,"_rootListEl",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"_activeItem",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"_tooltipReferenceMap",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"_focusRootFlowItem",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"_focusPanelFlowItem",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"_focusLayerFlowItem",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"_layerListMap",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"_filterEnabled",null),(0,s._)([(0,r.MZ)()],E.prototype,"_visibleItems",null),(0,s._)([(0,r.MZ)()],E.prototype,"_openedPanelItems",null),(0,s._)([(0,r.MZ)()],E.prototype,"_renderedOpenLayerFlowItems",null),(0,s._)([(0,r.MZ)()],E.prototype,"catalogItems",null),(0,s._)([(0,r.MZ)()],E.prototype,"catalogLayer",null),(0,s._)([(0,r.MZ)({readOnly:!0})],E.prototype,"catalogLayerList",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"catalogOptions",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"collapsed",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"filterPlaceholder",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"filterPredicate",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"filterText",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"icon",null),(0,s._)([(0,r.MZ)()],E.prototype,"knowledgeGraphOptions",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"label",null),(0,s._)([(0,r.MZ)()],E.prototype,"layerTablesEnabled",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"listItemCreatedFunction",null),(0,s._)([(0,r.MZ)()],E.prototype,"mapImageOptions",void 0),(0,s._)([(0,r.MZ)(),(0,Z.G)("esri/widgets/CatalogLayerList/t9n/CatalogLayerList")],E.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,Z.G)("esri/t9n/common")],E.prototype,"messagesCommon",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"minFilterItems",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],E.prototype,"openedLayers",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],E.prototype,"openedLayerLists",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"onCatalogOpen",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"onTablesOpen",void 0),(0,s._)([(0,r.MZ)({type:O})],E.prototype,"selectedItems",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"selectionMode",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],E.prototype,"tableList",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"tileOptions",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"view",null),(0,s._)([(0,A.U)("trigger-action"),(0,r.MZ)({type:h.default})],E.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)()],E.prototype,"visibilityAppearance",void 0),(0,s._)([(0,r.MZ)({type:y,nonNullable:!0})],E.prototype,"visibleElements",void 0),E=v=(0,s._)([(0,d.$)("esri.widgets.CatalogLayerList")],E);const T=E},92734:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var s,l=i(93800),n=i(6946),o=i(62631),a=i(89129),r=i(93633),d=i(79953),c=i(48602),h=i(32980),p=(i(21265),i(75269)),u=i(99940),y=i(58590),_=i(73283),m=i(84915),g=i(93118),v=i(9399);const b=a.default.ofType({key:"type",defaultKeyValue:"button",base:y.default,typeMap:{button:_.default,toggle:m.default}}),f=a.default.ofType(b),M="layer",w="child-list-mode";let L=s=class extends(r.A.IdentifiableMixin(n.default)){constructor(e){super(e),this.actionsSections=new f,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(a.default.ofType(s)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([(0,d.watch)((()=>[this.layer,this.layer?.listMode,this.listModeDisabled]),(()=>this._watchLayerProperties(this.layer)),d.initial),(0,d.watch)((()=>this.checkPublishStatusEnabled),(e=>this._updateChildrenPublishing(e)),d.initial),(0,d.watch)((()=>this.view),(e=>this._updateChildrenView(e)),d.initial),(0,d.watch)((()=>this.panel),(e=>this._setListItemOnPanel(e)),d.initial)]),"function"==typeof this.listItemCreatedFunction){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||"sublayer"===e.type)return null;const i="subtype-sublayer"===e.type?e.parent:e;return t.allLayerViews.find((e=>e.layer===i))??null}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new g.default(e):null}get sortable(){return"knowledge-graph-sublayer"!==this.layer?.type&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=(0,u.Jt)(this,"layer.layer");return(!e||e&&(0,u.Jt)(this,"layer.layer.loaded"))&&(0,u.Jt)(this,"layer.title")||(0,u.Jt)(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&"publishing"===e.publishingInfo?.status)}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:s}=this;return!s&&!t&&(e?e.updating:"loading"===i?.loadStatus||!1)}get visible(){return!!this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!(0,v.eF)(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return(0,v.Yl)(this.layer)}clone(){return new s({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){this.children?.forEach((t=>t.checkPublishStatusEnabled=e))}_updateChildrenView(e){const t=this.children;t&&t.forEach((t=>t.view=e))}_createChildren(e){const{listModeDisabled:t,children:i}=this,s=e.filter((e=>!i.some((t=>t.layer===e))));i.addMany(this._createChildItems(s,t))}_destroyChildren(e){const{children:t}=this,i=t.filter((t=>!!t.layer&&!e.includes(t.layer)));t.destroyMany(i)}_sortChildren(e){this.children.sort(((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer)))}_destroyAllChildren(){this.removeHandles(w),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(w),this.listModeDisabled||this.addHandles(e.toArray().map((t=>(0,d.watch)((()=>t.listMode),(()=>this._compileChildren(e))))),w)}_compileChildren(e){const t=this.listModeDisabled?e:e?.filter((e=>"hide"!==(0,v.Qv)(e)));e?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",(()=>this._compileChildren(e))),M)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map((e=>t||(0,v.oU)(e)?new s({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null)).filter(o.Ru)}_watchLayerProperties(e){if(this.removeHandles(M),this.removeHandles(w),!e)return;if("hide-children"===(!this.listModeDisabled&&(0,v.Qv)(e)))return void this.children.destroyAll();const t=(0,v.oZ)(e);t&&this.addHandles((0,d.watch)((()=>e[t]),(i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)}),d.initial),M)}};(0,l._)([(0,c.MZ)({type:f})],L.prototype,"actionsSections",void 0),(0,l._)([(0,c.MZ)()],L.prototype,"actionsOpen",void 0),(0,l._)([(0,c.MZ)()],L.prototype,"checkPublishStatusEnabled",void 0),(0,l._)([(0,c.MZ)({type:a.default.ofType(L)})],L.prototype,"children",void 0),(0,l._)([(0,c.MZ)()],L.prototype,"childrenSortable",void 0),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"connectionStatus",null),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"error",null),(0,l._)([(0,c.MZ)()],L.prototype,"hidden",void 0),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"incompatible",null),(0,l._)([(0,c.MZ)()],L.prototype,"layer",void 0),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"layerView",null),(0,l._)([(0,c.MZ)()],L.prototype,"listItemCreatedFunction",void 0),(0,l._)([(0,c.MZ)({nonNullable:!0})],L.prototype,"listModeDisabled",void 0),(0,l._)([(0,c.MZ)()],L.prototype,"open",void 0),(0,l._)([(0,c.MZ)({type:g.default})],L.prototype,"panel",void 0),(0,l._)([(0,h.w)("panel")],L.prototype,"castPanel",null),(0,l._)([(0,c.MZ)()],L.prototype,"parent",void 0),(0,l._)([(0,c.MZ)({value:!0})],L.prototype,"sortable",null),(0,l._)([(0,c.MZ)()],L.prototype,"title",null),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"publishing",null),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"updating",null),(0,l._)([(0,c.MZ)()],L.prototype,"view",void 0),(0,l._)([(0,c.MZ)()],L.prototype,"visible",null),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"visibleAtCurrentScale",null),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"visibleAtCurrentTimeExtent",null),(0,l._)([(0,c.MZ)({readOnly:!0})],L.prototype,"visibilityMode",null),L=s=(0,l._)([(0,p.$)("esri.widgets.LayerList.ListItem")],L);const I=L},93118:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var s=i(93800),l=i(93633),n=i(17741),o=i(79953),a=i(48602),r=(i(21265),i(50925),i(14746),i(75269)),d=i(27811),c=i(9399),h=i(72363),p=i(87118);let u=class extends(l.A.IdentifiableMixin(d.default)){constructor(e,t){super(e,t),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([(0,o.watch)((()=>this._canCreateLegend),(()=>this._createLegend()),o.initial),(0,o.watch)((()=>[this._legend,this._legendOptions]),(()=>this._updateLegend()),o.initial)])}destroy(){this._legend=(0,n.pR)(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const i="legend";return e===i||null!=e&&!!Array.isArray(e)&&e.includes(i)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,i=e?.view;return t&&i?{view:i,layerInfos:[t]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||"subtype-sublayer"===e.type)return null;const t=(0,c.GB)(e)?e:null,i=e?.parent,s=null!=i&&"type"in i&&"map-image"===i.type?t?.source:null;return s&&i?{layer:i,title:"",sublayerIds:[s.mapLayerId]}:{layer:e,title:""}}get disabled(){const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return(0,p.K)("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i,open:s}=this;return e&&!i&&s?"legend"===e&&t?(0,p.K)("div",{key:"legend-widget"},t.render()):"string"==typeof e?(0,p.K)("div",{innerHTML:e,key:e}):(0,h.isWidget)(e)?(0,p.K)("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?(0,p.K)("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map((e=>this._renderContent(e))):this._renderContent(e):null}async _createLegend(){if((0,n.pR)(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await Promise.all([i.e(88171),i.e(56095),i.e(26286),i.e(12285),i.e(76005)]).then(i.bind(i,76005)),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return"legend"===e?this._legend:(0,h.isWidget)(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._getWidget(e))).find((e=>e)):this._getWidget(e)}};(0,s._)([(0,a.MZ)()],u.prototype,"_legend",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"_canCreateLegend",null),(0,s._)([(0,a.MZ)()],u.prototype,"_legendOptions",null),(0,s._)([(0,a.MZ)()],u.prototype,"_legendLayerInfo",null),(0,s._)([(0,a.MZ)()],u.prototype,"className",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"content",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"disabled",null),(0,s._)([(0,a.MZ)()],u.prototype,"flowEnabled",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"icon",null),(0,s._)([(0,a.MZ)()],u.prototype,"image",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"listItem",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"open",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"title",null),(0,s._)([(0,a.MZ)()],u.prototype,"visible",void 0),u=(0,s._)([(0,r.$)("esri.widgets.LayerList.ListItemPanel")],u);const y=u}}]);