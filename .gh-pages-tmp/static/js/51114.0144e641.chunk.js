"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[51114],{1413:(t,e,i)=>{i.d(e,{Cv:()=>d,Nk:()=>y,lK:()=>_});var n=i(62631),r=i(49959),s=i(96913),o=i(10641),x=i(70576),h=i(5616);const a=[0,0];function l(t,e){if(!e)return null;if("x"in e){const i={x:0,y:0};return[i.x,i.y]=t(e.x,e.y,a),null!=e.z&&(i.z=e.z),null!=e.m&&(i.m=e.m),i}if("xmin"in e){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=t(e.xmin,e.ymin,a),[i.xmax,i.ymax]=t(e.xmax,e.ymax,a),e.hasZ&&(i.zmin=e.zmin,i.zmax=e.zmax,i.hasZ=!0),e.hasM&&(i.mmin=e.mmin,i.mmax=e.mmax,i.hasM=!0),i}return"rings"in e?{rings:c(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:c(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:u(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:null}function c(t,e){const i=[];for(const n of t)i.push(u(n,e));return i}function u(t,e){const i=[];for(const n of t){const t=e(n[0],n[1],[0,0]);i.push(t),n.length>2&&t.push(n[2]),n.length>3&&t.push(n[3])}return i}async function y(t,e){if(!t||!e)return;const i=Array.isArray(t)?t.map((t=>null!=t.geometry?t.geometry.spatialReference:null)).filter(n.Ru):[t];await(0,s.initializeProjection)(i.map((t=>({source:t,dest:e}))))}const f=l.bind(null,h.lngLatToXY),p=l.bind(null,h.xyToLngLat);function d(t,e,i,n){if(!t)return null;if(i||(i=e,e=t.spatialReference),!(0,x.fn)(e)||!(0,x.fn)(i)||(0,x.aI)(e,i))return t;if((0,h.canProject)(e,i)){const e=(0,x.K8)(i)?f(t):p(t);return e.spatialReference=i,e}return(0,s.projectMany)(o.g,[t],e,i,null,n)[0]}const v=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,e,i,n){if(!t?.length||!e||!i||(0,x.aI)(e,i))return t;const s={geometries:t,inSpatialReference:e,outSpatialReference:i,geographicTransformation:n,resolve:(0,r.createResolver)()};return this._jobs.push(s),this._timer??=setTimeout(this._process,10),s.resolve.promise}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:e,inSpatialReference:i,outSpatialReference:n,resolve:r,geographicTransformation:a}=t;(0,h.canProject)(i,n)?(0,x.K8)(n)?r(e.map(f)):r(e.map(p)):r((0,s.projectMany)(o.g,e,i,n,a,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function _(t,e,i,n){return v.push(t,e,i,n)}},8374:(t,e,i)=>{function n(t,e,i){i=i||2;var n,s,x,h,a,l,u,y=e&&e.length,f=y?e[0]*i:t.length,p=r(t,0,f,i,!0),d=[];if(!p||p.next===p.prev)return d;if(y&&(p=c(t,e,p,i)),t.length>80*i){n=x=t[0],s=h=t[1];for(var v=i;v<f;v+=i)(a=t[v])<n&&(n=a),(l=t[v+1])<s&&(s=l),a>x&&(x=a),l>h&&(h=l);u=0!==(u=Math.max(x-n,h-s))?1/u:0}return o(p,d,i,n,s,u),d}function r(t,e,i,n,r){var s,o;if(r===I(t,e,i,n)>0)for(s=e;s<i;s+=n)o=Z(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=Z(s,t[s],t[s+1],o);if(o&&T(o,o.next)){var x=o.next;V(o),o=x}return o}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!T(n,n.next)&&0!==w(n.prev,n,n.next))n=n.next;else{var r=n.prev;if(V(n),(n=e=r)===n.next)break;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,c,u){if(t){!u&&c&&d(t,n,r,c);for(var y,f,p=t;t.prev!==t.next;)if(y=t.prev,f=t.next,c?h(t,n,r,c):x(t))e.push(y.i/i),e.push(t.i/i),e.push(f.i/i),V(t),t=f.next,p=f.next;else if((t=f)===p){u?1===u?o(t=a(s(t),e,i),e,i,n,r,c,2):2===u&&l(t,e,i,n,r,c):o(s(t),e,i,n,r,c,1);break}}}function x(t){var e=t.prev,i=t,n=t.next;if(w(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(m(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&w(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,o=t.next;if(w(r,s,o)>=0)return!1;for(var x=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,a=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=v(x,h,e,i,n),u=v(a,l,e,i,n),y=t.prevZ,f=t.nextZ;y&&y.z>=c&&f&&f.z<=u;){if(y!==t.prev&&y!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&w(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,f!==t.prev&&f!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;y&&y.z>=c;){if(y!==t.prev&&y!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&w(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;f&&f.z<=u;){if(f!==t.prev&&f!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function a(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!T(r,o)&&M(r,n,n.next,o)&&O(r,o)&&O(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),V(n),V(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function l(t,e,i,n,r,x){var h=t;do{for(var a=h.next.next;a!==h.prev;){if(h.i!==a.i&&g(h,a)){var l=P(h,a);return h=s(h,h.next),l=s(l,l.next),o(h,e,i,n,r,x),void o(l,e,i,n,r,x)}a=a.next}h=h.next}while(h!==t)}function c(t,e,i,n){var o,x,h,a=[];for(o=0,x=e.length;o<x;o++)(h=r(t,e[o]*n,o<x-1?e[o+1]*n:t.length,n,!1))===h.next&&(h.steiner=!0),a.push(_(h));for(a.sort(u),o=0;o<a.length;o++)i=s(i=f(a[o],i),i.next);return i}function u(t,e){return t.x-e.x}function y(t){if(t.next.prev===t)return t;let e=t;for(;;){const i=e.next;if(i.prev===e||i===e||i===t)break;e=i}return e}function f(t,e){var i=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var x=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(x<=r&&x>o){if(o=x,x===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i;var h,a=i,l=i.x,c=i.y,u=1/0;n=i;do{r>=n.x&&n.x>=l&&r!==n.x&&m(s<c?r:o,s,l,c,s<c?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),O(n,t)&&(h<u||h===u&&(n.x>i.x||n.x===i.x&&p(i,n)))&&(i=n,u=h)),n=n.next}while(n!==a);return i}(t,e);if(!i)return e;var n=P(i,t),r=s(i,i.next);let o=y(n);return s(o,o.next),r=y(r),y(e===i?r:e)}function p(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function d(t,e,i,n){var r=t;do{null===r.z&&(r.z=v(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,x,h,a=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,x=0,e=0;e<a&&(x++,n=n.nextZ);e++);for(h=a;x>0||h>0&&n;)0!==x&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,x--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,a*=2}while(o>1)}(r)}function v(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function m(t,e,i,n,r,s,o,x){return(r-o)*(e-x)-(t-o)*(s-x)>=0&&(t-o)*(n-x)-(i-o)*(e-x)>=0&&(i-o)*(s-x)-(r-o)*(n-x)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&M(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(O(t,e)&&O(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||T(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function T(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,i,n){var r=b(w(t,e,i)),s=b(w(t,e,n)),o=b(w(i,n,t)),x=b(w(i,n,e));return r!==s&&o!==x||!(0!==r||!R(t,i,e))||!(0!==s||!R(t,n,e))||!(0!==o||!R(i,t,n))||!(0!==x||!R(i,e,n))}function R(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function O(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function P(t,e){var i=new k(t.i,t.x,t.y),n=new k(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function Z(t,e,i,n){var r=new k(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function V(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function k(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}i.d(e,{e:()=>n}),n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(I(t,0,s,i));if(r)for(var x=0,h=e.length;x<h;x++){var a=e[x]*i,l=x<h-1?e[x+1]*i:t.length;o-=Math.abs(I(t,a,l,i))}var c=0;for(x=0;x<n.length;x+=3){var u=n[x]*i,y=n[x+1]*i,f=n[x+2]*i;c+=Math.abs((t[u]-t[f])*(t[y+1]-t[u+1])-(t[u]-t[y])*(t[f+1]-t[u+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},10641:(t,e,i)=>{i.d(e,{g:()=>n});const n={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,i){const n=new r(t.getPointX(e),t.getPointY(e),i),s=t.hasZ(e),o=t.hasM(e);return s&&(n.z=t.getPointZ(e)),o&&(n.m=t.getPointM(e)),n},exportPolygon:function(t,e,i){return new s(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,i){return new o(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,i){return new x(t.exportPoints(e),i,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,i){const n=t.hasZ(e),r=t.hasM(e),s=new h(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),i);if(n){const i=t.getZExtent(e);s.zmin=i.vmin,s.zmax=i.vmax}if(r){const i=t.getMExtent(e);s.mmin=i.vmin,s.mmax=i.vmax}return s}};class r{constructor(t,e,i){this.x=t,this.y=e,this.spatialReference=i,this.z=void 0,this.m=void 0}}class s{constructor(t,e,i,n){this.rings=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}class o{constructor(t,e,i,n){this.paths=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}class x{constructor(t,e,i,n){this.points=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}class h{constructor(t,e,i,n,r){this.xmin=t,this.ymin=e,this.xmax=i,this.ymax=n,this.spatialReference=r,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},51114:(t,e,i)=>{i.r(e),i.d(e,{default:()=>V});var n=i(93800),r=i(48602),s=(i(21265),i(50925),i(14746),i(75269)),o=i(8374),x=i(90772),h=i(53053),a=i(83795),l=i(70576),c=i(1413),u=i(60529),y=(i(83652),i(47116),i(95476),i(77690)),f=i(88298),p=i(58023),d=i(90411),v=i(99929),_=i(39698);class m extends v.m{constructor(t){super(),this.layerView=t,this._childrenRenderParameters={context:null,pixelRatio:1,state:new d.default,stationary:!0,painter:null},this._name=this.constructor.name,this.requestRender=this.requestRender.bind(this)}doRender(t){if(t.drawPhase!==_.S5.MAP)return;t.painter.setPipelineState(null);const e=window.devicePixelRatio,{stationary:i,context:n,painter:r,profiler:s}=t,o=this._childrenRenderParameters;o.context=n.gl,o.state.copy(t.state),o.state.pixelRatio=e,o.stationary=i,o.painter=r;const x=this.createRenderParams(t);r.beforeRenderLayer(x,this.clips?255:0,x.globalOpacity),s.recordContainerStart(this._name);const h=n.getBoundFramebufferObject(),a=n.getViewport();n.resetState(),n.bindFramebuffer(h),n.setViewport(a.x,a.y,a.width,a.height),this.layerView._renderTarget.framebuffer=h.glName,this.layerView._renderTarget.viewport[0]=a.x,this.layerView._renderTarget.viewport[1]=a.y,this.layerView._renderTarget.viewport[2]=a.width,this.layerView._renderTarget.viewport[3]=a.height,this.layerView.render(o),n.enforceState(),r.afterRenderLayer(x,x.globalOpacity),s.recordContainerEnd()}createRenderParams(t){return{...t,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.opacity,inFadeTransition:this.inFadeTransition}}}var g=i(50765),w=i(84279),T=i(71106);const M=new Set,R=[],b=[];class O{constructor(t,e,i,n,r,s,o){let h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,0],a=arguments.length>8&&void 0!==arguments[8]?arguments[8]:(0,x.vt)();this.id=t,this.level=e,this.row=i,this.col=n,this.world=r,this.resolution=s,this.scale=o,this.coords=h,this.bounds=a}}let P=class extends((0,T.A)((0,p.e)(w.default))){constructor(t){super(t),this._tileMap=new Map,this.container=new m(this),this.layer=null,this.tiles=[],this._renderTarget={framebuffer:null,viewport:[0,0,0,0]}}get _tileInfoView(){const t=this.layer?.tileInfo;return t?new u.A(t):null}get context(){return this.view.stage.context.gl}attach(){}detach(){}requestRender(){this.container.requestRender()}tilesChanged(t,e){}supportsSpatialReference(t){const e=this.layer?.tileInfo;return!e||(0,l.aI)(e.spatialReference,t)}async doRefresh(){}isUpdating(){return!1}update(t){const e=this._tileInfoView,i=this.tiles;if(e){const n=e.getTileCoverage(t.state,0),r=n?.spans,s=n?.lodInfo;if(r?.length&&s){const t=s.level;for(const{row:e,colFrom:n,colTo:o}of r)for(let r=n;r<=o;r++){const n=s.normalizeCol(r),o=s.getWorldForColumn(r),x=`${t}/${e}/${n}/${o}`;if(!this._tileMap.has(x)){const r=new O(x,t,e,n,o,s.resolution,s.scale);s.getTileCoords(r.coords,r,!1),s.getTileBounds(r.bounds,r,!0),this._tileMap.set(x,r),i.push(r),R.push(r)}M.add(x)}}}for(let n=i.length-1;n>=0;n--){const t=i[n];M.has(t.id)||(i.splice(n,1),b.push(t),this._tileMap.delete(t.id))}(R.length||b.length)&&(this.tilesChanged(R,b),R.length=b.length=0),M.clear(),this.requestRender()}viewChange(){this.requestUpdate()}moveEnd(){}bindRenderTarget(){this.context.bindFramebuffer(this.context.FRAMEBUFFER,this._renderTarget.framebuffer),this.context.viewport(this._renderTarget.viewport[0],this._renderTarget.viewport[1],this._renderTarget.viewport[2],this._renderTarget.viewport[3])}getRenderTarget(){return this._renderTarget}async tessellateExtent(t){const e={vertices:[],indices:[]},i=await this._projectAndNormalizeGeometry(t),n=e.vertices.length;return e.vertices.push({x:i.xmin,y:i.ymin,xOffset:0,yOffset:0,uTexcoord:0,vTexcoord:0,distance:0}),e.vertices.push({x:i.xmax,y:i.ymin,xOffset:0,yOffset:0,uTexcoord:1,vTexcoord:0,distance:0}),e.vertices.push({x:i.xmin,y:i.ymax,xOffset:0,yOffset:0,uTexcoord:0,vTexcoord:1,distance:0}),e.vertices.push({x:i.xmax,y:i.ymax,xOffset:0,yOffset:0,uTexcoord:1,vTexcoord:1,distance:0}),e.indices.push(n,n+1,n+2,n+1,n+3,n+2),e}async tessellatePoint(t,e){const i=await this._projectAndNormalizeGeometry(t);return this._tessellatePoints([i],e)}async tessellateMultipoint(t,e){const i=await this._projectAndNormalizeGeometry(t),n=i.points.map((t=>({x:t[0],y:t[1],spatialReference:i.spatialReference})));return this._tessellatePoints(n,e)}async _tessellatePoints(t,e){const i={vertices:[],indices:[]};for(const n of t){const t=i.vertices.length;i.vertices.push({x:n.x,y:n.y,xOffset:e.x,yOffset:e.y+e.height,uTexcoord:0,vTexcoord:0,distance:0}),i.vertices.push({x:n.x,y:n.y,xOffset:e.x+e.width,yOffset:e.y+e.height,uTexcoord:1,vTexcoord:0,distance:0}),i.vertices.push({x:n.x,y:n.y,xOffset:e.x,yOffset:e.y,uTexcoord:0,vTexcoord:1,distance:0}),i.vertices.push({x:n.x,y:n.y,xOffset:e.x+e.width,yOffset:e.y,uTexcoord:1,vTexcoord:1,distance:0}),i.indices.push(t,t+1,t+2,t+1,t+3,t+2)}return i}async tessellatePolyline(t,e){const i={vertices:[],indices:[]},n=(await this._projectAndNormalizeGeometry(t)).paths;if(!n?.length)return i;let r;const s=new f.i(((t,n,s,o,x,h,a,l,c,u,y)=>{const f=i.vertices.length;return i.vertices.push({x:t,y:-n,xOffset:a*e/2,yOffset:l*e/2,uTexcoord:y/r,vTexcoord:(u+1)/2,distance:y}),f}),((t,e,n)=>{i.indices.push(t,e,n)}),!0);for(const o of n){r=0;for(let e=1;e<o.length;++e){const t=o[e][0]-o[e-1][0],i=o[e][1]-o[e-1][1];r+=Math.sqrt(t*t+i*i)}const t=o.map((t=>({x:t[0],y:-t[1]})));s.tessellate(t,Z)}return i}async tessellatePolygon(t){const e={vertices:[],indices:[]},i=await this._projectAndNormalizeGeometry(t),n=i.rings;if(!n?.length)return e;(0,h.m3)(i);for(const h of i.rings)for(const t of h)t[1]=-t[1];let r=1/0,s=1/0,o=-1/0,x=-1/0;return(0,g.Ak)(i.rings,(()=>{}),((t,e,i)=>{for(let n=t;n<e;n+=2)r=Math.min(r,i[n]),s=Math.min(s,i[n+1]),o=Math.max(o,i[n]),x=Math.max(x,i[n+1])})),(0,g.Ak)(i.rings,(()=>{}),((t,i,n,h)=>{this._invokeEarcut(e,t,i,n,h,[r,s,o,x])})),e}_invokeEarcut(t,e,i,n,r,s){const x=n.slice(e,i),h=(0,o.e)(x,r,2),a=t.vertices.length;for(let o=0;o<x.length;o+=2){const e=x[o],i=x[o+1];t.vertices.push({x:e,y:-i,xOffset:0,yOffset:0,uTexcoord:(e-s[0])/(s[2]-s[0]),vTexcoord:1-(i-s[1])/(s[3]-s[1]),distance:0})}for(let o=0;o<h.length;++o)t.indices.push(a+h[o])}async _projectAndNormalizeGeometry(t){await(0,c.Nk)(t.spatialReference,this.view.spatialReference);const e=(0,a.b3)(t);return(0,c.Cv)(e,t.spatialReference,this.view.spatialReference)}};(0,n._)([(0,r.MZ)()],P.prototype,"_tileInfoView",null),(0,n._)([(0,r.MZ)()],P.prototype,"layer",void 0),(0,n._)([(0,r.MZ)()],P.prototype,"context",null),P=(0,n._)([(0,s.$)("esri.views.2d.layers.BaseLayerViewGL2D")],P);const Z={pixelCoordRatio:1,wrapDistance:1e11,halfWidth:y.Gh+1,initialDistance:0,textured:!0,offset:0},V=P},71106:(t,e,i)=>{i.d(e,{A:()=>h});var n=i(93800),r=i(50925),s=i(49959),o=i(79953),x=(i(21265),i(14746),i(74719),i(75269));const h=t=>{let e=class extends t{initialize(){this.addHandles((0,o.on)((()=>this.layer),"refresh",(t=>{this.doRefresh(t.dataChanged).catch((t=>{(0,s.isAbortError)(t)||r.A.getLogger(this).error(t)}))})),"RefreshableLayerView")}};return e=(0,n._)([(0,x.$)("esri.views.layers.RefreshableLayerView")],e),e}},83795:(t,e,i)=>{i.d(e,{b3:()=>c,jZ:()=>l});var n=i(19455),r=i(90772),s=i(41896),o=i(53053),x=i(78629),h=i(65597),a=i(70576);function l(t){return u(t,!0)}function c(t){return u(t,!1)}function u(t,e){if(null==t)return null;const i=t.spatialReference,r=(0,a.Vp)(i),o=n.A.isSerializable(t)?t.toJSON():t;if(!r)return o;const l=(0,a.K8)(i)?102100:4326,c=h.j7[l].maxX,u=h.j7[l].minX;if((0,x.isPoint)(o))return f(o,c,u);if((0,x.isMultipoint)(o))return o.points=o.points.map((t=>f(t,c,u))),o;if((0,x.isExtent)(o))return y(o,r);if((0,x.isPolygon)(o)||(0,x.isPolyline)(o)){const t=(0,s.Rg)(g,o),i={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},n=(0,h.kd)(i.xmin,u)*(2*c),r=0===n?o:(0,h.kS)(o,n);return i.xmin+=n,i.xmax+=n,i.xmax>c?_(r,c,e):i.xmin<u?_(r,u,e):r}return o}function y(t,e){if(!e)return t;const i=function(t,e){const i=[],{ymin:n,ymax:r,xmin:s,xmax:o}=t,x=t.xmax-t.xmin,[h,a]=e.valid,{x:l,frameId:c}=p(t.xmin,e),{x:u,frameId:y}=p(t.xmax,e),f=l===u&&x>0;if(x>2*a){const t={xmin:s<o?l:u,ymin:n,xmax:a,ymax:r},e={xmin:h,ymin:n,xmax:s<o?u:l,ymax:r},x={xmin:0,ymin:n,xmax:a,ymax:r},f={xmin:h,ymin:n,xmax:0,ymax:r},p=[],v=[];d(t,x)&&p.push(c),d(t,f)&&v.push(c),d(e,x)&&p.push(y),d(e,f)&&v.push(y);for(let i=c+1;i<y;i++)p.push(i),v.push(i);i.push(new m(t,[c]),new m(e,[y]),new m(x,p),new m(f,v))}else l>u||f?i.push(new m({xmin:l,ymin:n,xmax:a,ymax:r},[c]),new m({xmin:h,ymin:n,xmax:u,ymax:r},[y])):i.push(new m({xmin:l,ymin:n,xmax:u,ymax:r},[c]));return i}(t,e).map((t=>t.extent));return i.length<2?i[0]||t:i.length>2?(t.xmin=e.valid[0],t.xmax=e.valid[1],t):{rings:i.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function f(t,e,i){if(Array.isArray(t)){const n=t[0];if(n>e){const i=(0,h.kd)(n,e);t[0]=n+i*(-2*e)}else if(n<i){const e=(0,h.kd)(n,i);t[0]=n+e*(-2*i)}}else{const n=t.x;if(n>e){const i=(0,h.kd)(n,e);t.x+=i*(-2*e)}else if(n<i){const e=(0,h.kd)(n,i);t.x+=e*(-2*i)}}return t}function p(t,e){const[i,n]=e.valid,r=2*n;let s,o=0;return t>n?(s=Math.ceil(Math.abs(t-n)/r),t-=s*r,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/r),t+=s*r,o=-s),{x:t,frameId:o}}function d(t,e){const{xmin:i,ymin:n,xmax:r,ymax:s}=e;return v(t,i,n)&&v(t,i,s)&&v(t,r,s)&&v(t,r,n)}function v(t,e,i){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax}function _(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=!(0,x.isPolyline)(t);if(n&&(0,o.m3)(t),i)return(new w).cut(t,e);const r=n?t.rings:t.paths,s=n?4:2,h=r.length,a=-2*e;for(let o=0;o<h;o++){const t=r[o];if(t&&t.length>=s){const e=[];for(const i of t)e.push([i[0]+a,i[1]]);r.push(e)}}return n?t.rings=r:t.paths=r,t}class m{constructor(t,e){this.extent=t,this.frameIds=e}}const g=(0,r.vt)();class w{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,e){let i;if(this._xCut=e,t.rings)this._closed=!0,i=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,i=t.paths,this._minPts=2}for(const r of i){if(!r||r.length<this._minPts)continue;let t=!0;for(const e of r)t?(this.moveTo(e),t=!1):this.lineTo(e);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),i=[];for(const r of this._linesIn)r&&r.length>=this._minPts&&i.push(r);const n=-2*this._xCut;for(const r of this._linesOut)if(r&&r.length>=this._minPts){for(const t of r)t[0]+=n;i.push(r)}return this._closed?t.rings=i:t.paths=i,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const e=this._side(t[0]);if(e*this._prevSide==-1){const i=this._intersect(this._prevPt,t);this._lineTo(this._xCut,i,0),this._prevSide=0,this._lineTo(t[0],t[1],e)}else this._lineTo(t[0],t[1],e);this._prevSide=e,this._prevPt=t}close(){const t=this._firstPt,e=this._prevPt;t[0]===e[0]&&t[1]===e[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,e,i){this._closed?(this._lineIn.push([i<=0?t:this._xCut,e]),this._lineOut.push([i>=0?t:this._xCut,e])):(i<=0&&this._lineIn.push([t,e]),i>=0&&this._lineOut.push([t,e]))}_lineTo(t,e,i){this._closed?(T(this._lineIn,i<=0?t:this._xCut,e),T(this._lineOut,i>=0?t:this._xCut,e)):i<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,e])):i>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,e])):this._prevSide<0?(this._lineIn.push([t,e]),this._lineOut.push([t,e])):this._prevSide>0&&(this._lineOut.push([t,e]),this._lineIn.push([t,e]))}_checkClosingPt(t){const e=t.length;e>3&&t[0][0]===this._xCut&&t[e-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[e-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,e){const i=(this._xCut-t[0])/(e[0]-t[0]);return t[1]+i*(e[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}function T(t,e,i){const n=t.length;n>1&&t[n-1][0]===e&&t[n-2][0]===e?t[n-1][1]=i:t.push([e,i])}},88298:(t,e,i)=>{i.d(e,{i:()=>f});var n=i(55601),r=i(77690);function s(t,e){return t.x===e.x&&t.y===e.y}function o(t){if(!t)return;const e=t.length;if(e<=1)return;let i=0;for(let n=1;n<e;n++)s(t[n],t[i])||++i===n||(t[i]=t[n]);t.length=i+1}function x(t,e){return t.x=e.y,t.y=-e.x,t}function h(t,e){return t.x=-e.y,t.y=e.x,t}function a(t,e){return t.x=e.x,t.y=e.y,t}function l(t,e){return t.x=-e.x,t.y=-e.y,t}function c(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function u(t,e){return t.x*e.x+t.y*e.y}function y(t,e,i,n){return t.x=e.x*i+e.y*n,t.y=e.x*n-e.y*i,t}class f{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._canUseThinTessellation;o(t),i&&e.halfWidth<r.Gh&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const i=e.wrapDistance||65535;let n=e.initialDistance||0,r=!1,s=t[0].x,o=t[0].y;const x=t.length;for(let h=1;h<x;++h){r&&(r=!1,n=0);let e=t[h].x,x=t[h].y,a=e-s,l=x-o,c=Math.sqrt(a*a+l*l);if(a/=c,l/=c,n+c>i){r=!0;const t=(i-n)/c;c=i-n,e=(1-t)*s+t*e,x=(1-t)*o+t*x,--h}const u=this._writeVertex(s,o,0,0,a,l,l,-a,0,-1,n),y=this._writeVertex(s,o,0,0,a,l,-l,a,0,1,n);n+=c;const f=this._writeVertex(e,x,0,0,a,l,l,-a,0,-1,n),p=this._writeVertex(e,x,0,0,a,l,-l,a,0,1,n);this._writeTriangle(u,y,f),this._writeTriangle(y,f,p),s=e,o=x}}_tessellate(t,e){const i=t[0],r=t[t.length-1],o=s(i,r),f=o?3:2;if(t.length<f)return;const p=e.pixelCoordRatio,d=null!=e.capType?e.capType:n.xR.BUTT,v=null!=e.joinType?e.joinType:n.JO.MITER,_=null!=e.miterLimit?Math.min(e.miterLimit,4):2,m=null!=e.roundLimit?Math.min(e.roundLimit,1.05):1.05,g=null!=e.halfWidth?e.halfWidth:2,w=!!e.textured;let T,M,R,b=null;const O=this._prevNormal,P=this._nextNormal;let Z=-1,V=-1;const k=this._joinNormal;let I,N;const E=this._textureNormalLeft,z=this._textureNormalRight,C=this._textureNormal;let S=-1,L=-1;const A=e.wrapDistance||65535;let j=e.initialDistance||0;const U=this._writeVertex,B=this._writeTriangle,D=(t,e,i,n,r,s)=>{const o=U(M,R,I,N,i,n,t,e,r,s,j);return S>=0&&L>=0&&o>=0&&B(S,L,o),S=L,L=o,o};o&&(T=t[t.length-2],P.x=r.x-T.x,P.y=r.y-T.y,V=c(P),P.x/=V,P.y/=V);let G=!1;for(let s=0;s<t.length;++s){if(G&&(G=!1,j=0),T&&(O.x=-P.x,O.y=-P.y,Z=V,j+Z>A&&(G=!0)),G){const e=(A-j)/Z;Z=A-j,T={x:(1-e)*T.x+e*t[s].x,y:(1-e)*T.y+e*t[s].y},--s}else T=t[s];M=T.x,R=T.y;const e=s<=0&&!G,i=s===t.length-1;if(e||(j+=Z),b=i?o?t[1]:null:t[s+1],b?(P.x=b.x-M,P.y=b.y-R,V=c(P),P.x/=V,P.y/=V):(P.x=void 0,P.y=void 0),!o){if(e){h(k,P),I=k.x,N=k.y,d===n.xR.SQUARE&&(D(-P.y-P.x,P.x-P.y,P.x,P.y,0,-1),D(P.y-P.x,-P.x-P.y,P.x,P.y,0,1)),d===n.xR.ROUND&&(D(-P.y-P.x,P.x-P.y,P.x,P.y,-1,-1),D(P.y-P.x,-P.x-P.y,P.x,P.y,-1,1)),d!==n.xR.ROUND&&d!==n.xR.BUTT||(D(-P.y,P.x,P.x,P.y,0,-1),D(P.y,-P.x,P.x,P.y,0,1));continue}if(i){x(k,O),I=k.x,N=k.y,d!==n.xR.ROUND&&d!==n.xR.BUTT||(D(O.y,-O.x,-O.x,-O.y,0,-1),D(-O.y,O.x,-O.x,-O.y,0,1)),d===n.xR.SQUARE&&(D(O.y-O.x,-O.x-O.y,-O.x,-O.y,0,-1),D(-O.y-O.x,O.x-O.y,-O.x,-O.y,0,1)),d===n.xR.ROUND&&(D(O.y-O.x,-O.x-O.y,-O.x,-O.y,1,-1),D(-O.y-O.x,O.x-O.y,-O.x,-O.y,1,1));continue}}let r,f,U=(F=P,-((J=O).x*F.y-J.y*F.x));if(Math.abs(U)<.01)u(O,P)>0?(k.x=O.x,k.y=O.y,U=1,r=Number.MAX_VALUE,f=!0):(h(k,P),U=1,r=1,f=!1);else{k.x=(O.x+P.x)/U,k.y=(O.y+P.y)/U,r=c(k);const t=(r-1)*g*p;f=r>4||t>Z&&t>V}I=k.x,N=k.y;let B=v;switch(v){case n.JO.BEVEL:r<1.05&&(B=n.JO.MITER);break;case n.JO.ROUND:r<m&&(B=n.JO.MITER);break;case n.JO.MITER:r>_&&(B=n.JO.BEVEL)}switch(B){case n.JO.MITER:if(D(k.x,k.y,-O.x,-O.y,0,-1),D(-k.x,-k.y,-O.x,-O.y,0,1),i)break;if(w){const t=G?0:j;S=this._writeVertex(M,R,I,N,P.x,P.y,k.x,k.y,0,-1,t),L=this._writeVertex(M,R,I,N,P.x,P.y,-k.x,-k.y,0,1,t)}break;case n.JO.BEVEL:{const t=U<0;let e,n,r,s;if(t){const t=S;S=L,L=t,e=E,n=z}else e=z,n=E;if(f)r=t?h(this._innerPrev,O):x(this._innerPrev,O),s=t?x(this._innerNext,P):h(this._innerNext,P);else{const e=t?l(this._inner,k):a(this._inner,k);r=e,s=e}const o=t?x(this._bevelStart,O):h(this._bevelStart,O);D(r.x,r.y,-O.x,-O.y,e.x,e.y);const c=D(o.x,o.y,-O.x,-O.y,n.x,n.y);if(i)break;const u=t?h(this._bevelEnd,P):x(this._bevelEnd,P);if(f){const t=this._writeVertex(M,R,I,N,-O.x,-O.y,0,0,0,0,j);S=this._writeVertex(M,R,I,N,P.x,P.y,s.x,s.y,e.x,e.y,j),L=this._writeVertex(M,R,I,N,P.x,P.y,u.x,u.y,n.x,n.y,j),this._writeTriangle(c,t,L)}else{if(w){const t=this._bevelMiddle;t.x=(o.x+u.x)/2,t.y=(o.y+u.y)/2,y(C,t,-O.x,-O.y),D(t.x,t.y,-O.x,-O.y,C.x,C.y),y(C,t,P.x,P.y),S=this._writeVertex(M,R,I,N,P.x,P.y,t.x,t.y,C.x,C.y,j),L=this._writeVertex(M,R,I,N,P.x,P.y,s.x,s.y,e.x,e.y,j)}else{const t=S;S=L,L=t}D(u.x,u.y,P.x,P.y,n.x,n.y)}if(t){const t=S;S=L,L=t}break}case n.JO.ROUND:{const t=U<0;let e,n;if(t){const t=S;S=L,L=t,e=E,n=z}else e=z,n=E;const s=t?l(this._inner,k):a(this._inner,k);let o,c;f?(o=t?h(this._innerPrev,O):x(this._innerPrev,O),c=t?x(this._innerNext,P):h(this._innerNext,P)):(o=s,c=s);const p=t?x(this._roundStart,O):h(this._roundStart,O),d=t?h(this._roundEnd,P):x(this._roundEnd,P),v=D(o.x,o.y,-O.x,-O.y,e.x,e.y),_=D(p.x,p.y,-O.x,-O.y,n.x,n.y);if(i)break;const m=this._writeVertex(M,R,I,N,-O.x,-O.y,0,0,0,0,j);f||this._writeTriangle(S,L,m);const g=l(this._outer,s),T=this._writeVertex(M,R,I,N,P.x,P.y,d.x,d.y,n.x,n.y,j);let b,Z;const V=r>2;if(V){let e;r!==Number.MAX_VALUE?(g.x/=r,g.y/=r,e=u(O,g),e=(r*(e*e-1)+1)/e):e=-1,b=t?x(this._startBreak,O):h(this._startBreak,O),b.x+=O.x*e,b.y+=O.y*e,Z=t?h(this._endBreak,P):x(this._endBreak,P),Z.x+=P.x*e,Z.y+=P.y*e}y(C,g,-O.x,-O.y);const A=this._writeVertex(M,R,I,N,-O.x,-O.y,g.x,g.y,C.x,C.y,j);y(C,g,P.x,P.y);const B=w?this._writeVertex(M,R,I,N,P.x,P.y,g.x,g.y,C.x,C.y,j):A,G=m,J=w?this._writeVertex(M,R,I,N,P.x,P.y,0,0,0,0,j):m;let F=-1,q=-1;if(V&&(y(C,b,-O.x,-O.y),F=this._writeVertex(M,R,I,N,-O.x,-O.y,b.x,b.y,C.x,C.y,j),y(C,Z,P.x,P.y),q=this._writeVertex(M,R,I,N,P.x,P.y,Z.x,Z.y,C.x,C.y,j)),w?V?(this._writeTriangle(G,_,F),this._writeTriangle(G,F,A),this._writeTriangle(J,B,q),this._writeTriangle(J,q,T)):(this._writeTriangle(G,_,A),this._writeTriangle(J,B,T)):V?(this._writeTriangle(m,_,F),this._writeTriangle(m,F,q),this._writeTriangle(m,q,T)):(this._writeTriangle(m,_,A),this._writeTriangle(m,B,T)),f?(S=this._writeVertex(M,R,I,N,P.x,P.y,c.x,c.y,e.x,e.y,j),L=T):(S=w?this._writeVertex(M,R,I,N,P.x,P.y,c.x,c.y,e.x,e.y,j):v,this._writeTriangle(S,J,T),L=T),t){const t=S;S=L,L=t}break}}}var J,F}}}}]);