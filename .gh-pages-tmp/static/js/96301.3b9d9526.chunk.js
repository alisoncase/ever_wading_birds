"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79538,96301],{79538:(e,t,i)=>{i.d(t,{BV:()=>F,EG:()=>y,Lk:()=>$,Ll:()=>z,Np:()=>f,R3:()=>k,SO:()=>c,T1:()=>b,UH:()=>d,Wy:()=>E,XR:()=>p,aM:()=>x,fs:()=>v,i0:()=>M,i3:()=>w});var n=i(66845),r=i(95011),s=i(96247),a=i(76983),o=i(73210),l=i(40731);const d=",",f={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},u="percent-of-total",m="field",p={exclude:["median"]},c={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},g=new Set(["integer","small-integer"]);let h=null;const w=["date","date-only","timestamp-offset"];function v(e){return(0,r.isDateField)(e)||(0,r.isDateOnlyField)(e)||(0,r.isTimestampOffsetField)(e)}async function y(e){const{field:t,field2:i,field3:n,normalizationField:r,valueExpression:a}=e;let o=[];if(a){if(!h){const{arcadeUtils:e}=await(0,s.lw)();h=e}o=h.extractFieldNames(a)}return t&&o.push(t),i&&o.push(i),n&&o.push(n),r&&o.push(r),o}function E(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=u)),t??void 0}function T(e){return String(e).padStart(2,"0")}function q(e,t,i){let n;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),n=`TIMESTAMP'${i?e.getFullYear():e.getUTCFullYear()}-${T((i?e.getMonth():e.getUTCMonth())+1)}-${T(i?e.getDate():e.getUTCDate())} ${T(i?e.getHours():e.getUTCHours())}:${T(i?e.getMinutes():e.getUTCMinutes())}:${T(i?e.getSeconds():e.getUTCSeconds())}'`):n=e,n}function x(e,t,i,n){const{hasQueryEngine:r}=e,s=`(${q(i,$(e,i),r)} - ${q(t,$(e,t),r)})`;let a=c[n],o="/";return a<1&&(a=1/a,o="*"),{sqlExpression:1===a?s:`(${s} ${o} ${a})`,sqlWhere:null}}function $(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const i=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,r.isDateField)(i))return"field"}}function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;for(const i in t)if(t[i].includes(e))return i}function b(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;return e&&("string"==typeof e?t.includes(e)&&(n=e):n=(0,a.q3)(e)),i?n||"gray":n}function k(e,t){const i=t&&e.getField(t);return!!i&&g.has(i.type)}function z(e){return`cast(${e} as float)`}function M(e,t){const{format:i,timeZoneOptions:r,fieldType:s}=t??{};let a,d;if(r&&({timeZone:a,timeZoneName:d}=(0,l.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,n.J2)(i||"short-date-short-time"),s)),"string"==typeof e&&isNaN(Date.parse("time-only"===s?`1970-01-01T${e}Z`:e)))return e;switch(s){case"date-only":{const t=(0,n.J2)(i||"short-date");return"string"==typeof e?(0,n.iS)(e,{...t}):(0,n.Yq)(e,{...t,timeZone:o.n$})}case"time-only":{const t=(0,n.J2)(i||"short-time");return"string"==typeof e?(0,n.F8)(e,t):(0,n.Yq)(e,{...t,timeZone:o.n$})}case"timestamp-offset":{if(!a&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=i||r?(0,n.J2)(i||"short-date-short-time"):void 0,s=t?{...t,timeZone:a,timeZoneName:d}:void 0;return"string"==typeof e?(0,n.Ey)(e,s):(0,n.Yq)(e,s)}default:{const t=i||r?(0,n.J2)(i||"short-date-short-time"):void 0;return(0,n.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:a,timeZoneName:d}:void 0)}}}},85151:(e,t,i)=>{i.d(t,{p:()=>s,z:()=>r});var n=i(74719);const r="aggregateCount";function s(e,t){if(!e.view)throw new n.default(`${t}:missing-parameters`,"'view' parameter is required for binning");if(e.sqlExpression)throw new n.default(`${t}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if("3d"===e.view.type)throw new n.default(`${t}:invalid-parameters`,"3d view is not supported for binning")}},96301:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var n=i(74719),r=i(95011),s=i(70934),a=i(85151),o=i(79538),l=i(2938);const d=[...o.i3,"time-only",...r.numericTypes];async function f(e){const{layerAdapter:t,...i}=await async function(e){if(!e?.layer||!(e.field||e.valueExpression||e.sqlExpression))throw new n.default("histogram:missing-parameters","'layer' and 'field', 'valueExpression' or 'sqlExpression' parameters are required");if(e.valueExpression&&!e.sqlExpression&&!e.view)throw new n.default("histogram:missing-parameters","View is required when 'valueExpression' is specified");e.forBinning&&(0,a.p)(e,"histogram");const{layer:t,...i}=e,f=e.forBinning?l.Mi:l.G3,u=(0,l.Jg)(t,f,e.forBinning);if(!u)throw new n.default("histogram:invalid-parameters","'layer' must be one of these types: "+(0,l.Ho)(f).join(", "));const m={layerAdapter:u,...i};m.normalizationType=(0,o.Wy)(m);const p=null!=m.signal?{signal:m.signal}:null;await u.load(p);const c=m.valueExpression||m.sqlExpression,g=m.field,h=g?u.getField(g):null,w=!m.classificationMethod||"equal-interval"===m.classificationMethod,v=await(0,o.EG)({field:g,normalizationField:m.normalizationField,valueExpression:m.valueExpression}),y=(0,s.MH)(u,v,"histogram:invalid-parameters");if(y)throw y;if(h){const e=(0,s.a)(u,h,"histogram:invalid-parameters",d);if(e)throw e;if((0,o.fs)(h)||(0,r.isTimeOnlyField)(h)){if(m.normalizationType)throw new n.default("histogram:invalid-parameters","Normalization is not allowed for date fields");if(!w)throw new n.default("histogram:invalid-parameters","'classificationMethod' other than 'equal-interval' is not allowed for date fields")}}else if(c){if(m.normalizationType)throw new n.default("histogram:invalid-parameters","Normalization is not allowed when 'valueExpression' or 'sqlExpression' is specified");if(!w)throw new n.default("histogram:invalid-parameters","'classificationMethod' other than 'equal-interval' is not allowed when 'valueExpression' or 'sqlExpression' is specified")}m.filter&&!m.filter.spatialRelationship&&(m.filter.spatialRelationship="intersects");const E=(0,s.Wk)(m.filter,"histogram:invalid-parameters");if(E)throw E;return null==m.useQueryAttributeBins&&(m.useQueryAttributeBins=!0),m}(e);return t.histogram(i)}}}]);