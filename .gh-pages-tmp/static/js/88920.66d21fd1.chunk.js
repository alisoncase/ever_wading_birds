"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[88920],{88920:(e,t,n)=>{n.r(t),n.d(t,{create:()=>m});var a=n(50925),i=n(84190),o=n(26848),r=n(75400),s=n(96913),l=n(28622),u=n(31766),c=n(10900);const d=()=>a.A.getLogger("esri.geometry.support.meshUtils.elevation");async function m(e,t,n){let a;if(p(e)||(0,c.Q)(e)){const i=await async function(e){return p(e)?e.load():(await e.load(),await Promise.allSettled(e.layers.items.map((e=>e.load()))),e)}(e);return a=await i.createElevationSampler(t,{demResolution:n?.demResolution??"finest-contiguous"}),f(a,t,{material:n?.material})}return"string"==typeof n?.demResolution?(d().error("create()","demResolution must be a number when used directly with a sampler"),new o.default):f(e,t,{material:n?.material,demResolution:n?.demResolution})}function f(e,t,n){if(e.demResolution.min<=0&&!n?.demResolution)return d().error("create()","demResolution must be specified when used with groundView.elevationSampler"),new o.default;const a=(0,i.GA)(t.spatialReference),r=(n?.demResolution??e.demResolution.min)/a,c=Math.round(t.width/r),m=Math.round(t.height/r),f=c+1,p=m+1,R=new Float64Array(f*p*3),h=new Float32Array(f*p*2);let y=0,g=0;const v=new Uint32Array(c*m*2*3);let b=0,A=0;const k=!e.spatialReference.equals(t.spatialReference);w.spatialReference=t.spatialReference;const{xmin:x,ymin:_,height:S,width:C}=t;for(let i=0;i<p;i++){const t=_+S*(i/m);for(let n=0;n<f;n++){const a=x+C*(n/c);if(R[y++]=a,R[y++]=t,k){w.x=a,w.y=t;const n=(0,s.project)(w,e.spatialReference);R[y++]=e.elevationAt(n.x,n.y)??0}else R[y++]=e.elevationAt(a,t)??0;const o=n/c,r=i/m;h[g++]=o,h[g++]=r,i!==m&&n!==c&&(v[A++]=b+1,v[A++]=b+f+1,v[A++]=b+f,v[A++]=b,v[A++]=b+1,v[A++]=b+f),b++}}return new o.default({vertexAttributes:new u.H({position:R,uv:h}),components:[new l.default({faces:v,shading:"smooth",material:n?.material??null})],spatialReference:t.spatialReference})}function p(e){return"type"in e&&("elevation"===e.type||"base-elevation"===e.type)}const w=new r.default}}]);