"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[44175],{24158:(e,t,i)=>{i.d(t,{CA:()=>n,Yb:()=>o,p5:()=>r});i(88677);var s=i(99961);function o(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function r(e){return e?{backgroundImage:`url(${e})`}:{}}function n(e){let{action:t,feature:i}=e;const o=i?.attributes,r="image"in t?t.image:void 0;return r&&o?(0,s.V)(r,o):r??""}},44175:(e,t,i)=>{i.r(t),i.d(t,{default:()=>te});var s=i(93800),o=i(56082),r=i(50925),n=i(79953),a=i(48602),l=(i(21265),i(14746),i(75269)),c=i(15492),d=i(3266),u=i(78076),h=i(53512),p=i(27811),g=i(49403),_=i(50821),w=i(17745),m=i(76697),v=i(66201),b=i(87118),y=(i(88677),i(89129)),f=i(76469),M=i(53957),T=(i(76519),i(62155),i(83014),i(23621),i(45608),i(36917),i(19609),i(7282),i(12969)),A=i(24158),k=i(21238),S=i(70350),F=i(64139),C=i(59626),N=i(75716),R=i(65140),K=i(12493),I=i(14105),x=i(9137),P=i(99961);const B=K.RP.clone(),Z="esri-utility-network-trace",O={base:Z,featureContent:`${Z}__feature-content`};let W=class extends p.default{constructor(e,t){super(e,t),this._utilityNetworkTraceMessages=null,this.closed=!1,this.closable=!0,this.messages=null,this.messagesCommon=null,this._handleAddNonspatialTraceLocation=e=>{this.emit("add-nso-trace-location",{featureWidget:e})},this._handleOpenFeature=e=>{this.emit("open-feature",{feature:e})},this._handleZoomToFeature=e=>{this.emit("zoom-to-feature",{featureWidget:e})}}initialize(){(async()=>{this._utilityNetworkTraceMessages=await(0,M.ud)("esri/widgets/UtilityNetworkTrace/t9n/UtilityNetworkTrace")})()}loadDependencies(){return(0,g.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-bar":()=>Promise.all([i.e(86290),i.e(74597),i.e(36334)]).then(i.bind(i,36334)),"action-group":()=>Promise.all([i.e(86290),i.e(74597),i.e(11484)]).then(i.bind(i,11484)),"flow-item":()=>Promise.all([i.e(86290),i.e(74597),i.e(99776),i.e(85326)]).then(i.bind(i,85326))})}get mode(){return this._get("mode")||"show-feature-info"}set mode(e){this._set("mode",e)}render(){const{flowItems:e}=this,t=e?.toArray();return(0,b.K)(b.w,null,t?.map(((t,i)=>this._renderFlowItem(t,i===e.length-1))))}_renderAddNonspatialTraceLocationAction(e){const{_utilityNetworkTraceMessages:t}=this;return(0,b.K)("calcite-action",{appearance:"solid",bind:this,icon:"utility-network-trace",onclick:()=>this._handleAddNonspatialTraceLocation(e),scale:"s",text:t.inputsStrings.addNonspatialOption,textEnabled:!0,title:t.inputsStrings.addNonspatialOption})}_renderFlowItem(e,t){const{messages:i,closable:s,closed:o}=this,r="graphic"in e&&!e.isTable,n="feature-association"===e.flowType,a=this._getExitMessage(e),l=i.selectFeature,c=e,d=c?c.graphic?.layer:null,u=!(d&&d.geometryType);return(0,b.K)("calcite-flow-item",{bind:this,closable:s,closed:o,description:this._getDrillInFlowItemDescription(e),heading:e.title??"",key:`flow-item-${e.viewModel.uid}`,selected:t,onCalciteFlowItemBack:e=>{e.preventDefault(),this._handleDrillInBackClick()}},(0,b.K)("calcite-action",{appearance:"transparent",bind:this,class:N.A.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:a,title:a}),r?(0,b.K)("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(e),slot:"header-actions-end",text:l,title:l}):null,"show-feature-info"===this.mode?(0,b.K)("calcite-action",{icon:"x",onclick:()=>{this.emit("close")},slot:"header-actions-end",text:this.messagesCommon.close}):void 0,n&&"add-nso"===this.mode?(0,b.K)("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},(0,b.K)("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},u?this._renderAddNonspatialTraceLocationAction(e):this._renderZoomToFeatureAction(e))):null,(0,b.K)("div",{class:this.classes(N.A.container,O.featureContent)},e.render()))}_renderZoomToFeatureAction(e){const t=this._getActionTitle(B);return(0,b.K)("calcite-action",{active:B.active,appearance:"solid",bind:this,"data-action-uid":B.uid,disabled:B.disabled,icon:B.icon??"question",indicator:B.indicator,key:`action-${B.uid}`,loading:B.active,onclick:()=>this._handleZoomToFeature(e),scale:"s",text:t,textEnabled:!0,title:t})}_getActionTitle(e){const{messages:t}=this,{id:i}=e,s=e.title??"";return"zoom-to-feature"===i?(0,P.V)(s,{messages:t}):s}_getDrillInFlowItemDescription(e){switch(e.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return e.viewModel.description??"";case"feature-relationship":return e.allItemsDescription;case"feature-utility-network-association-type":return e.description??""}}_getExitMessage(e){switch(e.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_handleDrillInBackClick(){const e=this.flowItems?.pop();e&&("showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_handleExitClick(){this.emit("exit")}};(0,s._)([(0,a.MZ)()],W.prototype,"closed",void 0),(0,s._)([(0,a.MZ)()],W.prototype,"closable",void 0),(0,s._)([(0,a.MZ)()],W.prototype,"flowItems",void 0),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/widgets/Features/t9n/Features")],W.prototype,"messages",void 0),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/t9n/common")],W.prototype,"messagesCommon",void 0),(0,s._)([(0,a.MZ)()],W.prototype,"mode",null),W=(0,s._)([(0,l.$)("esri.widgets.UtilityNetworkTrace.UtilityNetworkTraceFeaturesDrillIn")],W);const E=W,$="features-spinner",D="esri-utility-network-trace",L={base:D,blockContainer:`${D}__block-container`,blockContent:`${D}__block-content`,featureContent:`${D}__feature-content`,paddingBottom:`${D}__pad-bottom`,paddingTop:`${D}__pad-top`};let G=class extends((0,C.j)(p.default)){constructor(e,t){super(e,t),this._actionBarMenuNode=null,this._drillInFlowItems=new y.default,this._drillInWidget=new E({flowItems:this._drillInFlowItems}),this._feature=null,this._featureMenuViewportNode=null,this._spinner=null,this._utilityNetworkTraceMessages=null,this.featureNavigationTop=!1,this.headerActions=new K.E$,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new R.default,this._renderAction=(e,t)=>{const i=this._getActionTitle(e),{type:s,active:o,uid:r,disabled:n,indicator:a}=e;return e.visible?(0,b.K)("calcite-action",{active:"toggle"===s&&e.value,appearance:"solid",bind:this,"data-action-uid":r,disabled:"zoom-to-feature"===e.id?!this.feature.geometry:n,icon:this._getActionIcon(e),indicator:a,key:`action-${t}`,loading:o,onclick:this._triggerAction,scale:"s",text:i,title:this._hideActionText?i:void 0},this._renderFallbackIcon(e)):null},this._renderAddNsoBlock=()=>{const{_utilityNetworkTraceMessages:e,messagesCommon:t}=this;return(0,b.K)("calcite-block",{class:L.blockContent,heading:e?.inputsStrings.addNonspatialOption,open:!this.feature},(0,b.K)("calcite-action",{icon:"x",onclick:()=>this.emit("close-un-trace-feature-block"),slot:"control",text:t.close}),(0,b.K)("calcite-notice",{icon:"information",kind:"info",open:!this.feature},(0,b.K)("div",{slot:"message"},e?.inputsStrings.addNonspatialHint)))},this._renderNoAssociationNotice=()=>{const{_utilityNetworkTraceMessages:e}=this;return(0,b.K)("calcite-notice",{class:this.classes(L.paddingBottom,L.paddingTop),icon:"exclamation-mark-triangle",kind:"danger",open:!0},(0,b.K)("div",{slot:"message"},e.alertsStrings.noAssociationsConfigured))},this._renderNoPopupErrorBlock=()=>{const{_utilityNetworkTraceMessages:e,messagesCommon:t}=this;return(0,b.K)("calcite-block",{description:void 0,heading:"show-feature-info"===this.mode?t.warning:void 0,open:!0},(0,b.K)("calcite-notice",{class:this.classes(L.paddingBottom,L.paddingTop),icon:"exclamation-mark-triangle",kind:"danger",open:!0},(0,b.K)("div",{slot:"message"},e.alertsStrings.noPopupConfigured)),"show-feature-info"===this.mode?(0,b.K)("calcite-action",{icon:"x",onclick:()=>this.emit("close-un-trace-feature-block"),slot:"control",text:t.close}):void 0)},this._displaySpinnerThrottled=(0,f.n)((()=>this._displaySpinner()),0),this.addHandles([this._displaySpinnerThrottled,(0,n.watch)((()=>this.viewModel?.active),(e=>this._drillInWidget.closed=!e)),(0,n.watch)((()=>this.viewModel?.view),((e,t)=>this._viewChange(e,t))),(0,n.watch)((()=>this.viewModel?.view?.ready),((e,t)=>this._viewReadyChange(e??!1,t??!1))),(0,n.watch)((()=>[this.viewModel?.waitingForResult,this.viewModel?.location]),(()=>{this._hideSpinner(),this._displaySpinnerThrottled()})),(0,n.watch)((()=>this.viewModel?.screenLocation),(()=>this._closeOpenActionMenu())),(0,n.watch)((()=>this.selectedFeatureWidget),(()=>this._destroyDrillInFlowItemWidgets())),(0,n.watch)((()=>{const e=this.selectedFeatureWidget?.viewModel;return[e?.title,e?.state]}),(()=>this._setTitleFromFeatureWidget())),(0,n.watch)((()=>{const e=this.selectedFeatureWidget?.viewModel;return[e?.content,e?.state]}),(()=>this._setContentFromFeatureWidget())),(0,n.watch)((()=>this.viewModel?.featureViewModels),(()=>this._featureMenuViewportScrollTop())),this._drillInWidget.on("close",(()=>{this.emit("close")})),this._drillInWidget.on("exit",(()=>this._destroyDrillInFlowItemWidgets())),this._drillInWidget.on("open-feature",(e=>{let{feature:t}=e;return this._openRelatedFeature(t)})),this._drillInWidget.on("zoom-to-feature",(e=>{let{featureWidget:t}=e;return(0,I.Qb)(this.viewModel,t)})),this._drillInWidget.on("add-nso-trace-location",(e=>{let{featureWidget:t}=e;return this.emit("add-nso-trace-location",{featureWidget:t})}))])}initialize(){(async()=>{this._utilityNetworkTraceMessages=await(0,M.ud)("esri/widgets/UtilityNetworkTrace/t9n/UtilityNetworkTrace")})(),this._drillInWidget.mode=this.mode,this._drillInWidget.closable=!1}loadDependencies(){return(0,g.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-bar":()=>Promise.all([i.e(86290),i.e(74597),i.e(36334)]).then(i.bind(i,36334)),"action-group":()=>Promise.all([i.e(86290),i.e(74597),i.e(11484)]).then(i.bind(i,11484)),block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),flow:()=>i.e(58739).then(i.bind(i,58739)),"flow-item":()=>Promise.all([i.e(86290),i.e(74597),i.e(99776),i.e(85326)]).then(i.bind(i,85326)),notice:()=>i.e(51132).then(i.bind(i,51132))})}destroy(){this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._drillInWidget?.destroy()}get _hideActionText(){if(!this.responsiveActionsEnabled)return!1;const e=this.view?.widthBreakpoint;return"xsmall"===e||"small"===e||"medium"===e}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get feature(){return this.viewModel.features.length?this.viewModel.features[0]:null}set feature(e){this.viewModel.features=e?[e]:[]}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get hasAssociationsPopupElement(){const e=(0,u.yZ)(this.feature?.layer)?this.feature?.layer:void 0,t=(0,u.Sv)(this.feature?.layer)?this.feature?.layer:void 0,i=e?.popupTemplate||t?.popupTemplate||null,s=i?.content;return!(Array.isArray(s)&&!s.some((e=>e instanceof T.default)))}get hasPopupInfo(){const e=(0,u.yZ)(this.feature?.layer)?this.feature?.layer:void 0,t=(0,u.Sv)(this.feature?.layer)?this.feature?.layer:void 0;return!(!e?.popupTemplate&&!t?.popupTemplate)}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get mode(){return this._get("mode")||"add-nso"}set mode(e){this._set("mode",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const e=Array.from(this._drillInFlowItems).at(-1);if(!e)return null;const{flowType:t}=e;return"feature-association"===t||"feature-relationship"===t?e.graphic??null:null}get selectedFeatureWidget(){const{_feature:e,headingLevel:t,_drillInFlowItems:i,timeZone:s}=this,{selectedFeatureViewModel:o}=this.viewModel,r={title:!1};return o?(e?(e.viewModel=o,e.visibleElements=r):this._feature=new k.default({flowItems:i,headingLevel:t+1,timeZone:s,viewModel:o,visibleElements:r}),this._feature):null}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}open(e){this.removeHandles("selected-index"),this.viewModel.open({features:[e]})}triggerAction(e){return this.viewModel.triggerAction(e)}render(){return(0,b.K)("div",{bind:this,class:this.classes(N.A.base,_.D.widget,_.D.panel,L.blockContainer)},"add-nso"===this.mode?this._renderAddNsoBlock():void 0,this.feature?this.hasPopupInfo?this._renderContentContainer():this._renderNoPopupErrorBlock():void 0)}_renderActionBar(){return this.viewModel.allActions?.length?(0,b.K)("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},(0,b.K)("calcite-action-group",{afterCreate:e=>this._actionBarMenuNode=e,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map(this._renderAction)}_renderContent(){const e=this.viewModel?.content;return e?"string"==typeof e?(0,b.K)("div",{class:F.A.contentNode,innerHTML:e,key:e}):this.renderNodeContent(e):null}_renderContentContainer(){const e=[this._renderContentFeature(),this._drillInWidget.render()];return(0,b.K)("calcite-flow",{key:"content-container"},e)}_renderContentFeature(){const{_drillInFlowItems:e,headingLevel:t,featureNavigationTop:i}=this,{title:s,active:o}=this.viewModel,r=s||"";return(0,b.K)("calcite-flow-item",{bind:this,class:this.classes({[N.A.contentFeature]:!0}),closed:!o,collapseDirection:i?"down":"up",headingLevel:t,key:"root-flow-item",loading:this.viewModel.waitingForContents,selected:0===e.length},"show-feature-info"===this.mode?(0,b.K)("calcite-action",{icon:"x",onclick:()=>{this.emit("close")},slot:"header-actions-end",text:this.messagesCommon.close}):void 0,r?(0,b.K)(x.D,{class:this.classes(N.A.featuresHeading,_.D.heading),innerHTML:r,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),this.hasAssociationsPopupElement?void 0:this._renderNoAssociationNotice(),(0,b.K)("div",{class:"add-nso"===this.mode?this.classes(N.A.container,N.A.contentContainer):this.classes(N.A.container,N.A.contentContainer,L.featureContent)},this._renderContent()))}_renderFallbackIcon(e){const{className:t,icon:i}=e;if(i)return null;const s=(0,A.CA)({action:e,feature:this.selectedFeature}),o={[N.A.icon]:!!t,[N.A.actionImage]:!!s};return t&&(o[t]=!0),s||t?(0,b.K)("span",{"aria-hidden":"true",class:this.classes(N.A.icon,o),key:"icon",styles:(0,A.p5)(s)}):null}_renderHeaderAction(e,t){const i=e.title||"";return e.visible?(0,b.K)("calcite-action",{active:"toggle"===e.type&&e.value,appearance:"solid",bind:this,"data-action-uid":e.uid,disabled:e.disabled||!this.feature.geometry,icon:e.icon??void 0,indicator:e.indicator,key:`header-action-${t}`,loading:e.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:i,title:i}):null}_renderHeaderActions(){return this.headerActions.map(((e,t)=>this._renderHeaderAction(e,t))).toArray()}_closeOpenActionMenu(){const{_actionBarMenuNode:e}=this;e&&(e.menuOpen=!1)}_createSpinner(e){e&&(this._spinner=new S.A({view:e}),e.ui.add(this._spinner,{key:$,position:"manual",internal:!0}))}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain((e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,!e.destroyed&&e.destroy()),this._feature=null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t?.ui?.remove(e,$),e.destroy(),this._spinner=null)}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i&&t?e.show({location:t}):e.hide()}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&this._featureMenuViewportNode.scrollContentTo({top:0})}_getActionIcon(e){return e.icon?e.icon:e.image||e.className?void 0:"question"}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:s}=this,{id:o}=e,r=i?.attributes,n=e.title??"",a="zoom-to-feature"===o?(0,P.V)(n,{messages:t}):"remove-selected-feature"===o?(0,P.V)(n,{messages:s}):"zoom-to-clustered-features"===o||"browse-clustered-features"===o?(0,P.V)(n,{messages:t}):e.title;return a&&r?(0,P.V)(a,r):a??""}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const t=e.graphic,i=t?.geometry;null!=i&&null!=t&&(this._destroyDrillInFlowItemWidgets(),await this.viewModel.zoomTo({target:i}),this.open(t))}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this,i=e?.viewModel;e&&(this.viewModel.title="error"===i?.state?t?.errorMessage:i?.title||"")}_triggerAction(e){const t=e.currentTarget;if(t.disabled)return;const i=t.dataset.actionUid,{allActions:s}=this.viewModel,o=s.findIndex((e=>e.uid===i)),r=s.at(o);r&&"toggle"===r.type&&(r.value=!r.value),this.viewModel.triggerAction(o)}_triggerHeaderAction(e){const t=e.currentTarget;if(t.disabled)return;const i=t.dataset.actionUid,s=this.headerActions.find((e=>{let{uid:t}=e;return t===i}));s&&!s.disabled&&("toggle"===s?.type&&(s.value=!s.value),this.emit("trigger-header-action",{action:s}))}_viewReadyChange(e,t){e?this._wireUpView(this.viewModel?.view):t&&this.viewModel.clear()}_viewChange(e,t){e&&t&&this.viewModel.clear()}_wireUpView(e){this._destroySpinner(),e&&this._createSpinner(e)}};(0,s._)([(0,a.MZ)()],G.prototype,"_drillInFlowItems",void 0),(0,s._)([(0,a.MZ)()],G.prototype,"_hideActionText",null),(0,s._)([(0,a.MZ)({readOnly:!0})],G.prototype,"active",null),(0,s._)([(0,a.MZ)()],G.prototype,"content",null),(0,s._)([(0,a.MZ)()],G.prototype,"feature",null),(0,s._)([(0,a.MZ)()],G.prototype,"featureNavigationTop",void 0),(0,s._)([(0,a.MZ)()],G.prototype,"goToOverride",null),(0,s._)([(0,a.MZ)()],G.prototype,"hasAssociationsPopupElement",null),(0,s._)([(0,a.MZ)()],G.prototype,"hasPopupInfo",null),(0,s._)([(0,a.MZ)({type:K.E$})],G.prototype,"headerActions",void 0),(0,s._)([(0,a.MZ)()],G.prototype,"headingLevel",void 0),(0,s._)([(0,a.MZ)()],G.prototype,"location",null),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/widgets/Features/t9n/Features")],G.prototype,"messages",void 0),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/t9n/common")],G.prototype,"messagesCommon",void 0),(0,s._)([(0,a.MZ)()],G.prototype,"mode",null),(0,s._)([(0,a.MZ)()],G.prototype,"promises",null),(0,s._)([(0,a.MZ)()],G.prototype,"responsiveActionsEnabled",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],G.prototype,"selectedFeature",null),(0,s._)([(0,a.MZ)({readOnly:!0})],G.prototype,"selectedDrillInFeature",null),(0,s._)([(0,a.MZ)({readOnly:!0})],G.prototype,"selectedFeatureWidget",null),(0,s._)([(0,a.MZ)()],G.prototype,"timeZone",null),(0,s._)([(0,a.MZ)()],G.prototype,"view",null),(0,s._)([(0,a.MZ)({type:R.default}),(0,v.U)(["triggerAction","trigger-action"])],G.prototype,"viewModel",void 0),G=(0,s._)([(0,l.$)("esri.widgets.UtilityNetworkTrace.UtilityNetworkTraceFeature")],G);const H=G;var V=i(79433),j=i(47176);const U="esri-utility-network-trace",z={base:U,addButtonContainer:`${U}__add-button-container`,blockContainer:`${U}__block-container`,blockContent:`${U}__block-content`,clearPrompt:`${U}__reset-prompt`,doublePaddingTop:`${U}__double-pad-top`,flow:`${U}__flow`,listContainer:`${U}__list-container`,noticeContainer:`${U}__notice-container`,numberInput:`${U}__number-input`,promptDivider:`${U}__divider`};function q(e){return{height:e+"px"}}function Q(e){return{width:e+"px"}}function Y(e){return{width:"100%",height:window.getComputedStyle(e).getPropertyValue("max-height")}}function J(e){return{display:"flex",flexDirection:e}}const X=-2147208474;let ee=class extends p.default{constructor(e,t){super(e,t),this._activeTab="input",this._activeTrace=null,this._activeSwatch="",this._addNonspatialObjectActive=!1,this._alertRemoveModal=!1,this._assetGroupHeader="",this._assetTypeHeader="",this._confirmReset=!1,this._errorMessage="",this._swatchNode=null,this._selectToolActive=!1,this._showFeatureInfoActive=!1,this._traceHeaderForFlow="",this._traceResultsFunctions=[],this._traceResultsAssetGroup=[],this._traceResultsAssetType=[],this._traceResultsIndividual=[],this._traceResultsState="result",this._warningNoFlag=!1,this._warningNoTraceSelected=!1,this._findNonspatialFeatureWidget=new H({mode:"add-nso"}),this._individualResultNode=null,this._loadUnError=!0,this._resultDisplayField="objectid",this._resultFeatureWidget=new H({mode:"show-feature-info"}),this._resultObjectIdField="objectid",this._resultSortField="objectid",this._resultSortOrder="desc",this._showResultOptions=!1,this._symbolStartFlag=null,this._symbolBarrier=null,this._traceLocationType="starting-point",this._updatingHandles=new c.U,this._warningNoBarrierAssetFound=!1,this._warningNoBarrierAssetNsoFound=!1,this._warningNoStartAssetFound=!1,this._warningNoStartAssetNsoFound=!1,this._warningNoTerminal=!1,this._wasPopupEnabled=!1,this._watchHandler=null,this.disabled=!0,this.inputSettings=[],this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.viewModel=new V.default,this._afterComponentCreate=this._afterComponentCreate.bind(this)}initialize(){this._wasPopupEnabled=!!this.view&&this.view.popupEnabled,this._findNonspatialFeatureWidget.view=this.view,this._resultFeatureWidget.view=this.view,this._utilityNetworkTraceInitialized(),this.addHandles([(0,n.watch)((()=>this.viewModel?.resultAreaProperties),(()=>this.scheduleRender())),(0,n.watch)((()=>this._addNonspatialObjectActive),(e=>{this._findNonspatialFeatureWidget.feature=null,e?this._changeCursor("crosshair"):this.view.popupEnabled=this._wasPopupEnabled})),(0,n.watch)((()=>this._showFeatureInfoActive),(e=>{e||(this._resultFeatureWidget.feature=null,this.view.popupEnabled=this._wasPopupEnabled)})),(0,n.on)((()=>this._findNonspatialFeatureWidget),"add-nso-trace-location",(e=>{let{featureWidget:t}=e;this.viewModel.addNonspatialTraceLocation(t.graphic,this._traceLocationType),this._warningNoFlag=!1,this._addNonspatialObjectActive=!1})),(0,n.on)((()=>this._findNonspatialFeatureWidget),"close-un-trace-feature-block",(()=>{this._addNonspatialObjectActive=!1})),(0,n.on)((()=>this._resultFeatureWidget),"close-un-trace-feature-block",(()=>{this._showFeatureInfoActive=!1})),(0,n.on)((()=>this._resultFeatureWidget),"close",(()=>{this._resetResultFeatureWidget()}))])}destroy(){this._findNonspatialFeatureWidget?.destroy(),this._resultFeatureWidget?.destroy()}get defaultGraphicColor(){return this.viewModel.defaultGraphicColor}set defaultGraphicColor(e){this.viewModel.defaultGraphicColor=e}get enableResultArea(){return this.viewModel.enableResultArea}set enableResultArea(e){this.viewModel.enableResultArea=e}get flags(){return this.viewModel.flags}set flags(e){this.viewModel.flags=e}get gdbVersion(){return(0,o.eO)(r.A.getLogger(this),"gdbVersion will be removed and the gdbVersion of the UtilityNetwork will be consumed directly.",{replacement:"UtilityNetwork.gdbVersion",version:"4.31"}),this.viewModel.gdbVersion}set gdbVersion(e){(0,o.eO)(r.A.getLogger(this),"gdbVersion will be removed and the gdbVersion of the UtilityNetwork will be consumed directly.",{replacement:"UtilityNetwork.gdbVersion",version:"4.31"}),this.viewModel.gdbVersion=e}get icon(){return"utility-network-trace"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get resultAreaProperties(){return this.viewModel.resultAreaProperties}set resultAreaProperties(e){this.viewModel.resultAreaProperties=e}get selectedTraces(){return this.viewModel.selectedTraces}set selectedTraces(e){this.viewModel.selectedTraces=e}get selectOnComplete(){return this.viewModel.selectOnComplete}set selectOnComplete(e){this.viewModel.selectOnComplete=e}get showGraphicsOnComplete(){return this.viewModel.showGraphicsOnComplete}set showGraphicsOnComplete(e){this.viewModel.showGraphicsOnComplete=e}get showSelectionAttributes(){return this.viewModel.showSelectionAttributes}set showSelectionAttributes(e){this.viewModel.showSelectionAttributes=e}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(e){this.viewModel.utilityNetwork=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}async checkCanTrace(){this._confirmReset=!1,this._resetResultFeatureWidget();const e=this.viewModel.checkCanTrace();e.status?(this._warningNoFlag=!1,this._warningNoTraceSelected=!1,this._warningNoTerminal=!1,this._traceResultsState="result",this.switchTab("results"),this.viewModel._activeProgress=!0,this.viewModel.removeAllResultAreaGraphics(),await this.viewModel.callTrace(),this.viewModel._activeProgress=!1):e.issues.forEach((e=>{switch(e){case"noStartingPoints":this._warningNoFlag=!0;break;case"noTerminalSelected":this._warningNoTerminal=!0;break;default:this._warningNoTraceSelected=!0}}))}confirmReset(){this._confirmReset=!0}render(){return this._mixCustomStrings(),this._overrideFlagSymbol(),(0,b.K)("div",{class:this.classes(z.base,_.D.widget,_.D.panel,{[_.D.widgetDisabled]:this.disabled})},this._renderUtilityNetworkTrace())}loadDependencies(){return(0,g.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-group":()=>Promise.all([i.e(86290),i.e(74597),i.e(11484)]).then(i.bind(i,11484)),"action-pad":()=>Promise.all([i.e(86290),i.e(74597),i.e(29022)]).then(i.bind(i,29022)),block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),"block-section":()=>i.e(6283).then(i.bind(i,6283)),button:()=>Promise.resolve().then(i.bind(i,20423)),checkbox:()=>i.e(70879).then(i.bind(i,70879)),"color-picker-swatch":()=>i.e(80747).then(i.bind(i,80747)),combobox:()=>Promise.all([i.e(60382),i.e(89939),i.e(90609)]).then(i.bind(i,90609)),"combobox-item":()=>i.e(32045).then(i.bind(i,32045)),"dropdown-group":()=>i.e(90553).then(i.bind(i,90553)),"dropdown-item":()=>i.e(54055).then(i.bind(i,54055)),fab:()=>i.e(58739).then(i.bind(i,58739)),flow:()=>i.e(25905).then(i.bind(i,25905)),"flow-item":()=>Promise.all([i.e(86290),i.e(74597),i.e(99776),i.e(85326)]).then(i.bind(i,85326)),icon:()=>Promise.resolve().then(i.bind(i,92439)),"input-number":()=>Promise.all([i.e(9982),i.e(86634)]).then(i.bind(i,9982)),label:()=>i.e(60216).then(i.bind(i,60216)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),loader:()=>Promise.resolve().then(i.bind(i,23173)),notice:()=>i.e(51132).then(i.bind(i,51132)),option:()=>i.e(99163).then(i.bind(i,99163)),panel:()=>Promise.all([i.e(86290),i.e(74597),i.e(99776)]).then(i.bind(i,99776)),popover:()=>Promise.all([i.e(86290),i.e(74597)]).then(i.bind(i,74597)),scrim:()=>i.e(86836).then(i.bind(i,64455)),select:()=>i.e(34280).then(i.bind(i,34280)),"split-button":()=>i.e(82661).then(i.bind(i,82661)),tab:()=>i.e(72595).then(i.bind(i,72595)),"tab-nav":()=>i.e(84091).then(i.bind(i,84091)),"tab-title":()=>i.e(8474).then(i.bind(i,8474)),tabs:()=>i.e(22736).then(i.bind(i,22736))})}switchTab(e){this._activeTab=e}switchToFromAssetGroup(e,t,i){this._traceHeaderForFlow=t,this._traceResultsAssetGroup=e,this._traceResultsState=i}switchToFromAssetType(e,t,i){this._assetGroupHeader=t,this._traceResultsAssetType=e,this._traceResultsState=i}switchToFromFunctions(e,t){this._traceResultsFunctions=e,this._traceResultsState=t}switchToFromIndividualRecords(e,t,i){this._assetTypeHeader=t,this._traceResultsIndividual=e,this._traceResultsState=i}_renderAddNonspatialLocationBlock(){const{messages:e}=this;return(0,b.K)("calcite-block",{key:`${this.id}__add-spatial-location-block`,label:e.inputsStrings.addNonspatialOption,open:!0},this._findNonspatialFeatureWidget.render())}_renderAddSpatialLocationBlock(){const{messages:e,messagesCommon:t}=this;return(0,b.K)("calcite-block",{class:z.blockContent,heading:"starting-point"===this._traceLocationType?e.inputsStrings.headerStartingPoint:e.inputsStrings.headerBarrier,key:`${this.id}__add-nonspatial-location-block`,label:"starting-point"===this._traceLocationType?e.inputsStrings.headerStartingPoint:e.inputsStrings.headerBarrier,open:!0},(0,b.K)("calcite-action",{icon:"x",onclick:()=>{this.viewModel.removeClickHandler(),this.view?.popup&&(this.view.popupEnabled=this._wasPopupEnabled),this._changeCursor("default"),this._selectToolActive=!1},slot:"control",text:t.close}),(0,b.K)("calcite-notice",{icon:"starting-point"===this._traceLocationType?"pin-plus":"x-circle-f",kind:"info",open:!0},(0,b.K)("div",{slot:"message"},e.inputsStrings.addPointHint)))}_renderClearTraceResultsBlock(){const{messages:e,messagesCommon:t}=this;return(0,b.K)("calcite-scrim",{key:"prompt"},(0,b.K)("div",{class:z.clearPrompt},(0,b.K)("h3",{slot:"header"},e.resultsStrings.startOverButton),(0,b.K)("div",{slot:"content"},e.resultsStrings.startOverValidation),(0,b.K)("div",{class:z.promptDivider}),(0,b.K)("div",{styles:J("row")},(0,b.K)("calcite-button",{appearance:"outline",onclick:()=>{this._confirmReset=!1},slot:"secondary",width:"full"},t.cancel),(0,b.K)("calcite-button",{onclick:()=>{this._confirmReset=!1,this.viewModel.reset(),this.switchTab("input")},slot:"primary",width:"full"},t.form.ok))))}_renderExecutingTraceBlock(){const{messages:e}=this;return(0,b.K)("calcite-loader",{label:e.alertsStrings.traceExecuting,text:e.alertsStrings.traceExecuting,type:"indeterminate"})}_renderInputBlock(){const{messages:e}=this;return(0,b.K)("calcite-block",{class:z.blockContainer,key:`${this.id}__inputs-block`,label:e.inputsStrings.headerTabInputs,open:!0},(0,b.K)("calcite-flow",{class:z.flow},(0,b.K)("calcite-flow-item",{key:`${this.id}__inputs-flow-item`,selected:!this._selectToolActive&&!this._addNonspatialObjectActive},this._warningNoFlag?this._renderWarningMessage("flag",!0):null,this._warningNoTerminal?this._renderWarningMessage("noTerminal",!0):null,this._warningNoTraceSelected?this._renderWarningMessage("trace",!0):null,this._renderTraceSelectorContainer(),this._renderStartFlagsContainer(),this._renderBarriersFlagsContainer(),this._warningNoFlag&&this._warningNoTraceSelected?(0,b.K)("div",{styles:q(10)}):null,(0,b.K)("calcite-fab",{appearance:"solid",icon:"utility-network-trace",kind:"brand",onclick:()=>{this.checkCanTrace()},slot:"fab",text:e.tracingStrings.runTrace,textEnabled:!0,title:e.tracingStrings.runTrace,type:"button"}))))}_renderInputsTab(){const{messagesCommon:e}=this;let t="input";return this._selectToolActive&&!this._addNonspatialObjectActive&&(t="add-spatial-location"),!this._selectToolActive&&this._addNonspatialObjectActive&&(t="add-nso-location"),this.disabled&&(t="loading"),(0,b.K)("calcite-tab",{key:`${this.id}__inputs-tab-item`,selected:"input"===this._activeTab},"loading"===t?(0,b.K)("calcite-loader",{label:e.loading,type:"indeterminate"}):null,"input"===t?this._renderInputBlock():null,"add-spatial-location"===t?this._renderAddSpatialLocationBlock():null,"add-nso-location"===t?this._renderAddNonspatialLocationBlock():null)}_renderBarriersFlagsContainer(){const{messages:e}=this,t=[];let i=[];i=this.viewModel._flags.filter((e=>"barrier"===e.type)),i.forEach((e=>{e.displayValue&&t.push(this._renderFlagRow(e,"barrier"))}));let s=null;return this._symbolBarrier&&(s=this._getSymbolIcon(this._symbolBarrier)),(0,b.K)("calcite-block",{class:z.blockContent,collapsible:!0,heading:e.inputsStrings.headerBarrier+" ("+i.length+")",open:!0,overlayPositioning:"fixed"},(0,b.K)("div",{slot:"icon"},s||(0,b.K)("calcite-icon",{icon:"x-circle-f",scale:"s"})),(0,b.K)("div",null,e.inputsStrings.barrierPointHint),(0,b.K)("div",{class:z.listContainer},t),this._warningNoBarrierAssetFound?this._renderWarningMessage("noBarrierAsset",!0):null,this._warningNoBarrierAssetNsoFound?this._renderWarningMessage("noBarrierAssetNso",!0):null,(0,b.K)("div",{class:z.addButtonContainer},(0,b.K)("calcite-split-button",{appearance:"outline-fill",primaryIconStart:"select",primaryText:e.inputsStrings.addPointOption,onCalciteSplitButtonPrimaryClick:()=>{this._setupAddTraceLocation("barrier")}},(0,b.K)("calcite-dropdown-group",{selectionMode:"none"},(0,b.K)("calcite-dropdown-item",{onCalciteDropdownItemSelect:()=>{this._setupAddNonspatialObject("barrier")}},e.inputsStrings.addNonspatialOption)))))}_renderFlagRow(e,t){const{messages:i,messagesCommon:s}=this,o=[];let r=!1;return null!=e.allTerminals&&e.allTerminals.terminals.length>0&&(r=!0,e.allTerminals.terminals.forEach((t=>{let i=!1;e?.selectedTerminals?.includes(t.id)&&(i=!0),o.push((0,b.K)("calcite-combobox-item",{key:t.name,selected:i,textLabel:t.name,value:t.id}))}))),(0,b.K)("calcite-block",{collapsible:null!==e.allTerminals||"barrier"===e.type,heading:e.displayValue?.value??"",key:"pop"+e.globalId+e.type+e.id+t,overlayPositioning:"fixed"},(0,b.K)("calcite-action",{icon:"trash",label:s.remove,onclick:()=>{this.viewModel.removeFlag(e)},scale:"s",slot:"header-menu-actions",text:s.remove,textEnabled:!0}),e.mapGraphic&&e.mapPoint?(0,b.K)("calcite-action",{icon:"zoom-to-object",label:i.globalStrings.zoomToFeature,onclick:()=>{this.viewModel.zoomToAsset(e.details.geometry)},scale:"s",slot:"header-menu-actions",text:i.globalStrings.zoomToFeature,textEnabled:!0}):null,"barrier"===e.type?(0,b.K)("calcite-label",{layout:"inline",scale:"s"},(0,b.K)("calcite-checkbox",{checked:e.isFilterBarrier,onclick:()=>{this.viewModel.manageFilterBarrier(!e.isFilterBarrier,e)},scale:"s"}),i.inputsStrings.barrierFilter):null,r?(0,b.K)("calcite-combobox",{label:i.globalStrings.selectTerminalPlaceholder,maxItems:0,overlayPositioning:"fixed",placeholder:i.globalStrings.selectTerminalPlaceholder,scale:"s",selectionMode:"multiple",onCalciteComboboxChange:t=>{t.currentTarget.selectedItems.length>0?(e.selectedTerminals=[],t.currentTarget.selectedItems.forEach((t=>{this.viewModel.addTerminal(t.value,e)}))):e.selectedTerminals=[]},onCalciteComboboxChipClose:t=>{t.preventDefault(),this.viewModel.removeTerminal(t.currentTarget.value,e)}},o):null)}_renderHighlightColorPicker(e,t,i){const{messages:s}=this,{graphicHandler:o}=this.viewModel,r=[],n=new RegExp(`^${e.hex}$`,"i"),a=o.highlightColor.length>j.K9.length?5:4;for(const l of o.highlightColor)r.push((0,b.K)("calcite-action",{active:n.test(l.hex),key:l.hex,label:s.resultsStrings.graphicColor,onclick:()=>{"aggregate"===i?this.viewModel.changeResultGraphicColor(l,t):this.viewModel.changeResultAreaColor(t,l)},scale:"s",text:s.resultsStrings.graphicColor},(0,b.K)("calcite-color-picker-swatch",{active:n.test(l.hex),color:l.hex,scale:"s"})));return(0,b.K)("calcite-action-pad",{expandDisabled:!0,layout:"grid",position:"start"},(0,b.K)("calcite-action-group",{columns:a},r))}_renderRemoveTraceContainer(e){const{messages:t}=this;return(0,b.K)("calcite-action",{icon:"trash",label:t.globalStrings.clearResults,onclick:()=>{this._alertRemoveModal=!0,this._activeTrace=e.trace},scale:"s",slot:"header-menu-actions",text:t.globalStrings.clearResults,textEnabled:!0})}_renderResultsTab(){let e="results";return this._showFeatureInfoActive&&(e="show-feature-info"),this.viewModel._activeProgress&&(e="executing"),this._confirmReset&&(e="clear-trace-results"),(0,b.K)("calcite-tab",{key:`${this.id}__results-tab-item`},"executing"===e?this._renderExecutingTraceBlock():null,"results"===e?this.viewModel.traceResults.length?this._renderResultsPanel():this._renderWarningMessage("noTraceExecuted",!1):null,"show-feature-info"===e?this._renderShowFeatureInfoBlock():null,"clear-trace-results"===e?this._renderClearTraceResultsBlock():null)}_renderResultsPanel(){const{messages:e}=this;return(0,b.K)("calcite-block",{class:z.blockContainer,key:`${this.id}__results-block`,label:e.resultsStrings.headerTabResults,open:!0},(0,b.K)("calcite-flow",{class:z.flow},this._renderTraceResults(),this._renderTraceResultFunctions(),this._renderTraceResultByAssetGroup(),this._renderTraceResultByAssetType(),this._renderTraceResultIndividual()))}_renderResultRowFunctions(e){return(0,b.K)("calcite-block",{collapsible:!1,heading:e.networkAttributeName+" "+e.functionType+" = "+e.result,overlayPositioning:"fixed"})}_renderResultRowAssetGroup(e){const t=this._getAssetGroupName(e[0]);return(0,b.K)("calcite-list-item",{key:`${t}-${e.assetGroupCode}`,label:t+" ("+e.length+")",onCalciteListItemSelect:()=>{this.switchToFromAssetType(this._groupResultsByAssetType(e),t+" ("+e.length+")","assetType")}},(0,b.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderResultRowAssetType(e){const t=this._getAssetTypeName(e[0]);return(0,b.K)("calcite-list-item",{key:`${t}-${e.assetTypeCode}`,label:t+" ("+e.length+")",onCalciteListItemSelect:()=>{this._updatingHandles.addPromise(this.viewModel.queryFeaturesById(e).then((i=>{if(i?.length){this._resultObjectIdField=i[0].layer.objectIdField,"objectid"===this._resultDisplayField&&(this._resultDisplayField=i[0].layer.objectIdField),"objectid"===this._resultSortField&&(this._resultSortField=i[0].layer.objectIdField);const s=this._appendAttributes(e,i,"objectId");this.switchToFromIndividualRecords(s,t+" ("+e.length+")","records")}else this.switchToFromIndividualRecords(e,t+" ("+e.length+")","records")})))}},(0,b.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderResultRowIndividual(e){const{messages:t}=this;let i,s=null;if(s=e?.details?.fields.find((e=>{let{name:t}=e;return t===this._resultDisplayField})),"date"===s?.type)i=new Date(e.details.attributes[this._resultDisplayField]).toDateString();else if("assetgroup"===this._resultDisplayField.toLowerCase())i=this._getAssetGroupName(e);else if("assettype"===this._resultDisplayField.toLowerCase())i=this._getAssetTypeName(e);else if(s?.domain&&function(e){return e instanceof d.default}(s.domain)){const t=s.domain.codedValues.find((t=>{let{code:i}=t;return i===e.details.attributes[this._resultDisplayField]}));i=t?.name}else i=e.details?.attributes[this._resultDisplayField]??e.objectId;return i&&""!==i&&null!==i?"string"==typeof i&&(i.trim()||(i=t.resultsStrings.noValue)):i=t.resultsStrings.noValue,(0,b.K)("calcite-list-item",{key:e.details.uid,label:i,onCalciteListItemSelect:async()=>{this._disablePopup(),this._showFeatureInfoActive=!0;const t=(0,u.F2)(e.details?.layer)?e.details?.layer:null;if(t){const i=Object.keys(e.details.attributes).find((e=>e.toLowerCase()===t.subtypeField.toLowerCase()))??"assetgroup",s=t.sublayers.find((t=>t.subtypeCode===e.details.attributes[i])),o=Object.keys(e.details.attributes).find((e=>e.toLowerCase()===t.objectIdField.toLowerCase()))??"objectid",r=new h.default;r.outFields=["*"],r.returnGeometry=!0,r.where=o+" = "+e.details.attributes[o];const n=await(s?.queryFeatures(r));n&&this._resultFeatureWidget.open(n.features[0])}else this._resultFeatureWidget.open(e.details)}},(0,b.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderShowFeatureInfoBlock(){const{messages:e}=this;return(0,b.K)("calcite-block",{class:z.blockContainer,key:`${this.id}__show-feature-info-block`,label:e.resultsStrings.headerFeatureInfo,open:!0},this._resultFeatureWidget.render())}_renderStartFlagsContainer(){const{messages:e}=this,t=[];let i=[];i=this.viewModel._flags.filter((e=>"starting-point"===e.type)),i.forEach((e=>{e.displayValue&&t.push(this._renderFlagRow(e,"start"))}));let s=null;return this._symbolStartFlag&&(s=this._getSymbolIcon(this._symbolStartFlag)),(0,b.K)("calcite-block",{class:z.blockContent,collapsible:!0,heading:e.inputsStrings.headerStartingPoint+" ("+i.length+")",open:!0,overlayPositioning:"fixed"},(0,b.K)("div",{slot:"icon"},s||(0,b.K)("calcite-icon",{icon:"pin",scale:"s"})),(0,b.K)("div",null,e.inputsStrings.startingPointHint),(0,b.K)("div",{class:z.listContainer},t),this._warningNoStartAssetFound?this._renderWarningMessage("noStartAsset",!0):null,this._warningNoStartAssetNsoFound?this._renderWarningMessage("noStartAssetNso",!0):null,(0,b.K)("div",{class:z.addButtonContainer},(0,b.K)("calcite-split-button",{appearance:"outline-fill",primaryIconStart:"select",primaryText:e.inputsStrings.addPointOption,onCalciteSplitButtonPrimaryClick:()=>{this._setupAddTraceLocation("starting-point")}},(0,b.K)("calcite-dropdown-group",{selectionMode:"none"},(0,b.K)("calcite-dropdown-item",{onCalciteDropdownItemSelect:()=>{this._setupAddNonspatialObject("starting-point")}},e.inputsStrings.addNonspatialOption)))))}_renderStartOverContainer(){const{messages:e}=this;return(0,b.K)("calcite-fab",{appearance:"solid",icon:"trash",kind:"brand",onclick:()=>{this.confirmReset()},slot:"fab",text:e.resultsStrings.startOverButton,textEnabled:!0,title:e.resultsStrings.startOverButton,type:"button"})}_renderTraceResultByAssetGroup(){const e=this._traceResultsAssetGroup,t=[];for(const i in e){const s=e[i];for(const e in s)t.push(this._renderResultRowAssetGroup(s[e]))}return(0,b.K)("calcite-flow-item",{heading:this._traceHeaderForFlow,key:"assetGroupResultMultiple",selected:"assetGroup"===this._traceResultsState,onCalciteFlowItemBack:()=>{this.switchToFromAssetGroup([],"","result")}},(0,b.K)("calcite-list",{label:""},t),this._renderStartOverContainer())}_renderTraceResultByAssetType(){const e=this._traceResultsAssetType,t=[];for(const i in e)e[i].length>0&&t.push(this._renderResultRowAssetType(e[i]));return(0,b.K)("calcite-flow-item",{heading:this._assetGroupHeader,key:"assetTypeResult",loading:this._updatingHandles.updating,selected:"assetType"===this._traceResultsState,onCalciteFlowItemBack:()=>{this.switchToFromAssetType([],"","assetGroup")}},(0,b.K)("calcite-list",{label:"",selectionMode:"none"},t),this._renderStartOverContainer())}_renderTraceResultFunctions(){if("functions"!==this._traceResultsState)return null;const{messages:e}=this,t=this._traceResultsFunctions,i=[];return t.forEach((e=>{i.push(this._renderResultRowFunctions(e))})),(0,b.K)("calcite-flow-item",{heading:e.resultsStrings.functionHeader,key:"functionResultMultiple",selected:"functions"===this._traceResultsState,onCalciteFlowItemBack:()=>{this.switchToFromFunctions([],"result")}},i,this._renderStartOverContainer())}_renderTraceResultIndividual(){const{messages:e}=this,t=this._traceResultsIndividual;t.sort(this._compare(this._resultSortField,this._resultSortOrder));const i=[];return t.length>0&&((t[0].details?.fields.some((e=>{let{name:t}=e;return t.toLowerCase()===this._resultDisplayField.toLocaleLowerCase()}))??!1)||(this._resultDisplayField=this._resultObjectIdField,this._resultSortField=this._resultObjectIdField),t.forEach((e=>{e?.details&&i.push(this._renderResultRowIndividual(e))})),0===i.length&&i.push((0,b.K)("calcite-list-item",{label:e.resultsStrings.noFeaturesInMap}))),(0,b.K)("calcite-flow-item",{heading:this._assetTypeHeader,key:"individualResult",selected:"records"===this._traceResultsState,onCalciteFlowItemBack:()=>{this._showResultOptions=!1,this.switchToFromIndividualRecords([],"","assetType")}},(0,b.K)("calcite-action",{afterCreate:w.cA,bind:this,"data-node-ref":"_individualResultNode",icon:"gear",id:"field_options"+this.id,label:e.resultsStrings.displayAttribute,onclick:()=>{this._showResultOptions=!0},slot:"header-actions-end",text:e.resultsStrings.displayAttribute}),this._renderTraceResultIndividualPopover(),(0,b.K)("calcite-list",{label:"",selectionMode:"none"},i),this._renderStartOverContainer())}_renderTraceResultIndividualPopover(){const{messages:e}=this,t=this._traceResultsIndividual,i=[],s=[];return t.length>0&&(t[0].details?t[0].details.fields.forEach((e=>{let{name:t,alias:o}=e;i.push((0,b.K)("calcite-option",{key:`display-${t}`,label:o??t,selected:t===this._resultDisplayField,value:t})),s.push((0,b.K)("calcite-option",{key:`sort-${t}`,label:o??t,selected:t===this._resultSortField,value:t}))})):(i.push((0,b.K)("calcite-option",{key:`display-${this._resultDisplayField}`,label:this._resultDisplayField,value:this._resultDisplayField})),s.push((0,b.K)("calcite-option",{key:`sort-${this._resultDisplayField}`,label:this._resultDisplayField,value:this._resultDisplayField})))),(0,b.K)("calcite-popover",{autoClose:!0,label:e.resultsStrings.displayAttribute,offsetDistance:0,offsetSkidding:0,open:this._showResultOptions,overlayPositioning:"fixed",placement:"left-start",referenceElement:this._individualResultNode,styles:null!==this.domNode?Q(.75*this.domNode.clientWidth):{width:"75%"}},(0,b.K)("calcite-block",{label:e.resultsStrings.displayAttribute,open:!0,overlayPositioning:"fixed"},(0,b.K)("calcite-label",{scale:"s"},e.resultsStrings.displayAttribute,(0,b.K)("calcite-select",{label:e.resultsStrings.displayAttribute,scale:"s",onCalciteSelectChange:e=>{const t=e.currentTarget;this._resultDisplayField=t.selectedOption.value,this._showResultOptions=!1}},i)),(0,b.K)("calcite-label",{scale:"s"},e.resultsStrings.sortBy,(0,b.K)("calcite-select",{label:e.resultsStrings.sortBy,scale:"s",onCalciteSelectChange:e=>{const i=e.currentTarget;this._resultSortField=i.selectedOption.value,t.sort(this._compare(this._resultSortField,this._resultSortOrder)),this._traceResultsIndividual=t,this._showResultOptions=!1}},s))))}_renderTraceResults(){const{messages:e,messagesCommon:t}=this,{selectFeatures:i}=e.resultsStrings,s=this.viewModel.traceResults,o=[];return s.forEach(((t,s)=>{let r=[],n=[],a=!1,l=!1,c=!1,d="";null!==t.results&&t.results.hasOwnProperty("elements")?(null!==t.results.aggregatedGeometry&&(l=!0),null!==t.results.globalFunctionResults&&t.results.globalFunctionResults.length>0&&(n=t.results.globalFunctionResults,n.length>0&&(c=!0)),t.results.elements&&t.results.elements.length>0&&(r=t.results.elements,r.length>0&&(a=!0)),(l||a)&&(d=this.messagesUnits.units[t.resultArea?.unit]?.abbr),o.push((0,b.K)("calcite-block",{class:z.blockContent,collapsible:!0,description:t.trace.description??"",heading:t.trace.title,key:`${t.trace.title}${s}`,open:!0,overlayPositioning:"fixed"},this._renderRemoveTraceContainer(t),(0,b.K)("calcite-list",{label:""},c?(0,b.K)("calcite-list-item",{label:e.resultsStrings.functionHeader+" ("+n.length+")",onCalciteListItemSelect:()=>{this.switchToFromFunctions(n,"functions")}},(0,b.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})):null,a&&this.viewModel.showSelectionAttributes?(0,b.K)("calcite-list-item",{key:this.id,label:e.resultsStrings.viewFeatures+" ("+r.length+")",onCalciteListItemSelect:()=>{this.switchToFromAssetGroup(this._groupResultsByAssetGroup(t),t.trace.title+" ("+r.length+")","assetGroup")}},(0,b.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})):this.viewModel.showSelectionAttributes?(0,b.K)("calcite-label",{layout:"inline",scale:"s"},e.resultsStrings.noSelectionResults):null),a?(0,b.K)("div",{class:z.doublePaddingTop},(0,b.K)("calcite-label",{layout:"inline",onclick:e=>{e.preventDefault(),e.stopPropagation(),this.viewModel.mergeSelection(!t.selectionEnabled,t.trace)},scale:"s"},(0,b.K)("calcite-checkbox",{checked:t.selectionEnabled,onclick:e=>{e.preventDefault(),e.stopPropagation(),this.viewModel.mergeSelection(!t.selectionEnabled,t.trace)}}),this.viewModel.showSelectionAttributes?i:`${i} (${r.length})`)):null,l?(0,b.K)("calcite-block-section",{key:`aggregate-${t.trace.title}-${s}`,open:t.graphicEnabled,text:e.resultsStrings.highlightTrace,toggleDisplay:"switch",onCalciteBlockSectionToggle:e=>{e.currentTarget.open?this.viewModel.changeResultGraphicColor(t.graphicColor,t):this.viewModel.removeResultGraphicFromView(t)}},(0,b.K)("calcite-list",{label:e.resultsStrings.graphicColor,selectionMode:"none"},(0,b.K)("calcite-list-item",{label:e.resultsStrings.graphicColor,onclick:e=>{this._swatchNode=e.currentTarget,this._activeSwatch="aggGeom_"+s}},(0,b.K)("calcite-color-picker-swatch",{color:t.graphicColor.hex,scale:"s",slot:"actions-end"})))):null,this.enableResultArea&&(l||a)?(0,b.K)("calcite-block-section",{key:`area-${t.trace.title}-${s}`,open:t.resultArea?.show,text:e.resultsStrings.resultAreaHeader,toggleDisplay:"switch",onCalciteBlockSectionToggle:e=>{e.currentTarget.open?t.resultAreaGraphic?this.viewModel.addResultAreaToMap(t,t.resultAreaGraphic):this.viewModel.addResultAreaToMap(t):this.viewModel.removeResultAreaFromMap(t)}},(0,b.K)("calcite-list",{label:"",selectionMode:"none"},(0,b.K)("calcite-list-item",{label:e.resultsStrings.graphicColor,onclick:e=>{const t=e.currentTarget;this._swatchNode=t,this._activeSwatch="resultArea_"+s}},(0,b.K)("calcite-color-picker-swatch",{color:t.resultArea?.color.hex,scale:"s",slot:"actions-end"}))),(0,b.K)("calcite-list",{label:"",selectionMode:"none"},(0,b.K)("calcite-list-item",{label:e.resultsStrings.resultAreaBuffer},(0,b.K)("calcite-input-number",{afterCreate:this._afterComponentCreate,class:z.numberInput,max:999999,min:0,scale:"s",slot:"actions-end",suffixText:d,value:t.resultArea?.distance.toString(),onCalciteInputNumberChange:e=>{if(!this.view?.popup)return;this.view.popup.visible&&this.view.closePopup();const i=e.currentTarget;t.resultArea.distance>=0?(t.resultArea.distance=parseInt(i.value,10),this.viewModel.removeResultAreaFromMap(t),this.viewModel.addResultAreaToMap(t)):(t.resultArea.distance=0,this.viewModel.removeResultAreaFromMap(t),this.viewModel.addResultAreaToMap(t))}})))):null,(0,b.K)("calcite-popover",{autoClose:!0,closable:!0,label:e.resultsStrings.graphicColor,offsetDistance:0,offsetSkidding:0,open:this._activeSwatch==="aggGeom_"+s||this._activeSwatch==="resultArea_"+s,overlayPositioning:"fixed",placement:"auto-start",referenceElement:this._swatchNode,scale:"s",onCalcitePopoverClose:()=>{this._swatchNode=null,this._activeSwatch=null}},this._renderHighlightColorPicker(this._activeSwatch==="resultArea_"+s?t.resultArea?.color:t.graphicColor,t,this._activeSwatch==="resultArea_"+s?"resultArea":"aggregate"))))):o.push((0,b.K)("calcite-block",{collapsible:!1,heading:t.trace.title,key:"error-"+s,open:!0,overlayPositioning:"fixed"},this._renderRemoveTraceContainer(t),this._renderWarningMessage("noController",!1,t.status)))})),(0,b.K)("calcite-flow-item",{key:"traceResults",selected:"result"===this._traceResultsState},o,this._renderStartOverContainer(),this._alertRemoveModal?(0,b.K)("calcite-scrim",{key:"prompt"},(0,b.K)("div",{class:z.clearPrompt},(0,b.K)("h3",{slot:"header"},e.globalStrings.clearResults),(0,b.K)("div",{slot:"content"},e.alertsStrings.clearResultsAlert),(0,b.K)("div",{class:z.promptDivider}),(0,b.K)("div",{styles:J("row")},(0,b.K)("calcite-button",{appearance:"outline",onclick:()=>{this._alertRemoveModal=!1},slot:"secondary",width:"full"},t.cancel),(0,b.K)("calcite-button",{onclick:()=>{this._activeTrace&&this.viewModel.clearResult(this._activeTrace),this._alertRemoveModal=!1,0===this.viewModel.traceResults.length?this.switchTab("input"):(this._activeTrace=this.viewModel.traceResults[0].trace,this._traceResultsState="result")},slot:"primary",width:"full"},t.form.ok)))):null)}_renderTraceSelectorContainer(){const{messages:e}=this,t=this.viewModel.traces.map((e=>this._renderComboboxItem({value:e.globalId,text:e.title,selected:e.selected??!1}))),i=this.viewModel.traces.filter((e=>e.selected)),s=e.tracingStrings.traceOperation+` (${i.length})`;return(0,b.K)("calcite-block",{class:z.blockContent,collapsible:!0,heading:s,open:!0,overlayPositioning:"fixed"},(0,b.K)("calcite-icon",{icon:"utility-network-trace",scale:"s",slot:"icon"}),(0,b.K)("calcite-combobox",{label:e.inputsStrings.selectTraces,maxItems:0,overlayPositioning:"fixed",placeholder:e.inputsStrings.selectTraces,scale:"s",selectionMode:"multiple",onCalciteComboboxChange:e=>{this.viewModel.traces.forEach((t=>{t.selected=e.currentTarget.selectedItems.some((e=>e.value===t.globalId))})),e.currentTarget.selectedItems.length&&(this._warningNoTraceSelected=!1)}},t))}_renderUtilityNetworkTrace(){const{viewModel:e,viewModel:{utilityNetwork:t}}=this,i=e.view?.map,{messages:s}=this;let o=(0,b.K)("calcite-tabs",{layout:"center",position:"top",styles:Y(this.container)},(0,b.K)("calcite-tab-nav",{slot:"title-group"},(0,b.K)("calcite-tab-title",{onclick:()=>{this.switchTab("input")},selected:"input"===this._activeTab},s.inputsStrings.headerTabInputs),(0,b.K)("calcite-tab-title",{onclick:()=>{this.switchTab("results")},selected:"results"===this._activeTab},s.resultsStrings.headerTabResults)),this._renderInputsTab(),this._renderResultsTab());return(!i.utilityNetworks?.length&&!t||t&&!t.sharedNamedTraceConfigurations.length)&&(o=(0,b.K)("calcite-panel",null,this._renderWarningMessage("noTraceConfig",!1))),this._loadUnError||(o=(0,b.K)("calcite-panel",null,this._renderWarningMessage("loadUNError",!1,this._errorMessage))),o}_renderWarningMessage(e,t,i){const{messages:s}=this;let o=s.alertsStrings.NoRunAlertHeader,r=s.alertsStrings.noResultsInfo;switch(e){case"flag":o=s.alertsStrings.startingPointAlertHeader,r=s.alertsStrings.startingPointAlert;break;case"noTerminal":o=s.alertsStrings.noTerminalDefinedHeader,r=s.alertsStrings.noTerminalDefined;break;case"trace":o=s.alertsStrings.selectTraceAlertHeader,r=s.alertsStrings.selectTraceAlert;break;case"noTraceExecuted":o=s.alertsStrings.NoRunAlertHeader,r=s.alertsStrings.noResultsInfo;break;case"noBarrierAsset":case"noStartAsset":o=s.alertsStrings.noAssetsFoundHeader,r=s.alertsStrings.noAssetFound;break;case"noBarrierAssetNso":case"noStartAssetNso":o="",r=s.alertsStrings.noAssetFound;break;case"noTraceConfig":o="",r=s.alertsStrings.noTraceSupported;break;default:o=s.alertsStrings.genericErrorHeader,r=i||""}return(0,b.K)("div",{class:z.noticeContainer,key:e},(0,b.K)("calcite-notice",{closable:t,icon:!0,key:e,kind:"danger",open:!0,scale:"s",width:"auto",onCalciteNoticeClose:()=>this._handleWarningNoticeClose(e)},(0,b.K)("div",{slot:"title"},o),(0,b.K)("div",{slot:"message"},r)))}_afterComponentCreate(e){"value"in e&&null!=e.value&&"setNumberValue"in e&&e.setNumberValue({committing:!1,value:e.value,origin:"direct"})}_appendAttributes(e,t,i){const s=[];return e.forEach((e=>{t.forEach((t=>{t.featureSet.features.forEach((o=>{e[i]===o.attributes[this._resultObjectIdField]&&(e.details=o,e.details.fields=t.featureSet.fields,s.push(e))}))}))})),s}_changeCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";const t=this.view?.container?.style;t&&(t.cursor=e)}_disablePopup(){const{view:e}=this;e.popupEnabled=!1,e.closePopup()}_compare(e,t){return(i,s)=>{let o=0,r=i.details?.attributes[e]??i.objectId,n=s.details?.attributes[e]??s.objectId;return isNaN(r)&&(r=r.toLowerCase()),isNaN(n)&&(n=n.toLowerCase()),"desc"===t?r>n?o=1:r<n&&(o=-1):r<n?o=1:r>n&&(o=-1),o}}_getAssetGroupName(e){let t=e.assetGroupCode.toString();const i=e.assetGroupCode,s=this.viewModel.getValidSources().find((t=>t.sourceId===e.networkSourceId));if(s){const e=s.assetGroups.find((e=>e.assetGroupCode===i));e&&(t=e.assetGroupName)}return t}_getAssetTypeName(e){let t=e.assetTypeCode.toString();const i=e.assetGroupCode,s=this.viewModel.getValidSources().find((t=>t.sourceId===e.networkSourceId));if(s){const o=s.assetGroups.find((e=>e.assetGroupCode===i));if(o){const i=o.assetTypes.find((t=>t.assetTypeCode===e.assetTypeCode));i&&(t=i.assetTypeName)}}return t}_getSymbolIcon(e){return"picture-marker"===e.type?(0,b.K)("img",{height:e.height,src:e.url??void 0,width:e.width}):null}_groupBy(e,t){return e.reduce(((e,i)=>((e[i[t]]=e[i[t]]||[]).push(i),e)),{})}_groupResultsByAssetGroup(e){const t=[],i=e.results?.elements,s=this._groupBy(i??[],"networkSourceId");for(const o in s)t.push(this._groupBy(s[o],"assetGroupCode"));return t}_groupResultsByAssetType(e){return this._groupBy(e,"assetTypeCode")}_handleWarningNoticeClose(e){switch(e){case"flag":this._warningNoFlag=!1;break;case"noTerminal":this._warningNoTerminal=!1;break;case"trace":this._warningNoTraceSelected=!1;break;case"noStartAsset":this._warningNoStartAssetFound=!1;break;case"noStartAssetNso":this._warningNoStartAssetNsoFound=!1;break;case"noBarrierAsset":this._warningNoBarrierAssetFound=!1;break;case"noBarrierAssetNso":this._warningNoBarrierAssetNsoFound=!1}}_mixCustomStrings(){const{messages:e}=this;this.inputSettings.length>0&&this.inputSettings.forEach((t=>{"starting-point"===t.type&&(e.inputsStrings.headerStartingPoint=t.label,e.inputsStrings.startingPointHint=t.description),"barrier"===t.type&&(e.inputsStrings.headerBarrier=t.label,e.inputsStrings.barrierPointHint=t.description)}))}_overrideFlagSymbol(){this.inputSettings.length>0&&this.inputSettings.forEach((e=>{"starting-point"===e.type?this._symbolStartFlag=e.symbol:this._symbolBarrier=e.symbol,this.viewModel.changeFlagSymbol(e.type,e.symbol)}))}_processFlagOnLoad(){return this.view?.when().then((()=>{this._watchHandler=(0,n.when)((()=>!this.view?.updating),(async()=>{this._warningNoFlag=!1,this._warningNoBarrierAssetFound=!1,this._warningNoStartAssetFound=!1;const e=await this.viewModel.addFlagsOnLoad();this.viewModel.removeFlagsOnLoadWatcher(),e.includes("barrier")&&(this._warningNoBarrierAssetFound=!0),e.includes("starting-point")&&(this._warningNoStartAssetFound=!0),this.disabled=!1,null!==this._watchHandler&&this._watchHandler.remove()}))}))}_registerWatchers(){this.addHandles([(0,n.watch)((()=>this.selectedTraces),(()=>{this.viewModel.selectTracesOnLoad(),this.scheduleRender()})),(0,n.watch)((()=>this.defaultGraphicColor),(()=>{this.viewModel.traceResults.length>0&&this.viewModel.traceResults.forEach((e=>{this.viewModel.changeResultGraphicColor(this.viewModel.defaultGraphicColor,e)})),this.scheduleRender()}))])}_renderComboboxItem(e){let{text:t,value:i,selected:s}=e;return(0,b.K)("calcite-combobox-item",{key:i,selected:s,textLabel:t,value:i})}_resetResultFeatureWidget(){this._showFeatureInfoActive=!1,this._resultFeatureWidget.feature=null,this.view.popupEnabled=this._wasPopupEnabled}_resetTraceLocationWarnings(){this._warningNoBarrierAssetFound=!1,this._warningNoBarrierAssetNsoFound=!1,this._warningNoStartAssetFound=!1,this._warningNoStartAssetNsoFound=!1}_setupAddNonspatialObject(e){this._disablePopup(),this._traceLocationType=e,this._addNonspatialObjectActive=!0,this._resetTraceLocationWarnings(),this.viewModel.getNonspatialTraceLocationInitialFeature().then((e=>{this._findNonspatialFeatureWidget.feature=null;const t=e.graphic;this._findNonspatialFeatureWidget.open(t)})).catch((()=>{this._warningNoStartAssetNsoFound="starting-point"===e,this._warningNoBarrierAssetNsoFound="barrier"===e,this._addNonspatialObjectActive=!1})).finally((()=>this._changeCursor("default")))}_setupAddTraceLocation(e){this._traceLocationType=e,this._changeCursor("crosshair"),this._selectToolActive=!0,this._addNonspatialObjectActive=!1,this._resetTraceLocationWarnings(),this.viewModel.addFlagByHit(this._traceLocationType,this._symbolStartFlag).then((e=>{this._changeCursor("default"),e?this._warningNoFlag=!1:(this._warningNoStartAssetFound="starting-point"===this._traceLocationType,this._warningNoBarrierAssetFound="barrier"===this._traceLocationType),this._selectToolActive=!1}))}_utilityNetworkTraceInitialized(){this.viewModel.loadUtilityNetwork().then((e=>{e&&(this.viewModel.selectTracesOnLoad(),this._registerWatchers(),this.viewModel.flags.length>0&&this._processFlagOnLoad()),this.disabled=!1})).catch((e=>{const{messages:t}=this;this._loadUnError=!1,"utility-network:no-user-type-extension"===e.name||e.details.raw.extendedCode===X?this._errorMessage=t.alertsStrings.noUserExtension:this._errorMessage=e.message,this.disabled=!1}))}};(0,s._)([(0,a.MZ)()],ee.prototype,"_activeTab",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_activeTrace",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_activeSwatch",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_addNonspatialObjectActive",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_alertRemoveModal",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_assetGroupHeader",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_assetTypeHeader",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_confirmReset",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_errorMessage",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_swatchNode",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_selectToolActive",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_showFeatureInfoActive",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_traceHeaderForFlow",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_traceResultsFunctions",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_traceResultsAssetGroup",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_traceResultsAssetType",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_traceResultsIndividual",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_traceResultsState",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_warningNoFlag",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_warningNoTraceSelected",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"_updatingHandles",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"defaultGraphicColor",null),(0,s._)([(0,a.MZ)()],ee.prototype,"disabled",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"enableResultArea",null),(0,s._)([(0,a.MZ)()],ee.prototype,"flags",null),(0,s._)([(0,a.MZ)()],ee.prototype,"gdbVersion",null),(0,s._)([(0,a.MZ)()],ee.prototype,"icon",null),(0,s._)([(0,a.MZ)()],ee.prototype,"inputSettings",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"label",null),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/widgets/UtilityNetworkTrace/t9n/UtilityNetworkTrace")],ee.prototype,"messages",void 0),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/t9n/common")],ee.prototype,"messagesCommon",void 0),(0,s._)([(0,a.MZ)(),(0,m.G)("esri/core/t9n/Units")],ee.prototype,"messagesUnits",void 0),(0,s._)([(0,a.MZ)()],ee.prototype,"resultAreaProperties",null),(0,s._)([(0,a.MZ)()],ee.prototype,"selectedTraces",null),(0,s._)([(0,a.MZ)()],ee.prototype,"selectOnComplete",null),(0,s._)([(0,a.MZ)()],ee.prototype,"showGraphicsOnComplete",null),(0,s._)([(0,a.MZ)()],ee.prototype,"showSelectionAttributes",null),(0,s._)([(0,a.MZ)()],ee.prototype,"utilityNetwork",null),(0,s._)([(0,a.MZ)()],ee.prototype,"view",null),(0,s._)([(0,v.U)(["add-flag","add-flag-complete","add-flag-error","select-features","clear-selection","add-result-area","remove-result-area","create-result-area","reset"]),(0,a.MZ)({type:V.default})],ee.prototype,"viewModel",void 0),ee=(0,s._)([(0,l.$)("esri.widgets.UtilityNetworkTrace")],ee);const te=ee},70350:(e,t,i)=>{i.d(t,{A:()=>w});var s=i(93800),o=i(49959),r=i(79953),n=i(48602),a=(i(21265),i(50925),i(14746),i(75269)),l=i(27811),c=i(73484),d=(i(17745),i(87118));const u="esri-spinner",h=u,p=`${u}--start`,g=`${u}--finish`;let _=class extends l.default{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new c.A}initialize(){this.addHandles((0,r.watch)((()=>this.visible),(e=>this._visibleChange(e))))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:i}=e??{};t&&(this.viewModel.location=t),this.visible=!0;i&&i.catch((()=>{})).then((()=>this.hide()))}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,s=e&&i,o=!e&&i,r={[p]:s,[g]:o},n=this._getPositionStyles();return(0,d.K)("div",{class:this.classes(h,r),styles:n})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=(0,o.after)(this._animationDelay);this._animationPromise=t,t.catch((()=>{})).then((()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(null==t||null==e)return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};(0,s._)([(0,n.MZ)()],_.prototype,"location",null),(0,s._)([(0,n.MZ)()],_.prototype,"view",null),(0,s._)([(0,n.MZ)({type:c.A})],_.prototype,"viewModel",void 0),(0,s._)([(0,n.MZ)()],_.prototype,"visible",null),_=(0,s._)([(0,a.$)("esri.widgets.Spinner")],_);const w=_},73484:(e,t,i)=>{i.d(t,{A:()=>l});var s=i(93800),o=i(48602),r=(i(21265),i(50925),i(14746),i(75269)),n=i(71456);let a=class extends n.A{constructor(e){super(e),this.visible=!1}};(0,s._)([(0,o.MZ)()],a.prototype,"visible",void 0),a=(0,s._)([(0,r.$)("esri.widgets.Spinner.SpinnerViewModel")],a);const l=a},75716:(e,t,i)=>{i.d(t,{A:()=>o});const s="esri-features",o={icon:`${s}__icon`,actionImage:`${s}__action-image`,base:s,container:`${s}__container`,contentContainer:`${s}__content-container`,contentFeature:`${s}__content-feature`,flowItemCollapsed:`${s}__flow-item--collapsed`,header:`${s}__header`,footer:`${s}__footer`,featureMenuObserver:`${s}__feature-menu-observer`,actionExit:`${s}__action--exit`,loader:`${s}__loader`,featuresHeading:`${s}__heading`,paginationText:`${s}__pagination-text`,paginationActionBar:`${s}__pagination-action-bar`,paginationMenuButton:`${s}__pagination-menu-button`,paginationPrevious:`${s}__pagination-previous`,paginationNext:`${s}__pagination-next`}}}]);