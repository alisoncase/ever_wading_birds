"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[74549,76455],{1277:(t,e,n)=>{n.d(e,{C:()=>c,Cr:()=>g,H6:()=>b,LV:()=>u,_I:()=>p,dz:()=>v,fA:()=>d,kb:()=>f,ld:()=>y,sd:()=>h,vt:()=>l});var r=n(64682),i=n(32636),s=n(89227),o=n(28473),a=n(1696);function l(t){return t?{origin:(0,o.o8)(t.origin),vector:(0,o.o8)(t.vector)}:{origin:(0,o.vt)(),vector:(0,o.vt)()}}function u(t,e){const n=w.get();return n.origin=t,n.vector=e,n}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return d(t.origin,t.vector,e)}function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,s.c)(n.origin,t),(0,s.c)(n.vector,e),n}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,s.c)(n.origin,t),(0,s.d)(n.vector,e,t),n}function f(t,e){const n=(0,s.d)(a.rq.get(),e,t.origin),i=(0,s.f)(t.vector,n),o=(0,s.f)(t.vector,t.vector),l=(0,r.qE)(i/o,0,1),u=(0,s.d)(a.rq.get(),(0,s.h)(a.rq.get(),t.vector,l),n);return(0,s.f)(u,u)}function p(t,e,n){return b(t,e,0,1,n)}function h(t,e,n){return(0,s.g)(n,t.origin,(0,s.h)(n,t.vector,e))}function b(t,e,n,i,o){const{vector:l,origin:u}=t,c=(0,s.d)(a.rq.get(),e,u),d=(0,s.f)(l,c)/(0,s.k)(l);return(0,s.h)(o,l,(0,r.qE)(d,n,i)),(0,s.g)(o,o,t.origin)}function v(t,e){if(m(t,u(e.origin,e.direction),!1,I)){const{tA:e,pB:n,distance2:r}=I;if(e>=0&&e<=1)return r;if(e<0)return(0,s.s)(t.origin,n);if(e>1)return(0,s.s)((0,s.g)(a.rq.get(),t.origin,t.vector),n)}return null}function y(t,e,n){return!!m(t,e,!0,I)&&((0,s.c)(n,I.pA),!0)}function m(t,e,n,i){const o=1e-6,l=t.origin,u=(0,s.g)(a.rq.get(),l,t.vector),c=e.origin,d=(0,s.g)(a.rq.get(),c,e.vector),g=a.rq.get(),f=a.rq.get();if(g[0]=l[0]-c[0],g[1]=l[1]-c[1],g[2]=l[2]-c[2],f[0]=d[0]-c[0],f[1]=d[1]-c[1],f[2]=d[2]-c[2],Math.abs(f[0])<o&&Math.abs(f[1])<o&&Math.abs(f[2])<o)return!1;const p=a.rq.get();if(p[0]=u[0]-l[0],p[1]=u[1]-l[1],p[2]=u[2]-l[2],Math.abs(p[0])<o&&Math.abs(p[1])<o&&Math.abs(p[2])<o)return!1;const h=g[0]*f[0]+g[1]*f[1]+g[2]*f[2],b=f[0]*p[0]+f[1]*p[1]+f[2]*p[2],v=g[0]*p[0]+g[1]*p[1]+g[2]*p[2],y=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],m=(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])*y-b*b;if(Math.abs(m)<o)return!1;let I=(h*b-v*y)/m,w=(h+b*I)/y;n&&(I=(0,r.qE)(I,0,1),w=(0,r.qE)(w,0,1));const M=a.rq.get(),_=a.rq.get();return M[0]=l[0]+I*p[0],M[1]=l[1]+I*p[1],M[2]=l[2]+I*p[2],_[0]=c[0]+w*f[0],_[1]=c[1]+w*f[1],_[2]=c[2]+w*f[2],i.tA=I,i.tB=w,i.pA=M,i.pB=_,i.distance2=(0,s.s)(M,_),!0}const I={tA:0,tB:0,pA:(0,o.vt)(),pB:(0,o.vt)(),distance2:0},w=new i.I((()=>l()))},8455:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var r=n(93800),i=n(38432),s=n(86925),o=n(89129),a=n(40736),l=n(5839),u=n(64682),c=n(79953),d=n(48602),g=(n(21265),n(50925),n(14746),n(75269)),f=n(12560),p=n(96913);const h=o.default.ofType(s.default);let b=class extends i.A{constructor(t){super(t),this.type="viewshed",this._extent=null}initialize(){this.addHandles((0,c.watch)((()=>this._computeExtent()),(t=>{null==t.pending&&(this._extent=t.extent)}),c.syncAndInitial))}get viewsheds(){return this._get("viewsheds")||new h}set viewsheds(t){this._set("viewsheds",(0,a.V)(t,this.viewsheds,h))}get spatialReference(){for(const t of this.viewsheds)if(null!=t.observer)return t.observer.spatialReference;return null}get extent(){return this._extent}get requiredPropertiesForEditing(){return this.viewsheds.items.map((t=>{let{observer:e}=t;return e}))}async waitComputeExtent(){const t=this._computeExtent();null!=t.pending&&await t.pending}_computeExtent(){const{spatialReference:t}=this;if(null==t)return{pending:null,extent:null};const e=this.viewsheds.filter((t=>null!=t.observer)),n=e.map((t=>t.observer)).toArray(),r=(0,p.projectOrLoadMany)(n,t);return null!=r.pending?{pending:r.pending,extent:null}:{pending:null,extent:r.geometries.map(((t,n)=>{const r=e.at(n);return null!=t&&null!=r?this._computeViewshedExtent(this.viewsheds.at(n),t):null})).filter((t=>null!=t)).reduce(((t,e)=>function(t,e){return null==t?e:null==e?t:t.union(e)}(t,e)),null)}}_computeViewshedExtent(t,e){const{farDistance:n,heading:r,tilt:i,horizontalFieldOfView:s,verticalFieldOfView:o}=t,{spatialReference:a}=e,c=s/2,d=o/2,g=n/a.metersPerUnit,p=[l.ie.normalize(r-c),r,l.ie.normalize(r+c)],h=f.default.fromPoint(e),b=t=>{const e=p.map((e=>l.ie.normalize(e-t)));if(e[0]>e[2]||360===s)return g;const n=e.map((t=>Math.abs(t>180?360-t:t))).reduce(((t,e)=>t>e?e:t));return n>90?0:g*Math.cos((0,u.kU)(n))};h.xmax+=b(90),h.xmin-=b(-90),h.ymax+=b(0),h.ymin-=b(180);const m=e.z;if(null!=m){let t=m,e=m;const r=i-90,s=(0,u.qE)(r+d,-90,90),o=(0,u.qE)(r-d,-90,90),l=a?.isGeographic?n:g;t+=l*y(s),e+=l*y(o);const f=v(d)*l,p=y(r)*f*(1-v(c));i<90&&(t-=p),i>90&&(e-=p),h.zmax=Math.max(t,m),h.zmin=Math.min(e,m)}return h}clear(){this.viewsheds.removeAll()}};function v(t){return Math.cos((0,u.kU)(t))}function y(t){return Math.sin((0,u.kU)(t))}(0,r._)([(0,d.MZ)({type:["viewshed"]})],b.prototype,"type",void 0),(0,r._)([(0,d.MZ)({cast:a.H,type:h,nonNullable:!0})],b.prototype,"viewsheds",null),(0,r._)([(0,d.MZ)({readOnly:!0})],b.prototype,"spatialReference",null),(0,r._)([(0,d.MZ)()],b.prototype,"_extent",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],b.prototype,"extent",null),(0,r._)([(0,d.MZ)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),b=(0,r._)([(0,g.$)("esri.analysis.ViewshedAnalysis")],b);const m=b},10323:(t,e,n)=>{n.d(e,{Aw:()=>u,Jb:()=>l,Q5:()=>g,W3:()=>f,d:()=>o,db:()=>d,kV:()=>c,rb:()=>a});var r=n(92453),i=n(15828),s=n(27464);class o extends i.R6{constructor(t,e,n,r){super(e,n),this.point=t,this.createGraphic=r}}function a(t){return(0,s.i3)(t)&&t.intersector===r.dz.PCL&&!!t.target}class l extends i.HE{constructor(t,e,n,r,i){super(t),this.layerUid=t,this.sublayerUid=e,this.nodeIndex=n,this.componentIndex=r,this.triangleNr=i}}class u extends i.R6{constructor(t,e,n){super(e,null),this.point=t,this.createVoxelGraphic=n}}class c extends i.R6{constructor(t,e){super(t,null),this.createTiles3DGraphic=e}}function d(t){return(0,s.i3)(t)&&t.intersector===r.dz.I3S&&!!t.target}function g(t){return(0,s.i3)(t)&&t.intersector===r.dz.VOXEL&&!!t.target}function f(t){return(0,s.i3)(t)&&t.intersector===r.dz.TILES3D&&!!t.target}},13473:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function s(t,e,n,r,i,s,o,a,l){return[t,e,n,r,i,s,o,a,l]}n.d(e,{fA:()=>s,o8:()=>i,vt:()=>r,zK:()=>o});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},15828:(t,e,n)=>{n.d(e,{B$:()=>s,HE:()=>o,R6:()=>a});var r=n(28473);class i{constructor(t,e,n){this.object=t,this.geometryId=e,this.triangleNr=n}}class s extends i{constructor(t,e,n,i){super(t,e,n),this.center=null!=i?(0,r.o8)(i):null}}class o{constructor(t){this.layerUid=t}}class a extends o{constructor(t,e){super(t),this.graphicUid=e}}},25071:(t,e,n)=>{n.d(e,{B:()=>y,a:()=>I,b:()=>X,c:()=>N,d:()=>m,e:()=>S,f:()=>w,g:()=>x,h:()=>R,i:()=>A,n:()=>H,r:()=>F,t:()=>T,u:()=>M});n(21265);var r=n(50925),i=n(64682),s=n(32636),o=n(87752),a=n(10382),l=n(89227),u=n(28473),c=n(90772),d=n(91345),g=n(1277),f=n(10872),p=n(91102),h=n(49943),b=n(1696);const v=()=>r.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");const y=class{constructor(){this.plane=(0,f.vt)(),this.origin=(0,u.vt)(),this.basis1=(0,u.vt)(),this.basis2=(0,u.vt)()}};function m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return{plane:(0,f.vt)(t.plane),origin:(0,u.o8)(t.origin),basis1:(0,u.o8)(t.basis1),basis2:(0,u.o8)(t.basis2)}}function I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m();return w(t.origin,t.basis1,t.basis2,e)}function w(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m();return(0,l.c)(r.origin,t),(0,l.c)(r.basis1,e),(0,l.c)(r.basis2,n),M(r),function(t,e){Math.abs((0,l.f)(t.basis1,t.basis2)/((0,l.l)(t.basis1)*(0,l.l)(t.basis2)))>1e-6&&v().warn(e,"Provided basis vectors are not perpendicular"),Math.abs((0,l.f)(t.basis1,H(t)))>1e-6&&v().warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,l.f)(H(t),t.origin)-t.plane[3])>1e-6&&v().warn(e,"Plane offset is not consistent with plane origin")}(r,"fromValues()"),r}function M(t){(0,f.mR)(t.basis2,t.basis1,t.origin,t.plane)}function _(t,e,n){t!==n&&I(t,n);const r=(0,l.h)(b.rq.get(),H(t),e);return(0,l.g)(n.origin,n.origin,r),n.plane[3]-=e,n}function x(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m();const n=(t[2]-t[0])/2,r=(t[3]-t[1])/2;return(0,l.i)(e.origin,t[0]+n,t[1]+r,0),(0,l.i)(e.basis1,n,0,0),(0,l.i)(e.basis2,0,r,0),(0,f.fA)(0,0,1,0,e.plane),e}function A(t,e,n){return!!(0,f.Ui)(t.plane,e,n)&&z(t,n)}function q(t,e,n){const r=D.get();B(t,e,r,D.get());let s=Number.POSITIVE_INFINITY;for(const o of G){const a=U(t,o,Z.get()),u=b.rq.get();if((0,f.T7)(r,a,u)){const t=(0,l.o)(b.rq.get(),e.origin,u),r=Math.abs((0,i.XM)((0,l.f)(e.direction,t)));r<s&&(s=r,(0,l.c)(n,u))}}return s===Number.POSITIVE_INFINITY?V(t,e,n):n}function N(t,e){return(e-t)/e}function V(t,e,n){if(A(t,e,n))return n;const r=D.get(),i=D.get();B(t,e,r,i);let s=Number.POSITIVE_INFINITY;for(const o of G){const a=U(t,o,Z.get()),u=b.rq.get();if((0,f.gv)(r,a,u)){const t=(0,p.kb)(e,u);if(!(0,f.Tj)(i,u))continue;t<s&&(s=t,(0,l.c)(n,u))}}return E(t,e.origin)<s&&O(t,e.origin,n),n}function O(t,e,n){const r=(0,f._I)(t.plane,e,b.rq.get()),i=(0,g.H6)(P(t,t.basis1),r,-1,1,b.rq.get()),s=(0,g.H6)(P(t,t.basis2),r,-1,1,b.rq.get());return(0,l.d)(n,(0,l.g)(b.rq.get(),i,s),t.origin),n}function j(t,e,n){const{origin:r,basis1:i,basis2:s}=t,o=(0,l.d)(b.rq.get(),e,r),a=(0,h.gr)(i,o),u=(0,h.gr)(s,o),c=(0,h.gr)(H(t),o);return(0,l.i)(n,a,u,c)}function E(t,e){const n=j(t,e,b.rq.get()),{basis1:r,basis2:i}=t,s=(0,l.l)(r),o=(0,l.l)(i),a=Math.max(Math.abs(n[0])-s,0),u=Math.max(Math.abs(n[1])-o,0),c=n[2];return a*a+u*u+c*c}function R(t,e){return Math.sqrt(E(t,e))}function S(t,e){return(0,f.Tj)(t.plane,e)&&z(t,e)}function L(t,e){const n=-t.plane[3];return(0,h.gr)(H(t),e)-n}function T(t,e,n){return t!==n&&I(t,n),(0,o.B8)(Q,e),(0,o.mg)(Q,Q),(0,l.t)(n.basis1,t.basis1,Q),(0,l.t)(n.basis2,t.basis2,Q),(0,l.t)((0,f.Qj)(n.plane),(0,f.Qj)(t.plane),Q),(0,l.t)(n.origin,t.origin,e),(0,f.mP)(n.plane,n.plane,n.origin),n}function F(t,e,n,r){return t!==r&&I(t,r),(0,o.$0)(Y,e,n),(0,l.t)(r.basis1,t.basis1,Y),(0,l.t)(r.basis2,t.basis2,Y),M(r),r}function H(t){return(0,f.Qj)(t.plane)}function z(t,e){const n=(0,l.d)(b.rq.get(),e,t.origin),r=(0,l.k)(t.basis1),i=(0,l.k)(t.basis2),s=(0,l.f)(t.basis1,n),o=(0,l.f)(t.basis2,n);return-s-r<0&&s-r<0&&-o-i<0&&o-i<0}function P(t,e){const n=Z.get();return(0,l.c)(n.origin,t.origin),(0,l.c)(n.vector,e),n}function U(t,e,n){const{basis1:r,basis2:i,origin:s}=t,o=(0,l.h)(b.rq.get(),r,e.origin[0]),a=(0,l.h)(b.rq.get(),i,e.origin[1]);(0,l.g)(n.origin,o,a),(0,l.g)(n.origin,n.origin,s);const u=(0,l.h)(b.rq.get(),r,e.direction[0]),c=(0,l.h)(b.rq.get(),i,e.direction[1]);return(0,l.h)(n.vector,(0,l.g)(u,u,c),2),n}function B(t,e,n,r){const i=H(t);(0,f.mR)(i,e.direction,e.origin,n),(0,f.mR)((0,f.Qj)(n),i,e.origin,r)}const C={plane:(0,f.vt)(),origin:(0,u.fA)(0,0,0),basis1:(0,u.fA)(1,0,0),basis2:(0,u.fA)(0,1,0)},D=new s.I(f.vt),Z=new s.I(g.vt),k=(0,u.vt)(),$=new s.I((()=>m())),G=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Q=(0,a.vt)(),Y=(0,a.vt)(),X=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:y,altitudeAt:L,axisAt:function(t,e,n,r){return function(t,e,n){switch(e){case d._.X:(0,l.c)(n,t.basis1),(0,l.n)(n,n);break;case d._.Y:(0,l.c)(n,t.basis2),(0,l.n)(n,n);break;case d._.Z:(0,l.c)(n,H(t))}return n}(t,n,r)},cameraFrustumCoverage:N,closestPoint:V,closestPointOnSilhouette:q,copy:I,copyWithoutVerify:function(t,e){(0,l.c)(e.origin,t.origin),(0,l.c)(e.basis1,t.basis1),(0,l.c)(e.basis2,t.basis2),(0,f.C)(e.plane,t.plane)},create:m,distance:R,distance2:E,distanceToSilhouette:function(t,e){let n=Number.NEGATIVE_INFINITY;for(const r of G){const i=U(t,r,Z.get()),s=(0,g.kb)(i,e);s>n&&(n=s)}return Math.sqrt(n)},elevate:_,equals:function(t,e){return(0,l.p)(t.basis1,e.basis1)&&(0,l.p)(t.basis2,e.basis2)&&(0,l.p)(t.origin,e.origin)},extrusionContainsPoint:S,fromAABoundingRect:x,fromValues:w,getExtent:function(t,e){const n=t.basis1[0],r=t.basis2[1],[i,s]=t.origin;return(0,c.fA)(i-n,s-r,i+n,s+r,e)},intersectRay:A,intersectRayClosestSilhouette:function(t,e,n){if(A(t,e,n))return n;const r=q(t,e,b.rq.get());return(0,l.g)(n,e.origin,(0,l.h)(b.rq.get(),e.direction,(0,l.j)(e.origin,r)/(0,l.l)(e.direction))),n},normal:H,projectPoint:O,projectPointLocal:j,rotate:F,setAltitudeAt:function(t,e,n,r){const i=L(t,e),s=(0,l.h)(k,H(t),n-i);return(0,l.g)(r,e,s),r},setExtent:function(t,e,n){return x(e,n),_(n,L(t,t.origin),n),n},transform:T,up:C,updateUnboundedPlane:M,wrap:function(t,e,n){const r=$.get();return r.origin=t,r.basis1=e,r.basis2=n,r.plane=(0,f.LV)(0,0,0,0),M(r),r}},Symbol.toStringTag,{value:"Module"}))},27464:(t,e,n)=>{n.d(e,{$I:()=>u,Q5:()=>l,hH:()=>c,i3:()=>a});var r=n(89227),i=n(28473),s=n(25071),o=n(92453);function a(t){return null!=t?.dist}function l(t){return(e,n,i)=>((0,r.m)(d,e,n,i),!(0,s.e)(t,d))}function u(t){return a(t)&&t.intersector===o.dz.OBJECT&&!!t.target}function c(t){return a(t)&&t.intersector===o.dz.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center}const d=(0,i.vt)()},38432:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(93800),i=n(6946),s=n(62631),o=n(85715),a=n(93633),l=n(19455),u=n(48602),c=(n(21265),n(50925),n(75269));let d=0,g=class extends(l.A.JSONSupportMixin(o.A.ClonableMixin(a.A.IdentifiableMixin(i.default)))){constructor(t){super(t),this.id=`${Date.now().toString(16)}-analysis-${d++}`,this.title=null}get parent(){return this._get("parent")}set parent(t){const e=this.parent;if(null!=e)switch(e.type){case"line-of-sight":case"dimension":case"viewshed":e.releaseAnalysis(this);break;case"2d":case"3d":e.analyses.includes(this)&&e.analyses.remove(this)}this._set("parent",t)}get isEditable(){return this.requiredPropertiesForEditing.every(s.Ru)}};(0,r._)([(0,u.MZ)({type:String,constructOnly:!0,clonable:!1})],g.prototype,"id",void 0),(0,r._)([(0,u.MZ)({type:String})],g.prototype,"title",void 0),(0,r._)([(0,u.MZ)({clonable:!1,value:null})],g.prototype,"parent",null),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"isEditable",null),g=(0,r._)([(0,c.$)("esri.analysis.Analysis")],g);const f=g},46316:(t,e,n)=>{n.d(e,{N1:()=>c,uY:()=>d,wY:()=>u,xH:()=>l});var r=n(89227),i=n(28473),s=n(91102),o=n(92453),a=n(54407);function l(t,e){return u(t)===u(e)}function u(t){if(null==t)return null;const e=null!=t.layer?t.layer.id:"";let n=null;return n=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==n?null:`o-${e}-${n}`}const c={json:{write:{writer:function(t,e){null!=t?.layer?.objectIdField&&null!=t.attributes&&(e.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String],isRequired:!0},"feature.objectId":{type:[Number,String],isRequired:!0}}},origins:{"web-scene":{read:function(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}}}}};function d(t,e,n,l){const{sceneIntersectionHelper:c}=t,{observer:d,observerFeatureId:f,targetFeatureId:b,target:v}=n;if(null==f&&null==b)return;l||(l=t=>t),(0,r.a)(h,d,v);const y=(0,r.l)(h);(0,r.b)(h,d,h,1/y);const m=(0,s.Cr)(h,v,p);e.options.store=o.oH.ALL,c.intersectToolIntersectorRay(m,e);let I=null,w=null,M=null,_=null;for(const r of e.results.all){const e=(0,a.Gy)(r,t);if(null==e||null==r.distanceInRenderSpace)continue;const n=u(e);null!=n&&(null!=f&&n===f&&(I??=l(g(r,t,y)),r.distanceInRenderSpace-1<I&&(M=r)),null!=b&&n===b&&(w??=l(g(r,t,y)),null==_&&r.distanceInRenderSpace-1<y&&y-r.distanceInRenderSpace+1<w&&(_=r)))}const{observerAdjusted:x,targetAdjusted:A}=n;M?.getIntersectionPoint(x)?n.observerSurfaceNormal=M.getTransformedNormal((0,i.vt)()):n.observerSurfaceNormal=null,_?.getIntersectionPoint(A)?n.targetSurfaceNormal=_.getTransformedNormal((0,i.vt)()):n.targetSurfaceNormal=null}function g(t,e,n){if((0,a.QS)(t)){const r=(0,a.SM)(t,e);if(null!=r)return Math.min(r*f,n)}return 1e-5*n}const f=.05,p=(0,s.vt)(),h=(0,i.vt)()},54232:(t,e,n)=>{n.d(e,{DC:()=>o,MQ:()=>a,mi:()=>l});var r=n(92453),i=n(15828),s=n(27464);function o(t){return(0,s.i3)(t)&&t.intersector===r.dz.TERRAIN&&!!t.target}class a extends i.R6{constructor(t,e,n){super(t,e),this.triangleNr=n}}function l(t){return(0,s.i3)(t)&&t.intersector===r.dz.OVERLAY&&!!t.target}},54407:(t,e,n)=>{n.d(e,{FI:()=>f,FV:()=>d,Gy:()=>g,QS:()=>v,SM:()=>b});var r=n(87752),i=n(28473),s=n(4309),o=n(89476),a=n(10323),l=n(54232),u=n(27464),c=n(99855);function d(t,e){return(0,u.$I)(t)||(0,u.hH)(t)?h(t.target?.object,e):(0,l.DC)(t)?e.map?.ground:(0,a.rb)(t)||(0,a.db)(t)||(0,l.mi)(t)||(0,a.Q5)(t)?h(t.target,e):null}function g(t,e){const n=f(t,e);return null!=n&&"graphic"===n.type?n.graphic:null}function f(t,e){if(null==t)return null;if((0,u.$I)(t)||(0,u.hH)(t))return p(t.target?.object,e);if((0,a.rb)(t)){const e=t.target.createGraphic();return{type:"graphic",graphic:e,layer:e.layer}}if((0,a.Q5)(t)){const e=t.target.createVoxelGraphic();return{type:"graphic",graphic:e,layer:e.layer}}if((0,a.W3)(t)){const e=t.target.createTiles3DGraphic();return{type:"graphic",graphic:e,layer:e.layer}}return(0,l.mi)(t)||(0,c.H)(t)?p(t.target,e):(0,a.db)(t)?function(t,e){const n=h(t,e);if(null==n)return null;const r=e.allLayerViews.find((t=>t.layer===n));return r&&!r.suspended&&"getGraphicFromIntersectorTarget"in r?function(t){return null!=t?{type:"graphic",graphic:t,layer:t.layer}:null}(r.getGraphicFromIntersectorTarget(t)):null}(t.target,e):null}function p(t,e){if(null==t?.graphicUid)return null;const n=h(t,e);if(null==n)return null;if(n===e.graphics)return null==e.graphicsView||"number"!=typeof t.graphicUid?null:e.graphicsView.getHit(t.graphicUid);const r=e.allLayerViews.find((t=>t.layer===n));return!r||r.suspended||null==t.graphicUid?null:"getHit"in r?r.getHit(t.graphicUid):null}function h(t,e){return null==t?.layerUid?null:null!=e.graphicsView&&t.layerUid===e.graphicsView.processor.layer.id?e.graphics:e.map.allLayers.find((e=>e.uid===t.layerUid))}function b(t,e){if((0,u.$I)(t)||(0,u.hH)(t))return(0,o.g)(t.target.object.boundingVolumeWorldSpace.bounds);if((0,c.H)(t)){(0,r.IL)(y,t.transformation);const e=Math.max(y[0],y[1],y[2]);return t.target.baseBoundingSphere.radius*e}if((0,a.db)(t)){const n=function(t,e){const n=h(t,e);if(null==n)return null;const r=e.allLayerViews.find((t=>t.layer===n));return r&&!r.suspended&&"getAABBFromIntersectorTarget"in r?r.getAABBFromIntersectorTarget(t):null}(t.target,e);return n?.5*(0,s._F)(n):null}return null}function v(t){return!(0,u.$I)(t)&&!(0,u.hH)(t)&&((0,c.H)(t)?t.target.numLodLevels>1:!!(0,a.db)(t))}const y=(0,i.vt)()},86925:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var r=n(93800),i=n(46316),s=n(85715),o=n(5839),a=n(19455),l=n(17741),u=n(48602),c=n(32980),d=(n(21265),n(14746),n(75269)),g=n(80556),f=n(75400);let p=class extends(a.A.JSONSupportMixin(s.A)){constructor(t){super(t),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}isValid(){return null!=this.observer&&this.farDistance>0}equals(t){return(0,l.CM)(this.observer,t.observer)&&this.farDistance===t.farDistance&&this.heading===t.heading&&this.tilt===t.tilt&&this.horizontalFieldOfView===t.horizontalFieldOfView&&this.verticalFieldOfView===t.verticalFieldOfView&&(0,i.xH)(this.feature,t.feature)}};(0,r._)([(0,u.MZ)({type:f.default,json:{write:{isRequired:!0}}})],p.prototype,"observer",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],p.prototype,"farDistance",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,c.w)((t=>o.ie.normalize((0,g.GB)(t),void 0,!0)))],p.prototype,"heading",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],p.prototype,"tilt",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],p.prototype,"horizontalFieldOfView",void 0),(0,r._)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],p.prototype,"verticalFieldOfView",void 0),(0,r._)([(0,u.MZ)(i.N1)],p.prototype,"feature",void 0),(0,r._)([(0,u.MZ)({json:{read:!1}})],p.prototype,"isValid",null),p=(0,r._)([(0,d.$)("esri.analysis.Viewshed")],p);const h=p},92453:(t,e,n)=>{var r,i;n.d(e,{H6:()=>s,dz:()=>r,oH:()=>i}),function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL",t[t.TILES3D=8]="TILES3D"}(r||(r={}));class s{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}!function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"}(i||(i={}))},99855:(t,e,n)=>{n.d(e,{H:()=>a,h:()=>o});var r=n(92453),i=n(15828),s=n(27464);class o extends i.R6{constructor(t,e,n,r,i){super(t,e),this.layerUid=t,this.graphicUid=e,this.triangleNr=n,this.baseBoundingSphere=r,this.numLodLevels=i}}function a(t){return(0,s.i3)(t)&&t.intersector===r.dz.LOD&&!!t.target}}}]);