"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[24889,60440,79538],{30178:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(74719),i=n(11099),s=n(46176),l=n(85151),o=n(2938);const r=500,c=1e8,u=1280,f=12,m=30,d=15;async function g(e){const{view:t,sampleSize:n}=e;if(!e||!e.layer)throw new a.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!t)throw new a.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,l.p)(e,"scale-range");const{layer:i,...s}=e,c=e.forBinning?o.Mi:o.J4,u=(0,o.Jg)(i,c,e.forBinning);if(!u)throw new a.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,o.Ho)(c).join(", "));const f={layerAdapter:u,...s};f.sampleSize=n||r,await(t?.when());const m=null!=f.signal?{signal:f.signal}:null;return await u.load(m),f}function p(e,t,n){const a=function(e,t){const n=f,a=u/4,i=m,s=u/4,l=d,o=u/2;let r=0,c=0,g=0,p=0;switch(e){case"point":case"multipoint":{const e=t;r=e.avgMinDistance??0,c=n,g=e.minDistance??0,p=a;break}case"polyline":{const e=t;r=e.avgLength??0,c=i,g=e.minLength??0,p=s;break}case"polygon":{const e=t;r=e.avgSize??0,c=l,g=e.minSize??0,p=o;break}}return{resolutionForMinScale:r>0?r/c:null,resolutionForMaxScale:g>0?g/p:null}}(e.geometryType,t),s=n?.spatialReference||e.layer.spatialReference;return{minScale:(0,i.gB)(a.resolutionForMinScale??0,s),maxScale:(0,i.gB)(a.resolutionForMaxScale??0,s)}}function v(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const a=e.constraints.effectiveLODs,i=n?a:a.slice().reverse();let s=null;for(const e of i)if(!(n?e.scale>t:e.scale<t)){s=e;break}return s}}function w(e,t,n,i){const{view:s,snapToLOD:l,layerAdapter:o}=e;if(l&&s){const e=v(s,t),a=v(s,n,!1);t=e?e.scale:t,n=a?a.scale:n}if(t<n)throw new a.default("scale-range:invalid","calculated minScale is less than maxScale.");return n>t/2&&(n=Math.floor(n/2)),t>c&&(t=0),"polygon"!==o.geometryType&&(n=0),{minScale:Math.ceil(t),maxScale:Math.floor(n),spatialStatistics:i}}async function y(e){const t=await g(e),{view:n,sampleSize:i,layerAdapter:l,signal:o,filter:r}=t,c=await l.getSampleFeatures({view:n,sampleSize:i,returnGeometry:!0,filter:r,signal:o},"json");if(!c?.length)throw new a.default("scale-range:insufficient-info","No features are available to calculate statistics");const u=await(0,s.A)({features:c,geometryType:l.geometryType}),{minScale:f,maxScale:m}=p(l,u,n);return w(t,f,m,u)}},46176:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(53053),i=n(11771);function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(t){for(const a of e)if(a.geometry){const e=a.geometry;n.push.apply(n,e.points)}}else n=e.map((e=>e.geometry));const i=[],s=[];let l=1/0,o=-1/0,r=0,c=0,u=0,f=0;for(const m of n){if(!m)continue;t?(i[0]=m[0],i[1]=m[1]):(i[0]=m.x,i[1]=m.y);let e=1/0,d=-1/0;for(const r of n){if(r===m)continue;if(!r)continue;t?(s[0]=r[0],s[1]=r[1]):(s[0]=r.x,s[1]=r.y);const n=(0,a.R3)(i,s);n>0&&(n<e&&(e=n),n<l&&(l=n),n>d&&(d=n),n>o&&(o=n))}e!==1/0&&(++u,r+=e),d!==-1/0&&(++f,c+=d)}return{minDistance:l!==1/0?l:null,maxDistance:o!==-1/0?o:null,avgMinDistance:u?r/u:null,avgMaxDistance:f?c/f:null}}function l(e){const{features:t}=e;let n=null;switch(e.geometryType){case"point":n=s(t);break;case"multipoint":n=s(t,!0);break;case"polyline":n=function(e){let t=0,n=0,i=1/0,s=-1/0;for(const l of e){const e=l.geometry;if(e){let l=0;for(const t of e.paths){const e=(0,a.Yl)(t);e>0&&(l+=e)}l>0&&(++t,n+=l,l<i&&(i=l),l>s&&(s=l))}}return{minLength:i!==1/0?i:null,maxLength:s!==-1/0?s:null,avgLength:t?n/t:null}}(t);break;case"polygon":n=function(e){let t=0,n=0,a=1/0,s=-1/0;for(const l of e){const e=l.geometry;if(e){const l=(0,i.v)(e);if(l){const e=Math.abs(l.xmax-l.xmin),i=Math.abs(l.ymax-l.ymin),o=Math.sqrt(e*i);o>0&&(++t,n+=o,o<a&&(a=o),o>s&&(s=o))}}}return{minSize:a!==1/0?a:null,maxSize:s!==-1/0?s:null,avgSize:t?n/t:null}}(t)}return Promise.resolve(n)}},66787:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});n(21265);var a=n(74719),i=n(16804),s=n(11099),l=n(56563),o=n(81467),r=n(30178),c=n(85151),u=n(2938);const f=1e8,m=1128.497176,d=591657527.591555,g=[10,8,4,2],p=[100,100,60,30],v=[2,1,.75,.5],w=[32,18,12,6],y=[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.51696399994,scale:295828763.795777},{level:2,resolution:39135.75848200009,scale:147914381.897889},{level:3,resolution:19567.87924099992,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];function h(e,t){const{view:n}=e;if(!n)throw new a.default("scale-range:invalid-parameters","'view' is required");const i=t.minScale||f,s=n.constraints&&"effectiveLODs"in n.constraints&&n.constraints.effectiveLODs||y,l=[];for(let a=0;a<s.length;a++){if(s[a].scale>i)continue;const e=Number(a),t=[e-3,e,e+3,e+6];for(const n of t)n>-1&&n<s.length&&l.push(s[n].scale);break}return l.sort(((e,t)=>e-t))}function S(e,t){const{view:n,layerAdapter:i}=e;if(!n)throw new a.default("scale-range:invalid-parameters","'view' is required");const l=i.fullExtent,o=i.minScale||m,r=i.maxScale||d,c=t.minScale||0,u=t.maxScale||0;let f=null!=l?(0,s.X_)(n,l):0;return f=f<o&&f>r?f:0,{scales:[o,r,c,u,f].map(Math.round).sort(((e,t)=>e-t)).filter(((e,t,n)=>!!e&&n.indexOf(e)===t)).filter(((e,t,n)=>!t||Math.abs(e-n[t-1])>5)),fullExtentScale:f}}function x(e,t){const{spatialStatistics:n,minScale:s,maxScale:r}=t;if(!("avgSize"in n)||!n.avgSize)throw new a.default("size-range:insufficient-info","average polygon size is invalid");const c=n.avgSize,{view:u}=e;if(!u)throw new a.default("scale-range:invalid-parameters","'view' is required");const{resolution:f,scale:m}=u,d=f/m,{scales:g,fullExtentScale:p}=S(e,{minScale:s,maxScale:r}),v=[],w=[];return g.forEach(((e,t)=>{const{min:n,max:a}=function(e,t){const n=Math.ceil(e/t);let a=Math.ceil(n/4);a<4?a=4:a>16&&(a=16);const i=5*a;return{min:a,max:i<50?50:i}}(c,d*e),s=g.indexOf(p),l=s>-1&&t>s?2:1;v.push(new o.default({value:e,size:(0,i.PN)(n/l)})),w.push(new o.default({value:e,size:(0,i.PN)(a/l)}))})),{minSize:new l.default({valueExpression:"$view.scale",stops:v}),maxSize:new l.default({valueExpression:"$view.scale",stops:w})}}async function z(e){const t=await async function(e){const{view:t}=e;if(!(e&&t&&e.layer))throw new a.default("size-range:missing-parameters","'view' and 'layer' parameters are required");e.forBinning&&(0,c.p)(e,"size-range");const{layer:n,...i}=e,s=e.forBinning?u.Mi:u.J4,l=(0,u.Jg)(n,s,e.forBinning);if(!l)throw new a.default("size-range:invalid-parameters","'layer' must be one of these types: "+(0,u.Ho)(s).join(", "));const o={layerAdapter:l,...i,view:t};await t.when();const r=null!=o.signal?{signal:o.signal}:null;await l.load(r);const f=l.geometryType;if("point"!==f&&"multipoint"!==f&&"polyline"!==f&&"polygon"!==f)throw new a.default("size-range:not-supported",`sizeRange is not supported for geometryType: ${f}`);return o}(e),{view:n,layerAdapter:s,signal:f,filter:m}=t,d=await(0,r.default)({layer:s,view:n,signal:f,filter:m});switch(s.geometryType){case"point":case"multipoint":return function(e,t){const{minScale:n,maxScale:s}=t,r=h(e,{minScale:n,maxScale:s});if(!r.length)throw new a.default("scale-range:insufficient-info","not enough scale values");return{minSize:new l.default({valueExpression:"$view.scale",stops:r.map(((e,t)=>new o.default({value:e,size:(0,i.PN)(g[t])})))}),maxSize:new l.default({valueExpression:"$view.scale",stops:r.map(((e,t)=>new o.default({value:e,size:(0,i.PN)(p[t])})))})}}(t,d);case"polyline":return function(e,t){const{minScale:n,maxScale:s}=t,r=h(e,{minScale:n,maxScale:s});if(!r.length)throw new a.default("scale-range:insufficient-info","not enough scale values");return{minSize:new l.default({valueExpression:"$view.scale",stops:r.map(((e,t)=>new o.default({value:e,size:(0,i.PN)(v[t])})))}),maxSize:new l.default({valueExpression:"$view.scale",stops:r.map(((e,t)=>new o.default({value:e,size:(0,i.PN)(w[t])})))})}}(t,d);case"polygon":return x(t,d);case"mesh":case"multipatch":return null}return null}},79538:(e,t,n)=>{n.d(t,{BV:()=>M,EG:()=>h,Lk:()=>b,Ll:()=>k,Np:()=>u,R3:()=>D,SO:()=>g,T1:()=>$,UH:()=>c,Wy:()=>S,XR:()=>d,aM:()=>T,fs:()=>y,i0:()=>E,i3:()=>w});var a=n(66845),i=n(95011),s=n(96247),l=n(76983),o=n(73210),r=n(40731);const c=",",u={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},f="percent-of-total",m="field",d={exclude:["median"]},g={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},p=new Set(["integer","small-integer"]);let v=null;const w=["date","date-only","timestamp-offset"];function y(e){return(0,i.isDateField)(e)||(0,i.isDateOnlyField)(e)||(0,i.isTimestampOffsetField)(e)}async function h(e){const{field:t,field2:n,field3:a,normalizationField:i,valueExpression:l}=e;let o=[];if(l){if(!v){const{arcadeUtils:e}=await(0,s.lw)();v=e}o=v.extractFieldNames(l)}return t&&o.push(t),n&&o.push(n),a&&o.push(a),i&&o.push(i),o}function S(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=f)),t??void 0}function x(e){return String(e).padStart(2,"0")}function z(e,t,n){let a;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),a=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${x((n?e.getMonth():e.getUTCMonth())+1)}-${x(n?e.getDate():e.getUTCDate())} ${x(n?e.getHours():e.getUTCHours())}:${x(n?e.getMinutes():e.getUTCMinutes())}:${x(n?e.getSeconds():e.getUTCSeconds())}'`):a=e,a}function T(e,t,n,a){const{hasQueryEngine:i}=e,s=`(${z(n,b(e,n),i)} - ${z(t,b(e,t),i)})`;let l=g[a],o="/";return l<1&&(l=1/l,o="*"),{sqlExpression:1===l?s:`(${s} ${o} ${l})`,sqlWhere:null}}function b(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,i.isDateField)(n))return"field"}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;for(const n in t)if(t[n].includes(e))return n}function $(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null;return e&&("string"==typeof e?t.includes(e)&&(a=e):a=(0,l.q3)(e)),n?a||"gray":a}function D(e,t){const n=t&&e.getField(t);return!!n&&p.has(n.type)}function k(e){return`cast(${e} as float)`}function E(e,t){const{format:n,timeZoneOptions:i,fieldType:s}=t??{};let l,c;if(i&&({timeZone:l,timeZoneName:c}=(0,r.hv)(i.layerTimeZone,i.datesInUnknownTimezone,i.viewTimeZone,(0,a.J2)(n||"short-date-short-time"),s)),"string"==typeof e&&isNaN(Date.parse("time-only"===s?`1970-01-01T${e}Z`:e)))return e;switch(s){case"date-only":{const t=(0,a.J2)(n||"short-date");return"string"==typeof e?(0,a.iS)(e,{...t}):(0,a.Yq)(e,{...t,timeZone:o.n$})}case"time-only":{const t=(0,a.J2)(n||"short-time");return"string"==typeof e?(0,a.F8)(e,t):(0,a.Yq)(e,{...t,timeZone:o.n$})}case"timestamp-offset":{if(!l&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||i?(0,a.J2)(n||"short-date-short-time"):void 0,s=t?{...t,timeZone:l,timeZoneName:c}:void 0;return"string"==typeof e?(0,a.Ey)(e,s):(0,a.Yq)(e,s)}default:{const t=n||i?(0,a.J2)(n||"short-date-short-time"):void 0;return(0,a.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:l,timeZoneName:c}:void 0)}}}},85151:(e,t,n)=>{n.d(t,{p:()=>s,z:()=>i});var a=n(74719);const i="aggregateCount";function s(e,t){if(!e.view)throw new a.default(`${t}:missing-parameters`,"'view' parameter is required for binning");if(e.sqlExpression)throw new a.default(`${t}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if("3d"===e.view.type)throw new a.default(`${t}:invalid-parameters`,"3d view is not supported for binning")}}}]);