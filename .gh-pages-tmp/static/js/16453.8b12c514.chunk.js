"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[16453,78196,79538],{16453:(e,t,n)=>{n.d(t,{G9:()=>c,getRampStops:()=>a,vt:()=>f,y0:()=>u});var o=n(88102),l=n(78196);const r=new o.default([64,64,64]);function i(e,t){const n=[],o=e.length-1;return 5===e.length?n.push(0,2,4):n.push(0,o),e.map(((e,r)=>n.includes(r)?(0,l.Dd)(e,r,o,t):null))}async function a(e,t,o){let l=!1,r=[],a=[];if(e.stops){const t=e.stops;r=t.map((e=>e.value)),l=t.some((e=>!!e.label)),l&&(a=t.map((e=>e.label)))}const u=r[0],c=r[r.length-1];if(null==u&&null==c)return null;const f=l?null:i(r,o);return(await Promise.all(r.map((async(o,r)=>({value:o,color:"opacity"===e.type?await s(o,e,t):(await Promise.resolve().then(n.bind(n,71237))).getColor(e,o),label:l?a[r]:f?.[r]??""}))))).reverse()}async function s(e,t,l){const i=new o.default(l??r),a=(await Promise.resolve().then(n.bind(n,71237))).getOpacity(t,e);return null!=a&&(i.a=a),i}function u(e){let t=!1,n=[],o=[];n=e.map((e=>e.value)),t=e.some((e=>!!e.label)),t&&(o=e.map((e=>e.label??"")));const l=n[0],r=n[n.length-1];if(null==l&&null==r)return null;const a=t?null:i(n);return n.map(((n,l)=>({value:n,color:c(n,e),label:t?o[l]:a?.[l]??""}))).reverse()}function c(e,t){const{startIndex:n,endIndex:l,weight:r}=function(e,t){let n=0,o=t.length-1;return t.some(((t,l)=>e<t.value?(o=l,!0):(n=l,!1))),{startIndex:n,endIndex:o,weight:(e-t[n].value)/(t[o].value-t[n].value)}}(e,t);if(n===l)return t[n].color;const i=o.default.blendColors(t[n].color,t[l].color,r);return new o.default(i)}function f(e,t){let n=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach(((l,r)=>{0===r?n.push({value:t.max,color:new o.default(l.toColor),label:"high"}):n.push({value:null,color:new o.default(l.toColor),label:""}),r===e.colorRamps.length-1?n.push({value:t.min,color:new o.default(l.fromColor),label:"low"}):n.push({value:null,color:new o.default(l.fromColor),label:""})}));else{let l,r;e&&"algorithmic"===e.type?(l=e.fromColor,r=e.toColor):(l=[0,0,0,1],r=[255,255,255,1]),n=[{value:t.max,color:new o.default(r),label:"high"},{value:t.min,color:new o.default(l),label:"low"}]}return n}},22420:(e,t,n)=>{n.d(t,{GP:()=>d,LI:()=>c,lc:()=>s,u5:()=>u});n(88677);var o=n(23224);const l=/^-?(\d+)(\.(\d+))?$/i;function r(e,t){return e-t}function i(e,t){let n,o;return n=Number(e.toFixed(t)),n<e?o=n+1/10**t:(o=n,n-=1/10**t),n=Number(n.toFixed(t)),o=Number(o.toFixed(t)),[n,o]}function a(e,t,n,o,l){const r=u(e,t,n,o),i=null==r.previous||r.previous<=l,a=null==r.next||r.next<=l;return i&&a||r.previous+r.next<=2*l}function s(e){const t=String(e),n=t.match(l);if(n?.[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(t.toLowerCase().includes("e")){const e=t.split("e"),n=e[0],o=e[1];if(n&&o){const e=Number(n);let t=Number(o);const l=t>0;l||(t=Math.abs(t));const r=s(e);return l?(r.integer+=t,t>r.fractional?r.fractional=0:r.fractional-=t):(r.fractional+=t,t>r.integer?r.integer=1:r.integer-=t),r}}return{integer:0,fractional:0}}function u(e,t,n,o){const l={previous:null,next:null};if(null!=n){const o=e-n,r=t-n-o;l.previous=Math.floor(Math.abs(100*r/o))}if(null!=o){const n=o-e,r=o-t-n;l.next=Math.floor(Math.abs(100*r/n))}return l}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.slice(),{tolerance:o=2,strictBounds:l=!1,indexes:u=n.map(((e,t)=>t))}=t;u.sort(r);for(let r=0;r<u.length;r++){const e=u[r],t=n[e],c=0===e?null:n[e-1],f=e===n.length-1?null:n[e+1],d=s(t).fractional;if(d){let s,u=0,A=!1;for(;u<=d&&!A;){const e=i(t,u);s=l&&0===r?e[1]:e[0],A=a(t,s,c,f,o),u++}A&&(n[e]=s)}}return n}const f={maximumFractionDigits:20};function d(e){return(0,o.ZV)(e,f)}},78196:(e,t,n)=>{n.d(t,{Dd:()=>c,E2:()=>f,Zo:()=>A,_l:()=>g,getDateFormatOptions:()=>m,kC:()=>u,l5:()=>s,uM:()=>d});var o=n(87431),l=n(95011),r=n(22420),i=n(79538),a=n(99071);const s="<",u=">";function c(e,t,n,o){let l="";return 0===t?l=`${s} `:t===n&&(l=`${u} `),l+(o?(0,i.i0)(e,o):(0,r.GP)(e))}const f=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function d(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;let o=null,l=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;o=t.stops[0].value,l=t.stops[t.stops.length-1].value}const r=null!=o&&null!=l?o+(l-o)/2:0,{getColor:i}=await Promise.resolve().then(n.bind(n,71237));return i(t,r)??null}async function A(e,t){const n=e.trailCap,o=e.trailWidth||1,l=t||await d(e)||e.color;return new a.default({cap:n,color:l,width:o})}function m(e,t,n){const r=function(e,t){if(!t.field)return null;if("featureReduction"in e)switch(e.featureReduction?.type){case"cluster":case"binning":{const n=e.featureReduction.fields.find((e=>{let{name:n}=e;return n.toLowerCase()===t.field.toLowerCase()}));return n&&"getField"in e?e.getField(n.onStatisticField):null}}return"getField"in e?e.getField?.(t.field):null}(e,t);if(!r||!(0,i.fs)(r)&&!(0,l.isTimeOnlyField)(r))return null;let a=function(e,t){const n="popupTemplate"in e?e.popupTemplate?.fieldInfos:null;if(n?.length&&t)return n.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))?.format?.dateFormat}(e,r.name);if(!a&&"date"===r.type){let e=0,n=0;t.stops?(e=t.stops?.at(0)?.value??e,n=t.stops?.at(-1)?.value??n):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,n=t.maxDataValue??n),a=n-e>2*o.vf.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:a,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function g(e){if("authoringInfo"in e)return e.authoringInfo?.visualVariables?.find((e=>{let{theme:t}=e;return"reference-size"===t}))}},79538:(e,t,n)=>{n.d(t,{BV:()=>U,EG:()=>w,Lk:()=>T,Ll:()=>N,Np:()=>c,R3:()=>M,SO:()=>m,T1:()=>F,UH:()=>u,Wy:()=>y,XR:()=>A,aM:()=>I,fs:()=>v,i0:()=>k,i3:()=>h});var o=n(66845),l=n(95011),r=n(96247),i=n(76983),a=n(73210),s=n(40731);const u=",",c={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},f="percent-of-total",d="field",A={exclude:["median"]},m={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},g=new Set(["integer","small-integer"]);let p=null;const h=["date","date-only","timestamp-offset"];function v(e){return(0,l.isDateField)(e)||(0,l.isDateOnlyField)(e)||(0,l.isTimestampOffsetField)(e)}async function w(e){const{field:t,field2:n,field3:o,normalizationField:l,valueExpression:i}=e;let a=[];if(i){if(!p){const{arcadeUtils:e}=await(0,r.lw)();p=e}a=p.extractFieldNames(i)}return t&&a.push(t),n&&a.push(n),o&&a.push(o),l&&a.push(l),a}function y(e){let t=e.normalizationType;return t||(e.normalizationField?t=d:null!=e.normalizationTotal&&(t=f)),t??void 0}function b(e){return String(e).padStart(2,"0")}function C(e,t,n){let o;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),o=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${b((n?e.getMonth():e.getUTCMonth())+1)}-${b(n?e.getDate():e.getUTCDate())} ${b(n?e.getHours():e.getUTCHours())}:${b(n?e.getMinutes():e.getUTCMinutes())}:${b(n?e.getSeconds():e.getUTCSeconds())}'`):o=e,o}function I(e,t,n,o){const{hasQueryEngine:l}=e,r=`(${C(n,T(e,n),l)} - ${C(t,T(e,t),l)})`;let i=m[o],a="/";return i<1&&(i=1/i,a="*"),{sqlExpression:1===i?r:`(${r} ${a} ${i})`,sqlWhere:null}}function T(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,l.isDateField)(n))return"field"}}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;for(const n in t)if(t[n].includes(e))return n}function F(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=null;return e&&("string"==typeof e?t.includes(e)&&(o=e):o=(0,i.q3)(e)),n?o||"gray":o}function M(e,t){const n=t&&e.getField(t);return!!n&&g.has(n.type)}function N(e){return`cast(${e} as float)`}function k(e,t){const{format:n,timeZoneOptions:l,fieldType:r}=t??{};let i,u;if(l&&({timeZone:i,timeZoneName:u}=(0,s.hv)(l.layerTimeZone,l.datesInUnknownTimezone,l.viewTimeZone,(0,o.J2)(n||"short-date-short-time"),r)),"string"==typeof e&&isNaN(Date.parse("time-only"===r?`1970-01-01T${e}Z`:e)))return e;switch(r){case"date-only":{const t=(0,o.J2)(n||"short-date");return"string"==typeof e?(0,o.iS)(e,{...t}):(0,o.Yq)(e,{...t,timeZone:a.n$})}case"time-only":{const t=(0,o.J2)(n||"short-time");return"string"==typeof e?(0,o.F8)(e,t):(0,o.Yq)(e,{...t,timeZone:a.n$})}case"timestamp-offset":{if(!i&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||l?(0,o.J2)(n||"short-date-short-time"):void 0,r=t?{...t,timeZone:i,timeZoneName:u}:void 0;return"string"==typeof e?(0,o.Ey)(e,r):(0,o.Yq)(e,r)}default:{const t=n||l?(0,o.J2)(n||"short-date-short-time"):void 0;return(0,o.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:i,timeZoneName:u}:void 0)}}}}}]);