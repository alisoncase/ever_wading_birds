"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79195],{42888:(e,t,n)=>{n.d(t,{Dy:()=>f,UD:()=>h,fO:()=>c,gy:()=>r,iT:()=>u,xy:()=>l});var i=n(50925);const s=()=>i.A.getLogger("esri.views.2d.engine.webgl.alignmentUtils");var a,r,o;function l(e){if(!e)return a.Center;switch(e){case"Left":case"left":return a.Left;case"Right":case"right":return a.Right;case"Justify":return s().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),a.Center;case"Center":case"center":return a.Center}}function h(e){if(!e)return r.Center;switch(e){case"Top":case"top":return r.Top;case"Center":case"middle":return r.Center;case"Baseline":case"baseline":return r.Baseline;case"Bottom":case"bottom":return r.Bottom}}function c(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${e}`),["center","middle"]}}function u(e){switch(e){case a.Right:case"right":return-1;case a.Center:case"center":return 0;case a.Left:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function f(e){switch(e){case r.Top:case"top":return 1;case r.Center:case"middle":return 0;case r.Bottom:case r.Baseline:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}(o=a||(a={}))[o.Left=-1]="Left",o[o.Center=0]="Center",o[o.Right=1]="Right",function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(r||(r={}))},43579:(e,t,n)=>{n.d(t,{G2:()=>x,Lb:()=>T,Xj:()=>_,bF:()=>p,gS:()=>L,lm:()=>b});var i=n(62631),s=(n(21265),n(53957)),a=n(99961),r=n(95011),o=(n(76519),n(62155),n(83014),n(23621),n(45608)),l=(n(36917),n(19609),n(7282)),h=(n(12969),n(56488)),c=n(26964),u=n(67823),f=n(88171),d=n(71237),m=n(66809);let g=0;const p="expression/";function x(e){return"hasVisualVariables"in e&&e.hasVisualVariables()?e.visualVariables.filter((e=>!d.viewScaleRE.test(e.valueExpression)&&(!("target"in e)||"outline"!==e.target))):[]}function y(e,t){if(!t)return null;const n=(0,m.Rm)(e);return n?.find((e=>e.name.toLowerCase()===t.toLowerCase()))}function b(e,t,n){let i=null;if(n&&"featureReduction"in e){const t=e.featureReduction;t&&"popupTemplate"in t&&t.popupTemplate&&(i=t.popupTemplate.fieldInfos)}else"popupTemplate"in e&&e.popupTemplate&&(i=e.popupTemplate.fieldInfos);const s=n?y(e,t):e.getField(t);let a=null;if(i&&i.some((e=>!(!e||e.fieldName?.toLowerCase()!==s?.name.toLowerCase())&&(a=e.clone(),!0))),!a){const e=r.numericTypes.includes(s.type),t="integer"===s.type||"small-integer"===s.type;a=new c.default({fieldName:s.name,isEditable:s.editable,visible:!0,format:e?new u.default({places:t?0:2,digitSeparator:!0}):void 0})}return a.label||(a.label=s.alias),a}function v(e){const{expression:t,title:n,returnType:i}=e;return new h.default({name:"expr"+g++,expression:t,title:n,returnType:i})}function w(e){const t="number"===e.returnType?new u.default({places:2,digitSeparator:!0}):void 0;return new c.default({fieldName:`${p}${e.name}`,visible:!0,format:t})}async function _(e){const t=await(0,s.ud)("esri/smartMapping/t9n/smartMapping"),{renderer:n,layer:r,normFieldExpressionTemplate:o,isFeatureReduction:l}=e,h=[],c=[],u=(0,f.getAttributes)(n,x);for(const i of u)if("field"===i.type)h.push(b(r,i.field,l));else if("normalized-field"===i.type){const e=l?y(r,i.field):r.getField(i.field),n=l?y(r,i.normalizationField):r.getField(i.normalizationField),s=v({type:"expression",expression:`\n      $feature["${e.name}"];\n      $feature["${n.name}"];\n      ${"percentage"===o?`($feature["${e.name}"] / $feature["${n.name}"]) * 100;`:`$feature["${e.name}"] / $feature["${n.name}"];`}\n      `,title:(0,a.V)("percentage"===o?t.normFieldLabelAsPercent:t.normFieldLabel,{expression1:e.alias,expression2:n.alias}),returnType:"number"});h.push(w(s),b(r,i.field,l),b(r,i.normalizationField,l)),c.push(s)}else if("expression"===i.type){const e=v(i);h.push(w(e)),c.push(e)}return{fieldInfos:(0,i.Am)(h,((e,t)=>e.fieldName===t.fieldName)),expressionInfos:(0,i.Am)(c,((e,t)=>e.expression===t.expression))}}async function T(e,t,n){const{fieldInfos:i,expressionInfos:r}=t,h=await(0,s.ud)("esri/smartMapping/t9n/smartMapping");if(i.length>2)return[new o.default({fieldInfos:i})];const c=[];for(const s of i){const t=s.fieldName||"";let i=s.label;if(!i){const s=n?y(e,t):e.getField(t);if(s)i=s.alias||t;else if(r){const e=t.split(p)[1],n=r[r.findIndex((t=>t.name===e))];n&&(i=n.title||n.name)}}c.push(new l.default({text:(0,a.V)(h.fieldInfo,{fieldLabel:i,fieldValue:`{${t}}`})}))}return c}function L(e){return!(!("normalizationField"in e)||!e.normalizationField)||"hasVisualVariables"in e&&e.hasVisualVariables()&&e.visualVariables.some((e=>!(!("normalizationField"in e)||!e.normalizationField)))}},44320:(e,t,n)=>{n.d(t,{Dv:()=>u,Qb:()=>l,Wx:()=>g,eU:()=>y,pq:()=>h});var i=n(62631),s=n(99521),a=n(85074),r=n(43579),o=n(79538);const l="cluster_count";function h(e,t){return e.split(`cluster_${t}_`).pop()}function c(e,t){const n=function(e){if(!e)return null;const{field:t,valueExpression:n,normalizationField:i,normalizationType:s,normalizationTotal:r}=e;let l=null;if(n)l=n;else if(t){const e=(0,o.Wy)({normalizationType:s,normalizationField:i,normalizationTotal:r});if(e){const n=e.toLowerCase();if(l=t.toLowerCase()+",norm:"+n,i)l+=","+i.toLowerCase();else if("percent-of-total"===n){let e=r;(0,a.gf)(e)&&0!==e||(e=null),l+=","+e}}}return l}(e);return`${t}_${null!=n?function(e){return(0,s.d)(e)}(n):e.field}`}function u(e,t){return`cluster_${c(e,t)}`}function f(e,t){const n=t.getField(e);return n?.type}function d(e,t){const n="rotation"===t.type?t.rotationType:null,i=t.legendOptions?.title,s=t.field,a=s?f(s,e):null;return{field:s,fieldType:null!=a?a:null,rotationType:n,valueExpression:t.valueExpression,valueExpressionTitle:t.valueExpressionTitle||t.valueExpression&&i,normalizationField:"normalizationField"in t?t.normalizationField:null,vvType:t.type}}function m(e){return e?e.replaceAll('"','\\"'):""}function g(e,t,n){return`\n  var uvInfos = [${function(e){return e.map((e=>`{\n        "value": "${String(e.value)}",\n        "label": "${m(String(e.label))}"\n      }`))}(e).join(", ")}];\n  var predominantType = Text($feature["${t}"]);\n  var label = "${m(n)}";\n\n  for (var i = 0; i < Count(uvInfos); i++) {\n    if (uvInfos[i].value == predominantType) {\n      label = uvInfos[i].label;\n      break;\n    }\n  }\n\n  return label;\n  `}function p(e,t){const n=[c(e,t)];return"date"===e.fieldType&&n.push(e.fieldType.toLowerCase()),e.rotationType&&n.push(e.rotationType.toLowerCase()),n.join("_")}function x(e,t){return{statisticHash:p(e,t),attributeInfo:e,statisticType:t}}function y(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=[],a=function(e,t){const n="field"in t?t.field:null,i=n?f(n,e):null;return{field:n,fieldType:null!=i?i:null,valueExpression:"valueExpression"in t?t.valueExpression:null,valueExpressionTitle:"valueExpressionTitle"in t?t.valueExpressionTitle:null,normalizationField:"normalizationField"in t?t.normalizationField:null,normalizationType:"normalizationType"in t?t.normalizationType:null,normalizationTotal:"normalizationTotal"in t?t.normalizationTotal:null}}(e,t);"class-breaks"===t.type?s.push(x(a,"avg")):"unique-value"===t.type&&s.push(x(a,"type"));const o=(0,r.G2)(t);for(const i of o){const t=d(e,i);s.push(x(t,"avg"))}return n?(0,i.Am)(s,((e,t)=>e.statisticHash===t.statisticHash)):s}},55786:(e,t,n)=>{n.d(t,{Hg:()=>c,Rl:()=>u,ik:()=>h,yb:()=>l});var i=n(56808),s=n(24280),a=n(16378),r=n(44320),o=n(89320);function l(e,t){const n=t.featureReduction;if("fields"in n)for(const i of n.fields)if(i.name.toLowerCase()===e.toLowerCase())return i;return null}function h(e){return`\n  $feature["${e}"];\n  var value = $feature["${e}"];\n  var num = Count(Text(Round(value)));\n  var label = When(\n    num < 4, Text(value, "#.#"),\n    num == 4, Text(value / Pow(10, 3), "#.0k"),\n    num <= 6, Text(value / Pow(10, 3), "#k"),\n    num == 7, Text(value / Pow(10, 6), "#.0m"),\n    num > 7, Text(value / Pow(10, 6), "#m"),\n    Text(value, "#,###")\n  );\n  return label;\n  `}function c(e,t,n,i){const s=n.name;if("mode"===n.statisticType){const o="getFieldDomain"in e?e.getFieldDomain(n.onStatisticField):null;let l=null;return"coded-value"===o?.type?l=o.codedValues.map((e=>new a.default({value:e.code,label:e.name}))):"unique-value"===t?.type&&null!=t.field&&t.field.toLowerCase()===s.toLowerCase()&&(l=(t.uniqueValueInfos??[]).map((e=>e.clone()))),l?(0,r.Wx)(l,s,i):`Text($feature["${s}"])`}return h(s)}function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new o.default({haloColor:"#373837",haloSize:"1px",color:"#f0f0f0",font:{family:"Noto Sans",size:"12px",weight:"bold"}});return new i.default({symbol:n,deconflictionStrategy:"none",labelPlacement:t?"always-horizontal":"center-center",labelExpressionInfo:new s.A({expression:e})})}},75201:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(74715);class s{constructor(e,t,n,s){this.transformedX=0,this.transformedY=0,this.center=(0,i.fA)(e,t),this.centerT=(0,i.vt)(),this.halfWidth=n/2,this.halfHeight=s/2,this.width=n,this.height=s}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new s(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const n=Math.abs(e.centerT[0]-this.centerT[0]),i=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+t)/n,a=(e.halfHeight+this.halfHeight+t)/i,r=Math.min(s,a);return Math.log2(r)}extend(e){const t=Math.min(this.xmin,e.xmin),n=Math.min(this.ymin,e.ymin),i=Math.max(this.xmax,e.xmax)-t,s=Math.max(this.ymax,e.ymax)-n,a=t+i/2,r=n+s/2;this.width=i,this.height=s,this.halfWidth=i/2,this.halfHeight=s/2,this.x=a,this.y=r}static deserialize(e){const t=e.readF32(),n=e.readF32(),i=e.readInt32(),a=e.readInt32();return new s(t,n,i,a)}}},79195:(e,t,n)=>{n.r(t),n.d(t,{getLabelSchemes:()=>x});var i=n(74719),s=n(53957),a=n(16804),r=n(77690),o=n(89793);async function l(e,t,n){const i={type:"cim-rasterization-info",resource:{type:"text",textString:e.text,font:e.font}},s=t.textureManager.rasterizeItem(i,n),l=await s;return(0,o.Tl)(l,{angle:e.angle??0,xOffset:(0,a.Lz)(e.xoffset??0),yOffset:(0,a.Lz)(e.yoffset??0),lineHeight:r.DY*Math.max(.25,e.lineHeight),maxLineWidth:Math.max(32,Math.min((0,a.Lz)(e.lineWidth),512)),decoration:e.font.decoration,scale:Math.min(Math.round((0,a.Lz)(e.font.size)),127)/r.eG,horizontalAlignment:"center",verticalAlignment:"middle",useCIMAngleBehavior:!1,hasBackground:!!e.backgroundColor,borderLineSizePx:(0,a.Lz)(e.borderLineSize)}).boundsT}let h=l;async function c(e,t,n){return h(e,t.stage,n)}async function u(e,t){await t.when();const n=e.clone();n.text="999";const i=await c(n,t);return(0,a.PN)(i.width)}var f=n(55786),d=n(44320),m=n(14915);async function g(e){const{layer:t,renderer:n,view:s}=e;await Promise.all([t.load(),s.when()]);const a=n||t.renderer;if(!(0,m.k)(a))throw new i.default("clusters-label-schemes:invalid-parameters","'renderer' is not valid");return{layer:t,renderer:a,view:s}}async function p(e){const{renderer:t,view:n,statInfo:i}=e,s=i?.statisticType,a=i?(0,d.Dv)(i.attributeInfo,s):d.Qb,r="type"===s?function(e,t,n){const i="unique-value"===e.type?e.uniqueValueInfos??[]:[];return(0,d.Wx)(i,t,n)}(t,a,e.noneValueLabel):(0,f.ik)(a),o=(0,f.Rl)(r);return{name:i?`clusters-${s}-${(0,d.pq)(a,s)}`:"clusters-count",labelingInfo:[o],clusterMinSize:await u(o.symbol,n),fieldName:a}}async function x(e){const[{renderer:t,layer:n,view:a},r]=await Promise.all([g(e),(0,s.ud)("esri/smartMapping/t9n/smartMapping")]),o=r.clusters.predominantNoneValue;if(!t)return null;let l=null;const h=[];if(e.field){const s=(0,f.yb)(e.field,n);if(!s)throw new i.default("clusters-label-schemes:invalid-parameters","'field' is not a valid aggregate field");const{name:r}=s,c=(0,f.Hg)(n,t,s,o),d=(0,f.Rl)(c);return l={name:`clusters-${r}`,labelingInfo:[d],clusterMinSize:await u(d.symbol,a),fieldName:r},{primaryScheme:l,secondarySchemes:h}}const c=function(e){const t=new Map;for(const n of e)"size"===n.attributeInfo.vvType?t.set(n.statisticHash,n):t.has(n.statisticHash)||t.set(n.statisticHash,n);return[...t.values()]}((0,d.eU)(n,t,!1));for(const i of c){const e=await p({renderer:t,view:a,statInfo:i,noneValueLabel:o});"size"===i.attributeInfo.vvType?l=e:h.push(e)}const m=await p({renderer:t,view:a});return l?h.unshift(m):l=m,{primaryScheme:l,secondarySchemes:h}}},89793:(e,t,n)=>{n.d(t,{Tl:()=>_});var i=n(98352),s=n(95005),a=n(32006),r=n(74715),o=n(42888),l=n(99500),h=n(75201);const c=4,u=22+c,f=3,d=Math.PI/180;class m{constructor(e,t,n,i){this._rotationT=(0,s.vt)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const a=n.rect,r=new Float32Array(8);e*=i,t*=i;const o=n.code?a.width*i:n.metrics.width,l=n.code?a.height*i:n.metrics.height;this.width=o,this.height=l,r[0]=e,r[1]=t,r[2]=e+o,r[3]=t,r[4]=e,r[5]=t+l,r[6]=e+o,r[7]=t+l,this._data=r,this._setTextureCoords(a),this._scale=i,this._mosaic=n,this.x=e,this.y=t,this.maxOffset=Math.max(e+o,t+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,(0,i.$0)(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:t}=this._mosaic.metrics,n=t*this._scale,a=Math.abs(e)*this._scale,r=new Float32Array(8);r[0]=this.x,r[1]=this.y,r[2]=this.x+n,r[3]=this.y,r[4]=this.x,r[5]=this.y+a,r[6]=this.x+n,r[7]=this.y+a;const o=(0,i.lw)((0,s.vt)(),this._rotationT,this._transform);(0,s.gb)(r,r,o);let l=1/0,c=1/0,u=-1/0,f=-1/0;for(let i=0;i<4;i++){const e=r[2*i],t=r[2*i+1];l=Math.min(l,e),c=Math.min(c,t),u=Math.max(u,e),f=Math.max(f,t)}const d=u-l,m=f-c,g=l+d/2,p=c+m/2;this._bounds=new h.A(g,p,d,m)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=(0,i.lw)((0,s.vt)(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],(0,a.l0)(this._offsets.topLeft,this._offsets.topLeft,e),(0,a.l0)(this._offsets.topRight,this._offsets.topRight,e),(0,a.l0)(this._offsets.bottomLeft,this._offsets.bottomLeft,e),(0,a.l0)(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords(e){let{x:t,y:n,width:i,height:s}=e;this._texcoords={topLeft:[t,n],topRight:[t+i,n],bottomLeft:[t,n+s],bottomRight:[t+i,n+s]}}}const g=(e,t)=>({code:0,page:0,sdf:!0,rect:new l.A(0,0,11,8),textureBinding:t,metrics:{advance:0,height:4,width:e,left:0,top:0}});function p(e,t){return e.forEach((e=>(0,a.l0)(e,e,t))),{topLeft:e[0],topRight:e[1],bottomLeft:e[2],bottomRight:e[3]}}class x{constructor(e,t,n){this._rotation=0,this._decorate(e,t,n),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=t.length>1,this._hasRotation=0!==n.angle,this._transform=this._createGlyphTransform(this.bounds,n),this._borderLineSizePx=n.borderLineSizePx,(n.borderLineSizePx||n.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const i of e)i.setTransform(this._transform)}setRotation(e){if(0===e&&0===this._rotation)return;this._rotation=e;const t=this._transform,n=(0,i.$0)((0,s.vt)(),e);(0,i.lw)(t,n,t);for(const i of this.glyphs)i.setTransform(this._transform)}_decorate(e,t,n){if(!n.decoration||"none"===n.decoration||!e.length)return;const i=n.scale,s="underline"===n.decoration?u:16,a=e[0].textureBinding;for(const r of t){const t=r.startX*i,n=r.startY*i,o=(r.width+r.glyphWidthEnd)*i;e.push(new m(t,n+s*i,g(o,a),1))}}shapeBackground(e){const t=(1.5+(this._borderLineSizePx||0))/2,n=this._borderLineSizePx?t:0,{xmin:i,ymin:s,xmax:a,ymax:r,x:o,y:l,width:c,height:u}=this.bounds,f=[i-8,s-8],d=[a+8,s-8],m=[i-8,r+8],g=[a+8,r+8],x=p([[f[0]-t,f[1]-t],[d[0]+t,d[1]-t],[f[0]+n,f[1]+n],[d[0]-n,d[1]+n]],e),y=p([[m[0]+n,m[1]-n],[g[0]-n,g[1]-n],[m[0]-t,m[1]+t],[g[0]+t,g[1]+t]],e),b=p([[f[0]-t,f[1]-t],[f[0]+n,f[1]+n],[m[0]-t,m[1]+t],[m[0]+n,m[1]-n]],e),v=p([[d[0]-n,d[1]+n],[d[0]+t,d[1]-t],[g[0]-n,g[1]-n],[g[0]+t,g[1]+t]],e),w={main:p([f,d,m,g],e),top:x,bot:y,left:b,right:v};return[new h.A(o,l,c+2*t,u+2*t),w]}get boundsT(){const e=this.bounds,t=(0,a.hZ)((0,r.vt)(),e.x,e.y);if((0,a.l0)(t,t,this._transform),this._hasRotation){const n=Math.max(e.width,e.height);return new h.A(t[0],t[1],n,n)}return new h.A(t[0],t[1],e.width,e.height)}_createBounds(e){let t=1/0,n=1/0,i=0,s=0;for(const o of e)t=Math.min(t,o.xTopLeft),n=Math.min(n,o.yTopLeft),i=Math.max(i,o.xBottomRight),s=Math.max(s,o.yBottomRight);const a=i-t,r=s-n;return new h.A(t+a/2,n+r/2,a,r)}_createGlyphTransform(e,t){const n=d*t.angle,o=(0,s.vt)(),l=(0,r.vt)();return(0,i.Tl)(o,o,(0,a.hZ)(l,t.xOffset,-t.yOffset)),t.useCIMAngleBehavior?(0,i.e$)(o,o,n):((0,i.Tl)(o,o,(0,a.hZ)(l,e.x,e.y)),(0,i.e$)(o,o,n),(0,i.Tl)(o,o,(0,a.hZ)(l,-e.x,-e.y))),o}}class y{constructor(e,t,n,i,s,a){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(t,n)),this.end=Math.max(0,Math.max(t,n)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=i,this.yMin=s,this.yMax=a}}const b=e=>10===e,v=e=>32===e;function w(e,t){let n=0;for(let a=0;a<e.length;a++){const{width:t}=e[a];n=Math.max(t,n)}const i="underline"===t.decoration?c:0,s=e[0].yMin;return{x:0,y:s,height:e[e.length-1].yMax+t.lineHeight*(e.length-1)+i-s,width:n}}function _(e,t){const n=t.scale,i=new Array,{glyphs:s,isRightToLeft:a}=e,r=function(e,t,n){const i=new Array,s=1/n.scale,a=n.maxLineWidth*s,r=t?e.length-1:0,o=t?-1:e.length,l=t?-1:1;let h=r,c=0,u=0,f=h,d=f,m=0,g=1/0,p=0;for(;h!==o;){const{code:t,metrics:n}=e[h],s=Math.abs(n.top);if(b(t)||v(t)||(g=Math.min(g,s),p=Math.max(p,s+n.height)),b(t))h!==r&&(i.push(new y(e,f,h-l,c,g===1/0?0:g,p)),g=1/0,p=0),c=0,f=h+l,d=h+l,u=0;else if(v(t))d=h+l,u=0,m=n.advance,c+=n.advance;else if(c>a){if(d!==f){const t=d-2*l;c-=m,i.push(new y(e,f,t,c-u,g,p)),g=1/0,p=0,f=d,c=u}else i.push(new y(e,f,h-l,c,g,p)),g=1/0,p=0,f=h,d=h,c=0;c+=n.advance,u+=n.advance}else c+=n.advance,u+=n.advance;h+=l}const x=new y(e,f,h-l,c,g,p);return x.start>=0&&x.end<e.length&&i.push(x),i}(s,a,t),l=r.length?w(r,t):{x:0,y:0,height:0,width:0},h=(0,o.xy)(t.horizontalAlignment),c=(0,o.UD)(t.verticalAlignment),u=c===o.gy.Baseline?1:0,d=u?0:c-1,g=(1-u)*-l.y+d*(l.height/2)+-22*(u?1:0);for(let o=0;o<r.length;o++){const{start:a,end:l,width:c}=r[o];let u=-1*(h+1)*(c/2)-f;const d=(e.isRightToLeft?r.length-1-o:o)*t.lineHeight+g-f;r[o].startX=u,r[o].startY=d;for(let e=a;e<=l;e++){const t=s[e];if(b(t.code))continue;const a=new m(u+t.metrics.left,d-t.metrics.top,t,n);u+=t.metrics.advance,i.push(a)}}return new x(i,r,t)}},99500:(e,t,n)=>{n.d(t,{A:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.x=e,this.y=t,this.width=n,this.height=i}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}}}}]);