"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[11392,17965,32955,38754,98185],{4742:(e,t,i)=>{i.d(t,{CU:()=>o,EY:()=>u,Me:()=>r,P2:()=>m,SR:()=>l,cf:()=>p,hB:()=>d,nU:()=>f,sH:()=>c,yt:()=>h});var a=i(64682),s=i(90772),n=i(49386);const l=64,r=512,o=2.5,c=(0,a.$8)(a.pq/10),u=2,p=(0,s.vt)();n.n.WebMercatorAuxiliarySphere.getExtent(0,0,0,p);const h=(0,s.vt)([-180,-90,180,90]),d="Cannot extend surface to encompass all layers because it would result in too many root tiles.",m="Surface extent is too large for tile resolution at level 0.",f=4},9137:(e,t,i)=>{i.d(t,{D:()=>r,S:()=>c});var a=i(64682),s=i(50821),n=i(17745),l=i(87118);function r(e,t){let{level:i,class:a,...r}=e;const c=o(i);return(0,l.K)(`h${c}`,{...r,"aria-level":String(c),class:(0,n.Ly)(s.D.heading,a),role:"heading"},t)}function o(e){return(0,a.qE)(Math.ceil(e),1,6)}function c(e){return o(e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}},11392:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var a=i(93800),s=i(47412),n=i(89129),l=i(74719),r=i(81933),o=i(50925),c=i(20620),u=i(49959),p=i(79953),h=i(48602),d=(i(21265),i(14746),i(75269)),m=i(78139),f=i(98185);const g=n.default.ofType(s.default);let y=class extends(r.A.LoadableMixin(c.A.EsriPromiseMixin(f.default))){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new g,this.filterFunction=null,this.portal=m.default.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles((0,p.watch)((()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.basemapGalleryGroupQuery3D,this.portal?.user,this.query,this.updateBasemapsCallback]),(()=>this.refresh()),p.initial))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach((e=>e.destroy()))}get state(){return"not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if("loaded"!==this.loadStatus)return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),{signal:t.signal,include3d:"3d"===this.viewType||void 0});await this._updateBasemaps(i)}catch(i){if((0,u.isAbortError)(i))throw i;o.A.getLogger(this).warn(new l.default("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&"string"!=typeof e?Object.keys(e).map((t=>`${t}:${e[t]}`)).join(" AND "):e}async _updateBasemaps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=await this._filterBasemaps(e);t=this.updateBasemapsCallback?await this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}async _filterBasemaps(e){if(!this.filterFunction)return e;const t=e.map(this.filterFunction),i=await Promise.all(t);return e.filter(((e,t)=>i[t]))}};(0,a._)([(0,h.MZ)({readOnly:!0,type:g})],y.prototype,"basemaps",void 0),(0,a._)([(0,h.MZ)()],y.prototype,"filterFunction",void 0),(0,a._)([(0,h.MZ)({type:m.default})],y.prototype,"portal",void 0),(0,a._)([(0,h.MZ)()],y.prototype,"query",void 0),(0,a._)([(0,h.MZ)({readOnly:!0})],y.prototype,"state",null),(0,a._)([(0,h.MZ)()],y.prototype,"updateBasemapsCallback",void 0),(0,a._)([(0,h.MZ)()],y.prototype,"viewType",void 0),y=(0,a._)([(0,d.$)("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],y);const v=y},17965:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});var a=i(93800),s=i(47412),n=i(89129),l=i(81933),r=i(79953),o=i(48602),c=i(32980),u=(i(21265),i(14746),i(75269)),p=i(96913),h=i(70576),d=i(35104),m=i(71374),f=i(76983),g=i(62631),y=i(74719),v=i(49959),b=i(78076),w=i(51064),_=i(37858),T=i(49386),S=i(66380);async function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{basemap:i,view:a}=e;await i.load(t),function(e){if(0===e.baseLayers.length&&0===e.referenceLayers.length)return;const t=e.baseLayers.concat(e.referenceLayers).toArray().filter((e=>!(0,b.ce)(e))).map((e=>function(e){return new y.default("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})}(e)));if(t.length)throw t[0]}(i),await async function(e,t,i){if(0===e.baseLayers.length)return;const a=e.baseLayers.at(0);if((0,b.r$)(a)){try{await a.load(i)}catch(s){const e="basemap-compatibility:unknown-error",t="Unknown basemap compatibility error",{name:i=e,message:a=t,details:n}=s;throw new y.default(i,a,n)}!function(e,t){const i=t.state.viewingMode;if(!i)return;let a,s;if("wmts"===e?.type){const n=(0,_.EM)(e,t.spatialReference,i);if(null==n.tileInfo)throw new y.default("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");a=n.tileInfo,s=n.fullExtent}else a=e.tileInfo,s=e.fullExtent;if(null==a)return;if(!(0,S.M)(a.spatialReference,i))throw new y.default(`basemapgalleryitem:spatial-reference-unsupported-${(0,w._s)(i)}`,`Basemap spatial reference is unsupported in ${(0,w._s)(i)} mode`);const n="vector-tile"===e?.type?a.getCompatibleForVTL(256):null;if(i===w.RT.Global){let t=(0,_._y)(a,s,null,i);if(t&&"vector-tile"===e?.type&&null!=s&&n&&!(0,_._y)(n,s,null,i)&&(t=null),t){const e=a.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new y.default(`basemapgalleryitem:tiling-scheme-unsupported-${e}-global`,"Basemap tiling scheme is unsupported in global mode",{error:t})}}else if(T.n.checkUnsupported(a))throw new y.default("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const l=t.basemapTerrain?.tilingScheme;if(l&&!l.compatibleWith(a)&&("vector-tile"!==e?.type||!n||!l.compatibleWith(n)))throw new y.default("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}(a,t)}}(i,a,t),(0,v.throwIfAborted)(t)}async function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{basemap:i,view:a}=e;(0,v.throwIfAborted)(t);const s=i.baseLayers.find((e=>"unknown"===e.type))?.loadError;if(null!=s)throw s;if(!a||"spatialReferenceLocked"in a&&!a.spatialReferenceLocked)return;if(await i.load(t),(0,v.throwIfAborted)(t),0===i.baseLayers.length)return;const n=i.baseLayers.at(0);if(!(0,b.qK)(n))return;if(i.spatialReference){if(a.spatialReference.equals(i.spatialReference))return;E()}await n.load(t),(0,v.throwIfAborted)(t);const l=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?n.tileInfo?.spatialReference:null]).filter(g.Ru);0!==l.length&&l.every((e=>!a.spatialReference.equals(e)))&&E()}function E(){throw new y.default("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}var x=i(32955),I=i(98185),B=i(11392);const O=n.default.ofType(x.default);let A=class extends l.A{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new O,this.source=new B.default,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([(0,r.watch)((()=>"ready"===this.state?this.compatibilityFunction:null),(()=>this._updateItems())),(0,r.on)((()=>this.source?.basemaps),"change",e,{onListenerAdd:e}),(0,r.when)((()=>this.view),(()=>{this.source instanceof B.default&&(this.source.viewType=this.view?.type)}),{once:!0})])}destroy(){const e=this.source.basemaps.find((e=>e===this.activeBasemap));e&&this.source.basemaps.remove(e),this.source?.destroy()}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){const t=this.view;if(!t?.map)return;if(!e||!t.ready)return t.map.basemap=e,void this._clearOverride("activeBasemap");const i=e.spatialReference||this.items?.find((t=>this.basemapEquals(e,t.basemap)))?.spatialReference;if(i&&"spatialReferenceLocked"in t&&!t.spatialReferenceLocked){const a=t.spatialReference;if(null!=i&&!(0,h.aI)(a,i)&&!(0,p.canProjectWithoutEngine)(t.spatialReference,i)&&!(0,p.isLoaded)())return this._override("activeBasemap",e),this._loadingProjectionEngine=!0,void(0,p.load)().then((()=>{this._get("activeBasemap")===e&&(t.map.basemap=e,t.spatialReference=i,this._clearOverride("activeBasemap"))}),(()=>{})).then((()=>{this._loadingProjectionEngine=!1}));t.map.basemap=e,this._clearOverride("activeBasemap"),null==i||(0,h.aI)(t.spatialReference,i)||(t.spatialReference=i)}else t.map.basemap=e,this._clearOverride("activeBasemap")}castActiveBasemap(e){return(0,m.es)(e)}get activeBasemapIndex(){const{state:e,activeBasemap:t}=this;return"ready"!==e?-1:this._findBasemapIndex(t)}get compatibilityFunction(){return"3d"===this.view?.type?M:R}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||n.default.isCollection(e)?new I.default({basemaps:Array.isArray(e)?new n.default(e):e}):function(e){return e&&"esri.portal.Portal"===e.declaredClass}(e)?new B.default({portal:e}):function(e){return e&&!(e instanceof B.default)&&(!!e.portal||!!e.query)}(e)?new B.default(e):function(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}(e)?e:null}get state(){return this.view?.ready&&this.source?(0,d.O)(this.view)&&!this.view.inGeographicLayout?"unsupported":this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return(0,f.jU)(e,t)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(l.A.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:t}=this,i=t.findIndex((t=>t.basemap===e));return-1===i?t.findIndex((t=>this.basemapEquals(t.basemap,e))):i}_recreateItems(){const e=this.source?.basemaps??[],{view:t,compatibilityFunction:i}=this,a=new Map(this.items.map((e=>[e.basemap,e]))),s=e.map((e=>{const s=a.get(e);return s?(a.delete(e),s):new x.default({basemap:e,compatibilityFunction:i,view:t})}));this.items.removeAll(),this.items.addMany(s),a.forEach((e=>e.destroy()))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};(0,a._)([(0,o.MZ)()],A.prototype,"_loadingProjectionEngine",void 0),(0,a._)([(0,o.MZ)({type:s.default})],A.prototype,"activeBasemap",null),(0,a._)([(0,c.w)("activeBasemap")],A.prototype,"castActiveBasemap",null),(0,a._)([(0,o.MZ)({readOnly:!0})],A.prototype,"activeBasemapIndex",null),(0,a._)([(0,o.MZ)()],A.prototype,"compatibilityFunction",null),(0,a._)([(0,o.MZ)({readOnly:!0,type:O})],A.prototype,"items",void 0),(0,a._)([(0,o.MZ)()],A.prototype,"source",void 0),(0,a._)([(0,c.w)("source")],A.prototype,"castSource",null),(0,a._)([(0,o.MZ)({readOnly:!0})],A.prototype,"state",null),(0,a._)([(0,o.MZ)()],A.prototype,"view",void 0),A=(0,a._)([(0,u.$)("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],A);const k=A},26282:(e,t,i)=>{var a;i.d(t,{N:()=>a}),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(a||(a={}))},32955:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var a=i(93800),s=i(6946),n=i(93633),l=i(49959),r=i(79953),o=i(48602),c=(i(21265),i(50925),i(14746),i(75269)),u=i(76983);let p=class extends(n.A.IdentifiableMixin(s.default)){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([(0,r.watch)((()=>this.basemap?.loadStatus),e),(0,r.watch)((()=>this.compatibilityFunction),e),(0,r.watch)((()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme),e),(0,r.watch)((()=>this.view?.ready),e),(0,r.watch)((()=>this.view?.spatialReference),e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return(0,u.n8)(this.view,this.basemap)}set basemap(e){e&&e.load().catch((()=>{})),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if("loaded"!==e&&"failed"!==e)return;if(!this.compatibilityFunction)return void("loaded"===e?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then((()=>(0,r.whenOnce)((()=>!this._spatialReferenceTask.updating),i))).then((()=>{this._set("state","ready"),this._set("error",null)})).catch((e=>{(0,l.isAbortError)(e)||(this._set("state","error"),this._set("error",e))})),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};(0,a._)([(0,o.MZ)({readOnly:!0})],p.prototype,"_spatialReferenceTask",null),(0,a._)([(0,o.MZ)()],p.prototype,"basemap",null),(0,a._)([(0,o.MZ)()],p.prototype,"compatibilityFunction",void 0),(0,a._)([(0,o.MZ)({readOnly:!0})],p.prototype,"error",void 0),(0,a._)([(0,o.MZ)({readOnly:!0})],p.prototype,"spatialReference",null),(0,a._)([(0,o.MZ)({readOnly:!0})],p.prototype,"state",void 0),(0,a._)([(0,o.MZ)()],p.prototype,"view",void 0),p=(0,a._)([(0,c.$)("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],p);const h=p},35104:(e,t,i)=>{function a(e){return null!=e&&"object"==typeof e&&"2d"===e.type&&"linkchart"===e.view2dType}i.d(t,{O:()=>a})},37858:(e,t,i)=>{i.d(t,{yL:()=>q,_y:()=>U,T7:()=>_,L8:()=>v,Tn:()=>w,aL:()=>b,EM:()=>Z,Uo:()=>F,GH:()=>T,KE:()=>O,sZ:()=>X,oX:()=>I,Gk:()=>B,rI:()=>W,n9:()=>M,fe:()=>L,LC:()=>A,uK:()=>te,HF:()=>Q,Ci:()=>S,mJ:()=>ee,eS:()=>k,E5:()=>N,G3:()=>E,Y4:()=>H,cU:()=>C,Ec:()=>J,hL:()=>Y,xl:()=>D,XQ:()=>ae,Rz:()=>ie,jj:()=>j,JM:()=>V,n8:()=>G,t6:()=>$,Cs:()=>z,hC:()=>K,bA:()=>P,bk:()=>y});var a=i(89129),s=i(70576),n=i(78076),l=i(51064),r=i(26282),o=i(98697),c=i(74719),u=i(90772),p=i(61129),h=i(4742),d=i(49386);const m=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:function(e,t,i,a){if(null==e)return(0,d.P)();const s=e.spatialReference;if(s.isGeographic&&!(0,p.s)(s))return new c.default("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const n=d.n.checkUnsupported(e);if(null!=n)return n;if(null==i)return new c.default("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const l=function(e,t){const i=e.lods,a=i[0].resolution*2**i[0].level,s=[a*e.size[0],a*e.size[1]],n=[e.origin.x,e.origin.y],l=(0,u.VY)(t),r=(0,u.vt)();d.n.computeRowColExtent(l,s,n,r);const o=(r[2]-r[0])*(r[3]-r[1]);if(o>h.SR){const t=i[0].scale*2**i[0].level;let s=Math.max((l[3]-l[1])/e.size[1],(l[2]-l[0])/e.size[0])*t/a;const n=Math.floor(Math.log(s)/Math.log(10));return s=Math.ceil(s/10**n)*10**n,new c.default("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(t).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+s.toLocaleString()+".",{level0Scale:t,suggestedLevel0Scale:s,requiredNumRootTiles:o,allowedNumRootTiles:h.SR})}return null}(e,i);return l||(null==t||s.equals(t)||t.isWGS84&&s.isWebMercator?null:new c.default("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"))}},Symbol.toStringTag,{value:"Module"}));const f=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:function(e,t,i,a){if(null==e)return(0,d.P)();const s=e?.lods.length-1,n=e.spatialReference;if(n.isWebMercator){if(!d.n.makeWebMercatorAuxiliarySphere(s).compatibleWith(e,a))return new c.default("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!(0,p.C)(n))return new c.default("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!d.n.makeGCSWithTileSize(e.spatialReference,e.size[0],s).compatibleWith(e,a))return e.spatialReference.isWGS84?new c.default("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new c.default("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return null==t||e.spatialReference.equals(t)?null:new c.default("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}},Symbol.toStringTag,{value:"Module"})),g={[l.RT.Global]:f,[l.RT.Local]:m};function y(e,t){e||console.warn("Terrain: "+t)}let v=!1,b=!1;function w(e){b=e,v=v||e}function _(e){v=e}function T(e,t){if(v&&!e){const e=(new Error).stack?.slice(5);throw console.warn("Terrain internal: "+(t??"")+" at "+e),new Error("Assertion failed"+(t?": "+t:""))}}function S(e){return"imagery-tile"===e?.type||"wcs"===e?.type}function M(e){return"imagery-tile-3d"===e?.type}function R(e){return"tile-3d"===e?.type}function E(e){return"vector-tile-3d"===e?.type}function x(e){return"wmts-3d"===e?.type}function I(e){return"elevation-3d"===e?.type}function B(e){return"group"===e?.type}function O(e){return e&&(R(e)||x(e)||M(e)||E(e))}function A(e){return e&&(R(e)||M(e)||E(e)||x(e))}function k(e){return A(e)||I(e)}function L(e){return(0,o.k$)(e?.sourceLayerInfo?.data)}function C(e){return H(e?.sourceLayerInfo)||!!e?.isVTLBackground}function N(e){return(0,o.Cs)(e?.sourceLayerInfo?.data)}function W(e){const t=e?.sourceLayerInfo?.data;return(0,o.EM)(t)||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData}function H(e){return(0,o.kC)(e?.data)}function G(e){return null!=e&&"release"in e&&e.release(),null}function z(e){return e.fetchTile&&!1!==e.hasOverriddenFetchTile}function U(e,t,i,a,s){return g[a].checkIfTileInfoSupportedForViewSR(e,i,t,s)}function F(e,t,i){let a=null,s=null;if("wmts"===e?.type){const n=Z(e,t,i);a=n.tileInfo,s=n.fullExtent}else{s=S(e)?e.getCompatibleFullExtent(t):e.fullExtent;const n=i===l.RT.Local;a=S(e)?e.getCompatibleTileInfo(t,s,n):"vector-tile"===e?.type?n&&!P(t)||$.force512VTL?e.tileInfo:e.tileInfo.getCompatibleForVTL(256):e.tileInfo}const n="tilemapCache"in e?e.tilemapCache?.effectiveMaxLOD:void 0;return null!=a&&null!=s&&null==U(a,s,t,i,n)?{tileInfo:a,fullExtent:s}:null}function Z(e,t,i){const s=(0,n.r0)(e);if(null!=s){if(!a.default.isCollection(s))return{tileInfo:s.tileInfo,fullExtent:s.fullExtent};{const e=s.find((e=>null==U(e.tileInfo,e.fullExtent,t,i)));if(e)return{tileInfo:e.tileInfo,fullExtent:e.fullExtent}}}return{tileInfo:null,fullExtent:null}}function P(e){return e.isWGS84||e.isWebMercator||(0,s.x1)(e)||!(0,s.B3)(e)}const $={force512VTL:!1};function D(e){return"["+e[0]+","+e[1]+","+e[2]+"]"}function K(e){return"("+e[0]+","+e[1]+","+e[2]+")"}function q(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:se;return Math.abs(e-t)<i}function j(e){return e===r.N.NORTH_EAST?r.N.SOUTH_WEST:e===r.N.NORTH_WEST?r.N.SOUTH_EAST:e===r.N.SOUTH_WEST?r.N.NORTH_EAST:r.N.NORTH_WEST}function V(e){return e===r.N.NORTH?r.N.SOUTH:e===r.N.EAST?r.N.WEST:e===r.N.SOUTH?r.N.NORTH:r.N.EAST}function Y(e){return e===r.N.NORTH_WEST||e===r.N.SOUTH_WEST}function Q(e){return e===r.N.NORTH_WEST||e===r.N.NORTH_EAST}function J(e){return e===r.N.NORTH_WEST||e===r.N.WEST||e===r.N.SOUTH_WEST}function X(e){return e===r.N.NORTH_EAST||e===r.N.EAST||e===r.N.SOUTH_EAST}function ee(e){return e===r.N.SOUTH_EAST||e===r.N.SOUTH||e===r.N.SOUTH_WEST}function te(e){return e===r.N.NORTH_EAST||e===r.N.NORTH||e===r.N.NORTH_WEST}const ie=[r.N.NORTH,r.N.EAST,r.N.SOUTH,r.N.WEST],ae=[r.N.NORTH_EAST,r.N.SOUTH_EAST,r.N.SOUTH_WEST,r.N.NORTH_WEST],se=1e-5},38754:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var a=i(93800),s=i(21772),n=i(56082),l=i(50925),r=i(79953),o=i(48602),c=(i(21265),i(14746),i(75269)),u=i(76983),p=i(27811),h=i(17965);const d="esri-basemap-gallery",m={base:d,sourceLoading:`${d}--source-loading`,loader:`${d}__loader`,item:`${d}__item`,itemContainer:`${d}__item-container`,itemContent:`${d}__item-content`,itemTitle:`${d}__item-title`,itemTagsContainer:`${d}__item-tags-container`,itemThumbnail:`${d}__item-thumbnail`,selectedItem:`${d}__item--selected`,itemError:`${d}__item--error`};var f=i(49403),g=i(50821),y=i(9137),v=i(79304),b=i(76697),w=i(87118);i(17745);let _=class extends p.default{constructor(e,t){super(e,t),this.disabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new h.default,this._focusBasemapItemEnabled=!1,(0,n.ED)(l.A.getLogger(this),"Basemap Gallery","arcgis-basemap-gallery",{version:"4.32"})}initialize(){this.addHandles((0,r.when)((()=>this.source),(()=>this.viewModel.loadSource()),{sync:!0,initial:!0}))}loadDependencies(){return(0,f.W)({scrim:()=>i.e(86836).then(i.bind(i,64455)),chip:()=>i.e(60382).then(i.bind(i,60382))})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get icon(){return"basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="loading"===this.source.state,t=this.disabled||"disabled"===this.viewModel.state,i={[m.sourceLoading]:e,[g.D.disabled]:t};return(0,w.K)("div",{class:this.classes(m.base,g.D.widget,g.D.panel,i),key:"container"},this._getContext())}_getContext(){if("unsupported"===this.viewModel.state)return(0,w.K)("div",{class:g.D.empty,key:"empty-message"},(0,w.K)(y.D,{level:this.headingLevel},this.messages.unsupported));if("loading"===this.source.state)return(0,w.K)("div",{class:m.loader,key:"loader"});const e=this.viewModel.items;return e.length>0?(0,w.K)("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:m.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},e.map(((e,t)=>this._renderBasemapGalleryItem(e,t))).toArray()):(0,w.K)("div",{class:g.D.empty,key:"empty-message"},(0,w.K)(y.D,{level:this.headingLevel},this.messages.noBasemaps))}_getRoundRobinIndex(e,t){return(e+t)%t}_handleKeyDown(e){const{key:t}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t))return;e.preventDefault();const{items:i,activeBasemapIndex:a}=this.viewModel,s="ArrowUp"===t||"ArrowLeft"===t?this._getRoundRobinIndex(Math.max(a-1,-1),i.length):this._getRoundRobinIndex(a+1,i.length),n=i.at(s);"ready"===n?.state&&(this.viewModel.activeBasemap=n.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&0===e.tabIndex&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const t=e.currentTarget["data-item"];"ready"===t.state&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e,t){const i=(0,u.hA)(e.basemap)||(0,s.s)("esri/themes/base/images/basemap-toggle-64.svg"),a=e.basemap.title,n=e.basemap.portalItem?.snippet,l=e.error?.message||n||a,{viewModel:{state:r,activeBasemapIndex:o}}=this,c=this.disabled||"disabled"===r,p=o===t,h=p||-1===o&&0===t?0:-1,d="loading"===r,f={[m.selectedItem]:p,[m.itemError]:"error"===e.state},y=`basemapgallery-item-${e.uid}`;return(0,w.K)("li",{afterUpdate:this._focusBasemapItem,"aria-checked":p.toString(),"aria-disabled":c.toString(),"aria-labelledby":y,bind:this,class:this.classes(m.item,f),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:h,title:l},(0,w.K)("img",{alt:"",class:m.itemThumbnail,src:i}),(0,w.K)("div",{class:m.itemContent,key:"content"},(0,w.K)("div",{class:m.itemTitle,key:"title"},(0,w.K)("span",{id:y},a)),(0,u.$P)(e.basemap)?this._renderTags(e.basemap):null),"loading"===e.state||p&&d?(0,w.K)("calcite-scrim",null,(0,w.K)("span",{"aria-hidden":"true",class:g.D.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return(0,w.K)("div",{class:m.itemTagsContainer,key:"tag"},this._render3DTag(),(0,u.t5)(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return(0,w.K)("calcite-chip",{key:"tag-3d",label:e.tag3D,scale:"s"},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return(0,w.K)("calcite-chip",{appearance:"outline-fill",key:"tag-beta",label:e.tagBeta,scale:"s"},this.messages.tagBeta)}};(0,a._)([(0,o.MZ)()],_.prototype,"activeBasemap",null),(0,a._)([(0,o.MZ)()],_.prototype,"disabled",void 0),(0,a._)([(0,o.MZ)()],_.prototype,"headingLevel",void 0),(0,a._)([(0,o.MZ)()],_.prototype,"icon",null),(0,a._)([(0,o.MZ)()],_.prototype,"label",null),(0,a._)([(0,o.MZ)(),(0,b.G)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],_.prototype,"messages",void 0),(0,a._)([(0,o.MZ)()],_.prototype,"source",null),(0,a._)([(0,o.MZ)()],_.prototype,"view",null),(0,a._)([(0,o.MZ)()],_.prototype,"viewModel",void 0),(0,a._)([(0,o.MZ)()],_.prototype,"_focusBasemapItemEnabled",void 0),(0,a._)([(0,v.$)()],_.prototype,"_handleClick",null),_=(0,a._)([(0,c.$)("esri.widgets.BasemapGallery")],_);const T=_},49386:(e,t,i)=>{i.d(t,{P:()=>f,n:()=>m});var a=i(74719),s=(i(21265),i(64682)),n=i(84190),l=i(12560),r=i(75400),o=i(93321),c=i(90772),u=i(70576),p=i(5616),h=i(29275),d=i(4126);class m{constructor(e){const t=m.checkUnsupported(e);if(null!=t)throw t;const i=e;this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=(0,u.EA)(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const a=i.lods.reduce(((e,t)=>(t.level<e.minLod.level&&(e.minLod=t),e.max=Math.max(e.max,t.level),e)),{minLod:i.lods[0],max:-1/0}),s=a.minLod,n=2**s.level;let l=s.resolution*n,r=s.scale*n;this.levels=new Array(a.max+1);for(let o=0;o<this.levels.length;o++)this.levels[o]={resolution:l,scale:r,tileSize:[l*i.size[0],l*i.size[1]]},l/=2,r/=2}clone(){return new m(this.toTileInfo())}toTileInfo(){return new d.default({dpi:this.dpi,origin:new r.default({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((e,t)=>new h.default({level:t,scale:e.scale,resolution:e.resolution})))})}getExtent(e,t,i,a){const s=this.levels[e],n=s.tileSize[0],l=s.tileSize[1];a[0]=this.origin[0]+i*n,a[2]=this.origin[0]+(i+1)*n,a[3]=this.origin[1]-t*l,a[1]=this.origin[1]-(t+1)*l}convertExtentToRadians(e,t){this._isWebMercator?(t[0]=(0,p.x2lon)(e[0]),t[1]=(0,p.y2lat)(e[1]),t[2]=(0,p.x2lon)(e[2]),t[3]=(0,p.y2lat)(e[3])):this._isGCS&&(t[0]=(0,s.kU)(e[0]),t[1]=(0,s.kU)(e[1]),t[2]=(0,s.kU)(e[2]),t[3]=(0,s.kU)(e[3]))}getExtentGeometry(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new l.default;return this.getExtent(e,t,i,g),a.spatialReference=this.spatialReference,a.xmin=g[0],a.ymin=g[1],a.xmax=g[2],a.ymax=g[3],a.zmin=void 0,a.zmax=void 0,a}ensureMaxLod(e){if(null==e)return!1;let t=!1;for(;this.levels.length<=e;){const{resolution:e,scale:i}=this.levels[this.levels.length-1],a=e/2*this.pixelSize;this.levels.push({resolution:e/2,scale:i/2,tileSize:[a,a]}),t=!0}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(m.checkUnsupported(e))return!1;const i=new m(e);if(!i.spatialReference.equals(this.spatialReference))return!1;if(i.pixelSize!==this.pixelSize)return!1;const a=Math.min(this.levels.length-1,i.levels.length-1,t),n=this.levels[a].resolution;let l=.5*n;return!(!(0,s.Sp)(i.origin[0],this.origin[0],l)||!(0,s.Sp)(i.origin[1],this.origin[1],l))&&(l=.5*n/2**a/this.pixelSize*12,(0,s.Sp)(n,i.levels[a].resolution,l))}rootTilesInExtent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const a=new Array,s=this.levels[0].tileSize;if(null==e||0===s[0]||0===s[1])return a;m.computeRowColExtent(e,s,this.origin,g);let n=g[1],l=g[3],r=g[0],o=g[2];const c=o-r,u=l-n;if(c*u>i){const e=Math.floor(Math.sqrt(i));u>e&&(n=n+Math.floor(.5*u)-Math.floor(.5*e),l=n+e),c>e&&(r=r+Math.floor(.5*c)-Math.floor(.5*e),o=r+e)}for(let p=n;p<l;p++)for(let e=r;e<o;e++)a.push([0,p,e]);return null!=t&&(t[0]=this.origin[0]+r*s[0],t[1]=this.origin[1]-l*s[1],t[2]=this.origin[0]+o*s[0],t[3]=this.origin[1]-n*s[1]),a}static computeRowColExtent(e,t,i,a){const s=.001*(e[2]-e[0]+(e[3]-e[1]));a[0]=Math.max(0,Math.floor((e[0]+s-i[0])/t[0])),a[2]=Math.max(0,Math.ceil((e[2]-s-i[0])/t[0])),a[1]=Math.max(0,Math.floor((i[1]-e[3]+s)/t[1])),a[3]=Math.max(0,Math.ceil((i[1]-e[1]-s)/t[1]))}static isPowerOfTwo(e){const t=e.lods,i=t[0].resolution*2**t[0].level;return!t.some((e=>!(0,s.b6)(e.resolution,i/2**e.level)))}static hasGapInLevels(e){const t=e.lods.map((e=>e.level));t.sort(((e,t)=>e-t));for(let i=1;i<t.length;i++)if(t[i]!==t[0]+i)return!0;return!1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&!(t&t-1)&&t>=128&&t<=512}static hasOriginPerLODs(e){const t=e.origin;return e.lods.some((e=>null!=e.origin&&(e.origin[0]!==t.x||e.origin[1]!==t.y)))}static getMissingTileInfoError(){return new a.default("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return null==e?f():e.lods.length<1?new a.default("tilingscheme:generic","Tiling scheme must have at least one level"):m.isPowerOfTwo(e)?m.hasGapInLevels(e)?new a.default("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):m.tileSizeSupported(e)?m.hasOriginPerLODs(e)?new a.default("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new a.default("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new a.default("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,t){const i=e[2]-e[0],a=e[3]-e[1],s=(0,n.GA)(t),l=1.2*Math.max(i,a),o=l/256,c=o*s*(96/.0254),u=new m(new d.default({size:[256,256],origin:new r.default({x:e[0]-.5*(l-i),y:e[3]+.5*(l-a)}),lods:[new h.default({level:0,resolution:o,scale:c})],spatialReference:t}));return u.ensureMaxLod(20),u}static makeWebMercatorAuxiliarySphere(e){const t=new m(m.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const a=256/t,s=new m(new d.default({size:[t,t],origin:new r.default({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new h.default({level:0,resolution:.703125*a,scale:295497598.570834*a})]}));return s.ensureMaxLod(i),s}get test(){}}function f(){return new a.default("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}m.WebMercatorAuxiliarySphereTileInfo=new d.default({size:[256,256],origin:new r.default({x:-20037508.342787,y:20037508.342787,spatialReference:o.default.WebMercator}),spatialReference:o.default.WebMercator,lods:[new h.default({level:0,resolution:156543.03392800014,scale:591657527.591555})]}),m.WebMercatorAuxiliarySphere=m.makeWebMercatorAuxiliarySphere(19);const g=(0,c.vt)()},61129:(e,t,i)=>{i.d(t,{C:()=>s,s:()=>n});var a=i(70576);function s(e){return n(e)||(0,a.q8)(e)||(0,a.KQ)(e)}function n(e){return(0,a.oT)(e)||(0,a.x1)(e)}},66380:(e,t,i)=>{i.d(t,{M:()=>n});var a=i(78757),s=i(51064);function n(e,t){return null!=e&&(null==t||(t===s.RT.Local?!e.isGeographic||e.isWGS84||e.wkid===a.Y.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===a.Y.CGCS2000||e.wkid===a.Y.GCSMARS2000||e.wkid===a.Y.GCSMARS2000_SPHERE||e.wkid===a.Y.GCSMOON2000))}},98185:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var a=i(93800),s=i(47412),n=i(6946),l=i(89129),r=i(48602),o=(i(21265),i(50925),i(14746),i(75269));const c=l.default.ofType(s.default);let u=class extends n.default{constructor(e){super(e),this.basemaps=new c}destroy(){this.basemaps.forEach((e=>e.destroy()))}get state(){return"ready"}refresh(){}};(0,a._)([(0,r.MZ)({type:c})],u.prototype,"basemaps",void 0),(0,a._)([(0,r.MZ)({readOnly:!0})],u.prototype,"state",null),u=(0,a._)([(0,o.$)("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],u);const p=u},98697:(e,t,i)=>{function a(e){return null!=e&&"type"in e&&"vector-tile"===e.type}function s(e){return null!=e&&"type"in e&&"raster-tile"===e.type}function n(e){return null!=e&&"type"in e&&"tile-texture"===e.type}function l(e){return null!=e&&"type"in e&&"image+type"===e.type}i.d(t,{Cs:()=>n,EM:()=>l,k$:()=>s,kC:()=>a})}}]);