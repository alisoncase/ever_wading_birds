"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[6569,42700,52858],{6569:(e,t,r)=>{r.r(t),r.d(t,{solve:()=>f});var s=r(23060),o=r(99940),i=r(30312),n=r(70363),a=r(10193),u=r(78307),l=r(87520),p=r(70359);function c(e){return e instanceof l.default}async function f(e,t,r){const l=[],f=[],y={},d={},m=(0,a.Dl)(e),{path:g}=m;c(t.stops)&&(0,n.collectGeometries)(t.stops.features,f,"stops.features",y),c(t.pointBarriers)&&(0,n.collectGeometries)(t.pointBarriers.features,f,"pointBarriers.features",y),c(t.polylineBarriers)&&(0,n.collectGeometries)(t.polylineBarriers.features,f,"polylineBarriers.features",y),c(t.polygonBarriers)&&(0,n.collectGeometries)(t.polygonBarriers.features,f,"polygonBarriers.features",y);const v=await(0,i.normalizeCentralMeridian)(f);for(const s in y){const e=y[s];l.push(s),d[s]=v.slice(e[0],e[1])}if((0,n.isInputGeometryZAware)(d,l)){let e=null;try{e=await(0,n.fetchServiceDescription)(g,t.apiKey,r)}catch{}e&&!e.hasZ&&(0,n.dropZValuesOffInputGeometry)(d,l)}for(const s in d)d[s].forEach(((e,r)=>{(0,o.Jt)(t,s)[r].geometry=e}));const h={...r,query:{...m.query,...(0,u.r9)(t),f:"json"}},N=g.endsWith("/solve")?g:`${g}/solve`,{data:b}=await(0,s.default)(N,h);return function(e){const{barriers:t,checksum:r,directionLines:s,directionPoints:o,directions:i,messages:n,polygonBarriers:a,polylineBarriers:u,routes:l,stops:c,traversedEdges:f,traversedJunctions:y,traversedTurns:d}=e,m=e=>{const t=v.find((t=>t.routeName===e));if(null!=t)return t;const r={routeId:v.length+1,routeName:e};return v.push(r),r},g=e=>{const t=v.find((t=>t.routeId===e));if(null!=t)return t;const r={routeId:e,routeName:null};return v.push(r),r},v=[];l?.features.forEach(((e,t)=>{e.geometry.spatialReference=l.spatialReference??void 0;const r=e.attributes.Name,s=t+1;v.push({routeId:s,routeName:r,route:e})})),i?.forEach((e=>{const{routeName:t}=e;m(t).directions=e}));const h=c?.features.every((e=>null==e.attributes.RouteName))&&v.length>0?v[0].routeName:null;return c?.features.forEach((e=>{e.geometry&&(e.geometry.spatialReference??=c.spatialReference??void 0);const t=h??e.attributes.RouteName,r=m(t);r.stops??=[],r.stops.push(e)})),s?.features.forEach((e=>{const t=e.attributes.RouteID,r=g(t),{geometryType:o,spatialReference:i}=s;r.directionLines??={features:[],geometryType:o,spatialReference:i},r.directionLines.features.push(e)})),o?.features.forEach((e=>{const t=e.attributes.RouteID,r=g(t),{geometryType:s,spatialReference:i}=o;r.directionPoints??={features:[],geometryType:s,spatialReference:i},r.directionPoints.features.push(e)})),f?.features.forEach((e=>{const t=e.attributes.RouteID,r=g(t),{geometryType:s,spatialReference:o}=f;r.traversedEdges??={features:[],geometryType:s,spatialReference:o},r.traversedEdges.features.push(e)})),y?.features.forEach((e=>{const t=e.attributes.RouteID,r=g(t),{geometryType:s,spatialReference:o}=y;r.traversedJunctions??={features:[],geometryType:s,spatialReference:o},r.traversedJunctions.features.push(e)})),d?.features.forEach((e=>{const t=e.attributes.RouteID,r=g(t);r.traversedTurns??={features:[]},r.traversedTurns.features.push(e)})),p.default.fromJSON({barriers:t,checksum:r,messages:n,polygonBarriers:a,polylineBarriers:u,routeResults:v})}(b)}},18222:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var s=r(93800),o=r(62631),i=r(48602),n=(r(21265),r(50925),r(14800)),a=r(75269),u=r(12560),l=r(54824),p=r(93321),c=r(51708),f=r(87520);let y=class extends f.default{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){if(!e)return[];const r=t.summary.envelope.spatialReference??t.spatialReference,s=r&&p.default.fromJSON(r);return e.map((e=>{const t=c.default.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=s),null!=t.events)for(const r of t.events)null!=r.geometry&&(r.geometry.spatialReference=s);return t}))}get mergedGeometry(){return this.features?function(e,t){if(0===e.length)return new l.default({spatialReference:t});const r=[];for(const n of e)for(const e of n.paths)r.push(...e);const s=[];r.forEach(((e,t)=>{0!==t&&e[0]===r[t-1][0]&&e[1]===r[t-1][1]||s.push(e)}));const{hasM:o,hasZ:i}=e[0];return new l.default({hasM:o,hasZ:i,paths:[s],spatialReference:t})}(this.features.map((e=>{let{geometry:t}=e;return t})),this.extent.spatialReference):null}get strings(){return this.features.flatMap((e=>{let{strings:t}=e;return t})).filter(o.Ru)}};(0,s._)([(0,i.MZ)({type:u.default,json:{read:{source:"summary.envelope"}}})],y.prototype,"extent",void 0),(0,s._)([(0,i.MZ)({nonNullable:!0})],y.prototype,"features",void 0),(0,s._)([(0,n.w)("features")],y.prototype,"readFeatures",null),(0,s._)([(0,i.MZ)()],y.prototype,"geometryType",void 0),(0,s._)([(0,i.MZ)({readOnly:!0})],y.prototype,"mergedGeometry",null),(0,s._)([(0,i.MZ)()],y.prototype,"routeId",void 0),(0,s._)([(0,i.MZ)()],y.prototype,"routeName",void 0),(0,s._)([(0,i.MZ)({value:null,readOnly:!0})],y.prototype,"strings",null),(0,s._)([(0,i.MZ)({json:{read:{source:"summary.totalDriveTime"}}})],y.prototype,"totalDriveTime",void 0),(0,s._)([(0,i.MZ)({json:{read:{source:"summary.totalLength"}}})],y.prototype,"totalLength",void 0),(0,s._)([(0,i.MZ)({json:{read:{source:"summary.totalTime"}}})],y.prototype,"totalTime",void 0),y=(0,s._)([(0,a.$)("esri.rest.support.DirectionsFeatureSet")],y);const d=y},42700:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var s=r(93800),o=r(42761),i=r(48602),n=(r(21265),r(50925),r(14746),r(75269)),a=r(52858);const u=new o.J({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let l=class extends a.default{constructor(e){super(e),this.type=null}};(0,s._)([(0,i.MZ)({type:String,json:{read:u.read,write:u.write}})],l.prototype,"type",void 0),l=(0,s._)([(0,n.$)("esri.rest.support.NAMessage")],l);const p=l},51708:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var s=r(93800),o=r(79625),i=r(48602),n=(r(21265),r(50925),r(14746),r(14800)),a=r(75269),u=r(54824),l=r(87314),p=r(90465);let c=class extends o.default{constructor(e){super(e),this.events=null,this.geometry=null,this.strings=null}readGeometry(e,t){const r=function(e){if(null==e||""===e)return null;let t=0,r=0,s=0,o=0;const i=[];let n,a,u,l,p,c,f,y,d=0,m=0,g=0;if(p=e.match(/((\+|-)[^+\-|]+|\|)/g),p||(p=[]),0===parseInt(p[d],32)){d=2;const e=parseInt(p[d],32);d++,c=parseInt(p[d],32),d++,1&e&&(m=p.indexOf("|")+1,f=parseInt(p[m],32),m++),2&e&&(g=p.indexOf("|",m)+1,y=parseInt(p[g],32),g++)}else c=parseInt(p[d],32),d++;for(;d<p.length&&"|"!==p[d];){n=parseInt(p[d],32)+t,d++,t=n,a=parseInt(p[d],32)+r,d++,r=a;const e=[n/c,a/c];m&&(l=parseInt(p[m],32)+s,m++,s=l,e.push(l/f)),g&&(u=parseInt(p[g],32)+o,g++,o=u,e.push(u/y)),i.push(e)}return{paths:[i],hasZ:m>0,hasM:g>0}}(t.compressedGeometry);return null!=r?u.default.fromJSON(r):null}};(0,s._)([(0,i.MZ)({type:[l.default]})],c.prototype,"events",void 0),(0,s._)([(0,i.MZ)({type:u.default})],c.prototype,"geometry",void 0),(0,s._)([(0,n.w)("geometry",["compressedGeometry"])],c.prototype,"readGeometry",null),(0,s._)([(0,i.MZ)({type:[p.A]})],c.prototype,"strings",void 0),c=(0,s._)([(0,a.$)("esri.rest.support.DirectionsFeature")],c);const f=c},52858:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var s=r(93800),o=r(42761),i=r(19455),n=r(48602),a=(r(21265),r(50925),r(14746),r(75269));const u=new o.J({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let l=class extends i.A{constructor(e){super(e),this.description=null,this.type=null}};(0,s._)([(0,n.MZ)({type:String,json:{write:!0}})],l.prototype,"description",void 0),(0,s._)([(0,n.MZ)({type:String,json:{read:u.read,write:u.write}})],l.prototype,"type",void 0),l=(0,s._)([(0,a.$)("esri.rest.support.GPMessage")],l);const p=l},70359:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var s=r(93800),o=r(79625),i=r(62631),n=r(19455),a=r(48602),u=(r(21265),r(50925),r(14800)),l=r(75269),p=r(87520),c=r(42700),f=r(79620);function y(e){return e?p.default.fromJSON(e).features.filter(i.Ru):[]}let d=class extends n.A{constructor(e){super(e),this.checksum=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return y(t.barriers)}readPolylineBarriers(e){return y(e)}readPolygonBarriers(e){return y(e)}};(0,s._)([(0,a.MZ)({type:String})],d.prototype,"checksum",void 0),(0,s._)([(0,a.MZ)({type:[c.default]})],d.prototype,"messages",void 0),(0,s._)([(0,a.MZ)({type:[o.default]})],d.prototype,"pointBarriers",void 0),(0,s._)([(0,u.w)("pointBarriers",["barriers"])],d.prototype,"readPointBarriers",null),(0,s._)([(0,a.MZ)({type:[o.default]})],d.prototype,"polylineBarriers",void 0),(0,s._)([(0,u.w)("polylineBarriers")],d.prototype,"readPolylineBarriers",null),(0,s._)([(0,a.MZ)({type:[o.default]})],d.prototype,"polygonBarriers",void 0),(0,s._)([(0,u.w)("polygonBarriers")],d.prototype,"readPolygonBarriers",null),(0,s._)([(0,a.MZ)({type:[f.default]})],d.prototype,"routeResults",void 0),d=(0,s._)([(0,l.$)("esri.rest.support.RouteSolveResult")],d);const m=d},78307:(e,t,r)=>{r.d(t,{Zn:()=>u,_s:()=>c,aZ:()=>n,lh:()=>o,nA:()=>a,o9:()=>p,p3:()=>i,r9:()=>l});var s=r(93074);function o(e,t){if(null==e)return null;const r={},o=new RegExp(`^${t}`,"i");for(const i of Object.keys(e))if(o.test(i)){const o=i.slice(t.length);r[s.et.fromJSON(o)]=e[i]}return r}function i(e,t,r){if(null!=e){t.attributes||(t.attributes={});for(const o in e){const i=s.et.toJSON(o);t.attributes[`${r}${i}`]=e[o]}}}function n(e){const t={};for(const r of Object.keys(e)){const o=r;t[s.et.fromJSON(o)]=e[r]}return t}function a(e){const t={};for(const r of Object.keys(e)){const o=r;t[s.et.toJSON(o)]=e[r]}return t}function u(e,t){return null==e||null==t?null:Math.round((e-t)/6e4)}function l(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.stops&&=JSON.stringify(t.stops),r.travelMode&&=JSON.stringify(t.travelMode),r}function p(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.facilities&&=JSON.stringify(t.facilities),r.incidents&&=JSON.stringify(t.incidents),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.travelMode&&=JSON.stringify(t.travelMode),r}function c(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.defaultBreaks&&=t.defaultBreaks?.join(),r.excludeSourcesFromPolygons&&=t.excludeSourcesFromPolygons?.join(),r.facilities&&=JSON.stringify(t.facilities),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.travelMode&&=JSON.stringify(t.travelMode),r}},79620:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var s=r(93800),o=r(79625),i=r(19455),n=r(48602),a=(r(21265),r(50925),r(14746),r(75269)),u=r(18222),l=r(87520);let p=class extends i.A{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,s._)([(0,n.MZ)({type:l.default,json:{write:!0}})],p.prototype,"directionLines",void 0),(0,s._)([(0,n.MZ)({type:l.default,json:{write:!0}})],p.prototype,"directionPoints",void 0),(0,s._)([(0,n.MZ)({type:u.default,json:{write:!0}})],p.prototype,"directions",void 0),(0,s._)([(0,n.MZ)({type:o.default,json:{write:!0}})],p.prototype,"route",void 0),(0,s._)([(0,n.MZ)({type:String,json:{write:!0}})],p.prototype,"routeName",void 0),(0,s._)([(0,n.MZ)({type:[o.default],json:{write:!0}})],p.prototype,"stops",void 0),(0,s._)([(0,n.MZ)({type:l.default,json:{write:!0}})],p.prototype,"traversedEdges",void 0),(0,s._)([(0,n.MZ)({type:l.default,json:{write:!0}})],p.prototype,"traversedJunctions",void 0),(0,s._)([(0,n.MZ)({type:l.default,json:{write:!0}})],p.prototype,"traversedTurns",void 0),p=(0,s._)([(0,a.$)("esri.rest.support.RouteResult")],p);const c=p},87314:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var s=r(93800),o=r(19455),i=r(48602),n=(r(21265),r(50925),r(14746),r(14800)),a=r(75269),u=r(75400),l=r(78307),p=r(90465);let c=class extends o.A{constructor(e){super(e),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(e,t){return(0,l.Zn)(t.ETA,t.arriveTimeUTC)}readGeometry(e,t){return u.default.fromJSON(t.point)}};(0,s._)([(0,i.MZ)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],c.prototype,"arriveTime",void 0),(0,s._)([(0,i.MZ)()],c.prototype,"arriveTimeOffset",void 0),(0,s._)([(0,n.w)("arriveTimeOffset",["arriveTimeUTC","ETA"])],c.prototype,"readArriveTimeOffset",null),(0,s._)([(0,i.MZ)({type:u.default})],c.prototype,"geometry",void 0),(0,s._)([(0,n.w)("geometry",["point"])],c.prototype,"readGeometry",null),(0,s._)([(0,i.MZ)({type:[p.A]})],c.prototype,"strings",void 0),c=(0,s._)([(0,a.$)("esri.rest.support.DirectionsEvent")],c);const f=c},90465:(e,t,r)=>{r.d(t,{A:()=>p});var s=r(93800),o=r(19455),i=r(48602),n=(r(21265),r(50925),r(14746),r(47332)),a=r(75269),u=r(93074);let l=class extends o.A{constructor(e){super(e)}};(0,s._)([(0,i.MZ)({json:{read:{source:"string"}}})],l.prototype,"text",void 0),(0,s._)([(0,n.e)(u.Ec,{name:"stringType"})],l.prototype,"type",void 0),l=(0,s._)([(0,a.$)("esri.rest.support.DirectionsString")],l);const p=l}}]);