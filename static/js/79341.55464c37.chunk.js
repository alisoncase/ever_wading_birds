"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79341],{12069:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s(93800),a=s(48602),n=(s(21265),s(50925),s(14746),s(75269)),o=s(65455);let r=class extends o.default{constructor(e){super(e),this.handlesSyncedToPrimary=!0}set primaryHandleEnabled(e){this._set("primaryHandleEnabled",e)}get primaryHandleEnabled(){const{stops:e}=this;if(!e?.length)return!1;const t=e.length;return(3===t||5===t)&&this._get("primaryHandleEnabled")}get values(){const{primaryHandleEnabled:e,stops:t}=this;if(!t?.length||t.length<2)return[];const s=this.getValuesFromStops();return e?3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]]:[s[0],s[s.length-1]]}setValue(e,t){const{max:s,min:i,values:a}=this,n=a[e];if(isNaN(t)||n===t||t>s||t<i)return;t=this.toPrecision(t);const o=this.primaryHandleEnabled&&this.handlesSyncedToPrimary;if(o){const s=a.slice().sort(((e,t)=>e>t?1:-1))[1];(0===e&&t>s||2===e&&t<s)&&(t=s)}const r=this.getStopChanges(e,t);this.updateStops(r),o?this.notifyChange("values"):(a[e]=t,this._set("values",[...a])),this.notifyChange("labels")}getStopIndexFromValueIndex(e){const{handlesSyncedToPrimary:t,primaryHandleEnabled:s}=this;if(s){const{values:s}=this,i=s[e];if(t)return e;const a=s.slice().sort(((e,t)=>e>t?1:-1)),n=a.indexOf(i);return s.some(((e,t)=>e===i&&t!==n))?a.lastIndexOf(i):n}return super.getStopIndexFromValueIndex(e)}getStopChanges(e,t){return this.primaryHandleEnabled?this._getStopChanges(e,t):super.getStopChanges(e,t)}_getStopChanges(e,t){const{max:s,min:i,stops:a,values:n}=this,o=this.handlesSyncedToPrimary&&1===e,r=n[e],l=n.slice();o||(l[e]=t);const h=l.sort(((e,t)=>e>t?1:-1)),d=o?t:h[1],u=t-r,m=o?this.toPrecision(Math.max(Math.min(h[0]+u,s),i)):h[0],p=o?this.toPrecision(Math.max(Math.min(h[2]+u,s),i)):h[2];return 5===a.length?[{index:0,value:m},{index:1,value:this.toPrecision((d+m)/2)},{index:2,value:d},{index:3,value:this.toPrecision((d+p)/2)},{index:4,value:p}]:[{index:0,value:m},{index:1,value:d},{index:2,value:p}]}};(0,i._)([(0,a.MZ)()],r.prototype,"handlesSyncedToPrimary",void 0),(0,i._)([(0,a.MZ)()],r.prototype,"primaryHandleEnabled",null),(0,i._)([(0,a.MZ)({dependsOn:["handlesSyncedToPrimary"],readOnly:!0})],r.prototype,"values",null),r=(0,i._)([(0,n.$)("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],r);const l=r},65455:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var i=s(93800),a=s(48602),n=(s(21265),s(50925),s(14746),s(75269)),o=s(99400),r=s(20348);let l=class extends o.default{constructor(e){super(e),this._initialStopValues=[],this._max=null,this._min=null,this.hasTimeData=!1,this.inputFormatFunction=(e,t)=>"max"===t?this.getUnzoomedMax().toString():"min"===t?this.getUnzoomedMin().toString():e.toString(),this.inputParseFunction=null,this.labelFormatFunction=e=>{if(this.hasTimeData)return(0,r.formatDateLabel)(e);const{max:t,min:s,precision:i}=this,a=t-s>10?2:i;return(0,r.formatNumberLabel)(parseFloat(e.toFixed(a)))},this.thumbsConstrained=!1,this.zoomingEnabled=!0}set breaks(e){this._set("breaks",e),this.notifyChange("max"),this.notifyChange("min")}set stops(e){if(e?.length){const{max:t,min:s}=this,i=this.getValuesFromStops(e),a={};null!=s&&i.some((e=>e<s))&&(a.min=Math.min(...i)),null!=t&&i.some((e=>e>t))&&(a.max=Math.max(...i)),this.set({...a}),this._initialStopValues=i}else this._initialStopValues=null;this._set("stops",e||null),this.notifyChange("values")}get labels(){const{values:e}=this,t=e&&e.length?e.map(((e,t)=>this.getLabelForValue(e,"value",t))):[],s=this.getUnzoomedMax(),i=this.getUnzoomedMin();return{max:this.getLabelForValue(s,"max"),min:this.getLabelForValue(i,"min"),values:t}}get max(){const{breaks:e}=this;return e?.length?e[e.length-1].max:this.max}set max(e){const{zoomOptions:t}=this;if(null!=t?.max){const s=this.values;let i=t.max;if(e<i&&(i=e,t.max=e),s&&s.length)for(let t=0;t<s.length;t++)e<s[t]&&this.setValue(t,e);this._storeZoomMax(i,e)}else this.updateBreakMax(e),this.setMax(e);this.notifyChange("labels")}get min(){const{breaks:e}=this;return e?.length?e[0].min:this.min}set min(e){const{zoomOptions:t}=this;if(null!=t?.min){const s=this.values;let i=t.min;if(e>i&&(i=e,t.min=e),s&&s.length)for(let t=0;t<s.length;t++)e>s[t]&&this.setValue(t,e);this._storeZoomMin(i,e)}else this.updateBreakMin(e),this.setMin(e);this.notifyChange("labels")}get state(){const{max:e,min:t,values:s}=this;return null!=e&&null!=t&&s.length>0?"ready":"disabled"}get values(){const{breaks:e,stops:t}=this;if(!e&&!t)return[];if(e?.length){const t=e.map((e=>e.max));return t.pop(),t}if(t?.length<2)return[];const s=this.getValuesFromStops();return[s[0],s[s.length-1]]}set zoomOptions(e){const{zoomingEnabled:t,zoomOptions:s}=this;if(t){if(s){const t=null!=this._max?this._max:this.max,s=null!=this._min?this._min:this.min;if(e){const{max:i,min:a}=e,n=null!=i,o=null!=a,r=o?e.min:s,l=o?s:null,h=n?e.max:t,d=n?t:null;this._storeZoomMin(r,l),this._storeZoomMax(h,d)}else this.setMax(t),this.setMin(s),this._min=null,this._max=null}else if(e){const{max:t,min:s}=e;null!=s&&this._storeZoomMin(e.min,this.min),null!=t&&this._storeZoomMax(e.max,this.max)}this._set("zoomOptions",e),this.notifyChange("max"),this.notifyChange("min")}}getStopIndexFromValueIndex(e){const{stops:t}=this,s=this.values[e];return 0===e?s<=this.values[1]?0:t.length-1:1===e?this.values[0]>=s?0:t.length-1:null}getStopChanges(e,t){const s=this.stops,i=this.getStopIndexFromValueIndex(e),a=this.getValuesFromStops();a[i]=t;const[n,o]=[a[0],a[a.length-1]].sort(((e,t)=>e>t?1:-1)),r=o-n,l=s.length-1;return a.map(((e,t)=>({index:t,value:this.toPrecision(n+t*r/l)})))}setValue(e,t){const{max:s,min:i,values:a}=this,n=a[e];if(isNaN(t)||n===t||t>s||t<i)return;a[e]=this.toPrecision(t),this._set("values",[...a]);const o=a.slice().sort(((e,t)=>e>t?1:-1)),l=o[0],h=o[o.length-1],d=(0,r.getStopChanges)(l,h,this._initialStopValues??[]);this.updateStops(d),this.updateBreaks(),this.notifyChange("labels")}getValuesFromStops(e){const t=e||this.stops;return t?.map((e=>e.hasOwnProperty("ratio")?e.ratio:e.value))}updateBreaks(){const{breaks:e,values:t}=this;e?.length&&t.slice().sort(((e,t)=>e>t?1:-1)).forEach(((t,s)=>{e[s].max=t,null!=e[s+1]&&(e[s+1].min=t)}))}updateBreakMax(e){const{breaks:t,max:s,min:i}=this;!isNaN(e)&&s!==e&&null!=i&&e>i&&t?.length&&(t[t.length-1].max=e)}updateBreakMin(e){const{breaks:t,max:s,min:i}=this;!isNaN(e)&&i!==e&&null!=s&&e<s&&t?.length&&(t[0].min=e)}updateStops(e){const{stops:t}=this,s=this.getValuesFromStops();if(s?.length){for(const t of e)s[t.index]=t.value;t.forEach(((e,t)=>{e.hasOwnProperty("ratio")?e.ratio=s[t]:e.value=s[t]}))}}getUnzoomedMax(){return this.zoomOptions&&null!=this._max?this._max:this.max}getUnzoomedMin(){return this.zoomOptions&&null!=this._min?this._min:this.min}_storeZoomMax(e,t){this._max=t,this.setMax(e)}_storeZoomMin(e,t){this._min=t,this.setMin(e)}};(0,i._)([(0,a.MZ)()],l.prototype,"breaks",null),(0,i._)([(0,a.MZ)()],l.prototype,"stops",null),(0,i._)([(0,a.MZ)()],l.prototype,"hasTimeData",void 0),(0,i._)([(0,a.MZ)()],l.prototype,"inputFormatFunction",void 0),(0,i._)([(0,a.MZ)()],l.prototype,"inputParseFunction",void 0),(0,i._)([(0,a.MZ)()],l.prototype,"labelFormatFunction",void 0),(0,i._)([(0,a.MZ)({readOnly:!0})],l.prototype,"labels",null),(0,i._)([(0,a.MZ)()],l.prototype,"max",null),(0,i._)([(0,a.MZ)()],l.prototype,"min",null),(0,i._)([(0,a.MZ)({readOnly:!0})],l.prototype,"state",null),(0,i._)([(0,a.MZ)()],l.prototype,"thumbsConstrained",void 0),(0,i._)([(0,a.MZ)({readOnly:!0})],l.prototype,"values",null),(0,i._)([(0,a.MZ)()],l.prototype,"zoomingEnabled",void 0),(0,i._)([(0,a.MZ)()],l.prototype,"zoomOptions",null),l=(0,i._)([(0,n.$)("esri.widgets.smartMapping.SmartMappingSliderViewModel")],l);const h=l},79341:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var i,a=s(93800),n=s(88102),o=s(48602),r=s(32980),l=(s(21265),s(14746),s(75269)),h=s(80382),d=s(81467),u=s(44827),m=s(30692),p=s(87610),c=s(20348),g=s(50821),y=s(17745),v=s(76697),f=s(87118);const _="esri-binary-color-size-slider",b={base:_,rampElement:`${_}__ramp`,sliderContainer:`${_}__slider-container`,histogramContainer:`${_}__histogram-container`,zoomCapTop:`${_}__zoom-cap-top`,zoomCapBottom:`${_}__zoom-cap-bottom`,zoomCapLine:`${_}__zoom-cap-line`,zoomCapMask:`${_}__zoom-cap-mask`,zoomCapUnderline:`${_}__zoom-cap-underline`,primaryHandle:`${_}--primary-handle`,track:`${_}--interactive-track`},x={trackBackgroundColor:new n.default([224,224,224]),trackAboveFillColor:new n.default([149,149,149]),trackBelowFillColor:new n.default([149,149,149])};let M=i=class extends m.default{constructor(e,t){super(e,t),this._minRampFillWidth=.2,this._rampNode=null,this.messages=null,this.style={...x},this.viewModel=new p.default,this._rampFillId=`${this.id}-linear-gradient`}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(e){this.viewModel.handlesSyncedToPrimary=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get persistSizeRangeEnabled(){return this.viewModel.persistSizeRangeEnabled}set persistSizeRangeEnabled(e){this.viewModel.persistSizeRangeEnabled=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}castStyle(e){return{...x,...e}}static fromRendererResult(e,t){const{size:{visualVariables:s},statistics:a}=e,{avg:n,stddev:o}=a,r=s[0].stops,[l,d]=(0,h.N)(e.renderer.authoringInfo),u=z(e.renderer.classBreakInfos);return new i({max:d,min:l,stops:r??void 0,histogramConfig:{average:n??void 0,standardDeviation:o??void 0,bins:t?t.bins:[]},style:u,handlesSyncedToPrimary:!0,persistSizeRangeEnabled:!0})}updateFromRendererResult(e,t){const{size:{visualVariables:s},statistics:i}=e,{avg:a,stddev:n}=i,o=s[0].stops,[r,l]=(0,h.N)(e.renderer.authoringInfo),d=z(e.renderer.classBreakInfos);this.set({max:l,min:r,stops:o,histogramConfig:{average:a,standardDeviation:n,bins:t?t.bins:[]},style:d,handlesSyncedToPrimary:!0,persistSizeRangeEnabled:!0})}updateRenderer(e){if("univariate-color-size"!==e.authoringInfo?.type||"above-and-below"!==e.authoringInfo?.univariateTheme)return console.error("Input renderer must be a univariate renderer with an above-and-below theme."),null;const t=e.clone(),s=t.visualVariables?.find((e=>"size"===e.type&&"outline"!==e.target&&e.stops)),{stops:i}=this;if(!t.visualVariables||!s||!i)return console.error("No size stops available."),null;const a=t.visualVariables.indexOf(s);t.visualVariables.splice(a,1),s.stops=i,t.visualVariables.push(s);const n=i[5===i.length?2:1].value;return t.classBreakInfos[0].maxValue=n,t.classBreakInfos[1].minValue=n,t}updateFromVisualVariable(e){if(!e)return;const{maxDataValue:t,minDataValue:s,stops:i}=e;if(i)this.stops=i;else{const[i,a]=(0,c.getSizesFromVariable)(e);this.stops=[new d.default({value:s??void 0,size:a}),new d.default({value:t??void 0,size:i})]}}render(){const{label:e,state:t,viewModel:{primaryHandleEnabled:s},visibleElements:i}=this,a="disabled"===t,n=this.classes(b.base,g.D.widget,g.D.panel,{[g.D.disabled]:a,[b.primaryHandle]:s,[b.track]:!!i.interactiveTrack});return(0,f.K)("div",{"aria-label":e,class:n},a?null:this.renderContent(this._renderRamp(),b.sliderContainer,b.histogramContainer))}_renderRamp(){const{style:{trackBackgroundColor:e},zoomOptions:t}=this;return(0,f.K)("div",{afterCreate:y.cA,bind:this,class:b.rampElement,"data-node-ref":"_rampNode"},(0,f.K)("svg",{key:"ramp-svg",xmlns:"http://www.w3.org/2000/svg"},(0,f.K)("rect",{fill:(0,c.getFillFromColor)(e),height:"100%",width:"100%",x:"0",y:"0"}),this._renderPrimaryRamp(),this._renderPath()),t?this.renderZoomCaps():null)}_renderPrimaryRamp(){const{_rampFillId:e,style:{trackAboveFillColor:t,trackBelowFillColor:s},viewModel:i}=this;return[(0,f.K)("defs",null,this.renderRampFillDefinition(e,i.getGradientStopInfo(t,s)))]}_renderPath(){if(!this._rampNode)return;const{offsetHeight:e=0,offsetWidth:t=0}=this._rampNode;if(null==e||null==t)return;const{stops:s,viewModel:{max:i,min:a},_rampFillId:n,_minRampFillWidth:o}=this,r=(0,c.getDynamicPathForSizeStops)({max:i,min:a,pathHeight:e,pathWidth:t,stops:s,padding:o});return(0,f.K)("path",{d:r,fill:`url(#${n})`})}};(0,a._)([(0,o.MZ)()],M.prototype,"handlesSyncedToPrimary",null),(0,a._)([(0,o.MZ)()],M.prototype,"label",null),(0,a._)([(0,o.MZ)(),(0,v.G)("esri/widgets/smartMapping/SizeSlider/t9n/SizeSlider")],M.prototype,"messages",void 0),(0,a._)([(0,o.MZ)()],M.prototype,"persistSizeRangeEnabled",null),(0,a._)([(0,o.MZ)()],M.prototype,"stops",null),(0,a._)([(0,o.MZ)()],M.prototype,"style",void 0),(0,a._)([(0,r.w)("style")],M.prototype,"castStyle",null),(0,a._)([(0,o.MZ)({type:p.default})],M.prototype,"viewModel",void 0),M=i=(0,a._)([(0,l.$)("esri.widgets.smartMapping.BinaryColorSizeSlider")],M);const S=M;function z(e){if(e.length<=1)return{};const t=e=>{if("cim"===e.type)return(0,u.getCIMSymbolColor)(e);if(e.symbolLayers){const t=e.symbolLayers?.at(0);return t.material?.color}return e.color};return{trackBelowFillColor:t(e[0].symbol)??void 0,trackAboveFillColor:t(e[1].symbol)??void 0}}},80382:(e,t,s)=>{function i(e){return a(e?.visualVariables[0])}function a(e){return[e?.minSliderValue??0,e?.maxSliderValue??0]}s.d(t,{N:()=>i,n:()=>a})},87392:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s(93800),a=s(48602),n=(s(21265),s(50925),s(14746),s(75269)),o=s(12069);let r=class extends o.default{constructor(e){super(e),this.persistSizeRangeEnabled=!1}updateStops(e){const{primaryHandleEnabled:t,persistSizeRangeEnabled:s,stops:i}=this,a=this.getValuesFromStops();if(a?.length&&(e.sort(((e,t)=>e.value>t.value?1:-1)).forEach((e=>{a[e.index]=e.value})),i.forEach(((e,t)=>e.value=a[t])),t&&s)){const{stops:e}=this,t=this.getValuesFromStops(),s=e.map((e=>e.size)),i=Math.max(...s),a=Math.min(...s),n=Math.max(...t),o=Math.min(...t),r=e[5===e.length?2:1].value,l=Math.abs(n-r),h=Math.abs(o-r),d=l>h?l:h,u=i-a;if(0===d)return;e.forEach((e=>{e.size=Math.abs(e.value-r)/d*u+a}))}}};(0,i._)([(0,a.MZ)()],r.prototype,"persistSizeRangeEnabled",void 0),r=(0,i._)([(0,n.$)("esri.widgets.smartMapping.SizeSlider.SizeSliderViewModel")],r);const l=r},87610:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s(93800),a=s(48602),n=(s(21265),s(50925),s(14746),s(75269)),o=s(87392);let r=class extends o.default{constructor(e){super(e),this.primaryHandleEnabled=!0}getGradientStopInfo(e,t){if(!this.stops?.length)return[];const{min:s,max:i,stops:a}=this,n=[t,t,t,e,e],o=[],r=i-s;return a.forEach(((e,t)=>{const s=n[t],l=(i-e.value)/r,h=0===t?l:(i-a[t-1].value)/r;o.push({offset:h,color:s},{offset:l,color:s})})),o}};(0,i._)([(0,a.MZ)({readOnly:!0})],r.prototype,"primaryHandleEnabled",void 0),r=(0,i._)([(0,n.$)("esri.widgets.smartMapping.BinaryColorSizeSlider.BinaryColorSizeSliderViewModel")],r);const l=r}}]);