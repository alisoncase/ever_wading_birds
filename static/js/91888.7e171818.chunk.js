"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[91888],{91888:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var i=t(93800),s=t(6946),n=t(79953),p=t(48602),l=t(32980),r=(t(21265),t(14746),t(75269)),c=t(96913),o=t(70576),h=t(71374),d=t(76983);let m=class extends s.default{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=(0,h.es)("hybrid",this._basemapCache),this.view=null}initialize(){(0,n.watch)((()=>this.nextBasemap),(e=>{e&&!e.loaded&&e.load().catch((()=>{}))}),n.initial)}destroy(){this.view=null,(0,h.jj)(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return(0,d.n8)(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){return(0,h.es)(this.view?.map?.basemap??"topo-vector",this._basemapCache)}castNextBasemap(e){return(0,h.es)(e,this._basemapCache)}get state(){const{view:e}=this;if(!e?.ready)return"disabled";if(this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:a}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&null!=a&&!e.spatialReference.equals(a)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:a,state:t,view:i}=this;if(!i||"disabled"===t||"incompatible-next-basemap"===t)return;const s=this._viewSpatialReferenceLocked;if(!s){if(await(0,n.whenOnce)((()=>!this._nextBasemapSpatialReferenceTask.updating)),a!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:t}=this._nextBasemapSpatialReferenceTask;if(null==t||(0,o.aI)(i.spatialReference,t)||(0,c.isLoaded)()||(0,c.canProjectWithoutEngine)(i.spatialReference,t)||(this._loadingProjectionEngine=!0,await(0,c.load)(),this._loadingProjectionEngine=!1),a!==this.nextBasemap||e!==this.activeBasemap)return}i.map.basemap=a,s||null==this._nextBasemapSpatialReferenceTask.spatialReference||(0,o.aI)(i.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(i.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return(0,d.hA)(e)}};(0,i._)([(0,p.MZ)()],m.prototype,"_loadingProjectionEngine",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"_nextBasemapSpatialReferenceTask",null),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"_viewSpatialReferenceLocked",null),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"activeBasemap",null),(0,i._)([(0,p.MZ)()],m.prototype,"nextBasemap",void 0),(0,i._)([(0,l.w)("nextBasemap")],m.prototype,"castNextBasemap",null),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"state",null),(0,i._)([(0,p.MZ)()],m.prototype,"view",void 0),(0,i._)([(0,p.MZ)()],m.prototype,"toggle",null),m=(0,i._)([(0,r.$)("esri.widgets.BasemapToggle.BasemapToggleViewModel")],m);const _=m}}]);