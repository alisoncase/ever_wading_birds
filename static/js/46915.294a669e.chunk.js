"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[46915,50702,72475,75976],{7803:(e,t,i)=>{i.r(t),i.d(t,{default:()=>de});var s=i(93800),n=i(82301),r=i(79953),a=i(48602),o=(i(21265),i(50925),i(75269)),l=i(66845),d=i(88102),c=i(99104),h=i(6946),u=i(58448),f=i(17741),p=i(20620),g=i(32980),y=(i(14746),i(80556)),m=i(12560),v=i(75400),_=i(93321),b=i(42601),w=i(92539),M=i(4126),C=i(50543),T=i(56945),O=i(64824),S=i(69312),L=i(48526),P=(i(74719),i(7187),i(77751),i(2925),i(32195),i(83833),i(55601),i(15173),i(47800),i(76493),i(65920),i(54824),i(77690),i(32557),i(64682),i(70634),i(42672),i(91345),i(70576),i(64855),i(31982),i(82604),i(14315),i(30748),i(69653),i(51181),i(67829),i(89393),i(66644),i(31206),i(31315),i(27458),i(90711),i(91032),i(20327),i(99079),i(71763),i(74653),i(24248),i(66317),i(14104),i(74715),i(42888),i(78129),i(25955),i(50693),i(50552),i(39698),i(1021),i(92156),i(69008),i(24591),i(4064),i(94433),i(36573),i(60027),i(14727),i(40547),i(84316),i(64177),i(7835),i(91683),i(3172),i(23060),i(43103),i(24541),i(96652),i(44524),i(58621),i(90723),i(92508),i(82350),i(53889),i(45192),i(21971),i(75487),i(93314),i(26427),i(1441),i(82137),i(25867),i(99067),i(79455),i(83531),i(47871),i(85099),i(4309),i(52537),i(83159),i(82545),i(11896),i(95338),i(10844),i(55697),i(12723),i(16878),i(84964),i(6743),i(94814),i(8374),i(90030),i(65597),i(23311),i(13248),i(50765),i(33342)),E=(i(58828),i(15492),i(3046),i(84190),i(30142),i(93205),i(68693),i(16998),i(64226),i(58566)),V=i(76488),k=i(83383),R=i(48049),K=i(42804),x=i(24195);const Z=new d.default("#000");let A;const F=.01;let I=class extends h.default{};I=(0,s._)([(0,o.$)("esri.views.VideoView.Base")],I);let D=class extends((0,O.g)((0,T.u)(u.A.EventedMixin(p.A.EsriPromiseMixin(I))))){constructor(e){super(e),this._isValid=!1,this.stage=null,this.layer=null,this.navigation=new R.default,this.ready=!1,this.stateManager=new E.O({constraints:new L.A({view:this,minScale:1,maxScale:F})}),this.spatialReference=new _.default({wkid:0}),this.type="2d",this.ui=new x.A,this.addHandles([(0,r.watch)((()=>this.preconditionsReady),(e=>e?this._startup():this._teardown())),(0,r.watch)((()=>this.layer),(()=>this.addResolvingPromise((0,r.whenOnce)((()=>this.ready)))),r.initial),(0,r.watch)((()=>[this.layer?.effect,this._overlayContainer,this.effect]),(()=>{this._overlayContainer&&(this._overlayContainer.effect=this.effect??this.layer?.effect??null)}),r.syncAndInitial),(0,r.watch)((()=>this.videoSize),(e=>{let[t,i]=e;this._extent&&t&&i&&(this._extent.xmax=t,this._extent.ymax=i)}))])}initialize(){this.addResolvingPromise(async function(){const[,{Stage:e}]=await Promise.all([i.e(93355).then(i.bind(i,15736)),Promise.all([i.e(9122),i.e(54776),i.e(1295),i.e(58714),i.e(43862)]).then(i.bind(i,48130))]);A=e}().then((()=>(this._isValid=!0,(0,r.whenOnce)((()=>this.ready))))))}destroy(){this._teardown()}get constraintsInfo(){return{lods:null,spatialReference:this.spatialReference}}get effect(){return this.layer?.effect}set effect(e){this._override("effect",e)}get preconditionsReady(){return!(!this._isValid||0===this.width||0===this.height||0===this.videoSize[0]||0===this.videoSize[1])}get rendering(){return this.stage?.renderRequested??!1}get videoSize(){if(!this.layer?.videoWidth||!this.layer?.videoHeight)return[0,0];const[e,t]=this.size,i=(this.layer?.videoWidth||0)/(this.layer?.videoHeight||0),s=t*i,n=e/i;return e/t>=1?i>=1?s<=e?[s,t]:[e,n]:n<=t?[e,n]:[s,t]:i>=1?n<=t?[e,n]:[s,t]:s<=e?[s,t]:[e,n]}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}_startup(){if(!this.layer)return;const e=this._getViewpoint();this.stateManager.startup(e,this.size,e.targetGeometry.spatialReference),this.stage=new A(this.surface,{renderingOptions:this.renderingOptions,backgroundColor:Z}),this._prepareStage(this.stage);const t=new S.A({view:this});this._set("animationManager",t);const i=new P.A({view:this,animationManager:t});this._set("mapViewNavigation",i),this._updateConstraints(),this.frameTask.start(),this._set("ready",!0)}_teardown(){this.stage.destroy(),this.stage=null,this._videoElementView=null,this._overlayContainer.removeAllChildren(),this._overlayContainer=null,this.removeAllHandles(),this._set("ready",!1),this.stateManager.teardown(),this.frameTask.stop(),this.stationaryManager.clear(),this.frameTask=(0,f.pR)(this.frameTask),this.goToManager.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}_getViewpoint(){return new c.default({targetGeometry:new v.default({x:this.videoSize[0]/2,y:this.videoSize[1]/2,spatialReference:this.spatialReference}),scale:1})}_prepareStage(e){this.addHandles([(0,r.watch)((()=>this.stationary),(t=>e.stationary=t),r.syncAndInitial),(0,r.watch)((()=>this.state.id),(()=>e.state=this.state),r.syncAndInitial),(0,r.watch)((()=>this.renderingOptions),(t=>e.renderingOptions=t),r.syncAndInitial)],"video-view"),this._extent=new m.default({xmin:0,ymin:0,xmax:this.videoSize[0],ymax:this.videoSize[1],spatialReference:{wkid:0}}),this._videoElementView=new w._({element:new C.default({video:this.layer?.videoElement,georeference:new b.default({extent:this._extent}),autoplay:!1}),spatialReference:this.spatialReference});const t=new V.A(this._videoElementView);this._overlayContainer=new k.A,this._overlayContainer.addChild(t),this.stage.addChild(this._overlayContainer)}_updateConstraints(){this._updateZoomConstraints(),this._updatePanConstraints()}_updateZoomConstraints(){const e=this.videoSize,t=Math.max(e[0]/this.size[0],e[1]/this.size[1]),i=[];for(let n=t;n>F;n/=2)i.push(n);i.push(F);const{lods:s}=M.default.create({scales:i});this.constraints.set({lods:s,minScale:t})}_updatePanConstraints(){const e=e=>{if(!e.targetGeometry)return e;const[t,i]=this.videoSize,s=t*e.scale/2,n=i*e.scale/2,r=e.targetGeometry.clone();return r.x=Math.max(s,Math.min(t-s,r.x)),r.y=Math.max(n,Math.min(i-n,r.y)),e.targetGeometry=r,e};this.constraints.customConstraints.add({constrain:e,applyPanConstraint:e})}};(0,s._)([(0,a.MZ)()],D.prototype,"_overlayContainer",void 0),(0,s._)([(0,a.MZ)()],D.prototype,"_isValid",void 0),(0,s._)([(0,a.MZ)()],D.prototype,"constraintsInfo",null),(0,s._)([(0,a.MZ)()],D.prototype,"effect",null),(0,s._)([(0,a.MZ)()],D.prototype,"layer",void 0),(0,s._)([(0,a.MZ)({type:R.default,nonNullable:!0})],D.prototype,"navigation",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],D.prototype,"preconditionsReady",null),(0,s._)([(0,a.MZ)({readOnly:!0})],D.prototype,"ready",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],D.prototype,"rendering",null),(0,s._)([(0,a.MZ)()],D.prototype,"stateManager",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],D.prototype,"videoSize",null),(0,s._)([(0,a.MZ)()],D.prototype,"scale",null),(0,s._)([(0,a.MZ)()],D.prototype,"spatialReference",void 0),(0,s._)([(0,a.MZ)()],D.prototype,"type",void 0),(0,s._)([(0,a.MZ)(),(0,g.w)((e=>e instanceof K.default?e:(0,y.PZ)(x.A,e)))],D.prototype,"ui",void 0),D=(0,s._)([(0,o.$)("esri.views.VideoView")],D);const z=D;var q=i(35255),$=i(27811),H=i(49403),G=i(50821),B=(i(17745),i(76697)),N=i(87118);const W="esri-video-player",j={base:W,color:`${W}__color-block`,colorActive:`${W}__color-block__active`,colorPicker:`${W}__color-picker`,playerActions:`${W}__actions`,playerControls:`${W}__controls`,playerTimecode:`${W}__timecode`,playerToolbar:`${W}__toolbar`,progress:`${W}__progress`,rangeSlider:`${W}__range-slider`,settings:`${W}__settings`,settingsFlow:`${W}__settings-flow`,slider:`${W}__slider`,sliderProgressContainer:`${W}__slider-progress-container`,videoView:`${W}__video-view`};var U=i(75976);const Q="esri-metadata-table",Y={table:Q,data:`${Q}__data`,emptyState:`${Q}__empty-state`};function J(e){let{viewModel:t,messages:i}=e;const{metadata:s}=t;return s?(0,N.K)("calcite-block",{heading:i.metadata,open:!0},(0,N.K)("calcite-accordion",{appearance:"solid",selectionMode:"single"},(0,N.K)("calcite-accordion-item",{heading:i.missionInfo},(0,N.K)("div",{class:Y.table},Object.keys(s.missionInfo).map((e=>[(0,N.K)("div",{class:Y.data},e),(0,N.K)("div",{class:Y.data},s.missionInfo[e])])))),(0,N.K)("calcite-accordion-item",{heading:i.platformInfo},(0,N.K)("div",{class:Y.table},Object.keys(s.platformInfo).map((e=>[(0,N.K)("div",{class:Y.data},e),(0,N.K)("div",{class:Y.data},s.platformInfo[e])])))),(0,N.K)("calcite-accordion-item",{heading:i.frameInfo},(0,N.K)("div",{class:Y.table},Object.keys(s.frameInfo).map((e=>[(0,N.K)("div",{class:Y.data},e),(0,N.K)("div",{class:Y.data},s.frameInfo[e])])))))):(0,N.K)("calcite-tile",{class:Y.emptyState,description:i.metadataDescription,heading:i.metadataNotLoaded})}function X(e){let{viewModel:t,messages:i}=e;const{state:s,playing:n}=t,r="not-ready"===s||"waiting"===s,a=n?i.pause:i.play,o=(0,N.K)("calcite-action",{active:n,alignment:"center",bind:t,disabled:r,icon:n?"pause-f":"play-f",key:"play",onclick:n?t.pause:t.play,scale:"s",text:a,title:a}),l=i.reverse,d=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"reverse-f",key:"reverse",onclick:t.seekBackward,scale:"s",text:l,title:l}),c=i.forward,h=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"forward-f",key:"forward",onclick:t.seekForward,scale:"s",text:c,title:c}),u=i.beginning,f=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"beginning-f",key:"beginning",onclick:t.seekToBeginning,scale:"s",text:u,title:u}),p=i.end,g=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"end-f",key:"end",onclick:t.seekToEnding,scale:"s",text:p,title:p});return(0,N.K)("calcite-action-bar",{class:j.playerActions,expandDisabled:!0,layout:"horizontal",scale:"s"},[f,d,o,h,g])}const ee={active:null,speed:"1x",quality:"Auto",color:null},te=new d.default([255,127,0]);let ie=null;function se(e){let{viewModel:t,settings:i,messages:s}=e;const{state:n}=t,r="not-ready"===n||"waiting"===n,a=(0,N.K)("calcite-flow-item",{heading:s.playbackSpeed,key:"playback-speed",selected:"speed"===i.active,onCalciteFlowItemBack:()=>{i.active=null}},(0,N.K)("calcite-list",{label:s.playbackSpeed,selectionMode:"single-persist"},[{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}].map((e=>{let{label:s,value:n}=e;return(0,N.K)("calcite-list-item",{key:s,label:s,onclick:()=>{i.speed=s,t.changePlaybackSpeed(n)},selected:s===i.speed})})))),o=(0,N.K)("calcite-flow-item",{heading:s.quality,key:`Quality (${i.quality})`,selected:"quality"===i.active,onCalciteFlowItemBack:()=>{i.active=null}},(0,N.K)("calcite-list",{label:s.quality,selectionMode:"single-persist"},["Auto"].map((e=>(0,N.K)("calcite-list-item",{key:e,label:e,onclick:()=>{i.quality=e},selected:e===i.quality}))))),l=(0,N.K)("calcite-flow-item",{heading:s.graphics,key:`Graphics (${i.color})`,selected:"color"===i.active,onCalciteFlowItemBack:()=>{i.active=null,i.color=ie?new d.default(ie):null,i.color&&t.changeGraphicsColor(i.color)}},(0,N.K)("calcite-block",{heading:s.color,open:!0},(0,N.K)("calcite-color-picker",{channelsDisabled:!0,format:"hex",savedDisabled:!0,scale:"s",value:i.color?.toHex()??te.toHex(),onCalciteColorPickerChange:e=>{ie=e.currentTarget.value?.toString()}})));return(0,N.K)("div",{class:j.settings},(0,N.K)("calcite-popover",{autoClose:!0,label:s.settings,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"settings-action",scale:"s"},(0,N.K)("calcite-flow",{class:j.settingsFlow,key:"root-flow"},(0,N.K)("calcite-flow-item",{closable:!1,heading:"Settings",key:"root-flow-item",selected:!i.active},(0,N.K)("calcite-list",{label:s.settings},(0,N.K)("calcite-list-item",{key:`Speed (${i.speed})`,label:s.speed,onclick:()=>{i.active="speed"}},(0,N.K)("div",{slot:"content-end"},(0,N.K)("calcite-chip",{label:i.speed,scale:"s"},i.speed)),(0,N.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),(0,N.K)("calcite-list-item",{key:`Quality (${i.quality})`,label:s.quality,onclick:()=>{i.active="quality"}},(0,N.K)("div",{slot:"content-end"},(0,N.K)("calcite-chip",{label:i.quality,scale:"s"},i.quality)),(0,N.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),(0,N.K)("calcite-list-item",{key:`Graphics (${i.color})`,label:s.graphics,onclick:()=>{i.active="color"}},(0,N.K)("calcite-color-picker-swatch",{color:i.color?.toString()??te.toString(),scale:"s",slot:"content-end"}),(0,N.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})))),"speed"===i.active?a:null,"quality"===i.active?o:null,"color"===i.active?l:null)),(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"sliders",id:"settings-action",key:"settings",scale:"s",slot:"trigger",text:s.settings}))}function ne(e){return"none"===e.followingMode?"circle-disallowed":"follow-sensor"===e.followingMode?"zoom-to-object":"follow-frame"===e.followingMode?"follow":"video"}function re(e){let{viewModel:t,messages:i,settings:s,toggleMetadata:n}=e;const{state:r}=t,a="not-ready"===r||"waiting"===r,o=(0,N.K)("div",null,(0,N.K)("calcite-popover",{autoClose:!0,label:i.layers,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"layers-action",scale:"s"},(0,N.K)("calcite-panel",{heading:i.layers},(0,N.K)("calcite-list",{label:i.layers,selectionMode:"multiple"},(0,N.K)("calcite-list-item",{label:i.sensor,onclick:()=>{t.toggleSensorDisplay()},selected:!!t.layer?.telemetryDisplay?.sensorLocation}),(0,N.K)("calcite-list-item",{label:i.sightLine,onclick:()=>{t.toggleSensorSightLineDisplay()},selected:!!t.layer?.telemetryDisplay?.lineOfSight}),(0,N.K)("calcite-list-item",{label:i.sensorTrail,onclick:()=>{t.toggleSensorTrailDisplay()},selected:!!t.layer?.telemetryDisplay?.sensorTrail}),(0,N.K)("calcite-list-item",{label:i.frameCenter,onclick:()=>{t.toggleFrameCenterDisplay()},selected:!!t.layer?.telemetryDisplay?.frameCenter}),(0,N.K)("calcite-list-item",{label:i.frameOutline,onclick:()=>{t.toggleFrameOutlineDisplay()},selected:!!t.layer?.telemetryDisplay?.frameOutline}),(0,N.K)("calcite-list-item",{label:i.frame,onclick:()=>{t.toggleFrameDisplay()},selected:!!t.layer?.telemetryDisplay?.frame})))),(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:a,icon:"layers",id:"layers-action",key:"layers",scale:"s",slot:"trigger",text:i.layers})),l=(0,N.K)("div",null,(0,N.K)("calcite-popover",{autoClose:!0,label:i.follow,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"follow-action",scale:"s"},(0,N.K)("calcite-panel",{heading:i.follow},(0,N.K)("calcite-list",{label:i.follow,selectionMode:"single-persist"},(0,N.K)("calcite-list-item",{label:i.none,onclick:()=>{t.followingMode="none"}},(0,N.K)("calcite-icon",{icon:"circle-disallowed",scale:"s",slot:"content-start"})),(0,N.K)("calcite-list-item",{label:i.sensor,onclick:()=>{t.followingMode="follow-sensor"}},(0,N.K)("calcite-icon",{icon:"zoom-to-object",scale:"s",slot:"content-start"})),(0,N.K)("calcite-list-item",{label:i.frame,onclick:()=>{t.followingMode="follow-frame"}},(0,N.K)("calcite-icon",{icon:"follow",scale:"s",slot:"content-start"})),(0,N.K)("calcite-list-item",{label:i.video,onclick:()=>{t.followingMode="follow-both"},selected:!0},(0,N.K)("calcite-icon",{icon:"video",scale:"s",slot:"content-start"}))))),(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:a,icon:ne(t),id:"follow-action",key:"follow",scale:"s",slot:"trigger",text:i.follow})),d=(0,N.K)(se,{messages:i,settings:s,viewModel:t}),c=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:a,icon:"feature-details",key:"metadata",onclick:n,scale:"s",text:i.metadata});return(0,N.K)("calcite-action-bar",{class:j.playerControls,expandDisabled:!0,layout:"horizontal",scale:"s"},[o,l,d,c])}let ae=class extends $.default{constructor(e,t){super(e,t),this._settings=(0,n.clone)(ee),this._metadataVisible=!1,this._slider=new q.default({visibleElements:{labels:!1,rangeLabels:!1},min:0,max:100,values:[0],thumbsConstrained:!1}),this.videoView=new z({container:document.createElement("div"),constraints:{rotationEnabled:!1},ui:{components:["zoom"]}}),this.viewModel=new U.default}initialize(){this.addHandles([(0,r.watch)((()=>this.viewModel.layer),(()=>{this.videoView.layer=this.viewModel.layer}),r.initial),this._slider.on(["thumb-change","thumb-drag"],(e=>{let{value:t}=e;const i=t*this.viewModel.duration/100;this.viewModel.seekTo(i)}))])}loadDependencies(){return Promise.all([(0,H.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-bar":()=>Promise.all([i.e(86290),i.e(74597),i.e(36334)]).then(i.bind(i,36334))}),Promise.all([(0,H.W)({action:()=>i.e(88342).then(i.bind(i,88342)),"action-bar":()=>Promise.all([i.e(86290),i.e(74597),i.e(36334)]).then(i.bind(i,36334)),panel:()=>Promise.all([i.e(86290),i.e(74597),i.e(99776)]).then(i.bind(i,99776)),popover:()=>Promise.all([i.e(86290),i.e(74597)]).then(i.bind(i,74597)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),icon:()=>Promise.resolve().then(i.bind(i,92439))}),(0,H.W)({action:()=>i.e(88342).then(i.bind(i,88342)),flow:()=>i.e(58739).then(i.bind(i,58739)),"flow-item":()=>Promise.all([i.e(86290),i.e(74597),i.e(99776),i.e(85326)]).then(i.bind(i,85326)),icon:()=>Promise.resolve().then(i.bind(i,92439)),list:()=>Promise.all([i.e(46138),i.e(89939),i.e(18170)]).then(i.bind(i,18170)),"list-item":()=>Promise.all([i.e(73373),i.e(14960)]).then(i.bind(i,28898)),popover:()=>Promise.all([i.e(86290),i.e(74597)]).then(i.bind(i,74597)),block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),"color-picker":()=>Promise.all([i.e(42015),i.e(80747),i.e(9982),i.e(74557)]).then(i.bind(i,74557)),chip:()=>i.e(60382).then(i.bind(i,60382)),"color-picker-swatch":()=>i.e(80747).then(i.bind(i,80747))})]),(0,H.W)({accordion:()=>i.e(80012).then(i.bind(i,80012)),"accordion-item":()=>i.e(54530).then(i.bind(i,54530)),block:()=>Promise.all([i.e(86290),i.e(74597),i.e(73373),i.e(31853)]).then(i.bind(i,31853)),tile:()=>i.e(48908).then(i.bind(i,48908))}),(0,H.W)({progress:()=>i.e(84689).then(i.bind(i,84689)),panel:()=>Promise.all([i.e(86290),i.e(74597),i.e(99776)]).then(i.bind(i,99776)),scrim:()=>i.e(86836).then(i.bind(i,64455))})])}get effect(){return this.videoView.effect}set effect(e){this.videoView.effect=e}get icon(){return"video-web"}set icon(e){this._overrideIfSome("icon",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get rotationEnabled(){return this.videoView.constraints.rotationEnabled}set rotationEnabled(e){this.videoView.constraints.rotationEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"compass"]:this.videoView.ui.components.filter((e=>"compass"!==e))}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get zoomEnabled(){return this.videoView.navigation.mouseWheelZoomEnabled}set zoomEnabled(e){this.videoView.navigation.mouseWheelZoomEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"zoom"]:this.videoView.ui.components.filter((e=>"zoom"!==e))}render(){return(0,N.K)("div",{class:this.classes(j.base,G.D.widget)},(0,N.K)("calcite-panel",{heading:this.layer?.title||"Video Player"},this._renderLoadingScrim(),this._renderBuffering(),this._renderVideoSection(),this._renderActionBar(),this._renderMetadataSection()))}_renderLoadingScrim(){const{state:e}=this.viewModel;return this.videoView.ready?null:(0,N.K)("calcite-scrim",{loading:"error"!==e},"error"===e?this.messages.errorLoadingLayer:null)}_renderBuffering(){const{currentTime:e,buffered:t,duration:i}=this.viewModel,s=t/(i||1),n=e/(i||1);return this.viewModel.ended||s>n?null:(0,N.K)("calcite-progress",{type:"indeterminate"})}_renderVideoSection(){const{buffered:e,currentTime:t,duration:i}=this.viewModel,s=this.videoView.container;if(!s)return null;s.className=j.videoView;const n=e/(i||1),r=t/(i||1);return this._slider.values=[100*r],(0,N.K)("section",{afterCreate:le,bind:s},(0,N.K)("div",{class:j.sliderProgressContainer},(0,N.K)("progress",{class:j.progress,max:"1",value:`${n}`}),(0,N.K)("div",{class:j.slider},this._slider.render())))}_renderActionBar(){return(0,N.K)("div",{class:j.playerToolbar},(0,N.K)(X,{messages:this.messages,viewModel:this.viewModel}),(0,N.K)("div",{class:j.playerTimecode},oe(this.viewModel.currentTime)," / ",oe(this.viewModel.duration)),(0,N.K)(re,{messages:this.messages,settings:this._settings,toggleMetadata:()=>this._metadataVisible=!this._metadataVisible,viewModel:this.viewModel}))}_renderMetadataSection(){return this._metadataVisible?(0,N.K)(J,{messages:this.messages,viewModel:this.viewModel}):null}};function oe(e){return(0,l.Yq)(1e3*Math.round(e),{minute:"2-digit",second:"2-digit"})}function le(e){e.prepend(this)}(0,s._)([(0,a.MZ)()],ae.prototype,"_settings",void 0),(0,s._)([(0,a.MZ)()],ae.prototype,"effect",null),(0,s._)([(0,a.MZ)()],ae.prototype,"icon",null),(0,s._)([(0,a.MZ)()],ae.prototype,"layer",null),(0,s._)([(0,a.MZ)(),(0,B.G)("esri/widgets/VideoPlayer/t9n/VideoPlayer")],ae.prototype,"messages",void 0),(0,s._)([(0,a.MZ)()],ae.prototype,"rotationEnabled",null),(0,s._)([(0,a.MZ)()],ae.prototype,"videoView",void 0),(0,s._)([(0,a.MZ)({type:U.default})],ae.prototype,"viewModel",void 0),(0,s._)([(0,a.MZ)()],ae.prototype,"view",null),(0,s._)([(0,a.MZ)()],ae.prototype,"zoomEnabled",null),ae=(0,s._)([(0,o.$)("esri.widgets.VideoPlayer")],ae);const de=ae},13767:(e,t,i)=>{i.d(t,{q:()=>a});var s=i(62631),n=i(58448),r=i(50552);class a extends n.A{constructor(){super(...arguments),this._transitionables=null,this._clips=null,this._fadeTransition=null,this._isReady=!1,this._opacity=1,this.parent=null,this._stage=null,this._visible=!0}get computedOpacity(){return this._fadeTransition?.computedOpacity??this.opacity}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get fadeTransitionEnabled(){return null!==this._fadeTransition}set fadeTransitionEnabled(e){!this._fadeTransition&&e?(this._fadeTransition=new r.A({opacity:this.opacity,visible:this.visible}),this.addTransitionable(this._fadeTransition)):this._fadeTransition&&!e&&(this.removeTransitionable(this._fadeTransition),this._fadeTransition=null)}get inFadeTransition(){return this._fadeTransition?.transitioning??!1}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this._fadeTransition&&(this._fadeTransition.opacity=this._opacity),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage?.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t?.trashDisplayObject(this)}get transforms(){return null==this._transforms&&(this._transforms=this._createTransforms()),this._transforms}get transitioning(){return this.isTransitioning()}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this._fadeTransition&&(this._fadeTransition.visible=this._visible),this.requestRender())}get hasLabels(){return!1}get hasHighlight(){return!1}get hasBlending(){return!1}addTransitionable(e){this._transitionables??=[],this._transitionables.push(e),this.requestRender()}removeTransitionable(e){e.endTransition(),this._transitionables&&(0,s.TF)(this._transitionables,e),this.requestRender()}fadeIn(){this.fadeTransitionEnabled=!0;const e=this._fadeTransition.fadeIn();return this.opacity=1,this.requestRender(),e}fadeOut(){this.fadeTransitionEnabled=!0;const e=this._fadeTransition.fadeOut();return this.opacity=0,this.requestRender(),e}endTransitions(){if(this._transitionables){for(const e of this._transitionables)e.endTransition();this.requestRender()}}beforeRender(e){this.transitionStep(e.deltaTime,e.state.scale),this.setTransform(e.state)}afterRender(e){this.transitioning&&this.requestRender()}remove(){this.parent?.removeChild(this)}setTransform(e){}processRender(e){this.stage&&(this._fadeTransition?.computedVisible??this.visible)&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.endTransitions(),this.onDetach(),this.emit("detach")}isTransitioning(){return this._transitionables?.some((e=>e.transitioning))??!1}transitionStep(e,t){if(this._transitionables)for(const i of this._transitionables)i.transitionStep(e,t)}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},18026:(e,t,i)=>{i.d(t,{A_:()=>m,I0:()=>g,SC:()=>y,YI:()=>p,Yv:()=>v,a1:()=>h,nX:()=>u,yQ:()=>f});var s=i(75400),n=i(65920),r=i(54824),a=i(72475),o=i(50702);const l="application/x-mpegURL",d="video/mp4",c="video/webm",h={UASDatalinkLocalSet:1e4,PrecisionTimeStamp:10002,MissionId:10003,PlatformTailNumber:10004,PlatformHeadingAngle:10005,PlatformPitchAngle:10006,PlatformRollAngle:10007,PlatformTrueAirspeed:10008,PlatformIndicatedAirspeed:10009,PlatformDesignation:10010,ImageSourceSensor:10011,ImageCoordinateSystem:10012,SensorLatitude:10013,SensorLongitude:10014,SensorTrueAltitude:10015,SensorHorizontalFOV:10016,SensorVerticalFOV:10017,SensorAzimuthAngle:10018,SensorElevationAngle:10019,SensorRollAngle:10020,PlatformSlantRange:10021,TargetWidth:10022,FrameCenterLatitude:10023,FrameCenterLongitude:10024,FrameCenterElevation:10025,OffsetCorner1Latitude:10026,OffsetCorner1Longitude:10027,OffsetCorner2Latitude:10028,OffsetCorner2Longitude:10029,OffsetCorner3Latitude:10030,OffsetCorner3Longitude:10031,OffsetCorner4Latitude:10032,OffsetCorner4Longitude:10033,TargetLocationLatitude:10040,TargetLocationLongitude:10041,TargetLocationElevation:10042,TargetTrackGateWidth:10043,TargetTrackGateHeight:10044,TargetErrorEstimateHorizontal:10045,TargetErrorEstimateLateral:10046,GenericFlagData:10047,PlatformGroundSpeed:10056,PlatformGroundRange:10057,PlatformRemainingFuel:10058,PlatformCallSign:10059,SensorFOVName:10063,PlatformMagneticHeading:10064,LDSVersionNumber:10065,AlternatePlatformName:10070,EventStartTimeUTC:10072,VMTIDataSet:10074,SensorEllipsoidHeight:10075,OperationalMode:10077,CornerLatitudePoint1:10082,CornerLongitudePoint1:10083,CornerLatitudePoint2:10084,CornerLongitudePoint2:10085,CornerLatitudePoint3:10086,CornerLongitudePoint3:10087,CornerLatitudePoint4:10088,CornerLongitudePoint4:10089,SARMotionImageryMetadata:10095,SecurityClassification:20001,SecurityClassifyingAuthority:20002,SecurityClassifyingCountry:20003,SecuritySCI:20004,SecurityCaveats:20005,SecurityReleaseInstructions:20006,SecurityLDSVersion:20022,EsriVideoWidth:90001,EsriVideoHeight:90002,EsriFrameCenterLatitude:90050,EsriFrameCenterLongitude:90051,EsriCornerLatitudePt1:90052,EsriCornerLongitudePt1:90053,EsriCornerLatitudePt2:90054,EsriCornerLongitudePt2:90055,EsriCornerLatitudePt3:90056,EsriCornerLongitudePt3:90057,EsriCornerLatitudePt4:90058,EsriCornerLongitudePt4:90059,EsriFrameOutline:90060,EsriSensorPosition:90061,EsriHorizonPixelPack:90063,EsriGroundControlPoints:90064};function u(e){const{duration:t,end:i,start:s,timezone:n="UTC"}=e||{};return"number"!=typeof t?null:new o.default({duration:t||null,end:"number"==typeof i?new Date(i):null,start:"number"==typeof s?new Date(s):null,timezone:n})}function f(e,t){const i=[...t],s=i.findIndex((t=>t.equals(e)));return s>-1&&i.splice(s),i.push(e),i}function p(e){if(!e?.size)return new a.default;const t=function(e){if(!e?.size)return null;if(e.has(h.EsriSensorPosition)){const t=e.get(h.EsriSensorPosition)?.value;if(t)return s.default.fromJSON(t.geometry)}return e.has(h.SensorLongitude)&&e.has(h.SensorLatitude)&&e.has(h.SensorTrueAltitude)?new s.default({x:e.get(h.SensorLongitude)?.value,y:e.get(h.SensorLatitude)?.value,z:e.get(h.SensorTrueAltitude)?.value}):null}(e),i=function(e){return function(e){return e&&e.has(h.EsriFrameCenterLatitude)&&e.has(h.EsriFrameCenterLongitude)?new s.default({x:e.get(h.EsriFrameCenterLongitude).value,y:e.get(h.EsriFrameCenterLatitude).value,z:e.get(h.FrameCenterElevation).value}):null}(e)??function(e){return e&&e.has(h.FrameCenterLatitude)&&e.has(h.FrameCenterLongitude)?new s.default({x:e.get(h.FrameCenterLongitude)?.value,y:e.get(h.FrameCenterLatitude)?.value,z:e.get(h.FrameCenterElevation)?.value}):null}(e)}(e),o=function(e){if(!e)return null;const t=e.get(h.EsriFrameOutline)?.value;return t?n.default.fromJSON(t.geometry):function(e){if(!(e.has(h.EsriCornerLatitudePt1)&&e.has(h.EsriCornerLongitudePt1)&&e.has(h.EsriCornerLatitudePt2)&&e.has(h.EsriCornerLongitudePt2)&&e.has(h.EsriCornerLatitudePt3)&&e.has(h.EsriCornerLongitudePt3)&&e.has(h.EsriCornerLatitudePt4)&&e.has(h.EsriCornerLongitudePt4)))return null;const t=[e.get(h.EsriCornerLongitudePt1)?.value,e.get(h.EsriCornerLatitudePt1)?.value],i=[e.get(h.EsriCornerLongitudePt2)?.value,e.get(h.EsriCornerLatitudePt2)?.value],s=[e.get(h.EsriCornerLongitudePt3)?.value,e.get(h.EsriCornerLatitudePt3)?.value],r=[e.get(h.EsriCornerLongitudePt4)?.value,e.get(h.EsriCornerLatitudePt4)?.value];return new n.default({rings:[[t,i,s,r]]})}(e)??function(e){if(!(e.has(h.OffsetCorner1Latitude)&&e.has(h.OffsetCorner1Longitude)&&e.has(h.OffsetCorner2Latitude)&&e.has(h.OffsetCorner2Longitude)&&e.has(h.OffsetCorner3Latitude)&&e.has(h.OffsetCorner3Longitude)&&e.has(h.OffsetCorner4Latitude)&&e.has(h.OffsetCorner4Longitude)&&e.has(h.FrameCenterLatitude)&&e.has(h.FrameCenterLongitude)))return null;const t=e.get(h.FrameCenterLatitude)?.value,i=e.get(h.FrameCenterLongitude)?.value,s=t+e.get(h.OffsetCorner1Latitude)?.value,r=i+e.get(h.OffsetCorner1Longitude)?.value,a=t+e.get(h.OffsetCorner2Latitude)?.value,o=i+e.get(h.OffsetCorner2Longitude)?.value,l=t+e.get(h.OffsetCorner3Latitude)?.value,d=i+e.get(h.OffsetCorner3Longitude)?.value,c=t+e.get(h.OffsetCorner4Latitude)?.value,u=i+e.get(h.OffsetCorner4Longitude)?.value;return new n.default({rings:[[[r,s],[o,a],[d,l],[u,c]]]})}(e)}(e),l=function(e,t){if(!e||!t)return null;const i=[e.x,e.y,e.z??0],s=[t.x,t.y,t.z??0];return new r.default({paths:[[i,s]]})}(t,i);return new a.default({frameCenter:i,frameOutline:o,lineOfSight:l,sensorLocation:t})}function g(e){return e?.size?e.get(h.EsriGroundControlPoints)?.value??null??null:null}function y(e){return e?.size?e.get(h.EsriHorizonPixelPack)?.value??null:null}function m(e){if(!e)return l;const t=e.match(/\.(\w{3,4})(?:$|\?)/i);if(!t)return l;switch(t[1].toLowerCase()){case"mp4":return d;case"webm":return c;default:return l}}function v(e){const t=e?.layers;return t?.length?t.map((e=>({layerId:e.id,posterUrl:e.poster,sourceType:e.serviceType,title:e.name,type:e.type||"Video Layer"}))):[]}},50543:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var s,n=i(93800),r=i(23060),a=i(74719),o=i(63160),l=i(50925),d=i(64682),c=i(79953),h=i(43103),u=i(48602),f=(i(21265),i(14746),i(75269)),p=i(15484),g=i(32395),y=i(19783),m=i(37623),v=i(85042);let _=class extends g.A{constructor(e){super(e),this.autoplay=!0,this.content=null,this.controller=null,this.type="video",this[s]=!0}load(){const e=this.video;return"string"==typeof e?this.addResolvingPromise(Promise.all([this._preProcessVideoUrl(e),i.e(8582).then(i.bind(i,8582))]).then((async e=>{let[t,{default:i}]=e;this.controller=new i,this.controller.playerUrl=t,await(0,c.whenOnce)((()=>this.controller?.element)),this.controller.loop=!0,this.controller.muted=!0,this.controller.playsInline=!0,this.controller.crossOrigin="anonymous",await(0,c.whenOnce)((()=>"can-play"===this.controller?.state)),await this.controller.play(),this.autoplay||this.controller.pause(),this._set("content",this.controller.element)}))):e instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(e).then((()=>{this._set("content",e)}))):this.addResolvingPromise(Promise.reject(new a.default("video-element:invalid-video-type","Invalid video type",{video:e}))),Promise.resolve(this)}get contentWidth(){return this.content?.videoWidth??0}get contentHeight(){return this.content?.videoHeight??0}get currentTime(){return this.controller?.currentTime}set currentTime(e){if(!this.controller)return;const t=(0,d.qE)(e,0,this.controller.duration);this.controller?.setCurrentTime(t)}get duration(){return this.controller?.duration}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):l.A.getLogger(this).error("#video","video cannot be changed after the element is loaded.")}writeVideo(e,t,i,s){if(!e)return void(s?.messages&&s.messages.push(new a.default("video-element:unsupported-video","video source is missing")));const n=function(e){return"string"==typeof e&&!(0,h.isDataProtocol)(e)&&!(0,h.isBlobProtocol)(e)}(e)?e:null;if(!n)return void(s?.messages&&s.messages.push(new a.default("video-element:unsupported-video","video source must be an absolute url")));!(0,h.isAbsolute)(n)&&s?.blockedRelativeUrls&&s.blockedRelativeUrls.push(n);const r=(0,h.makeAbsolute)(n);(0,v.i)(r)?s?.messages&&s.messages.push(new a.default("video-element:unsupported-video","video source cannot be an item resource")):t[i]=r}async _preProcessVideoUrl(e){if((0,h.getProxyRule)(e))return(0,h.addProxy)(e);try{return await(0,r.default)(e,{method:"head"}),e}catch{return(0,h.addProxy)(e,!0)}}_loadVideo(e){return new Promise(((t,i)=>{const s=(0,o.Oo)(e,"canplay",(()=>{this.removeHandles("canplay"),this.autoplay?e.play().then(t,i):t()}));this.addHandles(s,"canplay"),"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",(0,h.isBlobProtocol)(e.src)||(e.src=e.src))}))}};s=m.UR,(0,n._)([(0,u.MZ)()],_.prototype,"autoplay",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],_.prototype,"content",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],_.prototype,"contentWidth",null),(0,n._)([(0,u.MZ)({readOnly:!0})],_.prototype,"contentHeight",null),(0,n._)([(0,u.MZ)()],_.prototype,"controller",void 0),(0,n._)([(0,u.MZ)({type:Number})],_.prototype,"currentTime",null),(0,n._)([(0,u.MZ)({type:Number})],_.prototype,"duration",null),(0,n._)([(0,u.MZ)(y.x3)],_.prototype,"video",null),(0,n._)([(0,p.K)("video")],_.prototype,"writeVideo",null),(0,n._)([(0,u.MZ)(y.m$)],_.prototype,"type",void 0),_=(0,n._)([(0,f.$)("esri.layers.support.VideoElement")],_);const b=_},50552:(e,t,i)=>{i.d(t,{A:()=>d});var s=i(93800),n=i(6946),r=i(21265),a=i(49959),o=i(48602),l=(i(50925),i(14746),i(75269));let d=class extends n.default{constructor(e){super(e),this.computedOpacity=1,this.computedVisible=!0,this.opacity=1,this.visible=!0,this._fadeOutResolver=null,this._fadeInResolver=null}get transitioning(){return(this._fadeOutResolver||!this.visible?0:this.opacity)!==this.computedOpacity}endTransition(){this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeInResolver=this._fadeOutResolver=null,this.computedOpacity=this.visible?this.opacity:0}fadeIn(){return this._fadeInResolver||(this.opacity=1,this.computedOpacity=0,this._fadeOutResolver?.(),this._fadeOutResolver=null,this._fadeInResolver=(0,a.createResolver)()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this.opacity=0,this._fadeInResolver?.(),this._fadeInResolver=null,this._fadeOutResolver=(0,a.createResolver)()),this._fadeOutResolver.promise}transitionStep(e,t){const i=(0,r.A)("mapview-transitions-duration"),s=i?1/i:0;if(0===s)this.computedOpacity=this.opacity,this.computedVisible=this.visible;else{const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const n=e*s;this.computedOpacity=i>t?Math.max(t,i-n):Math.min(t,i+n),this.computedVisible=this.computedOpacity>0}}this.transitioning||(this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeOutResolver=this._fadeInResolver=null)}};(0,s._)([(0,o.MZ)()],d.prototype,"computedOpacity",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"computedVisible",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"opacity",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"visible",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"transitioning",null),(0,s._)([(0,o.MZ)()],d.prototype,"_fadeOutResolver",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"_fadeInResolver",void 0),d=(0,s._)([(0,l.$)("esri.views.2d.engine.transitions.FadeTransition")],d)},50693:(e,t,i)=>{i.d(t,{$B:()=>f});var s=i(93800),n=i(6946),r=i(21265),a=i(82301),o=i(50925),l=i(48602),d=i(75269),c=i(83734),h=i(76596);const u=-1;let f=class extends n.default{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,r.A)("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(p(e))}catch(t){this._transitionTo([]),o.A.getLogger(this).warn("Invalid Effect",{effect:e,error:t})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return null!==this._to}canTransitionTo(e){try{return this.scale>0&&g(this._current,p(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&g(this._current,e,this.scale)?(this._final=e,this._to=(0,a.clone)(e),function(e,t,i){const s=e.length>t.length?e:t,n=e.length>t.length?t:e,r=n[n.length-1],a=r?.scale??i,o=r?.effects??[];for(let l=n.length;l<s.length;l++)n.push({scale:a,effects:[...o]});for(let l=0;l<s.length;l++)n[l].scale=n[l].scale===u?i:n[l].scale,s[l].scale=s[l].scale===u?i:s[l].scale,(0,h.O9)(n[l].effects,s[l].effects)}(this._current,this._to,this.scale),this._from=(0,a.clone)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?(0,a.clone)(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let i=0;i<this._current.length;i++){const e=this._current[i],s=this._from[i],n=this._to[i];e.scale=y(s.scale,n.scale,t);for(let i=0;i<e.effects.length;i++){const r=e.effects[i],a=s.effects[i],o=n.effects[i];r.interpolate(a,o,t)}}1===t&&(this._current=this._final,this._set("effects",this._current[0]?(0,a.clone)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),0===this._current.length)return;const t=this._current,i=this._current.length-1;let s,n,r=1;if(1===t.length||e>=t[0].scale)n=s=t[0].effects;else if(e<=t[i].scale)n=s=t[i].effects;else for(let a=0;a<i;a++){const i=t[a],o=t[a+1];if(i.scale>=e&&o.scale<=e){r=(e-i.scale)/(o.scale-i.scale),s=i.effects,n=o.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(s[a],n[a],r)}};function p(e){const t=(0,c.q)(e)||[];return function(e){const t=e[0];return!!t&&"type"in t}(t)?[{scale:u,effects:t}]:t}function g(e,t,i){return!e[0]?.effects||!t[0]?.effects||!((e[0]?.scale===u||t[0]?.scale===u)&&(e.length>1||t.length>1)&&i<=0)&&(0,h.mj)(e[0].effects,t[0].effects)}function y(e,t,i){return e+(t-e)*i}(0,s._)([(0,l.MZ)()],f.prototype,"_to",void 0),(0,s._)([(0,l.MZ)()],f.prototype,"duration",void 0),(0,s._)([(0,l.MZ)({value:""})],f.prototype,"effect",null),(0,s._)([(0,l.MZ)({readOnly:!0})],f.prototype,"effects",void 0),(0,s._)([(0,l.MZ)({readOnly:!0})],f.prototype,"final",null),(0,s._)([(0,l.MZ)({readOnly:!0})],f.prototype,"hasEffects",null),(0,s._)([(0,l.MZ)({value:0})],f.prototype,"scale",null),(0,s._)([(0,l.MZ)({readOnly:!0})],f.prototype,"transitioning",null),f=(0,s._)([(0,d.$)("esri.layers.effects.EffectView")],f)},50702:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(93800),n=i(85715),r=i(19455),a=i(48602),o=(i(21265),i(50925),i(14746),i(14800)),l=i(75269),d=i(15484);let c=class extends(n.A.ClonableMixin(r.A)){constructor(e){super(e),this.duration=null,this.end=null,this.start=null,this.timezone="UTC"}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}};(0,s._)([(0,a.MZ)({type:Number,json:{write:{allowNull:!0}}})],c.prototype,"duration",void 0),(0,s._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"end",void 0),(0,s._)([(0,o.w)("end")],c.prototype,"readEnd",null),(0,s._)([(0,d.K)("end")],c.prototype,"writeEnd",null),(0,s._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"start",void 0),(0,s._)([(0,o.w)("start")],c.prototype,"readStart",null),(0,s._)([(0,d.K)("start")],c.prototype,"writeStart",null),(0,s._)([(0,a.MZ)({type:String})],c.prototype,"timezone",void 0),c=(0,s._)([(0,l.$)("esri.layers.support.VideoTimeExtent")],c);const h=c},72475:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var s=i(93800),n=i(85715),r=i(19455),a=i(48602),o=(i(21265),i(50925),i(14746),i(75269)),l=i(75400),d=i(65920),c=i(54824);let h=class extends(n.A.ClonableMixin(r.A)){constructor(e){super(e),this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};(0,s._)([(0,a.MZ)({type:l.default})],h.prototype,"frameCenter",void 0),(0,s._)([(0,a.MZ)({type:d.default})],h.prototype,"frameOutline",void 0),(0,s._)([(0,a.MZ)({type:c.default})],h.prototype,"lineOfSight",void 0),(0,s._)([(0,a.MZ)({type:l.default})],h.prototype,"sensorLocation",void 0),(0,s._)([(0,a.MZ)({type:c.default})],h.prototype,"sensorTrail",void 0),h=(0,s._)([(0,o.$)("esri.layers.support.TelemetryData")],h);const u=h},75976:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(93800),n=i(6946),r=i(79953),a=i(48602),o=(i(21265),i(50925),i(14746),i(75269)),l=i(18026);function d(e,t){const i={};for(const s of t){const t=e.get(s);t&&(i[t.name]=t.value)}return i}let c=class extends n.default{constructor(e){super(e),this.followingMode="follow-both",this.layer=null,this.seekLength=10,this.view=null}initialize(){this.addHandles([(0,r.watch)((()=>this.layer),(e=>{e&&e.load().then((()=>this._followTelemetry())).catch((()=>{}))}),r.initial),(0,r.watch)((()=>[this.followingMode]),(()=>this._followTelemetry()),r.initial)])}get _layerView(){return this.layer&&this.view?this.view.allLayerViews.find((e=>e.layer===this.layer))??null:null}get buffered(){return this.layer?.buffered||0}get currentTime(){return this.layer?.currentTime||0}get duration(){return this.layer?.duration||0}get ended(){return this.layer?.ended??!0}get metadata(){const e=this.layer?.metadata;return e?{missionInfo:d(e,[l.a1.MissionId,l.a1.PrecisionTimeStamp]),platformInfo:d(e,[l.a1.PlatformTailNumber,l.a1.PlatformTrueAirspeed,l.a1.PlatformCallSign,l.a1.PlatformDesignation,l.a1.PlatformGroundRange]),frameInfo:d(e,[l.a1.FrameCenterElevation,l.a1.FrameCenterLatitude,l.a1.FrameCenterLongitude])}:null}get playing(){return this.layer?.playing??!1}get state(){return this.layer?.loadError?"error":this.layer?.state}play(){this.layer?.play()}pause(){this.layer?.pause()}seekBackward(){if(this.layer){const e=this.layer.currentTime-this.seekLength;e<=0?this.layer.reset():this.layer.setCurrentTime(e)}}seekForward(){if(this.layer){const e=this.layer.currentTime+this.seekLength;e>=this.layer.duration?this.layer.reset():this.layer.setCurrentTime(e)}}seekToBeginning(){this.layer?.setCurrentTime(0)}seekToEnding(){this.layer?.setCurrentTime(this.layer.duration)}seekTo(e){this.layer?.setCurrentTime(e)}toggleSensorDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.sensorLocation=!this._layerView.visibleTelemetryElements.sensorLocation)}toggleSensorSightLineDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.lineOfSight=!this._layerView.visibleTelemetryElements.lineOfSight)}toggleFrameDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frame=!this._layerView.visibleTelemetryElements.frame)}toggleSensorTrailDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.sensorTrail=!this._layerView.visibleTelemetryElements.sensorTrail)}toggleFrameCenterDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frameCenter=!this._layerView.visibleTelemetryElements.frameCenter)}toggleFrameOutlineDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frameOutline=!this._layerView.visibleTelemetryElements.frameOutline)}changePlaybackSpeed(e){this.layer&&(this.layer.playbackRate=e)}changeGraphicsColor(e){this._layerView&&(this._layerView.symbolColor=e)}_followTelemetry(){this.removeHandles("follow"),this.view&&this.layer&&this.addHandles((0,r.watch)((()=>this.layer?.telemetry),(()=>{const e=[],t="follow-sensor"===this.followingMode||"follow-both"===this.followingMode,i="follow-frame"===this.followingMode||"follow-both"===this.followingMode;t&&this.layer?.telemetry.sensorLocation&&e.push(this.layer.telemetry.sensorLocation),i&&this.layer?.telemetry.frameCenter&&e.push(this.layer.telemetry.frameCenter),e.length&&this.view?.goTo(e).catch((()=>{}))}),r.initial),"follow")}};(0,s._)([(0,a.MZ)()],c.prototype,"_layerView",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"buffered",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"currentTime",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"duration",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"ended",null),(0,s._)([(0,a.MZ)()],c.prototype,"followingMode",void 0),(0,s._)([(0,a.MZ)()],c.prototype,"layer",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"metadata",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"playing",null),(0,s._)([(0,a.MZ)()],c.prototype,"seekLength",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"state",null),(0,s._)([(0,a.MZ)()],c.prototype,"view",void 0),c=(0,s._)([(0,o.$)("esri.widgets.VideoPlayer.VideoPlayerViewModel")],c);const h=c},99929:(e,t,i)=>{i.d(t,{m:()=>l});var s=i(5019),n=i(69601),r=i(27510),a=i(50693),o=i(13767);class l extends o.q{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this._children=[],this._childrenObservable=new n.I,this._effectView=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get children(){return(0,s.gc)(this._childrenObservable),this._children}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new a.$B,this.addTransitionable(this._effectView)),this._effectView.effect=e,this.requestRender())}get highlightGradient(){return this._highlightGradient}set highlightGradient(e){this._highlightGradient=e,this.requestRender()}get hasBlending(){return!!this.blendMode}get hasHighlight(){return this.children.some((e=>e.hasHighlight))}get hasLabels(){return this.children.some((e=>e.hasLabels))}get requiresDedicatedFBO(){return this.children.some((e=>"blendMode"in e&&e.blendMode&&"normal"!==e.blendMode))}get isReady(){return this.children.every((e=>e.isReady))}get sortFunction(){return this._sortFunction}set sortFunction(e){this._sortFunction=e,e&&(this._needsSort=!0)}doRender(e){const t=this.createRenderParams(e),{painter:i}=t;i.beforeRenderLayer(t,this._clips?.length?255:0,this.computedOpacity),this.renderChildren(t),i.afterRenderLayer(t,this.computedOpacity)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length;if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),this._childrenObservable.notify(),e}contains(e){return(0,s.gc)(this._childrenObservable),this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0,this._childrenObservable.notify()}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,this._childrenObservable.notify(),t}beforeRender(e){super.beforeRender(e),this.sortFunction&&this._needsSort&&(this.children.sort(this.sortFunction),this._needsSort=!1,this._childrenObservable.notify());for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{displayViewScreenMat3:(0,r.vt)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient}}isTransitioning(){return super.isTransitioning()||this.children.some((e=>e.transitioning))}}}}]);