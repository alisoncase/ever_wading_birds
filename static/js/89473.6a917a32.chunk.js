"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79538,89473],{39652:(e,t,n)=>{function i(e){const{attributes:t,sourceLayer:n}=e??{},i=n&&"displayField"in n?n.displayField:null,r=i?t?.[i]:null,s=null!=r?JSON.stringify(r):null,o=e?.getObjectId()?.toString();return s||o||""}n.d(t,{R:()=>i})},41327:(e,t,n)=>{n.d(t,{Au:()=>x,CU:()=>z,Et:()=>v,Gq:()=>M,H1:()=>D,HG:()=>N,Iy:()=>Z,Kl:()=>J,Kn:()=>G,LZ:()=>U,TN:()=>w,U3:()=>Y,Ve:()=>L,XI:()=>F,bx:()=>T,cU:()=>E,k_:()=>b,lB:()=>j,l_:()=>q,n4:()=>H,nT:()=>_,oc:()=>A,qG:()=>C,rf:()=>g,s9:()=>R,t6:()=>k,tM:()=>P,vp:()=>S,wr:()=>O});n(88677);var i=n(62631),r=n(7951),s=n(82301),o=n(50925),l=n(56612),a=n(96299),u=n(7249),d=n(95011),c=n(78076),m=n(79538),f=n(53826),p=n(82368),h=n(39652),y=n(99961);const g=e=>"field"===e?.type,v=e=>"group"===e?.type,_=e=>"relationship"===e?.type,b=e=>"text"===e.type,x=e=>"utilityNetworkAssociations"===e.type,T=e=>!v(e)&&null!=e.group,O=e=>e.reduce(((e,t)=>v(t)?[...e,...t.inputs]:[...e,t]),[]),Z=e=>O(e).filter(g),E=e=>O(e).filter(_),w=e=>O(e).filter(x),F=e=>null!=e&&(N(e,"combo-box")||N(e,"radio-buttons")),N=(e,t)=>null!=e&&e.input?.type===t,M=e=>{let{domain:t,inputType:n="text-box",dataType:i}=e;return"number"===i&&"text-box"===n&&(!t||"coded-value"!==t.type)};function S(e,t){const{title:n,feature:i}=e??{};return n||(i?(0,h.R)(i):null)||t||""}function U(e){const{attributes:t,fieldsIndex:n,label:r,timeZone:s}=e;if(!t||"object"!=typeof t)return r;const o=Object.keys(t).filter((e=>(0,l.mk)(r,e))),a=o.map((e=>t[e])),u=o.map((e=>n.get(e))).filter(i.Ru);return function(e,t){return(0,l.HC)((0,l.HC)(e,(e=>`{${e.toLowerCase()}}`)),Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t.toLowerCase(),n]}))))}(r,L({values:a,fields:u,timeZone:s}))}const I="expression/",V="expr/",$="field/";function A(e){const[t,n]=e.split(I);return""===t&&n?n:(o.A.getLogger("esri.widgets.FeatureForm/featureFormUtils").error("extractExpressionNameFromString:invalid-input",`The string ${e} is not a valid expression reference of the form '${I}/expressionName'`),"")}function k(e){return`${I}${e}`}function D(e){return`${$}${e}`}function R(e){return e.startsWith(I)}function C(e){return e.startsWith(V)}function L(e){const{fields:t,values:n}=e,i=e.timeZone??void 0,r=t.map(((e,t)=>{let r=n[t];if(e.domain&&"coded-value"===e.domain.type){const t=e.domain.codedValues.find((e=>e.code===r));t?.name&&(r=t.name)}return((0,m.fs)(e)||(0,d.isTimeOnlyField)(e))&&(r=(0,f.ZP)(e,r,{timeZone:i,...(0,f.ZT)(e)})),[e.name,r]}));return Object.fromEntries(r)}const z=e=>{const t={typeFieldName:null,types:[]};return e?((0,c.Sv)(e)?(t.typeFieldName=e.parent?.subtypeField,t.types=e.parent?.subtypes??[]):"subtype-group"===e.type||"feature"===e.type&&e.subtypes?.length?(t.typeFieldName=e.subtypeField,t.types=e.subtypes??[]):"types"in e&&e.types&&(t.typeFieldName=e.typeIdField,t.types=e.types.map((e=>{let{id:t,name:n,domains:i}=e;return{code:t,name:n,domains:i}}))),null!=t.typeFieldName&&(t.typeFieldName=e.getField(t.typeFieldName)?.name??t.typeFieldName),t):t},P=(e,t,n)=>{const{dataType:i,error:r,minLength:s}=e,o=t?.validationErrors;if(!o||!r)return null;if(r===p.gK.CANNOT_BE_EMPTY)return o.cannotBeNull;if(r===u.Mh.VALUE_OUT_OF_RANGE||r===d.NumericRangeValidationError.OUT_OF_RANGE){const{field:t,range:r}=e,s={type:"date",intlOptions:{timeZone:"date"===t.type&&n?n:void 0,...(0,f.ZT)(t)}},l=(0,p.hQ)(r,o);return(0,y.V)(l,r,{format:{max:"date"===i?s:null!=r.max&&(0,p.qn)(r.max)?p.Qv:p.PA,min:"date"===i?s:null!=r.min&&(0,p.qn)(r.min)?p.Qv:p.PA}})}return r===u.Mh.INVALID_CODED_VALUE?o.invalidCodedValue:r===d.TypeValidationError.INVALID_TYPE?o.invalidType:r===p.gK.TOO_SHORT?(0,y.V)(o.tooShort,{min:s}):(p.gK.TOO_LONG,null)},q=e=>{if(!e)return;const t=e.layer,n=t&&"geometryType"in t?t.geometryType:void 0,i=e.geometry?.type;return"polyline"===i||"polyline"===n?"line":"mesh"===i||"mesh"===n||"multipatch"===n?"cube":"multipoint"===i||"multipoint"===n?"point":i||n||"table"},H=e=>{const t=[];if(e.formTemplate){const{description:n,title:i}=e.formTemplate;e.fields?.forEach((e=>{const r=i&&(0,l.mk)(i,e.name),s=n&&(0,l.mk)(n,e.name);(r||s)&&t.push(e.name)}))}return t};function j(e,t){const n=t??("formTemplate"in e&&e.formTemplate);return!!n&&(n.elements?.filter(a.jt)??[]).some((t=>{let{fieldName:n}=t;return!e.fieldsIndex.get(n)}))}function G(e,t){return null==e||t.onValue!==e&&t.offValue!==e}function J(e,t){switch(t.objectType){case"any":return!0;case"null":return null==e;case"code":return e===t.codedValue?.code;case"range":return null!=e&&null!=t.minValue&&null!=t.maxValue&&+e>=t.minValue&&+e<=t.maxValue;default:return(0,r.Xb)(t.objectType),!1}}function Y(e,t,n){const i=(0,c.fV)(e),r=i?.find((e=>e.code===n));if(!r)return!1;const o=i?.find((e=>e.code===t));return!(0,s.equalsShallow)(r.defaultValues,o?.defaultValues)&&Object.values(r.defaultValues).some((e=>null!=e))}},53826:(e,t,n)=>{n.d(t,{Ng:()=>O,OM:()=>g,Q0:()=>b,T8:()=>_,ZP:()=>T,ZT:()=>x,eX:()=>w,fD:()=>M,fb:()=>p,fl:()=>f,iP:()=>N,oh:()=>Z,rX:()=>S,sH:()=>h,yk:()=>U});n(88677),n(21265);var i=n(74719),r=n(64682),s=n(66845),o=n(72520),l=n(69943),a=n(73210),u=n(51536),d=n(12711);const c=a.n$,m={date:null,time:null,timeZoneOffset:null},f=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),p="latn",h=new Set(["date-only","time-only","timestamp-offset"]),y=e=>"valueAsDate"in e;function g(e){return{locale:(0,d.JK)(),numberingSystem:p,zone:e??c}}function v(e,t){return null==e?null:u.c9.fromMillis(e,g(t))}function _(e,t){if(null==e||!(0,l.Kg)(e)||""===e){if(t){const e=u.c9.local({zone:t});return{date:null,time:null,timeZoneOffset:e.isValid?e.offset.toString():null}}return m}const n=u.c9.fromISO(e,{setZone:!0});return{date:n.toFormat(o.mo,g()),time:n.toFormat(o.Uq.HMS_MS,g()),timeZoneOffset:n.offset.toString()}}function b(e,t){if(null==e||!(0,l.Et)(e)||isNaN(e))return m;const n=v(e,t);return n?{date:n.toFormat(o.mo,g(t)),time:n.toFormat(o.Fj,g(t))}:m}function x(e){switch(e.type){case"date":default:return(0,s.J2)("short-date-short-time");case"date-only":return(0,s.J2)("short-date");case"time-only":return(0,s.J2)("short-time");case"timestamp-offset":return{...(0,s.J2)("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function T(e,t,n){if(!e||null==t)return null;switch(e.type){case"date":return(0,s.Yq)(t,n);case"date-only":return(0,s.iS)(t,n);case"time-only":return(0,s.F8)(t,n);case"timestamp-offset":return(0,s.Ey)(t,n);default:return null}}function O(e){const{dateComponent:t,defaultTimeZone:n,timeComponent:i,timeZoneComponent:r,oldValue:s}=e;if(!t?.value)return null;const{year:l,month:d,day:c}=u.c9.fromFormat(t.value,o.mo),{hour:m,minute:f,second:p,millisecond:h}=E(i,a.n$)??u.c9.now(),y=_(s,n),g=r?.value?parseInt(r.value,10):null!=y.timeZoneOffset?parseInt(y.timeZoneOffset,10):(new Date).getTimezoneOffset(),v=u.mQ.instance(g),b=u.c9.fromObject({year:l,month:d,day:c,hour:m,minute:f,second:p,millisecond:h},{zone:v});return b.isValid?b.toISO({includeOffset:!0}):null}function Z(e){const{dateComponent:t,timeComponent:n,timeZone:i,max:r,min:s,oldValue:o}=e,l=E(t,i);let a=!!e.applyRange;if(!l)return null;let d=null;if(null!=n?.value){const e=E(n,i),t=Date.now(),s=null!=r&&r<t?r:t,o=u.c9.fromMillis(s,g(i)),a=l||o,{year:c,month:m,day:f}=a,{hour:p,minute:h,second:y,millisecond:v}=e||o;d=a.set({year:c,month:m,day:f,hour:p,minute:h,second:y,millisecond:v})}else{const e=v(F({value:o??Date.now(),max:r,min:s}),i),{year:t,month:n,day:u}=l,{hour:c,minute:m,second:f,millisecond:p}=e;a=!0,d=l.set({year:t,month:n,day:u,hour:c,minute:m,second:f,millisecond:p})}if(!d.isValid)return null;const c=d.toMillis();return a?F({value:c,max:r,min:s}):c}function E(e,t){if(null==e?.value||Array.isArray(e.value))return null;let n=null;return n=y(e)?u.c9.fromFormat(e.value,o.mo,g(t)):(0,o.UE)(e.value),n?.isValid?n:null}function w(e){const{max:t,min:n,value:i}=e;return!isNaN(i)&&!(null!=t&&i>t)&&!(null!=n&&i<n)}function F(e){const{max:t,min:n,value:i}=e;return null!=t&&null!=n?(0,r.qE)(i,n,t):null!=t&&i>t?t:null!=n&&i<n?n:i}function N(e){if(!e)return"";const t=e.split(".").at(0);if(!t||t.length<1)throw new i.default("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const n=t.split(":"),r=new Array(3);for(let i=0;i<3;i++){const e=n.at(i)??"";r[i]=e.padStart(2,"0")}return r.join(":")}function M(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return N(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function S(e){return!!e&&"object"==typeof e&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function U(e){const{type:t,range:n,value:i}=e;if(null==i||!n||i===n.min||i===n.max)return!0;if("date"===t)return w({value:i,min:n.min,max:n.max});const{rawMax:r,rawMin:s}=n;let l=null,a=null,u=null;switch(t){case"date-only":l=(0,o.Xi)(r),a=(0,o.Xi)(s),u=(0,o.Xi)(i);break;case"time-only":l=(0,o.UE)(r),a=(0,o.UE)(s),u=(0,o.UE)(i);break;case"timestamp-offset":l=(0,o.gz)(r),a=(0,o.gz)(s),u=(0,o.gz)(i)}return!u||w({value:u.valueOf(),min:a?.valueOf(),max:l?.valueOf()})}},76713:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(93800),r=n(6946),s=n(48602),o=(n(21265),n(50925),n(14746),n(75269)),l=n(41327);let a=class extends r.default{constructor(e){super(e),this.element=null,this.feature=null,this.layer=null,this.timeZone=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){return this.getFormattedLabel(this.element?.description)}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return null!=e?!!e.lastEvaluatedValue:null}get label(){return this.getFormattedLabel(this.element?.label)}get updating(){return!1}get visible(){return null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element}getFormattedLabel(e){const{feature:t,layer:n,timeZone:i}=this;return null==n||null==e?e:(0,l.LZ)({label:e,attributes:t.attributes,fieldsIndex:n.fieldsIndex,timeZone:i})}};(0,i._)([(0,s.MZ)({readOnly:!0})],a.prototype,"description",null),(0,i._)([(0,s.MZ)({constructOnly:!0})],a.prototype,"element",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"evaluatedVisibilityExpression",null),(0,i._)([(0,s.MZ)()],a.prototype,"feature",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"label",null),(0,i._)([(0,s.MZ)()],a.prototype,"layer",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"timeZone",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"type",void 0),(0,i._)([(0,s.MZ)()],a.prototype,"updating",null),(0,i._)([(0,s.MZ)()],a.prototype,"visible",null),(0,i._)([(0,s.MZ)()],a.prototype,"visibilityExpressionExecutor",void 0),a=(0,i._)([(0,o.$)("esri.widgets.FeatureForm.InputBase")],a);const u=a},79538:(e,t,n)=>{n.d(t,{BV:()=>E,EG:()=>_,Lk:()=>Z,Ll:()=>N,Np:()=>d,R3:()=>F,SO:()=>p,T1:()=>w,UH:()=>u,Wy:()=>b,XR:()=>f,aM:()=>O,fs:()=>v,i0:()=>M,i3:()=>g});var i=n(66845),r=n(95011),s=n(96247),o=n(76983),l=n(73210),a=n(40731);const u=",",d={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},c="percent-of-total",m="field",f={exclude:["median"]},p={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},h=new Set(["integer","small-integer"]);let y=null;const g=["date","date-only","timestamp-offset"];function v(e){return(0,r.isDateField)(e)||(0,r.isDateOnlyField)(e)||(0,r.isTimestampOffsetField)(e)}async function _(e){const{field:t,field2:n,field3:i,normalizationField:r,valueExpression:o}=e;let l=[];if(o){if(!y){const{arcadeUtils:e}=await(0,s.lw)();y=e}l=y.extractFieldNames(o)}return t&&l.push(t),n&&l.push(n),i&&l.push(i),r&&l.push(r),l}function b(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=c)),t??void 0}function x(e){return String(e).padStart(2,"0")}function T(e,t,n){let i;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),i=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${x((n?e.getMonth():e.getUTCMonth())+1)}-${x(n?e.getDate():e.getUTCDate())} ${x(n?e.getHours():e.getUTCHours())}:${x(n?e.getMinutes():e.getUTCMinutes())}:${x(n?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function O(e,t,n,i){const{hasQueryEngine:r}=e,s=`(${T(n,Z(e,n),r)} - ${T(t,Z(e,t),r)})`;let o=p[i],l="/";return o<1&&(o=1/o,l="*"),{sqlExpression:1===o?s:`(${s} ${l} ${o})`,sqlWhere:null}}function Z(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,r.isDateField)(n))return"field"}}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;for(const n in t)if(t[n].includes(e))return n}function w(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;return e&&("string"==typeof e?t.includes(e)&&(i=e):i=(0,o.q3)(e)),n?i||"gray":i}function F(e,t){const n=t&&e.getField(t);return!!n&&h.has(n.type)}function N(e){return`cast(${e} as float)`}function M(e,t){const{format:n,timeZoneOptions:r,fieldType:s}=t??{};let o,u;if(r&&({timeZone:o,timeZoneName:u}=(0,a.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),s)),"string"==typeof e&&isNaN(Date.parse("time-only"===s?`1970-01-01T${e}Z`:e)))return e;switch(s){case"date-only":{const t=(0,i.J2)(n||"short-date");return"string"==typeof e?(0,i.iS)(e,{...t}):(0,i.Yq)(e,{...t,timeZone:l.n$})}case"time-only":{const t=(0,i.J2)(n||"short-time");return"string"==typeof e?(0,i.F8)(e,t):(0,i.Yq)(e,{...t,timeZone:l.n$})}case"timestamp-offset":{if(!o&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0,s=t?{...t,timeZone:o,timeZoneName:u}:void 0;return"string"==typeof e?(0,i.Ey)(e,s):(0,i.Yq)(e,s)}default:{const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:o,timeZoneName:u}:void 0)}}}},81064:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(5019),r=n(69601);class s{constructor(e){this._observable=new r.I,this._set=new Set(e)}get size(){return(0,i.gc)(this._observable),this._set.size}add(e){const t=this._set.size;return this._set.add(e),this._set.size!==t&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const t=this._set.delete(e);return t&&this._observable.notify(),t}entries(){return(0,i.gc)(this._observable),this._set.entries()}forEach(e,t){(0,i.gc)(this._observable),this._set.forEach(((n,i)=>e.call(t,n,i,this)),t)}has(e){return(0,i.gc)(this._observable),this._set.has(e)}keys(){return(0,i.gc)(this._observable),this._set.keys()}values(){return(0,i.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,i.gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},82368:(e,t,n)=>{n.d(t,{$$:()=>x,D_:()=>m,Gd:()=>c,Kx:()=>i,PA:()=>g,Po:()=>f,Qv:()=>v,gK:()=>r,hQ:()=>b,jl:()=>h,of:()=>d,qn:()=>_,zU:()=>p});var i,r,s,o=n(96299),l=n(7249),a=n(95011),u=n(53826);(s=i||(i={})).Text="text",s.Number="number",s.Date="date",s.Unsupported="unsupported",function(e){e.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"}(r||(r={}));const d=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}};function c(e,t){const{dataType:n,domain:i,field:s,maxLength:o,minLength:d,range:c,required:m}=t;if(null==e)return m?r.CANNOT_BE_EMPTY:null;if("text"===n&&"string"==typeof e){if(d>-1&&e.length<d)return r.TOO_SHORT;if(o>-1&&e.length>o)return r.TOO_LONG}return"date"!==n||(0,u.yk)({type:s.type,range:c,value:e})?i?(0,l.wb)(s,e,i):(0,a.validateFieldValue)(s,e)??(0,l.wb)(s,e):a.NumericRangeValidationError.OUT_OF_RANGE}function m(e,t){return!(!f(e)||!f(t))||e===t}function f(e){return null==e||""===e}function p(e){let{dataType:t,field:n,input:r}=e;if(t===i.Date)return-1;const s=y(n.length);if(!r||!(0,o.AI)(r))return s;const l=y(r.maxLength);return-1===l?s:-1===s?l:Math.min(s,l)}function h(e){let{dataType:t,field:n,input:r}=e;if(t===i.Date)return-1;if(!r||!(0,o.AI)(r))return-1;const s=y(r.minLength);if(s<0)return-1;const l=y(n.length);return l>-1&&l<s?-1:s}function y(e){return"number"==typeof e&&e>-1?e:-1}const g={type:"number"},v={type:"number",intlOptions:{notation:"scientific"}};function _(e){return e>=1e7||e<=-1e7}function b(e,t){return null!=e.max&&null!=e.min?t.outsideRange:null!=e.max?t.outsideRangeMax:t.outsideRangeMin}const x=e=>e&&!Number.isNaN(e.valueOf())},89473:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var i=n(93800),r=n(89129),s=n(90450),o=n(81064),l=n(31923),a=n(48602),u=(n(21265),n(50925),n(14746),n(75269)),d=n(15492),c=n(95011),m=n(41327),f=n(76713);let p;const h=["blockquote","html","hr","checkbox","table","tablerow","tablecell","image"];async function y(){const{Marked:e}=await n.e(21863).then(n.bind(n,21863)),t=()=>"",i={};for(const n of h)i[n]=t;p=new e({renderer:{del:function(e){let{text:t}=e;return`<span style="text-decoration:line-through;">${t}</span>`},link:function(e){let{href:t,text:n,title:i}=e;return`<a${null!=t?` href="${t}"`:""}${null!=i?` title="${i}"`:""} target="_blank">${n??""}</a>`},...i}})}var g=n(17745);let v=class extends f.A{constructor(e){super(e),this.group=null,this.id=`TextElementInput-${(0,l.c)()}`,this.type="text",this._expressionReferences=new s.A,this._expressionsUsed=new o.A,this._fieldsUsed=new o.A,this._literalParts=new r.default,this._templateParts=new r.default,this._updatingHandles=new d.U}initialize(){const{rawText:e}=this;e?"markdown"===this.textFormat?this._updatingHandles.addPromise(async function(e){return p||await y(),p.parse(e)}(e).then((e=>this._initializeTextParts(e)))):this._initializeTextParts(e):this._literalParts.push("")}get expressionsUsed(){return Array.from(this._expressionsUsed)}get fieldsIndex(){return this.layer.fieldsIndex}set fieldsIndex(e){this._overrideIfSome("fieldsIndex",e)}get fieldsUsed(){return Array.from(this._fieldsUsed)}get rawText(){return this.element.text}get text(){const e=this._templateParts.map((e=>`${this._expressionReferences.get(e)?.lastEvaluatedValue??""}`));return g.W5.sanitize(function(e,t){return t.reduce(((t,n,i)=>t.concat(e.at(i),n)),"").concat(e.at(-1))}(this._literalParts,e))}get textFormat(){return this.element.textFormat}get updating(){return this._updatingHandles.updating||Array.from(this._expressionReferences.values()).some((e=>e?.updating))}setExpressionExecutor(e,t){this._expressionReferences.set((0,m.t6)(e),t)}setFieldExecutor(e,t){this._expressionReferences.set((0,m.H1)(e),t)}_initializeTextParts(e){const{fieldsIndex:t}=this,{literals:n,templates:i}=function(e){const t=[...e.matchAll(/{[^{]+?}/g)];let n=0;const i=[],r=[];for(const s of t){const t=s[0];i.push(e.slice(n,s.index)),r.push(t),n=s.index+t.length}return i.push(e.slice(n)),{literals:i,templates:r}}(e),r=[],s=[];for(let o=0;o<i.length;o++){const e=n[o],l=(0,c.extractSubstitutionTemplatesFromString)(i[o])[0];if((0,m.s9)(l))this._expressionsUsed.add((0,m.oc)(l)),this._expressionReferences.set(l,null),r.push(e),s.push(l);else if((0,m.qG)(l)){this._expressionsUsed.add(l);const t=(0,m.t6)(l);this._expressionReferences.set(t,null),r.push(e),s.push(t)}else if(t?.has(l)){const n=t.normalizeFieldName(l);this._fieldsUsed.add(n);const i=(0,m.H1)(n);this._expressionReferences.set(i,null),r.push(e),s.push(i)}else n[o+1]=e.concat(l,n[o+1])}r.push(n.at(-1)),this._literalParts.addMany(r),this._templateParts.addMany(s)}};(0,i._)([(0,a.MZ)()],v.prototype,"expressionsUsed",null),(0,i._)([(0,a.MZ)()],v.prototype,"fieldsIndex",null),(0,i._)([(0,a.MZ)()],v.prototype,"fieldsUsed",null),(0,i._)([(0,a.MZ)()],v.prototype,"group",void 0),(0,i._)([(0,a.MZ)()],v.prototype,"id",void 0),(0,i._)([(0,a.MZ)()],v.prototype,"rawText",null),(0,i._)([(0,a.MZ)()],v.prototype,"text",null),(0,i._)([(0,a.MZ)()],v.prototype,"textFormat",null),(0,i._)([(0,a.MZ)()],v.prototype,"type",void 0),(0,i._)([(0,a.MZ)()],v.prototype,"updating",null),v=(0,i._)([(0,u.$)("esri.widgets.FeatureForm.TextElementInput")],v);const _=v}}]);