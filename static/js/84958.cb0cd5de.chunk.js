"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79538,84958],{23708:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(93800),l=i(48602),r=(i(21265),i(50925),i(14746),i(75269)),s=i(78076),a=i(76713),o=i(82368);let u=class extends a.A{constructor(e){super(e),this.arcadeEditType="NA",this.editableExpressionExecutor=null}get editable(){return!!this.layerAllowsEdits&&(this.evaluatedEditableExpression??!0)}get evaluatedEditableExpression(){const{editableExpressionExecutor:e}=this;return null!=e?!!e.lastEvaluatedValue:null}get layerAllowsEdits(){const{layer:e}=this;if(!e)return!1;const t=(0,s.BR)(e),i=t?.operations.supportsEditing,n=(0,o.of)(t,this.arcadeEditType);return!(!i||!n)}};(0,n._)([(0,l.MZ)()],u.prototype,"arcadeEditType",void 0),(0,n._)([(0,l.MZ)()],u.prototype,"editable",null),(0,n._)([(0,l.MZ)()],u.prototype,"editableExpressionExecutor",void 0),(0,n._)([(0,l.MZ)()],u.prototype,"evaluatedEditableExpression",null),(0,n._)([(0,l.MZ)()],u.prototype,"layerAllowsEdits",null),u=(0,n._)([(0,r.$)("esri.widgets.FeatureForm.EditableInput")],u);const d=u},76713:(e,t,i)=>{i.d(t,{A:()=>u});var n=i(93800),l=i(6946),r=i(48602),s=(i(21265),i(50925),i(14746),i(75269)),a=i(41327);let o=class extends l.default{constructor(e){super(e),this.element=null,this.feature=null,this.layer=null,this.timeZone=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){return this.getFormattedLabel(this.element?.description)}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return null!=e?!!e.lastEvaluatedValue:null}get label(){return this.getFormattedLabel(this.element?.label)}get updating(){return!1}get visible(){return null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element}getFormattedLabel(e){const{feature:t,layer:i,timeZone:n}=this;return null==i||null==e?e:(0,a.LZ)({label:e,attributes:t.attributes,fieldsIndex:i.fieldsIndex,timeZone:n})}};(0,n._)([(0,r.MZ)({readOnly:!0})],o.prototype,"description",null),(0,n._)([(0,r.MZ)({constructOnly:!0})],o.prototype,"element",void 0),(0,n._)([(0,r.MZ)()],o.prototype,"evaluatedVisibilityExpression",null),(0,n._)([(0,r.MZ)()],o.prototype,"feature",void 0),(0,n._)([(0,r.MZ)()],o.prototype,"label",null),(0,n._)([(0,r.MZ)()],o.prototype,"layer",void 0),(0,n._)([(0,r.MZ)()],o.prototype,"timeZone",void 0),(0,n._)([(0,r.MZ)()],o.prototype,"type",void 0),(0,n._)([(0,r.MZ)()],o.prototype,"updating",null),(0,n._)([(0,r.MZ)()],o.prototype,"visible",null),(0,n._)([(0,r.MZ)()],o.prototype,"visibilityExpressionExecutor",void 0),o=(0,n._)([(0,s.$)("esri.widgets.FeatureForm.InputBase")],o);const u=o},79538:(e,t,i)=>{i.d(t,{BV:()=>T,EG:()=>_,Lk:()=>Z,Ll:()=>V,Np:()=>d,R3:()=>F,SO:()=>h,T1:()=>w,UH:()=>u,Wy:()=>x,XR:()=>y,aM:()=>M,fs:()=>v,i0:()=>D,i3:()=>g});var n=i(66845),l=i(95011),r=i(96247),s=i(76983),a=i(73210),o=i(40731);const u=",",d={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},p="percent-of-total",m="field",y={exclude:["median"]},h={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},c=new Set(["integer","small-integer"]);let f=null;const g=["date","date-only","timestamp-offset"];function v(e){return(0,l.isDateField)(e)||(0,l.isDateOnlyField)(e)||(0,l.isTimestampOffsetField)(e)}async function _(e){const{field:t,field2:i,field3:n,normalizationField:l,valueExpression:s}=e;let a=[];if(s){if(!f){const{arcadeUtils:e}=await(0,r.lw)();f=e}a=f.extractFieldNames(s)}return t&&a.push(t),i&&a.push(i),n&&a.push(n),l&&a.push(l),a}function x(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=p)),t??void 0}function E(e){return String(e).padStart(2,"0")}function b(e,t,i){let n;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),n=`TIMESTAMP'${i?e.getFullYear():e.getUTCFullYear()}-${E((i?e.getMonth():e.getUTCMonth())+1)}-${E(i?e.getDate():e.getUTCDate())} ${E(i?e.getHours():e.getUTCHours())}:${E(i?e.getMinutes():e.getUTCMinutes())}:${E(i?e.getSeconds():e.getUTCSeconds())}'`):n=e,n}function M(e,t,i,n){const{hasQueryEngine:l}=e,r=`(${b(i,Z(e,i),l)} - ${b(t,Z(e,t),l)})`;let s=h[n],a="/";return s<1&&(s=1/s,a="*"),{sqlExpression:1===s?r:`(${r} ${a} ${s})`,sqlWhere:null}}function Z(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const i=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,l.isDateField)(i))return"field"}}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;for(const i in t)if(t[i].includes(e))return i}function w(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;return e&&("string"==typeof e?t.includes(e)&&(n=e):n=(0,s.q3)(e)),i?n||"gray":n}function F(e,t){const i=t&&e.getField(t);return!!i&&c.has(i.type)}function V(e){return`cast(${e} as float)`}function D(e,t){const{format:i,timeZoneOptions:l,fieldType:r}=t??{};let s,u;if(l&&({timeZone:s,timeZoneName:u}=(0,o.hv)(l.layerTimeZone,l.datesInUnknownTimezone,l.viewTimeZone,(0,n.J2)(i||"short-date-short-time"),r)),"string"==typeof e&&isNaN(Date.parse("time-only"===r?`1970-01-01T${e}Z`:e)))return e;switch(r){case"date-only":{const t=(0,n.J2)(i||"short-date");return"string"==typeof e?(0,n.iS)(e,{...t}):(0,n.Yq)(e,{...t,timeZone:a.n$})}case"time-only":{const t=(0,n.J2)(i||"short-time");return"string"==typeof e?(0,n.F8)(e,t):(0,n.Yq)(e,{...t,timeZone:a.n$})}case"timestamp-offset":{if(!s&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=i||l?(0,n.J2)(i||"short-date-short-time"):void 0,r=t?{...t,timeZone:s,timeZoneName:u}:void 0;return"string"==typeof e?(0,n.Ey)(e,r):(0,n.Yq)(e,r)}default:{const t=i||l?(0,n.J2)(i||"short-date-short-time"):void 0;return(0,n.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:s,timeZoneName:u}:void 0)}}}},84958:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i(93800),l=i(74719),r=i(79953),s=i(48602),a=(i(21265),i(50925),i(14746),i(75269)),o=i(7249),u=i(95011),d=i(79538),p=i(69943),m=i(92471),y=i(23708),h=i(41327),c=i(53826),f=i(82368);let g=class extends y.A{constructor(e){super(e),this._storedValue=null,this.error=null,this.preservesValueWhenHidden=!0,this.field=null,this.group=null,this.requiredExpressionExecutor=null,this.type="field",this._fieldInputWasVisibleDuringLifetime=!1,this.valueExpressionExecutor=null}initialize(){this.addHandles((0,r.watch)((()=>this.feature),(()=>this._fieldInputWasVisibleDuringLifetime=!1),r.sync))}get _dateFormRange(){const{element:e,field:t}=this;if("date"!==this.dataType)return{};const i=e?.domain?(0,o.A5)(t,e.domain):null;if(!e?.input)return i??{};const n=e.input,{type:l}=n;let r={};if("date-picker"!==l&&"time-picker"!==l&&"datetimeoffset-picker"!==l||(r=(0,o.nm)(t,n.max,n.min)),"datetime-picker"===l){const{max:e,min:t}=n;r={max:null!=e&&(0,f.$$)(e)?e.getTime():null,min:null!=t&&(0,f.$$)(t)?t.getTime():null}}const{max:s,min:a}=r;if(i){const{max:e,min:t}=i,n=(0,p.Et)(e)&&(null==s||null!=s&&e<s),l=(0,p.Et)(t)&&(null==a||null!=a&&t>a);return{max:n?e:s??null,min:l?t:a??null,rawMax:n?i.rawMax:r?.rawMax??null,rawMin:l?i.rawMin:r?.rawMin??null}}return{min:a,max:s,rawMax:r?.rawMax??null,rawMin:r?.rawMin??null}}get _dateRange(){const{_dateFormRange:e,field:t}=this;if("date"!==this.dataType)return{};const i=(0,o.A5)(t);if(!i)return e;const{max:n,min:l,rawMax:r,rawMin:s}=e;if("date"===t.type){const{max:e,min:t}=i;return{max:(0,p.Et)(n)&&(null===e||null!=e&&n<e)?n:e??null,min:(0,p.Et)(l)&&(null===t||null!=t&&l>t)?l:t??null}}if("date-only"===t.type||"time-only"===t.type||"timestamp-offset"===t.type){const{max:e,min:t,rawMax:a,rawMin:o}=i,u=(0,p.Et)(n)&&r&&(null==e||n<e),d=(0,p.Et)(l)&&s&&(null==t||l>t);return{max:u?n:e,min:d?l:t,rawMax:u?r:a,rawMin:d?s:o}}return{max:null,min:null}}get _configAllowsEdits(){const{element:e,layer:t,name:i}=this;if(null!=e)return e.editableExpression?!!this.evaluatedEditableExpression:!1!==e.editable;if(t?.userHasUpdateItemPrivileges)return!0;const n=t&&"popupTemplate"in t?t?.popupTemplate?.fieldInfos?.find((e=>{let{fieldName:t}=e;return t===i})):null;return n?.isEditable??!0}get _layerAndFieldAllowEdits(){return this.layerAllowsEdits&&this.field?.editable}get _isVisibleByDefault(){const{field:e,layer:t}=this;return!!e?.visible&&(0,u.isFieldVisibleByDefault)(e,t)}get _isEditTrackingField(){return(0,u.getLowerCaseEditTrackingFields)(this.layer).includes(this.name?.toLowerCase())}get _shouldUseValueExpression(){return this._layerAndFieldAllowEdits&&!this._configAllowsEdits&&null!=this.valueExpressionExecutor&&this.valueExpressionExecutor.initialExecutionComplete}get isSubtypeField(){const{layer:e}=this;if(e&&"subtypeField"in e){const{subtypeField:t,fieldsIndex:i}=e;return(i.get(t)?.name??t)===this.name}return!1}get valueIsOutOfDomain(){const{domain:e,value:t,field:i}=this;return!(!e||null==t)&&null!==(0,o.wb)(i,t,e)}get dataType(){const{field:e}=this;return(0,u.isNumericField)(e)?f.Kx.Number:(0,u.isStringField)(e)?f.Kx.Text:(0,d.fs)(e)||(0,u.isTimeOnlyField)(e)?f.Kx.Date:f.Kx.Unsupported}get dateDataType(){if(this.dataType===f.Kx.Date)return"date"!==this.field.type?"string":"number"}get domain(){const{layer:e,feature:t,name:i,element:n}=this,l=n?.domain;return null!=l&&this._isDomainCompatible(l)?l:e.getFieldDomain(i,{feature:t})}get editable(){return!!this._layerAndFieldAllowEdits&&(this.evaluatedEditableExpression??this._configAllowsEdits)}get evaluatedRequiredExpression(){const{requiredExpressionExecutor:e}=this;return null!=e?!!e.lastEvaluatedValue:null}get evaluatedValueExpression(){const{valueExpressionExecutor:e}=this;return null!=e?e.lastEvaluatedValue:null}get hint(){return this.element?.hint}get includeDate(){return!(this.dataType!==f.Kx.Date||"time-only"===this.field.type)}get includeTime(){const{element:e,field:t}=this;if(this.dataType!==f.Kx.Date)return!1;if("time-only"===t.type)return!0;if("date-only"===t.type)return!1;const i="datetime-picker"===e?.input?.type?e.input.includeTime:void 0;return void 0===i||i}get includeTimeOffset(){if("timestamp-offset"!==this.field.type)return!1;const e=this.element?.input;return!e||"datetimeoffset-picker"===e.type&&e.includeTimeOffset}set initialFeature(e){this._set("initialFeature",e),this.notifyChange("valid")}get inputType(){return this.element?.input?.type}get hasInvalidSwitchValue(){const{element:e}=this,t=(0,h.HG)(e,"switch")?e.input:null;return!t||(0,h.Kn)(this.value,t)}get isRelationshipKeyField(){const{field:e,layer:t}=this;return(0,m.isRelatableFeatureSupportedLayer)(t)&&!!t.relationships?.some((t=>t.keyField===e.name))}get label(){const{field:e}=this;return this.getFormattedLabel(this.element?.label)??e.alias??e.name}get maxLength(){return(0,f.zU)({dataType:this.dataType,field:this.field,input:this.element?.input})}get minLength(){return(0,f.jl)({dataType:this.dataType,field:this.field,input:this.element?.input})}get name(){return this.field?.name}get range(){const{domain:e,element:t,field:i}=this;if("date"===this.dataType)return this._dateRange;const n=(0,o.A5)(i,e)||(0,u.getFieldRange)(i,e),l=n?.max===Number.MAX_VALUE?null:n?.max??null,r=n?.min===-Number.MAX_VALUE?null:n?.min??null;if(!t?.domain||"range"!==t.domain.type)return{max:l,min:r};const{max:s,min:a}=(0,o.A5)(i)||{};return{max:null!=s&&(null===l||null!=l&&s<l)?s:l,min:null!=a&&(null===r||null!=r&&a>r)?a:r}}get required(){const{editable:e,evaluatedRequiredExpression:t,field:i,visible:n,isSubtypeField:l}=this;return!!e&&(!1===i?.nullable||(!!l||!(!n||!1===this.group?.visible||null==t)&&t))}set required(e){this._overrideIfSome("required",e)}get showNoValueOptionEnabled(){const{element:e}=this;return!this.required&&(!(0,h.XI)(e)||e.input.showNoValueOption)}get showNoValueLabel(){const{element:e}=this;return(0,h.XI)(e)?e.input.noValueOptionLabel:null}get submittable(){const{field:e,required:t,valid:i,value:n}=this;return(!t||null!=n)&&(!!i||this.initialFeature.getAttribute(e.name)===n)}get timeResolution(){const e=this.element?.input;if(e&&("datetimeoffset-picker"===e.type||"time-picker"===e.type))return e.timeResolution??"minutes"}get timeStep(){return null!=this.timeResolution?c.fl.get(this.timeResolution):void 0}get updating(){const{editableExpressionExecutor:e,valueExpressionExecutor:t,visibilityExpressionExecutor:i,preservesValueWhenHidden:n}=this;return null!=t&&t.updating||null!=e&&e.updating||!1===n&&null!=i&&i.updating}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),null===e}get value(){if(this._fieldInputWasVisibleDuringLifetime=this._fieldInputWasVisibleDuringLifetime||this.visible&&!1!==this.group?.visible,!1===this.preservesValueWhenHidden&&this._fieldInputWasVisibleDuringLifetime&&(!1===this.visibilityExpressionExecutor?.lastEvaluatedValue||!1===this.group?.visibilityExpressionExecutor?.lastEvaluatedValue))return null!==this._storedValue&&this.set("_storedValue",null),null;if(this._shouldUseValueExpression){const e=this.evaluatedValueExpression;return this.dataType===f.Kx.Date?this._arcadeOutputToDateFieldValue(e):null!=e&&"object"==typeof e?`${e}`:e}return this._storedValue}set value(e){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",e),this.notifyChange("value"),this.notifyChange("valid")}get visible(){return!this._isEditTrackingField&&(null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element&&!1!==this.field?.visible||this._isVisibleByDefault)}_arcadeOutputToDateFieldValue(e){const t=this.field.type;try{if("object"==typeof e){if(null===e)return null;if((0,c.rX)(e))return(0,c.fD)(e,t);if("getTime"in e&&"function"==typeof e.getTime&&"date"===t)return parseInt(e.getTime(),10);if("date-only"===t||"time-only"===t||"timestamp-offset"===t)return e.toString()}else{if("string"==typeof e)return"date"===t?parseInt(e,10):e;if("number"==typeof e&&"date"===t)return e}throw new l.default("feature-form:invalid-date-value")}catch{return"date"===t?NaN:""}}_isDomainCompatible(e){const{field:t}=this;if("coded-value"===e?.type){const i=typeof e.codedValues[0].code;if("string"===i&&(0,u.isStringField)(t)||"number"===i&&(0,u.isNumericField)(t))return!0}return!!("range"===e?.type&&(0,u.isNumericField)(t)||(0,d.fs)(t)||(0,u.isTimeOnlyField)(t))}_validate(){const{dataType:e,domain:t,field:i,minLength:n,range:l,required:r,value:s,maxLength:a}=this;return(0,f.Gd)(s,{dataType:e,domain:t,field:i,maxLength:a,minLength:n,range:l,required:r})}};(0,n._)([(0,s.MZ)()],g.prototype,"_dateFormRange",null),(0,n._)([(0,s.MZ)()],g.prototype,"_dateRange",null),(0,n._)([(0,s.MZ)()],g.prototype,"_storedValue",void 0),(0,n._)([(0,s.MZ)()],g.prototype,"_configAllowsEdits",null),(0,n._)([(0,s.MZ)()],g.prototype,"_layerAndFieldAllowEdits",null),(0,n._)([(0,s.MZ)()],g.prototype,"_isVisibleByDefault",null),(0,n._)([(0,s.MZ)()],g.prototype,"_isEditTrackingField",null),(0,n._)([(0,s.MZ)()],g.prototype,"_shouldUseValueExpression",null),(0,n._)([(0,s.MZ)()],g.prototype,"isSubtypeField",null),(0,n._)([(0,s.MZ)()],g.prototype,"valueIsOutOfDomain",null),(0,n._)([(0,s.MZ)()],g.prototype,"dataType",null),(0,n._)([(0,s.MZ)()],g.prototype,"dateDataType",null),(0,n._)([(0,s.MZ)()],g.prototype,"domain",null),(0,n._)([(0,s.MZ)()],g.prototype,"editable",null),(0,n._)([(0,s.MZ)({readOnly:!0})],g.prototype,"error",void 0),(0,n._)([(0,s.MZ)({constructOnly:!0})],g.prototype,"preservesValueWhenHidden",void 0),(0,n._)([(0,s.MZ)()],g.prototype,"evaluatedRequiredExpression",null),(0,n._)([(0,s.MZ)()],g.prototype,"evaluatedValueExpression",null),(0,n._)([(0,s.MZ)()],g.prototype,"field",void 0),(0,n._)([(0,s.MZ)()],g.prototype,"group",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],g.prototype,"hint",null),(0,n._)([(0,s.MZ)()],g.prototype,"includeDate",null),(0,n._)([(0,s.MZ)()],g.prototype,"includeTime",null),(0,n._)([(0,s.MZ)()],g.prototype,"includeTimeOffset",null),(0,n._)([(0,s.MZ)()],g.prototype,"initialFeature",null),(0,n._)([(0,s.MZ)({readOnly:!0})],g.prototype,"inputType",null),(0,n._)([(0,s.MZ)()],g.prototype,"hasInvalidSwitchValue",null),(0,n._)([(0,s.MZ)()],g.prototype,"isRelationshipKeyField",null),(0,n._)([(0,s.MZ)()],g.prototype,"label",null),(0,n._)([(0,s.MZ)()],g.prototype,"maxLength",null),(0,n._)([(0,s.MZ)()],g.prototype,"minLength",null),(0,n._)([(0,s.MZ)({readOnly:!0})],g.prototype,"name",null),(0,n._)([(0,s.MZ)()],g.prototype,"range",null),(0,n._)([(0,s.MZ)()],g.prototype,"required",null),(0,n._)([(0,s.MZ)()],g.prototype,"requiredExpressionExecutor",void 0),(0,n._)([(0,s.MZ)()],g.prototype,"showNoValueOptionEnabled",null),(0,n._)([(0,s.MZ)()],g.prototype,"submittable",null),(0,n._)([(0,s.MZ)()],g.prototype,"timeResolution",null),(0,n._)([(0,s.MZ)()],g.prototype,"timeStep",null),(0,n._)([(0,s.MZ)({readOnly:!0})],g.prototype,"type",void 0),(0,n._)([(0,s.MZ)()],g.prototype,"updating",null),(0,n._)([(0,s.MZ)()],g.prototype,"valid",null),(0,n._)([(0,s.MZ)({value:null})],g.prototype,"value",null),(0,n._)([(0,s.MZ)()],g.prototype,"valueExpressionExecutor",void 0),(0,n._)([(0,s.MZ)()],g.prototype,"visible",null),g=(0,n._)([(0,a.$)("esri.widgets.FeatureForm.FieldInput")],g);const v=g}}]);