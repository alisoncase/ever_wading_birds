"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[61348,79538],{61348:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(74719),i=n(95011),a=n(98785),s=n(70934),o=n(79538),l=n(2938);const u=i.numericTypes;async function d(e){const{layerAdapter:t,...n}=await async function(e){if(!e?.layer||!e.view)throw new r.default("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");const t=[l.mb.CSVLayer,l.mb.FeatureLayer,l.mb.GeoJSONLayer,l.mb.KnowledgeGraphSublayer,l.mb.OGCFeatureLayer,l.mb.OrientedImageryLayer,l.mb.ParquetLayer,l.mb.StreamLayer,l.mb.WFSLayer],{layer:n,...i}=e,d=(0,l.Jg)(n,t);if(!d)throw new r.default("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+(0,l.Ho)(t).join(", "));const c={layerAdapter:d,...i};c.radius=null==c.radius?null==c.blurRadius?18:(0,a.zp)(c.blurRadius):c.radius;const m=null!=c.signal?{signal:c.signal}:null;await d.load(m);const f=c.field,y=f?d.getField(f):null,g=await(0,o.EG)({field:f}),p=(0,s.MH)(d,g,"heatmap-statistics:invalid-parameters");if(p)throw p;if(y){const e=(0,s.a)(d,y,"heatmap-statistics:invalid-parameters",u);if(e)throw e}return c}(e);return t.heatmapStatistics(n)}},79538:(e,t,n)=>{n.d(t,{BV:()=>k,EG:()=>w,Lk:()=>$,Ll:()=>L,Np:()=>d,R3:()=>C,SO:()=>y,T1:()=>Z,UH:()=>u,Wy:()=>b,XR:()=>f,aM:()=>S,fs:()=>v,i0:()=>D,i3:()=>h});var r=n(66845),i=n(95011),a=n(96247),s=n(76983),o=n(73210),l=n(40731);const u=",",d={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},c="percent-of-total",m="field",f={exclude:["median"]},y={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},g=new Set(["integer","small-integer"]);let p=null;const h=["date","date-only","timestamp-offset"];function v(e){return(0,i.isDateField)(e)||(0,i.isDateOnlyField)(e)||(0,i.isTimestampOffsetField)(e)}async function w(e){const{field:t,field2:n,field3:r,normalizationField:i,valueExpression:s}=e;let o=[];if(s){if(!p){const{arcadeUtils:e}=await(0,a.lw)();p=e}o=p.extractFieldNames(s)}return t&&o.push(t),n&&o.push(n),r&&o.push(r),i&&o.push(i),o}function b(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=c)),t??void 0}function T(e){return String(e).padStart(2,"0")}function F(e,t,n){let r;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),r=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${T((n?e.getMonth():e.getUTCMonth())+1)}-${T(n?e.getDate():e.getUTCDate())} ${T(n?e.getHours():e.getUTCHours())}:${T(n?e.getMinutes():e.getUTCMinutes())}:${T(n?e.getSeconds():e.getUTCSeconds())}'`):r=e,r}function S(e,t,n,r){const{hasQueryEngine:i}=e,a=`(${F(n,$(e,n),i)} - ${F(t,$(e,t),i)})`;let s=y[r],o="/";return s<1&&(s=1/s,o="*"),{sqlExpression:1===s?a:`(${a} ${o} ${s})`,sqlWhere:null}}function $(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,i.isDateField)(n))return"field"}}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;for(const n in t)if(t[n].includes(e))return n}function Z(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;return e&&("string"==typeof e?t.includes(e)&&(r=e):r=(0,s.q3)(e)),n?r||"gray":r}function C(e,t){const n=t&&e.getField(t);return!!n&&g.has(n.type)}function L(e){return`cast(${e} as float)`}function D(e,t){const{format:n,timeZoneOptions:i,fieldType:a}=t??{};let s,u;if(i&&({timeZone:s,timeZoneName:u}=(0,l.hv)(i.layerTimeZone,i.datesInUnknownTimezone,i.viewTimeZone,(0,r.J2)(n||"short-date-short-time"),a)),"string"==typeof e&&isNaN(Date.parse("time-only"===a?`1970-01-01T${e}Z`:e)))return e;switch(a){case"date-only":{const t=(0,r.J2)(n||"short-date");return"string"==typeof e?(0,r.iS)(e,{...t}):(0,r.Yq)(e,{...t,timeZone:o.n$})}case"time-only":{const t=(0,r.J2)(n||"short-time");return"string"==typeof e?(0,r.F8)(e,t):(0,r.Yq)(e,{...t,timeZone:o.n$})}case"timestamp-offset":{if(!s&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||i?(0,r.J2)(n||"short-date-short-time"):void 0,a=t?{...t,timeZone:s,timeZoneName:u}:void 0;return"string"==typeof e?(0,r.Ey)(e,a):(0,r.Yq)(e,a)}default:{const t=n||i?(0,r.J2)(n||"short-date-short-time"):void 0;return(0,r.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:s,timeZoneName:u}:void 0)}}}}}]);