"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[41543,63924,63984],{1696:(t,e,n)=>{n.d(e,{Rc:()=>h,J8:()=>I,oG:()=>l,rq:()=>d,Km:()=>g});n(21265);var r=n(22029),o=n(13473),i=n(10382),u=n(66509),a=n(98080),c=n(28473),s=n(24646);class f{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new f(a.vt)}static createVec3f64(){return new f(c.vt)}static createVec4f64(){return new f(s.vt)}static createMat3f64(){return new f(o.vt)}static createMat4f64(){return new f(i.vt)}static createQuatf64(){return new f(u.vt)}get test(){}}const l=f.createVec2f64(),d=f.createVec3f64(),g=f.createVec4f64(),h=(f.createMat3f64(),f.createMat4f64()),I=f.createQuatf64()},10382:(t,e,n)=>{function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function i(t,e,n,r,o,i,u,a,c,s,f,l,d,g,h,I){return[t,e,n,r,o,i,u,a,c,s,f,l,d,g,h,I]}n.d(e,{fA:()=>i,o8:()=>o,vt:()=>r,zK:()=>u});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:o,create:r,createView:function(t,e){return new Float64Array(t,e,16)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},10872:(t,e,n)=>{n.d(e,{$Q:()=>L,C:()=>l,Cr:()=>b,Io:()=>V,LV:()=>f,Nj:()=>B,O_:()=>I,Qj:()=>d,T7:()=>U,Tj:()=>D,U5:()=>C,UB:()=>h,Ui:()=>S,Z1:()=>P,_I:()=>F,b6:()=>_,ci:()=>T,fA:()=>g,gv:()=>R,lU:()=>E,mN:()=>z,mP:()=>O,mR:()=>M,v1:()=>Y,vE:()=>X,vt:()=>s,ze:()=>N});var r=n(64682),o=n(89227),i=n(28473),u=(n(60548),n(49943)),a=n(1696),c=n(11741);function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return[t[0],t[1],t[2],t[3]]}function f(){return g(arguments.length>0&&void 0!==arguments[0]?arguments[0]:j[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:j[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:j[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:j[3],a.Km.get())}function l(t,e){return g(e[0],e[1],e[2],e[3],t)}function d(t){return t}function g(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s();return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function h(t,e,n){return(0,o.c)(n,t),n[3]=e,n}function I(t,e,n){const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function b(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s();const o=n[0]-e[0],i=n[1]-e[1],u=n[2]-e[2],a=t[0]-e[0],c=t[1]-e[1],f=t[2]-e[2],l=i*f-u*c,d=u*a-o*f,g=o*c-i*a,h=l*l+d*d+g*g,I=Math.abs(h-1)>1e-5&&h>1e-12?1/Math.sqrt(h):1;return r[0]=l*I,r[1]=d*I,r[2]=g*I,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function E(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.floor(n*(1/3)),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Math.floor(n*(2/3));if(n<3)return!1;e(y,r);let a=i,c=!1;for(;a<n-1&&!c;)e(v,a),a++,c=!(0,o.p)(y,v);if(!c)return!1;for(a=Math.max(a,u),c=!1;a<n&&!c;)e(w,a),a++,(0,o.d)(m,y,v),(0,o.n)(m,m),(0,o.d)(A,v,w),(0,o.n)(A,A),c=!(0,o.p)(y,w)&&!(0,o.p)(v,w)&&Math.abs((0,o.f)(m,A))<p;return c?(b(y,v,w,t),!0):(0!==r||1!==i||2!==u)&&E(t,e,n,0,1,2)}function T(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.length/3;return E(t,((t,n)=>(0,o.i)(t,e[3*n+0],e[3*n+1],e[3*n+2])),n?r-1:r)}const p=.99619469809,y=(0,i.vt)(),v=(0,i.vt)(),w=(0,i.vt)(),m=(0,i.vt)(),A=(0,i.vt)();function O(t,e,n){return e!==t&&l(t,e),t[3]=-(0,o.f)(t,n),t}function N(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function M(t,e,n,r){return(0,o.e)(w,e,t),I(n,w,r)}function C(t,e,n,r){return k(X(t,e,(0,o.d)(a.rq.get(),n,e),Z,r))}function S(t,e,n){return null!=e&&k(X(t,e.origin,e.direction,q,n))}function U(t,e,n){return k(X(t,e.origin,e.vector,Y.NONE,n))}function R(t,e,n){return k(X(t,e.origin,e.vector,Y.CLAMP,n))}function D(t,e){return z(t,e)>=0}function L(t,e){const n=(0,o.f)(t,e.ray.direction),r=-z(t,e.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;const i=r/n;return n>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function _(t,e){const n=(0,o.f)(t,e.ray.direction),r=-z(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;const i=r/n;return n>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function F(t,e,n){const r=(0,o.h)(a.rq.get(),t,-t[3]),i=function(t,e,n){const r=(0,o.h)(a.rq.get(),t,(0,o.f)(t,e));return(0,o.d)(n,e,r),n}(t,(0,o.d)(a.rq.get(),e,r),a.rq.get());return(0,o.g)(n,i,r),n}function P(t,e,n,r){const i=t,s=a.rq.get(),f=a.rq.get();(0,c.VV)(i,s,f);const l=(0,o.d)(a.rq.get(),n,e),d=(0,u.gr)(s,l),g=(0,u.gr)(f,l),h=(0,u.gr)(i,l);return(0,o.i)(r,d,g,h)}function V(t,e){return Math.abs(z(t,e))}function z(t,e){return(0,o.f)(t,e)+t[3]}var B,x;function k(t){return t===B.INTERSECTS_INSIDE_OUT||t===B.INTERSECTS_OUTSIDE_IN}function X(t,e,n,i,u){const a=(0,o.f)(t,n),c=z(t,e);if(0===a)return c>=0?B.INSIDE:B.OUTSIDE;let s=-c/a;return i&Y.CLAMP&&(s=(0,r.qE)(s,0,1)),!(i&Y.INFINITE_MIN)&&s<0||!(i&Y.INFINITE_MAX)&&s>1?c>=0?B.INSIDE:B.OUTSIDE:((0,o.g)(u,e,(0,o.h)(u,n,s)),c>=0?B.INTERSECTS_INSIDE_OUT:B.INTERSECTS_OUTSIDE_IN)}(x=B||(B={}))[x.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",x[x.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",x[x.INSIDE=2]="INSIDE",x[x.OUTSIDE=3]="OUTSIDE";const j=[0,0,1,0];var Y;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(Y||(Y={}));const Z=Y.INFINITE_MIN|Y.INFINITE_MAX,q=Y.INFINITE_MAX},11741:(t,e,n)=>{n.d(e,{BI:()=>f,VV:()=>s,YH:()=>c,e9:()=>I,g7:()=>g,hG:()=>u,is:()=>d,ix:()=>b,nu:()=>l,su:()=>h,wp:()=>a});var r=n(64682),o=n(89227),i=n(28473);function u(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],n=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}function a(t,e){const n=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),r=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),i=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return(0,o.i)(t,n,r,i),t}function c(t,e,n){n=n||t;const r=(0,o.f)(t,e);(0,o.i)(n,t[0]-r*e[0],t[1]-r*e[1],t[2]-r*e[2]),(0,o.n)(n,n)}function s(t,e,n){Math.abs(t[0])>Math.abs(t[1])?(0,o.i)(e,0,1,0):(0,o.i)(e,1,0,0),(0,o.e)(n,t,e),(0,o.e)(e,n,t),(0,o.n)(n,n),(0,o.n)(e,e)}function f(t,e,n,r,o,i){const u=t+(e-t)*o;return u+(n+(r-n)*o-u)*i}function l(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.vt)();const u=(0,o.l)(t),a=(0,o.l)(e),c=(0,o.f)(t,e)/(u*a);if(c<.9999999999999999){const i=Math.acos(c),s=((1-n)*u+n*a)/Math.sin(i),f=s/u*Math.sin((1-n)*i),l=s/a*Math.sin(n*i);return(0,o.h)(y,t,f),(0,o.h)(v,e,l),(0,o.g)(r,y,v)}return(0,o.m)(r,t,e,n)}function d(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.vt)(),u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,i.vt)();const a=(0,o.l)(t),c=(0,o.l)(e),s=(0,o.f)(t,e)/(a*c);if(s<.9999999999999999){const i=Math.acos(s),f=Math.sin(i),l=Math.sin(n*i),d=Math.sin((1-n)*i),g=(1-n)*a+n*c;{const n=g/f,i=n/c*l;(0,o.h)(y,t,n/a*d),(0,o.h)(v,e,i),(0,o.g)(r,y,v)}{const r=1/a*(-Math.cos((1-n)*i)*i*g+d*(-a+c));(0,o.h)(y,t,r);const s=1/c*(Math.cos(n*i)*i*g+l*(-a+c));(0,o.h)(v,e,s),(0,o.g)(u,y,v),(0,o.h)(u,u,1/f)}return u}return(0,o.m)(r,t,e,n),(0,o.d)(u,e,t),(0,o.n)(u,u),u}function g(t,e,n){t=(0,o.n)(y,t),e=(0,o.n)(v,e);const i=(0,r.XM)((0,o.f)(t,e));if(n){const r=(0,o.e)(p,t,e);if((0,o.f)(r,n)<0)return-i}return i}function h(t){const e=t.length;return n=>{if(n<=t[0][0])return t[0][1];if(n>=t[e-1][0])return t[e-1][1];let r=1;for(;n>t[r][0];)r++;const o=t[r-1][0],i=t[r][0],u=(i-n)/(i-o);return u*t[r-1][1]+(1-u)*t[r][1]}}function I(t,e,n,r){(0,o.d)(E,e,t),(0,o.d)(T,n,t),(0,o.e)(r,E,T),(0,o.n)(r,r),r[3]=-(0,o.f)(t,r)}function b(t,e){if((0,o.i)(e,0,0,0),t.length>0){for(let n=0;n<t.length;++n)(0,o.g)(e,e,t[n]);(0,o.h)(e,e,1/t.length)}}const E=(0,i.vt)(),T=(0,i.vt)(),p=(0,i.vt)(),y=(0,i.vt)(),v=(0,i.vt)()},13473:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function i(t,e,n,r,o,i,u,a,c){return[t,e,n,r,o,i,u,a,c]}n.d(e,{fA:()=>i,o8:()=>o,vt:()=>r,zK:()=>u});const u=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:o,create:r,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},22131:(t,e,n)=>{var r;function o(t){return t===r.POSITION}n.d(e,{b:()=>o,r:()=>r}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.ROTATION="rotation",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.START_UP="startUp",t.END_UP="endUp",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},46364:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var r=n(62631),o=n(25048),i=n(21369),u=n(66509),a=n(89227),c=n(90030),s=n(93321),f=n(67093),l=n(22214),d=n(99717);class g{transform(t){const e=this._transform(t),n=[e.points.buffer,e.rgb.buffer];null!=e.pointIdFilterMap&&n.push(e.pointIdFilterMap.buffer);for(const r of e.attributes)"buffer"in r.values&&(0,o.mw)(r.values.buffer)&&r.values.buffer!==e.rgb.buffer&&n.push(r.values.buffer);return Promise.resolve({result:e,transferList:n})}_transform(t){const e=(0,l.RC)(t.schema,t.geometryBuffer);let n=e.length/3,o=null;const i=new Array,u=(0,l.jy)(t.primaryAttributeData,e,n);null!=t.primaryAttributeData&&u&&i.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:u});const a=(0,l.jy)(t.modulationAttributeData,e,n);null!=t.modulationAttributeData&&a&&i.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:a});let c=(0,l.bh)(t.rendererInfo,u,a,n);if(t.filterInfo&&t.filterInfo.length>0&&null!=t.filterAttributesData){const u=t.filterAttributesData.filter(r.Ru).map((t=>{const r=(0,l.jy)(t,e,n),o={attributeInfo:t.attributeInfo,values:r};return i.push(o),o}));o=new Uint32Array(n),n=(0,l.$i)(e,c,o,t.filterInfo,u)}for(const r of t.userAttributesData){const t=(0,l.jy)(r,e,n);i.push({attributeInfo:r.attributeInfo,values:t})}3*n<c.length&&(c=new Uint8Array(c.buffer.slice(0,3*n))),function(t,e,n){if(0!==n)for(let r=0;r<e;r++)t[3*r+2]+=n}(e,n,t.elevationOffset);const f=h(e,n,d.ab.fromData(t.obbData),s.default.fromJSON(t.inSR),s.default.fromJSON(t.outSR));return{obbData:t.obbData,points:f,rgb:c,attributes:i,pointIdFilterMap:o}}}function h(t,e,n,r,o){if(!(0,f.projectBuffer)(t,r,0,t,o,0,e))throw new Error("Can't reproject");const u=(0,c.o8)(n.center),s=(0,c.vt)(),l=(0,c.vt)(),d=(0,c.o8)(n.halfSize);(0,i.Xr)(I,n.quaternion);const g=new Float32Array(3*e);for(let i=0;i<e;i++){let e=3*i;s[0]=t[e]-u[0],s[1]=t[e+1]-u[1],s[2]=t[e+2]-u[2],(0,a.w)(l,s,I),d[0]=Math.max(d[0],Math.abs(l[0])),d[1]=Math.max(d[1],Math.abs(l[1])),d[2]=Math.max(d[2],Math.abs(l[2])),g[e++]=s[0],g[e++]=s[1],g[e]=s[2]}return n.halfSize=d,g}const I=(0,u.vt)();function b(){return new g}},49943:(t,e,n)=>{n.d(e,{EJ:()=>s,_I:()=>u,g7:()=>c,gr:()=>a});var r=n(64682),o=n(89227),i=n(28473);function u(t,e,n){const r=(0,o.f)(t,e)/(0,o.f)(t,t);return(0,o.h)(n,t,r)}function a(t,e){return(0,o.f)(t,e)/(0,o.l)(t)}function c(t,e){const n=(0,o.f)(t,e)/((0,o.l)(t)*(0,o.l)(e));return-(0,r.XM)(n)}function s(t,e,n){(0,o.n)(f,t),(0,o.n)(l,e);const i=(0,o.f)(f,l),u=(0,r.XM)(i),a=(0,o.e)(f,f,l);return(0,o.f)(a,n)<0?2*Math.PI-u:u}const f=(0,i.vt)(),l=(0,i.vt)()},62580:(t,e,n)=>{n.d(e,{Ax:()=>E,Me:()=>s,mb:()=>h});var r=n(74719);const o=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function u(t,e,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(t,n+i.identifierOffset,i.identifierLength)),version:e.getUint16(n+i.versionOffset,o),checksum:e.getUint32(n+i.checksumOffset,o)}}const a={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function c(t,e){return{sizeLo:t.getUint32(e+a.sizeLo,o),sizeHi:t.getUint32(e+a.sizeHi,o),minX:t.getFloat64(e+a.minX,o),minY:t.getFloat64(e+a.minY,o),minZ:t.getFloat64(e+a.minZ,o),maxX:t.getFloat64(e+a.maxX,o),maxY:t.getFloat64(e+a.maxY,o),maxZ:t.getFloat64(e+a.maxZ,o),errorX:t.getFloat64(e+a.errorX,o),errorY:t.getFloat64(e+a.errorY,o),errorZ:t.getFloat64(e+a.errorZ,o),count:t.getUint32(e+a.count,o),reserved:t.getUint32(e+a.reserved,o)}}function s(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:s}=u(t,e,n);if(n+=i.byteCount,"LEPCC     "!==o)throw new r.default("lepcc-decode-error","Bad identifier");if(s>1)throw new r.default("lepcc-decode-error","Unknown version");const l=c(e,n);if(n+=a.byteCount,l.sizeHi*2**32+l.sizeLo!==t.byteLength)throw new r.default("lepcc-decode-error","Bad size");const d=new Float64Array(3*l.count),g=[],h=[],I=[],b=[];if(n=f(t,n,g),n=f(t,n,h),n=f(t,n,I),n=f(t,n,b),n!==t.byteLength)throw new r.default("lepcc-decode-error","Bad length");let E=0,T=0;for(let r=0;r<g.length;r++){T+=g[r];let t=0;for(let e=0;e<h[r];e++){t+=I[E];const e=b[E];d[3*E]=Math.min(l.maxX,l.minX+2*l.errorX*t),d[3*E+1]=Math.min(l.maxY,l.minY+2*l.errorY*T),d[3*E+2]=Math.min(l.maxZ,l.minZ+2*l.errorZ*e),E++}}return{errorX:l.errorX,errorY:l.errorY,errorZ:l.errorZ,result:d}}function f(t,e,n){const r=[];e=l(t,e,r);const o=[];for(let i=0;i<r.length;i++){o.length=0,e=l(t,e,o);for(let t=0;t<o.length;t++)n.push(o[t]+r[i])}return e}function l(t,e,n){const i=new DataView(t,e),u=i.getUint8(0),a=31&u,c=!!(32&u),s=(192&u)>>6;let f=0;if(0===s)f=i.getUint32(1,o),e+=5;else if(1===s)f=i.getUint16(1,o),e+=3;else{if(2!==s)throw new r.default("lepcc-decode-error","Bad count type");f=i.getUint8(1),e+=2}if(c)throw new r.default("lepcc-decode-error","LUT not implemented");const l=Math.ceil(f*a/8),d=new Uint8Array(t,e,l);let g=0,h=0,I=0;const b=-1>>>32-a;for(let r=0;r<f;r++){for(;h<a;)g|=d[I]<<h,h+=8,I+=1;n[r]=g&b,g>>>=a,h-=a,h+a>32&&(g|=d[I-1]>>8-h)}return e+I}const d={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function g(t,e){return{sizeLo:t.getUint32(e+d.sizeLo,o),sizeHi:t.getUint32(e+d.sizeHi,o),count:t.getUint32(e+d.count,o),colorMapCount:t.getUint16(e+d.colorMapCount,o),lookupMethod:t.getUint8(e+d.lookupMethod),compressionMethod:t.getUint8(e+d.compressionMethod)}}function h(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:a}=u(t,e,n);if(n+=i.byteCount,"ClusterRGB"!==o)throw new r.default("lepcc-decode-error","Bad identifier");if(a>1)throw new r.default("lepcc-decode-error","Unknown version");const c=g(e,n);if(n+=d.byteCount,c.sizeHi*2**32+c.sizeLo!==t.byteLength)throw new r.default("lepcc-decode-error","Bad size");if((2===c.lookupMethod||1===c.lookupMethod)&&0===c.compressionMethod){if(3*c.colorMapCount+c.count+n!==t.byteLength||c.colorMapCount>256)throw new r.default("lepcc-decode-error","Bad count");const e=new Uint8Array(t,n,3*c.colorMapCount),o=new Uint8Array(t,n+3*c.colorMapCount,c.count),i=new Uint8Array(3*c.count);for(let t=0;t<c.count;t++){const n=o[t];i[3*t]=e[3*n],i[3*t+1]=e[3*n+1],i[3*t+2]=e[3*n+2]}return i}if(0===c.lookupMethod&&0===c.compressionMethod){if(3*c.count+n!==t.byteLength||0!==c.colorMapCount)throw new r.default("lepcc-decode-error","Bad count");return new Uint8Array(t,n).slice()}if(c.lookupMethod<=2&&1===c.compressionMethod){if(n+3!==t.byteLength||1!==c.colorMapCount)throw new r.default("lepcc-decode-error","Bad count");const o=e.getUint8(n),i=e.getUint8(n+1),u=e.getUint8(n+2),a=new Uint8Array(3*c.count);for(let t=0;t<c.count;t++)a[3*t]=o,a[3*t+1]=i,a[3*t+2]=u;return a}throw new r.default("lepcc-decode-error","Bad method "+c.lookupMethod+","+c.compressionMethod)}const I={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function b(t,e){return{sizeLo:t.getUint32(e+I.sizeLo,o),sizeHi:t.getUint32(e+I.sizeHi,o),count:t.getUint32(e+I.count,o),scaleFactor:t.getUint16(e+I.scaleFactor,o),bitsPerPoint:t.getUint8(e+I.bitsPerPoint),reserved:t.getUint8(e+I.reserved)}}function E(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:a}=u(t,e,n);if(n+=i.byteCount,"Intensity "!==o)throw new r.default("lepcc-decode-error","Bad identifier");if(a>1)throw new r.default("lepcc-decode-error","Unknown version");const c=b(e,n);if(n+=I.byteCount,c.sizeHi*2**32+c.sizeLo!==t.byteLength)throw new r.default("lepcc-decode-error","Bad size");const s=new Uint16Array(c.count);if(8===c.bitsPerPoint){if(c.count+n!==t.byteLength)throw new r.default("lepcc-decode-error","Bad size");const e=new Uint8Array(t,n,c.count);for(let t=0;t<c.count;t++)s[t]=e[t]*c.scaleFactor}else if(16===c.bitsPerPoint){if(2*c.count+n!==t.byteLength)throw new r.default("lepcc-decode-error","Bad size");const e=new Uint16Array(t,n,c.count);for(let t=0;t<c.count;t++)s[t]=e[t]*c.scaleFactor}else{const e=[];if(l(t,n,e)!==t.byteLength)throw new r.default("lepcc-decode-error","Bad size");for(let t=0;t<c.count;t++)s[t]=e[t]*c.scaleFactor}return s}},62632:(t,e,n)=>{n.d(e,{MA:()=>d,m0:()=>T,qs:()=>b,wH:()=>I});var r=n(74719),o=n(82301),i=n(50925),u=n(62580),a=n(22131);const c=()=>i.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function s(t,e,n){let o="",i=0;for(;i<n;){const u=t[e+i];if(u<128)o+=String.fromCharCode(u),i++;else if(u>=192&&u<224){if(i+1>=n)throw new r.default("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const a=(31&u)<<6|63&t[e+i+1];o+=String.fromCharCode(a),i+=2}else if(u>=224&&u<240){if(i+2>=n)throw new r.default("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(15&u)<<12|(63&t[e+i+1])<<6|63&t[e+i+2];o+=String.fromCharCode(a),i+=3}else{if(!(u>=240&&u<248))throw new r.default("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=n)throw new r.default("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(7&u)<<18|(63&t[e+i+1])<<12|(63&t[e+i+2])<<6|63&t[e+i+3];if(a>=65536){const t=55296+(a-65536>>10),e=56320+(1023&a);o+=String.fromCharCode(t,e)}else o+=String.fromCharCode(a);i+=4}}}return o}function f(t,e){const n={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<e.length;o++){const i=e[o],u=i.valueType||i.type,a=y[u];n.fields[i.property]=a(t,r),r+=p[u].BYTES_PER_ELEMENT}return n.byteCount=r,n}function l(t,e,n){const o=[];let i,u,a=0;for(u=0;u<t;u+=1){if(i=e[u],i>0){if(o.push(s(n,a,i-1)),0!==n[a+i-1])throw new r.default("string-array-error","Invalid string array: missing null termination.")}else o.push(null);a+=i}return o}function d(t,e){return new(0,p[e.valueType])(t,e.byteOffset,e.count*e.valuesPerElement)}function g(t,e,n){const i=null!=e.header?f(t,e.header):{byteOffset:0,byteCount:0,fields:{count:n}},u={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let a=i.byteCount;for(let c=0;c<e.ordering.length;c++){const t=e.ordering[c],n=(0,o.clone)(e[t]);if(n.count=i.fields.count??0,"String"===n.valueType){if(n.byteOffset=a,n.byteCount=i.fields[t+"ByteCount"],"UTF-8"!==n.encoding)throw new r.default("unsupported-encoding","Unsupported String encoding.",{encoding:n.encoding});if(n.timeEncoding&&"ECMA_ISO8601"!==n.timeEncoding)throw new r.default("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:n.timeEncoding})}else{if(!v(n.valueType))throw new r.default("unsupported-value-type","Unsupported binary valueType",{valueType:n.valueType});{const t=w(n.valueType);a+=a%t!=0?t-a%t:0,n.byteOffset=a,n.byteCount=t*n.valuesPerElement*n.count}}a+=n.byteCount??0,u.entries[t]=n}return u.byteCount=a-u.byteOffset,u}function h(t,e,n){if(e!==t&&c().error(`Invalid ${n} buffer size\n expected: ${t}, actual: ${e})`),e<t)throw new r.default("buffer-too-small","Binary buffer is too small",{expectedSize:t,actualSize:e})}function I(t,e){const n=f(t,e&&e.header);let r=n.byteCount;const o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,u=null!=i.vertexCount?i.vertexCount:i.count;for(const s of e.ordering){if(!e.vertexAttributes[s])continue;const t={...e.vertexAttributes[s],byteOffset:r,count:u},n=E[s]||"_"+s;o.vertexAttributes[n]=t,r+=w(t.valueType)*t.valuesPerElement*u}const a=i.faceCount;if(e.faces&&a){o.faces={};for(const t of e.ordering){if(!e.faces[t])continue;const n={...e.faces[t],byteOffset:r,count:a};o.faces[t]=n,r+=w(n.valueType)*n.valuesPerElement*a}}const c=i.featureCount;if(e.featureAttributes&&e.featureAttributeOrder&&c){o.featureAttributes={};for(const t of e.featureAttributeOrder){if(!e.featureAttributes[t])continue;const n={...e.featureAttributes[t],byteOffset:r,count:c};o.featureAttributes[t]=n,r+=("UInt64"===n.valueType?8:w(n.valueType))*n.valuesPerElement*c}}return h(r,t.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}function b(t,e){return t&&t.compressedAttributes&&"draco"===t.compressedAttributes.encoding?function(t){const e={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const n of t)switch(n){case"position":break;case"normal":e.normal=!0;break;case"uv0":e.uv0=!0;break;case"color":e.color=!0;break;case"uv-region":e.uvRegion=!0;break;case"feature-index":e.featureIndex=!0}return e}(t.compressedAttributes.attributes):t?function(t){return{isDraco:!1,isLegacy:!1,color:null!=t.color,normal:null!=t.normal,uv0:null!=t.uv0,uvRegion:null!=t.uvRegion,featureIndex:null!=t.faceRange&&null!=t.featureId}}(t):function(t){const e={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const n of t.ordering)if(t.vertexAttributes[n])switch(n){case"position":break;case"normal":e.normal=!0;break;case"color":e.color=!0;break;case"uv0":e.uv0=!0;break;case"region":e.uvRegion=!0}return t.featureAttributes&&t.featureAttributeOrder&&(e.featureIndex=!0),e}(e)}const E={position:a.r.POSITION,normal:a.r.NORMAL,color:a.r.COLOR,uv0:a.r.UV0,region:a.r.UVREGION};function T(t,e,n){if("lepcc-rgb"===t.encoding)return(0,u.mb)(e);if("lepcc-intensity"===t.encoding)return(0,u.Ax)(e);if(null!=t.encoding&&""!==t.encoding)throw new r.default("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");t["attributeByteCounts "]&&!t.attributeByteCounts&&(c().warn("Warning: Trailing space in 'attributeByteCounts '."),t.attributeByteCounts=t["attributeByteCounts "]),"ObjectIds"===t.ordering[0]&&t.hasOwnProperty("objectIds")&&(c().warn("Warning: Case error in objectIds"),t.ordering[0]="objectIds");const o=g(e,t,n);h(o.byteOffset+o.byteCount,e.byteLength,"attribute");const i=o.entries.attributeValues||o.entries.objectIds;if(i){if("String"===i.valueType){const t=o.entries.attributeByteCounts,n=d(e,t),r=function(t,e){return new Uint8Array(t,e.byteOffset,e.byteCount)}(e,i);return i.timeEncoding?function(t,e,n){return l(t,e,n).map((t=>{const e=t?Date.parse(t):null;return null==e||Number.isNaN(e)?null:e}))}(t.count,n,r):l(t.count,n,r)}return d(e,i)}throw new r.default("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const p={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},y={Float32:(t,e)=>new DataView(t,0).getFloat32(e,!0),Float64:(t,e)=>new DataView(t,0).getFloat64(e,!0),UInt8:(t,e)=>new DataView(t,0).getUint8(e),Int8:(t,e)=>new DataView(t,0).getInt8(e),UInt16:(t,e)=>new DataView(t,0).getUint16(e,!0),Int16:(t,e)=>new DataView(t,0).getInt16(e,!0),UInt32:(t,e)=>new DataView(t,0).getUint32(e,!0),Int32:(t,e)=>new DataView(t,0).getInt32(e,!0)};function v(t){return p.hasOwnProperty(t)}function w(t){return v(t)?p[t].BYTES_PER_ELEMENT:0}},66509:(t,e,n)=>{function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}function i(t,e,n,r){return[t,e,n,r]}n.d(e,{fA:()=>i,o8:()=>o,vt:()=>r,zK:()=>u});const u=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:o,create:r,fromValues:i},Symbol.toStringTag,{value:"Module"}))},90030:(t,e,n)=>{function r(){return new Float32Array(3)}function o(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(t,e,n){const r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}function u(){return r()}function a(){return i(1,1,1)}function c(){return i(1,0,0)}function s(){return i(0,1,0)}function f(){return i(0,0,1)}n.d(e,{fA:()=>i,o8:()=>o,vt:()=>r});const l=u(),d=a(),g=c(),h=s(),I=f();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_X:g,UNIT_Y:h,UNIT_Z:I,ZEROS:l,clone:o,create:r,createView:function(t,e){return new Float32Array(t,e,3)},fromValues:i,ones:a,unitX:c,unitY:s,unitZ:f,zeros:u},Symbol.toStringTag,{value:"Module"}))}}]);