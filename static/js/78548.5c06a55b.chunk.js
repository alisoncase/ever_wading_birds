"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[44827,73867,78548],{7893:(e,t,o)=>{o.d(t,{Bb:()=>h,G3:()=>y,fJ:()=>u});var i=o(32006),n=o(89227),r=o(28473),s=o(25071),a=o(1696),l=o(31428),c=o(57746),d=o(77247),p=o(6613);function h(e,t){return f(e,t,!1)}function u(e,t){return f(e,t,!0)}function f(e,t,o){if(e instanceof p.D){if(e.operation instanceof l.a)return function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=o?-1:1,a=(0,r.fA)(i*e.dx,i*e.dy,i*e.dz);(0,n.g)(t.origin,t.origin,a),(0,s.u)(t)}(e.operation,t,o),!0;if(e.operation instanceof c.m)return function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=o?-e.angle:e.angle;(0,n.L)(t.basis1,t.basis1,r.uY,i),(0,n.L)(t.basis2,t.basis2,r.uY,i),(0,s.u)(t)}(e.operation,t,o),!0;if(e.operation instanceof d.j)return function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=o?1/e.factor1:e.factor1,a=o?1/e.factor2:e.factor2;(0,n.h)(t.basis1,t.basis1,r),(0,n.h)(t.basis2,t.basis2,a),(0,i.Vj)(t.origin,t.origin,e.origin,e.axis1,r),(0,i.Vj)(t.origin,t.origin,e.origin,e.axis2,a),(0,s.u)(t)}(e.operation,t,o),!0}return!1}function y(e,t,o,r){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r||(r=(0,s.d)());const c=(0,i.hZ)(a.oG.get(),e[1],-e[0]),d=(0,i.hZ)(a.oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),p=(0,i.hZ)(a.oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),h=a.oG.get(),u=t.allVertices;u.forEach((t=>{let{pos:o}=t;(0,i.hZ)(h,(0,i.Om)(e,o),(0,i.Om)(c,o)),(0,i.jk)(d,d,h),(0,i.T9)(p,p,h)}));const f=1e-6,y=(0,i.hZ)(a.oG.get(),p[0]-d[0]<f?o/2:0,p[1]-d[1]<f?o/2:0);(0,i.Re)(d,d,y),(0,i.WQ)(p,p,y);const m=l?u.reduce(((e,t)=>e+(t.pos[2]??0)),0)/u.length:0;return(0,i.hs)(r.basis1,e,(p[0]-d[0])/2),(0,i.hs)(r.basis2,c,(p[1]-d[1])/2),(0,n.i)(r.origin,d[0]*e[0]+d[1]*c[0],d[0]*e[1]+d[1]*c[1],m),(0,n.g)(r.origin,r.origin,r.basis1),(0,n.g)(r.origin,r.origin,r.basis2),(0,s.u)(r),r}},44684:(e,t,o)=>{o.d(t,{N:()=>ve,l:()=>_e});var i,n,r=o(93800),s=o(79625),a=o(6946),l=o(89129),c=o(79953),d=o(48602),p=(o(21265),o(50925),o(14746),o(75269)),h=o(15492);!function(e){e[e.NeverApplied=0]="NeverApplied",e[e.Applied=1]="Applied",e[e.Undone=2]="Undone"}(i||(i={})),function(e){e.UndoRedoUpdating="UndoRedoUpdating",e.UndoInvalidError="UndoInvalidError",e.RedoInvalidError="RedoInvalidError",e.ApplyInvalidError="ApplyInvalidError"}(n||(n={}));const u={[n.UndoRedoUpdating]:"Cannot perform operation whilst undo redo is updating",[n.UndoInvalidError]:"There are no items to Undo",[n.RedoInvalidError]:"There are no items to Redo",[n.ApplyInvalidError]:"Cannot apply an item that is already applied"};class f extends Error{constructor(){super(u[n.UndoRedoUpdating]),this.type="undo-redo-updating-error"}}class y extends Error{constructor(){super(u[n.UndoInvalidError]),this.type="undo-redo-undo-error"}}class m extends Error{constructor(){super(u[n.RedoInvalidError]),this.type="undo-redo-redo-error"}}class g extends Error{constructor(){super(u[n.ApplyInvalidError]),this.type="undo-redo-apply-error"}}var v,M;(M=v||(v={}))[M.Apply=0]="Apply",M[M.Undo=1]="Undo",M[M.Redo=2]="Redo";let w=class extends a.default{constructor(){super(...arguments),this.name="",this.tag=Symbol(),this.status=i.NeverApplied}get canUndo(){return this.status===i.Applied}get canRedo(){return this.status===i.Undone}async executeUndoRedoOperation(e){switch(e){case v.Apply:if(this.status!==i.NeverApplied)throw new g;return await this.apply(),void(this.status=i.Applied);case v.Undo:if(this.status!==i.Applied)throw new y;return await this.undo(),void(this.status=i.Undone);case v.Redo:if(this.status!==i.Undone)throw new y;return await this.redo(),void(this.status=i.Applied)}}};(0,r._)([(0,d.MZ)()],w.prototype,"name",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"tag",void 0),w=(0,r._)([(0,p.$)("esri.undoredo.UndoableOperation")],w);let _=class extends a.default{constructor(){super(...arguments),this._stack=new l.default,this._stackPosition=-1,this._updatingHandles=new h.U}get updating(){return this._updatingHandles.updating}get canUndo(){return this.hasUndo&&!this.updating}get hasUndo(){return this._stackPosition>=0}get canRedo(){return this.hasRedo&&!this.updating}get hasRedo(){return this._stackPosition<this._stack.length-1}_truncateForwardStack(){this._stack.splice(this._stackPosition+1,this._stack.length-this._stackPosition).forEach((e=>e.destroy()))}_drainStack(){this._stack.drain((e=>e.destroy())),this._stackPosition=-1}async undo(){if(!this.hasUndo)throw new y;if(this.updating)throw new f;const e=this._stack.getItemAt(this._stackPosition);e&&await this._updatingHandles.addPromise((async()=>{await e.executeUndoRedoOperation(v.Undo),--this._stackPosition,e.canRedo||this._truncateForwardStack()})())}async redo(){if(!this.hasRedo)throw new m;if(this.updating)throw new f;const e=this._stack.getItemAt(this._stackPosition+1);if(!e)throw new m;await this._updatingHandles.addPromise((async()=>{await e.executeUndoRedoOperation(v.Redo),++this._stackPosition})())}peekUndo(){if(this.canUndo)return this._stack.getItemAt(this._stackPosition)}peekRedo(){if(this.canRedo)return this._stack.getItemAt(this._stackPosition+1)}async inject(e){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{e.status===i.NeverApplied&&await e.executeUndoRedoOperation(v.Apply),e.canUndo?(this._stack.splice(this._stackPosition+1,0,e),this._stackPosition++):this._stackPosition>-1&&(this._stack.splice(0,this._stackPosition+1).forEach((e=>e.destroy())),this._stackPosition=-1)})())}async add(e){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{e.status===i.NeverApplied&&await e.executeUndoRedoOperation(v.Apply),this._stackPosition>=-1&&this._truncateForwardStack(),e.canUndo?(this._stack.push(e),this._stackPosition=this._stack.length-1):this._drainStack()})())}async removeTagged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.updating&&!t)return;await(0,c.whenOnce)((()=>!this.updating));const o=new l.default;for(let i=0;i<this._stack.length;i++){const t=this._stack.getItemAt(i);t&&(t.tag===e?(t.destroy(),i===this._stackPosition&&(this._stackPosition=o.length-1)):o.push(t))}this._stack=o,this._stackPosition>o.length-1&&(this._stackPosition=o.length-1)}async clear(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.updating&&!e)throw new f;await(0,c.whenOnce)((()=>!this.updating)),this._drainStack()}};(0,r._)([(0,d.MZ)()],_.prototype,"_stack",void 0),(0,r._)([(0,d.MZ)()],_.prototype,"_stackPosition",void 0),(0,r._)([(0,d.MZ)()],_.prototype,"updating",null),(0,r._)([(0,d.MZ)({readOnly:!0})],_.prototype,"canUndo",null),(0,r._)([(0,d.MZ)({readOnly:!0})],_.prototype,"hasUndo",null),(0,r._)([(0,d.MZ)({readOnly:!0})],_.prototype,"canRedo",null),(0,r._)([(0,d.MZ)({readOnly:!0})],_.prototype,"hasRedo",null),_=(0,r._)([(0,p.$)("esri.UndoRedo")],_);var b=o(58828),k=o(58448),x=o(42198),C=o(17741),I=o(52566),O=o(70674),S=o(10993);class T{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}var P=o(74398),R=o(83210),Z=o(92143),E=o(84190),G=o(41317),A=o(58648),U=o(73867),z=o(57908),V=o(38412),F=o(28454);let L=class extends F.w{constructor(e){super(e),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=Z.iT}get allFields(){return[]}};(0,r._)([(0,d.MZ)()],L.prototype,"type",void 0),(0,r._)([(0,d.MZ)()],L.prototype,"radius",void 0),(0,r._)([(0,d.MZ)()],L.prototype,"xSize",void 0),(0,r._)([(0,d.MZ)()],L.prototype,"ySize",void 0),(0,r._)([(0,d.MZ)()],L.prototype,"area",void 0),(0,r._)([(0,d.MZ)()],L.prototype,"helpMessage",void 0),(0,r._)([(0,d.MZ)()],L.prototype,"allFields",null),L=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawCircleTooltipInfo")],L);var H=o(96076),W=o(58771);let N=class extends((0,W.B)(F.w)){constructor(e){super(e),this.type="draw-mesh",this.orientation=(0,H.LJ)({lockable:!1}),this.scale=(0,H.dy)({lockable:!1})}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,r._)([(0,d.MZ)()],N.prototype,"helpMessage",void 0),(0,r._)([(0,d.MZ)()],N.prototype,"allFields",null),N=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawMeshTooltipInfo")],N);let Y=class extends((0,W.B)(F.w)){constructor(e){super(e),this.type="draw-multipoint"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,r._)([(0,d.MZ)()],Y.prototype,"helpMessage",void 0),(0,r._)([(0,d.MZ)()],Y.prototype,"allFields",null),Y=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawMultipointTooltipInfo")],Y);let D=class extends((0,W.B)(F.w)){constructor(e){super(e),this.type="draw-point"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,r._)([(0,d.MZ)()],D.prototype,"helpMessage",void 0),(0,r._)([(0,d.MZ)()],D.prototype,"allFields",null),D=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPointTooltipInfo")],D);let $=class extends((0,W.B)(F.w)){constructor(e){super(e),this.type="draw-polygon",this.direction=(0,H.Gk)(),this.distance=(0,H.Ku)(),this.area=(0,H.Am)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.area]}};(0,r._)([(0,d.MZ)()],$.prototype,"xyMode",void 0),(0,r._)([(0,d.MZ)()],$.prototype,"helpMessage",void 0),(0,r._)([(0,d.MZ)()],$.prototype,"allFields",null),$=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPolygonTooltipInfo")],$);let X=class extends((0,W.B)(F.w)){constructor(e){super(e),this.type="draw-polyline",this.direction=(0,H.Gk)(),this.distance=(0,H.Ku)(),this.totalLength=(0,H.fr)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.totalLength]}};(0,r._)([(0,d.MZ)()],X.prototype,"helpMessage",void 0),(0,r._)([(0,d.MZ)()],X.prototype,"xyMode",void 0),(0,r._)([(0,d.MZ)()],X.prototype,"allFields",null),X=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPolylineTooltipInfo")],X);let j=class extends F.w{constructor(e){super(e),this.type="draw-rectangle",this.xSize=Z.r7,this.ySize=Z.r7,this.area=Z.iT}get allFields(){return[]}};(0,r._)([(0,d.MZ)()],j.prototype,"type",void 0),(0,r._)([(0,d.MZ)()],j.prototype,"xSize",void 0),(0,r._)([(0,d.MZ)()],j.prototype,"ySize",void 0),(0,r._)([(0,d.MZ)()],j.prototype,"area",void 0),(0,r._)([(0,d.MZ)()],j.prototype,"helpMessage",void 0),(0,r._)([(0,d.MZ)()],j.prototype,"allFields",null),j=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawRectangleTooltipInfo")],j);var B=o(95095),K=o(6435),q=o(42050),J=o(36089);function Q(e){const{directionOptions:t,geometryType:o,sketchOptions:i,tooltipInfos:n}=e,r=t=>{const o=pe(e).mode,i=n[t].elevation;"relative-to-ground"===o||"relative-to-scene"===o||"on-the-ground"===o?i.lock(ue(e)):i.unlock()};switch(o){case"polygon":case"polyline":r(o),(e=>{if(t){const o=n[e].direction;o.committed=t.angle,o.unlockOnVertexPlacement=!1,i.values.directionMode=t.mode}})(o);break;case"point":case"mesh":r(o)}}function ee(e,t){const{drawOperation:o,view:i}=t,n=oe(t),r=pe(t);if("2d"===i.type||!e||"absolute-height"!==r.mode||1!==o?.numCommittedVertices||!n||"draw-polyline"!==n.type&&"draw-polygon"!==n.type||n.elevation.locked)return;const[s,a,l]=e,c=function(e,t,o,i,n){const{view:r,drawOperation:s}=n;if("3d"!==r.type||!s)return;o??=0;const a=he(n),l=pe(n),c=(0,G.Fo)(r,e,t,o,a,l,i);return(0,J.Qc)(c,a)??ue(n)}(s,a,l,r,t);null!=c&&n.elevation.lock(c)}function te(e){oe(e)?.allFields.forEach((e=>{e.unlockOnVertexPlacement&&e.unlock()}))}function oe(e){let{geometryType:t,graphic:o,tooltipInfos:i}=e;return o?.geometry?.type!==ie[t]?"circle"===t||"rectangle"===t?i[t]:null:i[t]}const ie={point:"point",multipoint:"multipoint",mesh:"mesh",polyline:"polyline",polygon:"polygon",circle:"polygon",rectangle:"polygon",freehandPolygon:"polygon",freehandPolyline:"polyline"};function ne(e,t){switch(e?.type){case"draw-point":!function(e,t){const o=t.graphic?.geometry;"point"===o?.type&&(re(e,o,t),e.helpMessage=(0,A.$)("point",o,t.drawOperation.drawingMode))}(e,t);break;case"draw-multipoint":!function(e,t){const o=t.graphic?.geometry;"multipoint"===o?.type&&(re(e,o,t),e.helpMessage=(0,A.$)("multipoint",o,t.drawOperation.drawingMode))}(e,t);break;case"draw-polyline":!function(e,t){const{createOperationGeometry:o,drawOperation:i}=t,n=null!=o?o.full:null;n&&"polyline"!==n.type||(se(e,t),e.totalLength.actual=i.lastVertex?(n?(0,q.ob)(n):null)??Z.r7:null,e.helpMessage=(0,A.$)("polyline",n,t.drawOperation.drawingMode))}(e,t);break;case"draw-polygon":!function(e,t){const{createOperationGeometry:o,drawOperation:i}=t,n=null!=o?o.full:null;n&&"polygon"!==n.type||(se(e,t),e.area.actual=i.lastVertex?(n?(0,K.n)(n):null)??Z.iT:null,e.helpMessage=(0,A.$)("polygon",n,t.drawOperation.drawingMode))}(e,t);break;case"draw-rectangle":!function(e,t){e.sketchOptions=t.sketchOptions,e.xSize=ce(t),e.ySize=de(t),e.area=le(t),e.helpMessage=(0,A.$)("rectangle",t.graphic?.geometry,t.drawOperation.drawingMode)}(e,t);break;case"draw-circle":!function(e,t){const{forceUniformSize:o,sketchOptions:i}=t;e.sketchOptions=i,e.radius=o?function(e){let{createOperationGeometry:t}=e;return(null!=t?.circle?.center&&null!=t.circle.edge?(0,q.Kt)(t.circle.center,t.circle.edge):null)??Z.r7}(t):null,e.xSize=o?null:ce(t),e.ySize=o?null:de(t),e.area=le(t),e.helpMessage=(0,A.$)("circle",t.graphic?.geometry,t.drawOperation.drawingMode)}(e,t);break;case"draw-mesh":!function(e,t){const{graphic:o,view:i}=t,n=o?.geometry;"3d"!==i.type||n&&"mesh"!==n.type||(re(e,n?.origin,t),n&&(0,V.Ue)(e,n),e.helpMessage=(0,U.getDrawMeshHelpMessage)(o,i))}(e,t)}}function re(e,t,o){const{drawOperation:i,view:n,sketchOptions:r}=o,{cursorVertex:s}=i;e.sketchOptions=r,e.viewType=n.type;const a="multipoint"===t?.type?t.getPoint(t.points.length-1):t;if(e.setLocationFromPoint(a,he(o)),ae(e.elevation,o),!s)return void(i.constraints=void 0);const l=s;i.constraints={context:fe(l,o),x:e.x.committed,y:e.y.committed,longitude:e.longitude.committed,latitude:e.latitude.committed,elevation:e.elevation.committed,distance:null,direction:null}}function se(e,t){const{drawOperation:o,sketchOptions:i,view:n}=t,{cursorVertex:r,lastVertex:s,secondToLastVertex:a}=o,l=i.values.effectiveDirectionMode;e.sketchOptions=i,e.viewType=n.type;const c=s&&r?(0,q.Kt)(s,r)??Z.r7:null;if(e.distance.actual=c,e.distance.readOnly=null==s,e.direction.actual=null,e.direction.readOnly=!0,s&&r&&("absolute"===l||a)){const t=(0,B.uR)(a,s,r,l);e.direction.actual=t??Z.n0,e.direction.readOnly=!1}e.setLocationFromPoint(r,he(t)),ae(e.elevation,t);const d=function(e,t){let{sketchOptions:o}=t;const i=o.tooltips.xyMode;return"auto"===i?e?"direction-distance":"coordinates":i}(s,t);e.xyMode=d,e.direction.visible="direction-distance"===d,e.distance.visible="direction-distance"===d,e.effectiveX.visible="coordinates"===d,e.effectiveY.visible="coordinates"===d;const p=r??s;o.constraints=p?{context:fe(p,t),x:e.x.committed,y:e.y.committed,longitude:e.longitude.committed,latitude:e.latitude.committed,elevation:e.elevation.committed,distance:e.distance.committed,direction:e.direction.committed}:void 0}function ae(e,t){const{drawOperation:o}=t,i=o?.cursorVertex??o?.lastVertex;e.actual=(0,J.Of)(i)??ue(t),e.visible=o.hasZ,e.readOnly=!1,e.showAsZ=!0}function le(e){const t=e.createOperationGeometry?.full;return"polygon"!==t?.type?Z.iT:(0,K.n)(t)??Z.iT}function ce(e){const t=e.createOperationGeometry?.rectangle?.midpoints;return(null!=t?(0,q.Kt)(t.left,t.right):null)??Z.r7}function de(e){const t=e.createOperationGeometry?.rectangle?.midpoints;return(null!=t?(0,q.Kt)(t.top,t.bottom):null)??Z.r7}function pe(e){return e.drawOperation.elevationInfo??G.qt}function he(e){return e.drawOperation.coordinateHelper.spatialReference}function ue(e){const t=(0,E.G9)(he(e));return(0,Z.d_)(e.defaultZ*t,"meters")}function fe(e,t){return(0,z.hj)(e,t.view,he(t),pe(t),t.drawOperation.coordinateHelper.hasZ(),t.sketchOptions.values.effectiveDirectionMode)}var ye=o(88204),me=o(91690),ge=o(13162);let ve=class extends(k.A.EventedMixin(ye.g)){constructor(e){super(e),this._graphic=null,this._coordinateFormatterLoadTask=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.elevationLockOnVertexAddDisabled=!1,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new me.A}initialize(){const{view:e}=this;this.internalGraphicsLayer=new O.default({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const t=this.drawOperation=this.makeDrawOperation();this.tooltipInfos=function(e,t){return{point:new D({sketchOptions:t,viewType:e}),multipoint:new Y({sketchOptions:t,viewType:e}),polyline:new X({sketchOptions:t,viewType:e}),polygon:new $({sketchOptions:t,viewType:e}),mesh:new N({sketchOptions:t,viewType:e}),rectangle:new j({sketchOptions:t}),circle:new L({sketchOptions:t})}}(e.type,this.sketchOptions);const o=(0,V.A)((()=>({view:e,options:this.sketchOptions.tooltips})));this.tooltip=o,Q(this._tooltipsContext),this._coordinateFormatterLoadTask=(0,b.UT)((()=>(0,I.load)())),this.addHandles([t.on("vertex-add",(e=>this.onVertexAdd(e))),t.on("vertex-remove",(e=>this.onVertexRemove(e))),t.on("vertex-update",(e=>this.onVertexUpdate(e))),t.on("cursor-update",(e=>this.onCursorUpdate(e))),t.on("cursor-remove",(()=>this._updateGraphic())),t.on("complete",(e=>this.onComplete(e))),this._coordinateFormatterLoadTask,o.on("paste",(e=>(0,V.HA)(e,this.activeTooltipInfo))),(0,c.watch)((()=>this.cursor),(e=>{t.cursor=e}),c.syncAndInitial),(0,ge.fm)((()=>{const{activeTooltipInfo:e,sketchOptions:t}=this;ne(e,this._tooltipsContext),o.info=t.tooltips.effectiveEnabled?e:null})),(0,ge.fm)((()=>{t.constraintZ=function(e){const{geometryType:t,tooltipInfos:o}=e;switch(t){case"point":case"multipoint":case"mesh":case"polyline":case"polygon":{const i=o[t].elevation.committed;if(!i)return;return(0,Z.l3)(i,"meters")/(0,E.G9)(he(e))}default:return}}(this._tooltipsContext)}),c.sync)]),this.finishToolCreation()}destroy(){this.drawOperation=(0,C.pR)(this.drawOperation),this.tooltip=(0,C.pR)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,C.pR)(this.internalGraphicsLayer),this._set("view",null)}get _drawSpatialReference(){return this.drawOperation.coordinateHelper.spatialReference}get _tooltipsContext(){return{createOperationGeometry:this._createOperationGeometry,defaultZ:this.defaultZ,directionOptions:this.directionOptions,drawOperation:this.drawOperation,forceUniformSize:this.forceUniformSize,geometryType:this.geometryType,graphic:this.graphic,sketchOptions:this.sketchOptions,tooltipInfos:this.tooltipInfos,view:this.view}}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(e){this._set("cursor",e)}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),null!=this._graphic&&(this._graphic.symbol=e)}set mode(e){const t=this.drawOperation;t&&(t.drawingMode=e),this._set("mode",e)}get updating(){return this.drawOperation?.updating??!1}get undoRedo(){const{view:{type:e,map:t}}=this;return"2d"===e&&t&&"undoRedo"in t&&t.undoRedo instanceof _?t.undoRedo:null}set undoRedo(e){this._override("undoRedo",e)}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||(0,V.wG)(e,this.tooltip)||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&Q(this._tooltipsContext)}_destroyAllVisualizations(){this.removeHandles(we.outline),this.removeHandles(we.regularVertices),this.removeHandles(we.activeVertex),this.removeHandles(we.activeEdge),this.removeHandles(Me)}_createOrUpdateGraphic(e){if(null!=this._graphic)return this.updateGraphicGeometry(e),this._graphic;const t=new s.default({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=t,this.updateGraphicGeometry(e),this.internalGraphicsLayer.add(t),this.addHandles(this.initializeGraphic(t)),this.notifyChange("graphic"),this.addHandles((0,x.hA)((()=>{this.internalGraphicsLayer.remove(t),this._graphic===t&&(this._graphic=null)})),Me),t}updateGraphicGeometry(e){this._graphic.geometry=e}_getCreateOperationGeometry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{operationComplete:!1};if(null==this.drawOperation)return;const{coordinateHelper:t,view:o,visualizationCursorVertex:i,lastVertex:n,committedVertices:r,geometryIncludingUncommittedVertices:s,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=i))return;const l=e.operationComplete?r:s,c=l.length,d=null!=i?t.pointToArray(i):null,p=this._drawSpatialReference,h="3d"===o.type&&"global"===o.viewingMode,u=new T;u.committedVertices=r,u.cursorVertex=d;const{geometryType:f}=this;switch(f){case"point":case"mesh":u.full=t.arrayToPoint(l[0]);break;case"multipoint":u.full=c>0?(0,P.eq)(l,p):null;break;case"polyline":case"polygon":c>0&&(u.full="polygon"===f?(0,P.N6)([l],p,h,!0):(0,P.LZ)([l],p,h),u.cursorEdge=null!=d&&n&&!(0,S.CI)(i,n)?(0,P.LZ)([[d,t.pointToArray(n)]],p,h):null,u.outline=c>1?u.full:null);break;case"circle":case"rectangle":{if(u.committedVertices=u.cursorVertex=null,!c)break;const t=(0,R.ZP)(o,l[0]),i=l[0],n=t.makeMapPoint(i[0]+be*o.resolution,i[1]);"circle"===f?1===c&&e.operationComplete?u.circle=(0,P.zV)([i,n],t,!0):2===c&&(this.forceUniformSize?u.circle=(0,P.zV)(l,t,this.centered):u.rectangle=(0,P.zd)(l,t,this.centered)):1===c&&e.operationComplete?u.rectangle=(0,P.GF)([i,n],t,!0):2===c&&(u.rectangle=this.forceUniformSize?(0,P.GF)(l,t,this.centered):(0,P._T)(l,t,this.centered)),u.full=null!=u.circle?u.circle.geometry:u.rectangle?.geometry,u.outline="polygon"===u.full?.type?u.full:null;break}default:return null}return u}initializeGraphic(e){return(0,x.hA)()}onComplete(e){if(!this.drawOperation)return;this._updateGraphic();let t=null;if(this.drawOperation.isCompleted){const e=this._getCreateOperationGeometry({operationComplete:!0});null!=e&&(t=this._createOrUpdateGraphic(e.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:t,...e})}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e)}onDeactivate(){const{drawOperation:e}=this;e&&(e.isCompleted||e.cancel())}onOutlineChanged(e){return(0,x.hA)()}onCursorEdgeChanged(e){return(0,x.hA)()}onVertexAdd(e){te(this._tooltipsContext),this._updateGraphic(),this.elevationLockOnVertexAddDisabled||ee(e.vertices.at(0)?.coordinates,this._tooltipsContext),this.emit("vertex-add",e)}onVertexRemove(e){te(this._tooltipsContext),this._updateGraphic(),this.emit("vertex-remove",e)}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e)}_updateGraphic(){const e=this._getCreateOperationGeometry();this._createOperationGeometry=e,null!=e?(null!=e.cursorEdge?this.addHandles(this.onCursorEdgeChanged(e.cursorEdge),we.activeEdge):this.removeHandles(we.activeEdge),null!=e.outline?this.addHandles(this.onOutlineChanged(e.outline),we.outline):this.removeHandles(we.outline),null!=e.committedVertices?this.addHandles(this.onRegularVerticesChanged(e.committedVertices),we.regularVertices):this.removeHandles(we.regularVertices),null!=e.cursorVertex?this.addHandles(this.onActiveVertexChanged(e.cursorVertex),we.activeVertex):this.removeHandles(we.activeVertex),null!=e.full?this._createOrUpdateGraphic(e.full):this.removeHandles(Me)):this._destroyAllVisualizations()}get activeTooltipInfo(){return this._coordinateFormatterLoadTask?.finished?oe(this._tooltipsContext):null}};(0,r._)([(0,d.MZ)()],ve.prototype,"_coordinateFormatterLoadTask",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"_createOperationGeometry",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"_tooltipsContext",null),(0,r._)([(0,d.MZ)({value:!0})],ve.prototype,"centered",null),(0,r._)([(0,d.MZ)()],ve.prototype,"cursor",null),(0,r._)([(0,d.MZ)({nonNullable:!0})],ve.prototype,"defaultZ",void 0),(0,r._)([(0,d.MZ)({constructOnly:!0})],ve.prototype,"directionOptions",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"drawOperation",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"elevationLockOnVertexAddDisabled",void 0),(0,r._)([(0,d.MZ)({value:!0})],ve.prototype,"enabled",null),(0,r._)([(0,d.MZ)({value:!0})],ve.prototype,"forceUniformSize",null),(0,r._)([(0,d.MZ)({constructOnly:!0})],ve.prototype,"geometryType",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"graphic",null),(0,r._)([(0,d.MZ)({constructOnly:!0})],ve.prototype,"graphicProperties",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"graphicSymbol",null),(0,r._)([(0,d.MZ)({constructOnly:!0})],ve.prototype,"hasZ",void 0),(0,r._)([(0,d.MZ)({constructOnly:!0})],ve.prototype,"geometryToPlace",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"mode",null),(0,r._)([(0,d.MZ)()],ve.prototype,"snappingManager",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"snapToScene",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"tooltip",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"tooltipInfos",void 0),(0,r._)([(0,d.MZ)({constructOnly:!0,type:me.A})],ve.prototype,"sketchOptions",void 0),(0,r._)([(0,d.MZ)()],ve.prototype,"updating",null),(0,r._)([(0,d.MZ)({constructOnly:!0,nonNullable:!0})],ve.prototype,"view",void 0),(0,r._)([(0,d.MZ)({constructOnly:!0})],ve.prototype,"undoRedo",null),(0,r._)([(0,d.MZ)()],ve.prototype,"activeTooltipInfo",null),ve=(0,r._)([(0,p.$)("esri.views.draw.DrawGraphicTool")],ve);const Me=Symbol("create-operation-graphic"),we={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function _e(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const be=48},44827:(e,t,o)=>{o.r(t),o.d(t,{applyCIMSymbolColor:()=>u,applyCIMSymbolRotation:()=>m,getCIMSymbolColor:()=>d,getCIMSymbolRotation:()=>y,getCIMSymbolSize:()=>r,getCIMSymbolType:()=>g,scaleCIMMarker:()=>l,scaleCIMSymbol:()=>a,scaleCIMSymbolTo:()=>s});var i=o(88102),n=o(61154);function r(e){const t=(0,n.lW)(e);if("CIMTextSymbol"===t?.type)return t.height??0;let o=0;if(t?.symbolLayers)for(const i of t.symbolLayers)(0,n.MM)(i)&&null!=i.size&&i.size>o?o=i.size:(0,n.mA)(i)&&null!=i.width&&i.width>o?o=i.width:(0,n.jn)(i);return o}function s(e,t,o){if(!e)return;const i=(0,n.lW)(e),s=r(e);0!==s?a(i,t/s,!1,o):function(e,t){if(e)if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":o.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":o.width=t}}else e.height=t}(i,t)}function a(e,t,o,i){if(e)if("CIMTextSymbol"!==e.type){if(o&&e.effects)for(const o of e.effects)c(o,t);if(e.symbolLayers)for(const o of e.symbolLayers){switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":l(o,t,i);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!i?.preserveOutlineWidth&&o.width&&(o.width*=t);break;case"CIMPictureFill":o.height&&(o.height*=t),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t);break;case"CIMHatchFill":a(o.lineSymbol,t,!0,{...i,preserveOutlineWidth:!1}),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t),o.separation&&(o.separation*=t)}if(o.effects)for(const e of o.effects)c(e,t)}}else null!=e.height&&(e.height*=t)}function l(e,t,o){if(e&&(e.markerPlacement&&function(e,t){switch((0,n.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const i of e.markerGraphics)e.scaleSymbolsProportionally||a(i.symbol,t,!0,o)}function c(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map((e=>e*t));e.dashTemplate=o}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function d(e){const t=[];return p((0,n.lW)(e),t),t.length?new i.default((0,n.e6)(t[0])):null}function p(e,t){if(!e)return;let o;o="CIMTextSymbol"===e.type?e.symbol:e;const i="CIMPolygonSymbol"===e.type;if(o?.symbolLayers)for(const r of o.symbolLayers)if(!(r.colorLocked||i&&((0,n.mA)(r)||(0,n.MM)(r)&&r.markerPlacement&&(0,n.zr)(r.markerPlacement))))switch(r.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":r.tintColor&&h(t,r.tintColor);break;case"CIMVectorMarker":r.markerGraphics?.forEach((e=>{p(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":h(t,r.color);break;case"CIMHatchFill":p(r.lineSymbol,t)}}function h(e,t){for(const o of e)if(o.join(".")===t.join("."))return;e.push(t)}function u(e,t,o){t instanceof i.default||(t=new i.default(t));const r=(0,n.lW)(e);r&&f(r,t,o)}function f(e,t,o){if(!e)return;let i;i="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===i?.type;if(i?.symbolLayers)for(const s of i.symbolLayers){if(s.colorLocked)continue;if(r)if(o){const{layersToColor:e}=o;if(((0,n.mA)(s)||(0,n.MM)(s)&&s.markerPlacement&&(0,n.zr)(s.markerPlacement))&&"fill"===e||(0,n.jn)(s)&&"outline"===e)continue}else if((0,n.mA)(s)||(0,n.MM)(s)&&s.markerPlacement&&(0,n.zr)(s.markerPlacement))continue;const e=t.toArray();switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor=e;break;case"CIMVectorMarker":s.markerGraphics?.forEach((e=>{f(e.symbol,t,o)}));break;case"CIMSolidStroke":case"CIMSolidFill":s.color=e;break;case"CIMHatchFill":f(s.lineSymbol,t,o)}}}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=(0,n.lW)(e);if("CIMTextSymbol"===o?.type||"CIMPointSymbol"===o?.type){const e=o.angle;return null!=e&&t?360-e:e??0}return 0}function m(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=(0,n.lW)(e);if(o&&(t=360-t),"CIMTextSymbol"!==i?.type){if("CIMPointSymbol"===i?.type&&i.symbolLayers){const e=t-(i.angle||0);for(const t of i.symbolLayers)if((0,n.MM)(t)){let o=t.rotation||0;t.rotateClockwise?o-=e:o+=e,t.rotation=o}i.angle=t}}else i.angle=t}function g(e){const t=(0,n.lW)(e);if(!t)return null;switch(t.type){case"CIMPointSymbol":return"CIMPointSymbol";case"CIMLineSymbol":return"CIMLineSymbol";case"CIMPolygonSymbol":return"CIMPolygonSymbol";case"CIMTextSymbol":return"CIMTextSymbol";case"CIMMeshSymbol":return"CIMMeshSymbol";default:return null}}},49282:(e,t,o)=>{o.d(t,{t:()=>n,x:()=>i});const i=["freehand","hybrid","click"],n="click"},58648:(e,t,o)=>{function i(e,t,o){if(null==e)return"noTool";switch(e){case"point":return"point";case"multipoint":return"multipoint";case"polyline":return function(e,t){const o=null!=e&&"polyline"===e.type&&e.paths.length?e.paths[0].length:0;return"freehand"===t?o<2?"freehandStart":"freehandEnd":o<2?"polylineZeroVertices":"polylineOneVertex"}(t,o);case"polygon":return function(e,t){const o=null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0;if(o<3)switch(t){case"freehand":return"freehandStart";case"hybrid":return"polygonZeroVerticesHybrid";default:return"polygonZeroVertices"}else if(o<4)return"freehand"===t?"freehandEnd":"polygonOneVertex";return"polygonTwoVertices"}(t,o);case"rectangle":case"circle":return function(e,t){if((null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0)<3)switch(t){case"freehand":return"freehandStart";case"click":return"shapeStartClick";default:return"shapeStartHybrid"}switch(t){case"freehand":return"freehandEnd";case"click":return"shapeEndClick";default:return"shapeEndHybrid"}}(t,o);default:return}}o.d(t,{$:()=>i})},62776:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var i,n=o(93800),r=o(84190),s=o(48602),a=(o(21265),o(50925),o(14746),o(75269)),l=o(30142),c=o(75400),d=o(65920),p=o(93321),h=o(26266),u=o(5616),f=o(12921);let y=i=class extends d.default{constructor(e){super(e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e?.hasZ??!1,0!==this.rings.length||!e)return;const o=(0,r.oU)(this.radius,this.radiusUnit,"meters"),i=e.spatialReference;let n,s="geographic";if(i.isWebMercator?s="webMercator":(null!=(i.wkid&&f.A[i.wkid])||(i.wkt2||i.wkt)&&(0,r.x1)(i.wkt2||i.wkt))&&(s="projected"),this.geodesic){let i;switch(s){case"webMercator":i=(0,u.webMercatorToGeographic)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":i=e}n=this._createGeodesicCircle(i,o,t),"webMercator"===s&&(n=(0,u.geographicToWebMercator)(n))}else{let i;"webMercator"===s||"projected"===s?i=o/(0,r.Ao)(e.spatialReference):"geographic"===s&&(i=(0,r.vl)(o,"meters",(0,l.tO)(e.spatialReference).radius)),n=this._createPlanarCircle(e,i,t)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:o,radiusUnit:n,geodesic:r}=this;return new i({center:e?.clone(),numberOfPoints:t,radius:o,radiusUnit:n,geodesic:r})}_createGeodesicCircle(e,t,o){const i=[],n=[e.x,e.y];for(let r=0;r<360;r+=360/o){const o=this.hasZ?[0,0,e.z??0]:[0,0];(0,h.directGeodeticSolver)(o,n,r,t,p.default.WGS84),i.push(o)}return i.push(i[0]),new d.default({rings:[i]})}_createPlanarCircle(e,t,o){const i=[],n=2*Math.PI/o;for(let r=0;r<o;++r){const o=n*r,s=[e.x+Math.cos(-o)*t,e.y+Math.sin(-o)*t];this.hasZ&&s.push(e.z??0),i.push(s)}return i.push(i[0]),new d.default({spatialReference:e.spatialReference,rings:[i]})}};(0,n._)([(0,s.MZ)({type:c.default})],y.prototype,"center",void 0),(0,n._)([(0,s.MZ)()],y.prototype,"geodesic",void 0),(0,n._)([(0,s.MZ)()],y.prototype,"numberOfPoints",void 0),(0,n._)([(0,s.MZ)()],y.prototype,"radius",void 0),(0,n._)([(0,s.MZ)()],y.prototype,"radiusUnit",void 0),y=i=(0,n._)([(0,a.$)("esri.geometry.Circle")],y);const m=y},73867:(e,t,o)=>{o.r(t),o.d(t,{getDrawMeshHelpMessage:()=>a});var i=o(84190),n=o(89227),r=o(28473),s=o(41317);function a(e,t){const o=e?.geometry;if(!e||"mesh"!==o?.type||!t)return;const{renderCoordsHelper:r,elevationProvider:a}=t,{camera:h}=t.state,{extent:u}=o,{center:f,spatialReference:y}=u,m=(0,i.GA)(y),g=(0,i.G9)(y),v=(0,i.GA)(r.spatialReference),M=u.width*m,w=u.height*g,_=(u.zmax??0)*g,b=_-(u.zmin??0)*g,k=Math.max(M,w,b)/v,{x:x,y:C}=f,I=f.z??0;(0,n.i)(p,x,C,I),r.toRenderCoords(p,y,p);const O=k/h.computeScreenPixelSizeAt(p);if(O>h.width*c)return"meshTooClose";if(O<l)return"meshTooFar";const S=(0,s.bh)(e),{absoluteZ:T}=(0,s.Q5)(x,C,_,y,t,S);return T<(a.getElevation(x,C,I,y,"ground")??0)*g+b*d?"meshUnderground":"mesh"}const l=20,c=1,d=.1,p=(0,r.vt)()},74398:(e,t,o)=>{o.d(t,{GF:()=>_,LZ:()=>M,N6:()=>w,_T:()=>b,eq:()=>v,zV:()=>S,zd:()=>T});var i=o(62631),n=o(82301),r=o(84190),s=o(89227),a=o(28473),l=o(62776),c=o(60822),d=o(76493),p=o(75400),h=o(65920),u=o(54824),f=o(53053),y=o(70576),m=o(83210);function g(e,t){const o=new p.default({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(o.z=e[2]),o}function v(e,t){return new d.default({points:e,spatialReference:t})}function M(e,t,o){const i=new u.default({paths:e,spatialReference:t});return o&&(0,f._7)(i),i}function w(e,t,o){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=(0,n.clone)(e);s.forEach((e=>{const t=e[0],o=e[e.length-1];(0,i.aI)(t,o)&&1!==e.length||e.push(e[0])}));let a=new h.default({rings:s,spatialReference:t});return a.rings.forEach((e=>{(0,f.$3)(e)||e.reverse()})),o&&(0,f._7)(a),r&&a.isSelfIntersecting&&(0,y.fn)(t)&&(a=(0,c.simplify)(a)),a}function _(e,t,o){const n=t.mapToLocalMultiple(e),r=[],s={x:n[0].x,y:n[0].y},a=n[1].x,l=n[1].y,c=Math.round(a-s.x),d=Math.round(l-s.y),p=Math.max(Math.abs(c),Math.abs(d));if(o){const e={x:s.x+p,y:s.y+p},t={x:s.x-p,y:s.y-p};r.push((0,m.E5)(e.x,t.y),(0,m.E5)(t.x,t.y),(0,m.E5)(t.x,e.y),(0,m.E5)(e.x,e.y))}else{const e={x:c>0?s.x+p:s.x-p,y:d>0?s.y+p:s.y-p};r.push((0,m.E5)(s.x,s.y),(0,m.E5)(e.x,s.y),(0,m.E5)(e.x,e.y),(0,m.E5)(s.x,e.y))}return k(w([r.map((e=>t.localToMap(e))).filter(i.Ru)],t.spatialReference,t.doUnnormalization,!0),r,t)}function b(e,t,o){let n=t.mapToLocalMultiple(e);if(1===n.length){const e=48,t=n[0];n=[(0,m.E5)(t.x-e,t.y+e),(0,m.E5)(t.x+e,t.y-e),(0,m.E5)(t.x+e,t.y-e),(0,m.E5)(t.x-e,t.y+e)]}const r=[],s={x:n[0].x,y:n[0].y},a={x:n[1].x,y:n[1].y};if(o){const e=Math.round(a.x-s.x),t=Math.round(a.y-s.y);r.push((0,m.E5)(s.x-e,s.y-t),(0,m.E5)(a.x,s.y-t),(0,m.E5)(a.x,a.y),(0,m.E5)(s.x-e,a.y))}else r.push((0,m.E5)(s.x,s.y),(0,m.E5)(a.x,s.y),(0,m.E5)(a.x,a.y),(0,m.E5)(s.x,a.y));return k(w([r.map((e=>t.localToMap(e))).filter(i.Ru)],t.spatialReference,t.doUnnormalization,!0),r,t)}function k(e,t,o){const i=x(t[3],t[2],o),n=x(t[1],t[2],o),r=x(t[0],t[1],o),s=x(t[0],t[3],o);return{geometry:e,midpoints:null!=i&&null!=n&&null!=r&&null!=s?{top:i,right:n,bottom:r,left:s}:null}}function x(e,t,o){I[0]=e.x,I[1]=e.y,I[2]=0,O[0]=t.x,O[1]=t.y,O[2]=0,(0,s.m)(I,I,O,.5),C.x=I[0],C.y=O[1],C.z=O[2];const i=o.localToMap(C);return null!=i?g(i,o.spatialReference):null}const C=(0,m.E5)(0,0,0),I=(0,a.vt)(),O=(0,a.vt)();function S(e,t,o,i){const n=t.mapToLocalMultiple(e);let s=null,a=null;if(o)s=n[0],a=n[1];else{const e=n[0],t=n[1],o=Math.round(t.x-e.x),i=Math.round(t.y-e.y),r=Math.max(Math.abs(o),Math.abs(i));s=(0,m.E5)(o>0?e.x+r/2:e.x-r/2,i>0?e.y+r/2:e.y-r/2),a=(0,m.E5)(Math.abs(o)>Math.abs(i)?s.x-r/2:s.x,Math.abs(o)>Math.abs(i)?s.y:s.y-r/2)}const d=t.localToMap(s),p=t.localToMap(a);if(null==d||null==p)return null;t.doUnnormalization&&(0,f.JM)([[d,p]],t.spatialReference);const h=g(d,t.spatialReference),u=g(p,t.spatialReference),v=(0,r.GA)(t.spatialReference);let M=0;if((0,y.fn)(t.spatialReference))M=v*(0,c.distance)(h,u,null);else{const e=s.x-a.x,t=s.y-a.y;M=v*Math.sqrt(e*e+t*t)*(i||1)}const _=new l.default({center:h,radius:M,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:w(_.rings,_.spatialReference,!1),center:h,edge:u}}function T(e,t,o){const n=t.mapToLocalMultiple(e),r=n[0],s=n[1],a=Math.round(s.x-r.x),l=Math.round(s.y-r.y),c=(0,m.E5)(o?r.x:r.x+a/2,o?r.y:r.y+l/2),d=o?a:a/2,p=o?l:l/2,h=[],u=2*Math.PI/60;function f(e){const t=Math.cos(e),o=Math.sin(e);return(0,m.E5)(d*t+c.x,p*o+c.y)}for(let i=0;i<60;i++)h.push(f(i*u));h.push(h[0]);const{spatialReference:y,doUnnormalization:v}=t,M=w([h.map((e=>t.localToMap(e))).filter(i.Ru)],y,v,!1),_=t.localToMap(f(Math.PI/2)),b=t.localToMap(f(0)),k=t.localToMap(f(-Math.PI/2)),x=t.localToMap(f(Math.PI));return{geometry:M,midpoints:null!=_&&null!=b&&null!=k&&null!=x?{top:g(_,y),right:g(b,y),bottom:g(k,y),left:g(x,y)}:null}}},81064:(e,t,o)=>{o.d(t,{A:()=>r});var i=o(5019),n=o(69601);class r{constructor(e){this._observable=new n.I,this._set=new Set(e)}get size(){return(0,i.gc)(this._observable),this._set.size}add(e){const t=this._set.size;return this._set.add(e),this._set.size!==t&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const t=this._set.delete(e);return t&&this._observable.notify(),t}entries(){return(0,i.gc)(this._observable),this._set.entries()}forEach(e,t){(0,i.gc)(this._observable),this._set.forEach(((o,i)=>e.call(t,o,i,this)),t)}has(e){return(0,i.gc)(this._observable),this._set.has(e)}keys(){return(0,i.gc)(this._observable),this._set.keys()}values(){return(0,i.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,i.gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},83210:(e,t,o)=>{o.d(t,{E5:()=>u,ZP:()=>g,vz:()=>y});var i=o(62631),n=o(98352),r=o(67654),s=o(21369),a=o(66509),l=o(89227),c=o(28473),d=o(75400),p=o(91345);function h(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=o?[e,t,o]:[e,t]}function u(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=o?{x:e,y:t,z:o}:{x:e,y:t}}class f{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(i.Ru)}get doUnnormalization(){return!1}}class y extends f{constructor(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(t),this._defaultZ=o,this.transform=(0,r.vt)(),this.transformInv=(0,r.vt)(),this.transform=(0,r.o8)(e),(0,n.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return h(e,t,this._defaultZ)}mapToLocal(e){return u(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return h(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class m extends f{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,c.vt)(),this.tangentFrameUpWS=(0,c.vt)(),this.tangentFrameRightWS=(0,c.vt)(),this.tangentFrameForwardWS=(0,c.vt)(),this.localFrameRightWS=(0,c.vt)(),this.localFrameUpWS=(0,c.vt)(),this.worldToLocalTransform=(0,a.vt)(),this.localToWorldTransform=(0,a.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const o=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,p._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,p._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,p._.Z,this.tangentFrameForwardWS);const i=(0,c.vt)();(0,l.h)(i,this.tangentFrameForwardWS,(0,l.f)(o,this.tangentFrameForwardWS)),(0,l.d)(this.localFrameRightWS,o,i),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.e)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,s.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,s.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return h(e,t,this.defaultZ)}mapToLocal(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.worldToLocalTransform);const o=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=o?u(o.x/this.scale,o.y/this.scale):null}localToMap(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.localToWorldTransform);const o=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=o?h(o.x,o.y,this.defaultZ):null}}function g(e,t){if("2d"===e.type)return new y(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const o=t.length>2?new d.default({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new d.default({x:t[0],y:t[1],spatialReference:e.spatialReference});return new m(e,o)}return null}}}]);