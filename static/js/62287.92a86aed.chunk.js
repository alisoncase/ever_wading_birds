"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[8501,14524,30882,47381,53263,62287,69762,70674,75644,86434,92143],{16106:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n=i(93800),r=i(88102),s=i(42198),o=i(79953),l=i(48602),a=(i(21265),i(50925),i(14746),i(75269)),u=i(87465),h=i(39273);let p=class extends u.default{constructor(e){super(e),this.type="query",this.color=new r.default("#db334a"),this.viewVisualizationEnabled=!0,this.source=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=500}get minDemResolution(){return(0,h.e)(this.source)}get available(){const e=this.source;return!!e&&(null==e.visible||e.visible)&&(null==e.layers||e.layers.some((e=>e.visible)))}queryElevation(e,t){if(!this.source)throw new Error("No source configured for the elevation profile line");return this.source.queryElevation(e,t)}attach(e){return(0,s.vE)([super.attach(e),(0,o.watch)((()=>this.source),(()=>this._onChange()),o.sync)])}};(0,n._)([(0,l.MZ)({type:r.default,nonNullable:!0})],p.prototype,"color",void 0),(0,n._)([(0,l.MZ)()],p.prototype,"viewVisualizationEnabled",void 0),(0,n._)([(0,l.MZ)()],p.prototype,"source",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],p.prototype,"minDemResolution",null),(0,n._)([(0,l.MZ)()],p.prototype,"available",null),p=(0,n._)([(0,a.$)("esri.widgets.ElevationProfile.ElevationProfileLineQuery")],p);const d=p},18477:(e,t,i)=>{i.d(t,{E:()=>n});class n{constructor(e){this._store=e}destroy(){this._store.destroy()}get(e){return this._store.get(e)}put(e,t){this._store.put(e,t)}}},23278:(e,t,i)=>{var n;i.d(t,{n:()=>n}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(n||(n={}))},34519:(e,t,i)=>{i.d(t,{N:()=>h});var n=i(93800),r=i(88102),s=i(19455),o=i(48602),l=i(75269);let a=class extends s.A{constructor(){super(...arguments),this.enabled=!0}};(0,n._)([(0,o.MZ)({type:Boolean})],a.prototype,"enabled",void 0),a=(0,n._)([(0,l.$)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],a);let u=class extends s.A{constructor(e){super(e),this.lineSnapper=new a,this.parallelLineSnapper=new a,this.rightAngleSnapper=new a,this.rightAngleTriangleSnapper=new a,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new r.default([255,127,0]),this.orangeTransparent=new r.default([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,n._)([(0,o.MZ)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"lineSnapper",void 0),(0,n._)([(0,o.MZ)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"parallelLineSnapper",void 0),(0,n._)([(0,o.MZ)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"rightAngleSnapper",void 0),(0,n._)([(0,o.MZ)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"rightAngleTriangleSnapper",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],u.prototype,"shortLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],u.prototype,"distance",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"pointThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"intersectionParallelLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"parallelLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],u.prototype,"verticalLineThresholdMeters",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"touchSensitivityMultiplier",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"pointOnLineThreshold",void 0),(0,n._)([(0,o.MZ)({type:r.default,nonNullable:!0})],u.prototype,"orange",void 0),(0,n._)([(0,o.MZ)({type:r.default,nonNullable:!0})],u.prototype,"orangeTransparent",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"lineHintWidthReference",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"lineHintWidthTarget",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],u.prototype,"lineHintFadedExtensions",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"parallelLineHintWidth",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],u.prototype,"parallelLineHintLength",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],u.prototype,"parallelLineHintOffset",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],u.prototype,"rightAngleHintSize",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],u.prototype,"rightAngleHintOutlineSize",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],u.prototype,"satisfiesConstraintScreenThreshold",void 0),u=(0,n._)([(0,l.$)("esri.views.interactive.snapping.Settings.Defaults")],u);const h=new u},36867:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i(93800),r=i(88102),s=i(42198),o=i(13561),l=i(79953),a=i(84190),u=i(48602),h=(i(21265),i(50925),i(14746),i(75269)),p=i(87465),d=i(39273);let c=class extends p.default{constructor(e){super(e),this.type="ground",this.color=new r.default("#ff7f00"),this.viewVisualizationEnabled=!0,this.numSamplesForPreview=50,this.numSamplesPerChunk=1e3,this._getQueryElevationDependencies=(0,o.B)(((e,t)=>({ground:e,groundLayers:t})))}get available(){const e=this._ground;return null!=e&&e.layers.some((e=>e.visible))}get minDemResolution(){return(0,d.W)(this._ground)}get _queryElevationDependencies(){return this._getQueryElevationDependencies(this._ground,this._groundLayers)}get _ground(){return this._viewModel?.view?.map?.ground}get _groundLayers(){return this._ground?.layers?.toArray()??[]}async queryElevation(e,t){const i=this._queryElevationDependencies;if(null==i)throw new Error("ElevationProfileLineGround: no dependencies");const{ground:n}=i;if(null==n)throw new Error("No ground configured in the view");const r=await n.queryElevation(e,t),s=(0,a.G9)(e.spatialReference),o=(0,a.G9)(n.layers.at(0).spatialReference);if(s!==o){const e=r.geometry;e.points=e.points.map((e=>{let[i,n,r]=e;return[i,n,r===t.noDataValue?r:r*o/s]}))}return r}attach(e){return(0,s.vE)([super.attach(e),(0,l.watch)((()=>this._queryElevationDependencies),(()=>this._onChange()))])}};(0,n._)([(0,u.MZ)({type:r.default,nonNullable:!0})],c.prototype,"color",void 0),(0,n._)([(0,u.MZ)()],c.prototype,"viewVisualizationEnabled",void 0),(0,n._)([(0,u.MZ)()],c.prototype,"available",null),(0,n._)([(0,u.MZ)({readOnly:!0})],c.prototype,"minDemResolution",null),(0,n._)([(0,u.MZ)()],c.prototype,"_queryElevationDependencies",null),(0,n._)([(0,u.MZ)()],c.prototype,"_ground",null),(0,n._)([(0,u.MZ)()],c.prototype,"_groundLayers",null),c=(0,n._)([(0,h.$)("esri.widgets.ElevationProfile.ElevationProfileLineGround")],c);const v=c},39273:(e,t,i)=>{i.d(t,{W:()=>l,e:()=>o});var n=i(62631),r=i(84190),s=i(10900);function o(e){if(null==e)return null;if((0,s.Q)(e))return l(e);const t=e.tileInfo;if(null==t)return null;const i=t.lods?.at(-1);return null==i?null:i.resolution*(0,r.GA)(t.spatialReference)}function l(e){if(null==e)return null;const t=e.layers.items.map(a).filter(n.Ru);return(0,n.jk)(t)??null}function a(e){return e&&"tileInfo"in e?o(e):null}},43536:(e,t,i)=>{i.d(t,{m:()=>n});class n{constructor(e,t){this.isDraped=e,this.domain=t}}},46818:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i(93800),r=i(88102),s=i(42198),o=i(13561),l=i(79953),a=i(48602),u=(i(21265),i(50925),i(14746),i(75269)),h=i(3363),p=i(41317),d=i(87465);let c=class extends d.default{constructor(e){super(e),this.type="input",this.color=new r.default("#00c8c8"),this.viewVisualizationEnabled=!1,this.numSamplesForPreview=50,this.numSamplesPerChunk=500,this.chartFillEnabled=!1,this.chartStrokeOffsetY=-1,this._getQueryElevationDependencies=(0,o.B)(((e,t,i,n,r)=>e?{elevationInfo:e,visibleLayers:t,view:i,stationary:n,spatialReference:r}:null))}get queryElevationDependencies(){const e=this._viewModel?.view;return null==e?null:this._getQueryElevationDependencies(this._elevationInfo,this._visibleLayers,e,e.stationary,e.spatialReference)}get available(){return!this._viewModel?.inputIsSketched}get _elevationInfo(){const e=this._viewModel?.input;return e?(0,p.bh)(e):null}get _visibleLayers(){return this._viewModel?.view?.map?.allLayers?.filter((e=>e.visible)).toArray()??[]}async queryElevation(e,t){let{noDataValue:i,signal:n}=t;const r=this.queryElevationDependencies;if(null==r)throw new Error("ElevationProfileLineInput: no dependencies");const{view:s,elevationInfo:o,spatialReference:l}=r;if("on-the-ground"===o.mode&&"3d"===s.type&&l){const t=await h.GeometryDescriptor.fromGeometry(e).project(l,n);if(!t)return{geometry:e,noDataValue:i};const r=s.elevationProvider;return t.coordinates.forEach((e=>{e.z=r.getElevation(e.x,e.y,0,l,"ground")??0})),{geometry:t.export(),noDataValue:i}}return{geometry:e,noDataValue:i}}attach(e){const t=()=>this._onChange();return(0,s.vE)([super.attach(e),(0,l.watch)((()=>this.queryElevationDependencies),t),(0,l.on)((()=>e.elevationProvider),"elevation-change",t,{onListenerAdd:t,onListenerRemove:t})])}};(0,n._)([(0,a.MZ)({type:r.default,nonNullable:!0})],c.prototype,"color",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"viewVisualizationEnabled",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"queryElevationDependencies",null),(0,n._)([(0,a.MZ)()],c.prototype,"available",null),(0,n._)([(0,a.MZ)()],c.prototype,"_elevationInfo",null),(0,n._)([(0,a.MZ)()],c.prototype,"_visibleLayers",null),c=(0,n._)([(0,u.$)("esri.widgets.ElevationProfile.ElevationProfileLineInput")],c);const v=c},52116:(e,t,i)=>{i.r(t),i.d(t,{default:()=>K});var n=i(93800),r=i(79625),s=i(6946),o=i(62631),l=i(87436),a=i(89129),u=i(40736),h=i(50925),p=i(76612),d=i(17741),c=i(13561),v=i(79953),_=i(84190),g=i(48602),y=(i(21265),i(75269)),f=i(18477),m=i(75644),b=i(58828),w=i(42198),M=i(49959),P=i(76469),S=(i(14746),i(41317)),E=i(92645),I=i(59581),Z=i(28280);const R=Symbol("line-change");let T=class extends s.default{constructor(e){super(e),this._updateTask=null,this._paramsPerProfile=new Map,this._getUpdateParametersMemoized=(0,c.B)(((e,t,i)=>({stationary:e,visibleProfiles:t,generationParameters:i}))),this._getGenerationParametersMemoized=(0,c.B)(((e,t,i,n,r,s,o)=>(0,I.Rg)(t)&&(0,I.yK)(t)&&null!=n?{view:e,geometry:t,elevationInfo:i,options:s,queue:n,cache:r,slicePlane:o}:null)),this._getElevationInfoMemoized=(0,c.B)(((e,t)=>({mode:e,offset:t}))),this._getOptionsMemoized=(0,c.B)(((e,t)=>{const{densificationMaxSamples:i,maxTotalSamples:n}=(0,E.zj)();return{samplingDistance:e,densificationMaxSamples:Math.round(i/t),maxTotalSamples:n}})),this._updateThrottled=(0,P.n)((e=>(0,M.ignoreAbortErrors)(this._update(e))),(0,E.zj)().updateThrottleMillis)}initialize(){const e=this.viewModel;this.addHandles([(0,v.watch)((()=>({visible:e.visible,profiles:e.profiles.toArray()})),(e=>{let{visible:t,profiles:i}=e;this._abortUpdate(),this._paramsPerProfile.clear(),this.removeHandles(R),t&&0!==i.length&&this.addHandles([...i.map((e=>(0,w.vE)([e.attach(this.viewModel),e.on("change",(()=>{this._invalidateProfile(e)}))]))),(0,v.watch)((()=>this._updateParameters),this._updateThrottled,v.syncAndInitial),this._updateThrottled],R)}),v.syncAndInitial)])}destroy(){this._paramsPerProfile.clear()}get _updateParameters(){const{viewModel:e}=this,t=e.view;return this._getUpdateParametersMemoized(null==t||t.stationary,this.viewModel.visibleProfiles,this._generationParameters)}get _generationParameters(){const{view:e,input:t,queue:i,tileCache:n}=this.viewModel;return null!=e&&e.ready?this._getGenerationParametersMemoized(e,t?.geometry,this._elevationInfo,i,n,this._options,"3d"===e.type?e.slicePlane:null):null}get _elevationInfo(){const e=this.viewModel.input,t=e?(0,S.NN)(e)?null:(0,S.bh)(e):null;return null!=t?this._getElevationInfoMemoized(t.mode,t.offset):null}get _options(){const e=this.viewModel,t=e.visibleProfiles.length;let i=e.minDemResolution??(0,E.zj)().defaultDemResolution;return i=parseFloat(i.toFixed(2)),this._getOptionsMemoized(i,t)}async _update(e){let{stationary:t,visibleProfiles:i,generationParameters:n}=e;this._abortUpdate(),t&&(null!=n?this._updateTask=(0,b.UT)((async e=>{this.viewModel.error=null;const t=i.filter((e=>!this._isProfileValid(e,n))),r=(0,Z.uK)({...n,providers:t},{signal:e});try{for await(const i of r){(0,M.throwIfAborted)(e),this._clearInvalidResults(n);for(let e=0;e<t.length;e++)t[e].result=i[e]}for(const e of t)this._paramsPerProfile.set(e,n)}catch(s){(0,M.throwIfAbortError)(s),this._abortUpdate(),this.viewModel.error=s,t.forEach((e=>{e.result=null}))}})):this._clearResults())}_abortUpdate(){this._updateTask=(0,d.DC)(this._updateTask)}_isProfileValid(e,t){return this._paramsPerProfile.has(e)&&this._paramsPerProfile.get(e)===t}_invalidateProfile(e){this._paramsPerProfile.delete(e),this._updateThrottled(this._updateParameters)}_clearInvalidResults(e){for(const t of this.viewModel.profiles.items)this._isProfileValid(t,e)||(t.result=null,this._paramsPerProfile.delete(t))}_clearResults(){for(const e of this.viewModel.profiles.items)e.result=null,this._paramsPerProfile.delete(e)}};(0,n._)([(0,g.MZ)({nonNullable:!0})],T.prototype,"viewModel",void 0),(0,n._)([(0,g.MZ)()],T.prototype,"_updateParameters",null),(0,n._)([(0,g.MZ)()],T.prototype,"_generationParameters",null),(0,n._)([(0,g.MZ)()],T.prototype,"_elevationInfo",null),(0,n._)([(0,g.MZ)()],T.prototype,"_options",null),T=(0,n._)([(0,y.$)("esri.widgets.ElevationProfile.ElevationProfileController")],T);var L=i(36867),A=i(87465),k=i(46818),C=i(16106),G=i(68033);const N={base:A.default,key:"type",typeMap:{ground:L.default,input:k.default,query:C.default,view:G.default},errorContext:"elevation-profile-line"},x=a.default.ofType(N);var U,O,D=i(70674),V=i(14360),z=i(99071),q=i(51232),j=i(17577);!function(e){e.Ready="ready",e.Creating="creating",e.Reshaping="reshaping",e.ReshapingDisabled="reshaping-disabled",e.Selecting="selecting",e.Selected="selected"}(U||(U={})),function(e){e.View="view",e.Main="main",e.Interaction="interaction"}(O||(O={}));let H=class extends s.default{constructor(e){super(e),this.state=U.Ready,this._pendingStartOptions=null,this._previousInputInfo=null,this._shouldRemoveLastPoint=!1,this._sketchedGraphics=new WeakSet,this._creationToolPromise=null,this._updateToolPromise=null,this._updateDisabled=!1}initialize(){this.addHandles((0,v.watch)((()=>({view:this.tool.viewModel.view,visible:this.tool.visible})),(e=>{let{view:t,visible:i}=e;null!=t&&i?this._attach(t):this._detach()}),v.syncAndInitial),O.View)}destroy(){this._detach()}get canStopCreating(){const e=this._geometry,t=this._shouldRemoveLastPoint?3:2;return(0,I.Rg)(e)&&e.paths.length>0&&e.paths[0].length>=t}get _input(){return this.tool.viewModel.input}set _input(e){this.tool.viewModel.input=e}get _geometry(){return this._input?.geometry}get _visibleAndEditable(){return this.tool.visible&&this.tool.editable}get _view(){return this.tool.viewModel.view}get test(){}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:"sketch"};if(!this.tool.editable)return;const t=this._view;if(null!=t&&t.ready)switch(this._pendingStartOptions=null,this._stopInteraction(),null==this._previousInputInfo&&this._storePreviousInput(this._input),this._setSketchedGraphic(null),e.mode){case"sketch":this._set("state",U.Creating),this._startCreationInteraction();break;case"select":this._set("state",U.Selecting),this._startSelectionInteraction()}else this._pendingStartOptions=e}stop(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._clearPreviousInput()}cancel(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._restorePreviousInput()}clear(){this._stopInteractionAndUpdate(),this._set("state",U.Ready),this._clearPreviousInput(),this._input=null,this._pendingStartOptions=null}isSketchedGraphic(e){return null!=e&&this._sketchedGraphics.has(e)}_attach(e){this._detach();const t={mode:"3d"===e.type?"relative-to-ground":"on-the-ground",offset:null};this._graphicsLayer=new D.default({listMode:"hide",internal:!0,elevationInfo:t});const i=function(e){return"2d"===e?new V.default({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[0,0,0,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[255,255,255,255]}]}}}):new z.default({color:[0,0,0,0]})}(e.type);this._sketchVM=new j.default({layer:this._graphicsLayer,view:e,defaultCreateOptions:{mode:"click",hasZ:!1},updateOnGraphicClick:!1,defaultUpdateOptions:{reshapeOptions:{shapeOperation:"none"},enableRotation:!1,enableScaling:!1,enableMoveAllGraphics:!1,enableZ:!1,multipleSelectionEnabled:!1,toggleToolOnClick:!1,tool:"reshape"},polylineSymbol:i,activeLineSymbol:i}),this.addHandles([(0,v.when)((()=>e.ready),(()=>{const e=this._pendingStartOptions;e&&this.start(e)}),v.syncAndInitial),(0,v.watch)((()=>[this._input,this._visibleAndEditable]),(()=>this._update()),v.syncAndInitial),(0,v.watch)((()=>({map:e.map,graphicsLayer:this._graphicsLayer})),(e=>{let{map:t,graphicsLayer:i}=e;null!=t&&null!=i&&t.add(i),this._update()}),v.syncAndInitial)],O.Main)}_detach(){this.removeHandles(O.Main),this._sketchVM=(0,d.pR)(this._sketchVM),this._creationToolPromise=null,this._updateToolPromise=null;const e=this._view?.map,t=this._graphicsLayer;null!=e&&null!=t&&e.remove(t),this._graphicsLayer=(0,d.pR)(this._graphicsLayer),this._shouldRemoveLastPoint=!1,this._set("state",U.Ready)}_startCreationInteraction(){this._stopInteractionAndUpdate();const e=this._view,t=this._sketchVM;if(null==e||null==t)return;this._shouldRemoveLastPoint=!1;const i=t.on("create",(e=>{const t=e.graphic;switch(e.state){case"complete":this._shouldRemoveLastPoint=!1,this._setSketchedGraphic(t),this._stopInteractionAndUpdate(),this._clearPreviousInput();break;case"cancel":this.cancel();break;case"active":this._setSketchedGraphic(t),"cursor-update"===e.toolEventInfo?.type&&(this._shouldRemoveLastPoint=!0);break;case"start":this._setSketchedGraphic(t)}}));this.removeHandles(O.Interaction),this.addHandles((0,w.hA)((()=>{i.remove();const e=this.canStopCreating,n=this._geometry?.clone();t.cancel(),this._creationToolPromise=null,null!=n&&e?this._shouldRemoveLastPoint&&this._setSketchedGraphic(new r.default({geometry:B(n)})):this._input=null})),O.Interaction),this._creationToolPromise=(0,M.ignoreAbortErrors)(t.create("polyline"))}_startReshapeInteraction(){this._stopInteraction();const e=this._view,t=this._sketchVM;if(null==e||null==t)return;const i=t.on("update",(e=>{const t=e.graphics[0];switch(e.state){case"complete":this._setSketchedGraphic(t),this._stopInteractionAndUpdate(),this._clearPreviousInput();break;case"active":case"start":this._setSketchedGraphic(t)}}));this.removeHandles(O.Interaction),this.addHandles((0,w.hA)((()=>{i.remove(),t.cancel(),this._updateToolPromise=null})),O.Interaction);const n=this._input;n&&(n.visible=!0,this._updateToolPromise=(0,M.ignoreAbortErrors)(t.update(n,{tool:"reshape"})))}_startSelectionInteraction(){this._stopInteraction();const e=this._view;if(null==e)return;const t=e.cursor,i=(0,w.hA)((()=>e.cursor=t));e.cursor="crosshair",e.closePopup();let n=null;const r=(0,w.hA)((()=>(0,d.DC)(n))),s=e.on("immediate-click",(t=>{t.async((async()=>{(0,d.DC)(n),n=(0,b.UT)((async i=>{const{results:n}=await e.hitTest(t);(0,M.throwIfAborted)(i);const r=n.filter((e=>"graphic"===e.type)).map((e=>e.graphic)).find((e=>null!=e.geometry&&"polyline"===e.geometry.type));r&&(t.preventDefault(),t.stopPropagation(),this._input=r,this._clearPreviousInput(),this._stopInteractionAndUpdate())})),await n.promise}))}),q.o.TOOL),o=e.on("key-down",(e=>{"Escape"===e.key&&this.cancel()}));this.removeHandles(O.Interaction),this.addHandles([s,o,r,i],O.Interaction),e.ready&&e.focus()}_stopInteraction(){this.removeHandles(O.Interaction)}_stopInteractionAndUpdate(){this.hasHandles(O.Interaction)&&(this._updateDisabled=!0,this._stopInteraction(),this._updateDisabled=!1,this._triggerUpdate())}_triggerUpdate(){this._set("state",U.Ready),this._update()}_update(){if(this._updateDisabled)return;const e=this.state;if(e!==U.Selecting){if(this._visibleAndEditable){if(e===U.Creating||e===U.Reshaping&&this.isSketchedGraphic(this._input))return}else this.cancel();this._set("state",this._getNextState()),this._updateVisuals()}else this.stop()}_getNextState(){return null==this._input?U.Ready:this.isSketchedGraphic(this._input)?this.state===U.Creating?U.Creating:this._visibleAndEditable?U.Reshaping:U.ReshapingDisabled:U.Selected}_updateVisuals(){switch(this.state){case U.Creating:break;case U.Reshaping:this._startReshapeInteraction();break;case U.ReshapingDisabled:{this._stopInteractionAndUpdate();const e=this._input;null!=e&&this.isSketchedGraphic(e)&&(e.visible=!1);break}case U.Ready:case U.Selected:this._stopInteractionAndUpdate();case U.Selecting:}this._updateSketchedGraphic()}_storePreviousInput(e){this._previousInputInfo={graphic:e}}_restorePreviousInput(){const e=this._previousInputInfo;null!=e&&(this._clearPreviousInput(),this._input=e.graphic,this._triggerUpdate())}_clearPreviousInput(){this._previousInputInfo=null}_updateSketchedGraphic(){const e=this._graphicsLayer;if(null==e)return;const t=e.graphics,i=this._input;if(null!=i&&this.isSketchedGraphic(i)){if(-1===t.indexOf(i))t.removeAll(),t.add(i);else if(1!==t.length){const e=t.filter((e=>e!==i));t.removeMany(e)}}else t.removeAll()}_setSketchedGraphic(e){null!=e&&this._sketchedGraphics.add(e),this._input=e,this._updateSketchedGraphic()}};function B(e){if((0,I.Rg)(e)){const t=e.clone();return t.paths=[t.paths[0].slice(0,-1)],t}return e}(0,n._)([(0,g.MZ)({nonNullable:!0})],H.prototype,"state",void 0),(0,n._)([(0,g.MZ)({nonNullable:!0})],H.prototype,"tool",void 0),(0,n._)([(0,g.MZ)()],H.prototype,"canStopCreating",null),(0,n._)([(0,g.MZ)()],H.prototype,"_graphicsLayer",void 0),(0,n._)([(0,g.MZ)()],H.prototype,"_sketchVM",void 0),(0,n._)([(0,g.MZ)()],H.prototype,"_input",null),(0,n._)([(0,g.MZ)()],H.prototype,"_geometry",null),(0,n._)([(0,g.MZ)()],H.prototype,"_visibleAndEditable",null),(0,n._)([(0,g.MZ)()],H.prototype,"_view",null),(0,n._)([(0,g.MZ)()],H.prototype,"_shouldRemoveLastPoint",void 0),H=(0,n._)([(0,y.$)("esri.widgets.ElevationProfile.ElevationProfileInteraction")],H);let F=class extends s.default{constructor(e){super(e),this._implementation=null,this._loadingTask=null}initialize(){this.addHandles((0,v.watch)((()=>({tool:this.tool,view:this.tool.viewModel.view,visible:this.tool.visible&&!!this.tool.viewModel.view?.ready})),(e=>{let{tool:t,view:i,visible:n}=e;null!=i&&n?this._show(i,t):this._hide()}),v.syncAndInitial))}destroy(){this._hide()}_show(e,t){this._loadingTask=(0,d.DC)(this._loadingTask),this._loadingTask=(0,b.UT)((async n=>{if("2d"===e.type){const r=i.e(26121).then(i.bind(i,26121)),s=(await(0,M.whenOrAbort)(r,n)).ElevationProfileView2D;this._implementation=new s(e,t)}else if("3d"===e.type){const r=Promise.all([i.e(76517),i.e(60111),i.e(51255),i.e(83607),i.e(4791),i.e(39458),i.e(1303),i.e(50948),i.e(48261),i.e(85090),i.e(21159)]).then(i.bind(i,61500)),s=(await(0,M.whenOrAbort)(r,n)).ElevationProfileView3D;this._implementation=new s(e,t)}}))}_hide(){this._loadingTask=(0,d.DC)(this._loadingTask),this._implementation=(0,d.pR)(this._implementation)}};(0,n._)([(0,g.MZ)()],F.prototype,"tool",void 0),F=(0,n._)([(0,y.$)("esri.widgets.ElevationProfile.support.ElevationProfileView")],F);let W=class extends s.default{constructor(e){super(e),this.editable=!0,this.visible=!0,this.highlightEnabled=!0}initialize(){this.view=new F({tool:this}),this.interaction=new H({tool:this})}destroy(){this.interaction.destroy(),this.view.destroy()}get state(){const e=this.interaction?.state;switch(e){case U.Ready:return E.o8.Ready;case U.Creating:return E.o8.Creating;case U.Selecting:return E.o8.Selecting;case U.Selected:return E.o8.Selected;case U.Reshaping:case U.ReshapingDisabled:return E.o8.Created}}};(0,n._)([(0,g.MZ)({nonNullable:!0})],W.prototype,"viewModel",void 0),(0,n._)([(0,g.MZ)()],W.prototype,"view",void 0),(0,n._)([(0,g.MZ)()],W.prototype,"interaction",void 0),(0,n._)([(0,g.MZ)()],W.prototype,"editable",void 0),(0,n._)([(0,g.MZ)()],W.prototype,"visible",void 0),(0,n._)([(0,g.MZ)()],W.prototype,"highlightEnabled",void 0),W=(0,n._)([(0,y.$)("esri.widgets.ElevationProfile.ElevationProfileTool")],W);var $=i(58790),Y=i(78684);let J=class extends s.default{constructor(e){super(e),this.view=null,this.input=null,this._getEffectiveUnitsMemoized=(0,c.B)(((e,t)=>({distance:e,elevation:t}))),this.hoveredChartPosition=null,this.uniformChartScaling=!1,this.defaultUnit=null,this.queue=null,this._currentTileCache=null,this.error=null,this._defaultProfileLineGround=new L.default,this._userUnitOptions=null,this._userUnit=null,e?.profiles||(this.profiles=new a.default([this._defaultProfileLineGround]))}initialize(){this.addHandles((0,v.watch)((()=>this.view),(e=>{if(null==e)return void h.A.getLogger(this).warnOnce("no view. Widget will be disabled until a view is provided.");this.removeHandles(Q);const t="3d"===e.type?e.resourceController:void 0;this.queue?.destroy(),this.queue=(0,Z.LD)(t?.scheduler);const i=t?.addUpdatingObject(this);i&&this.addHandles(i,Q)}),v.syncAndInitial)),this.tool=new W({viewModel:this}),this._controller=new T({viewModel:this})}destroy(){this._defaultProfileLineGround=(0,d.pR)(this._defaultProfileLineGround),this._controller=(0,d.pR)(this._controller),this._currentTileCache=(0,d.pR)(this._currentTileCache),this.tool=(0,d.pR)(this.tool),this.queue=(0,d.pR)(this.queue)}get profiles(){return this._get("profiles")}set profiles(e){const t=this._get("profiles"),i=e??new a.default;this._set("profiles",(0,u.V)(i,t))}get state(){const e=this.view;return null!=e&&e.ready?this.tool.state:E.o8.Disabled}get progress(){let e=0,t=0;for(const i of this.visibleProfiles)e++,t+=i.progress;return e>0?t/e:0}set unitOptions(e){this._userUnitOptions=e,this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))}get unitOptions(){return this._filteredOrAllUnits(this._userUnitOptions)}set unit(e){this._userUnit=e?this._findSelectableUnit(e,this._userUnit):null,this.notifyChange("unit")}get unit(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)}get effectiveUnits(){const e=(0,Y.DM)(this.visibleProfiles.map((e=>e.result))),t=(0,_.Vs)(e.maxDistance,"meters",this.unit),i=(0,_.jE)(e.maxElevation,"meters",this.unit);return this._getEffectiveUnitsMemoized(t,i)}get highlightEnabled(){return this.tool.highlightEnabled}set highlightEnabled(e){this.tool.highlightEnabled=e}get hasVertices(){const e=this.input?.geometry;return(0,I.Rg)(e)&&e.paths.reduce(((e,t)=>e+t.length),0)>0}get hoveredPoints(){return null!=this.input&&this.visible&&this.tool.editable?this.visibleProfiles.map((e=>{const t=e.hoveredPoint;return null!=t?{hoveredPoint:t,color:e.color}:null})).filter(o.Ru):[]}get statistics(){return(0,Y.ch)(this.visibleProfiles.map((e=>e.statistics)))}get chartData(){if(null==this.input)return null;const{effectiveUnits:e,progress:t,statistics:i,visibleProfiles:n,uniformChartScaling:r}=this,s=n.filter((e=>e.hasZ)).map((e=>({id:e.id,type:e.type,title:e.title,color:e.color,samples:e.samples,progress:e.progress,chartFillEnabled:e.chartFillEnabled,chartStrokeWidth:e.chartStrokeWidth,chartStrokeOffsetY:e.chartStrokeOffsetY,viewVisualizationEnabled:e.viewVisualizationEnabled})));return 0===s.length?null:{lines:s,effectiveUnits:e,statistics:i,refined:1===t,dynamicElevationRange:n.some((e=>"view"===e.type)),uniformScaling:r}}get visibleProfiles(){return this.profiles.toArray().filter((e=>e.available&&e.visible))}get minDemResolutions(){const e=[];for(const{minDemResolution:t}of this.visibleProfiles)null!=t&&e.push(t);return e}get minDemResolution(){return(0,o.jk)(this.minDemResolutions)}get errorState(){const e=this.input?.geometry;if(!(0,I.yK)(e))return E.GJ.NoValidInput;if(null!=this.error){if((0,$.mb)(this.error))switch(this.error.cause){case $.NG.TooComplex:return E.GJ.TooComplex;case $.NG.InvalidGeometry:return E.GJ.InvalidGeometry;case $.NG.InvalidElevationInfo:return E.GJ.InvalidElevationInfo;case $.NG.ElevationQueryError:return E.GJ.NoValidInput}return E.GJ.UnknownError}return 0===this.visibleProfiles.length?E.GJ.NoVisibleProfiles:null==this.chartData&&1===this.progress?E.GJ.RefinedButNoChartData:E.GJ.None}get tileCache(){this._currentTileCache=(0,d.pR)(this._currentTileCache);const e=this.view;if(null!=e&&"3d"===e?.type){const t=e.basemapTerrain?.elevationQueryCache;if(null!=t)return t}return null==this._currentTileCache&&(this._currentTileCache=new f.E(new p.q(20*l.u.MEGABYTES))),this._currentTileCache}get visible(){return this.tool.visible}set visible(e){this.tool.visible=e}get selectAvailable(){for(const e of this.view?.map?.allLayers??[]){if("graphics"===e.type&&!e.internal&&e.graphics.some((e=>"polyline"===e.geometry?.type)))return!0;if("geometryType"in e&&"polyline"===e.geometryType)return!0}return!!this.view?.graphics?.some((e=>"polyline"===e.geometry?.type))}get inputIsSketched(){return this.tool.interaction.isSketchedGraphic(this.input)}get elevationProvider(){const e=this.view;return null!=e&&"3d"===e.type?e.elevationProvider:null}get updating(){const{progress:e}=this,t=!!this.queue?.updating;return e>0&&e<1||t}start(e){this.tool.interaction.start(e)}stop(){this.tool.interaction.stop()}cancel(){this.tool.interaction.cancel()}clear(){this.tool.interaction.clear()}_findSelectableUnit(e,t){const i=this.unitOptions;return null!=e&&i.includes(e)?e:t?this._findSelectableUnit(t):i[0]}_filteredOrAllUnits(e){const t=(null!=e?e:[]).filter((e=>_.GB.includes(e)));return 0===t.length?_.GB.slice():t}};(0,n._)([(0,g.MZ)()],J.prototype,"view",void 0),(0,n._)([(0,g.MZ)({type:r.default})],J.prototype,"input",void 0),(0,n._)([(0,g.MZ)({type:x,nonNullable:!0})],J.prototype,"profiles",null),(0,n._)([(0,g.MZ)({readOnly:!0})],J.prototype,"state",null),(0,n._)([(0,g.MZ)({readOnly:!0})],J.prototype,"progress",null),(0,n._)([(0,g.MZ)()],J.prototype,"unitOptions",null),(0,n._)([(0,g.MZ)()],J.prototype,"unit",null),(0,n._)([(0,g.MZ)({readOnly:!0})],J.prototype,"effectiveUnits",null),(0,n._)([(0,g.MZ)()],J.prototype,"hoveredChartPosition",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"uniformChartScaling",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"highlightEnabled",null),(0,n._)([(0,g.MZ)({readOnly:!0})],J.prototype,"hoveredPoints",null),(0,n._)([(0,g.MZ)({readOnly:!0})],J.prototype,"statistics",null),(0,n._)([(0,g.MZ)()],J.prototype,"chartData",null),(0,n._)([(0,g.MZ)()],J.prototype,"visibleProfiles",null),(0,n._)([(0,g.MZ)()],J.prototype,"minDemResolutions",null),(0,n._)([(0,g.MZ)({readOnly:!0})],J.prototype,"minDemResolution",null),(0,n._)([(0,g.MZ)({readOnly:!0})],J.prototype,"errorState",null),(0,n._)([(0,g.MZ)(m.q)],J.prototype,"defaultUnit",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"queue",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"tileCache",null),(0,n._)([(0,g.MZ)()],J.prototype,"tool",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"visible",null),(0,n._)([(0,g.MZ)()],J.prototype,"error",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"selectAvailable",null),(0,n._)([(0,g.MZ)()],J.prototype,"inputIsSketched",null),(0,n._)([(0,g.MZ)()],J.prototype,"elevationProvider",null),(0,n._)([(0,g.MZ)()],J.prototype,"updating",null),(0,n._)([(0,g.MZ)()],J.prototype,"_defaultProfileLineGround",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"_userUnitOptions",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"_controller",void 0),(0,n._)([(0,g.MZ)()],J.prototype,"_userUnit",void 0),J=(0,n._)([(0,y.$)("esri.widgets.ElevationProfile.ElevationProfileViewModel")],J);const Q=Symbol("updating-object"),K=J},54404:(e,t,i)=>{async function n(e,t){if("2d"===e.type)return e.hitTest(t);const i=await e.hitTest(t);if(0===i.results.length)return i;const n=i.results[0],s=(n.distance??0)*(1+r),o=i.results.findIndex((e=>(e.distance??0)>s));return-1!==o&&(i.results=i.results.slice(0,o)),n&&i.ground.distance>s&&(i.ground.mapPoint=null),i}i.d(t,{h$:()=>l,oZ:()=>n,zF:()=>o});const r=.05;function s(e){return"graphic"===e?.type}function o(e){return e.find(s)??null}function l(e){return e.filter(s)}},56062:(e,t,i)=>{i.d(t,{c:()=>s});var n=i(84190),r=i(78139);function s(e){const t="metric";if(null==e)return t;const i=e.map,s=(i&&"portalItem"in i?i.portalItem?.portal:null)??r.default.getDefault();switch(s.user?.units??s.units){case t:return t;case"english":return"imperial"}return(0,n.jM)(e.spatialReference)??t}},61073:(e,t,i)=>{i.d(t,{l:()=>o});i(21265),i(50925);var n=i(89227),r=i(23278),s=i(43536);class o extends s.m{constructor(e,t,i,n){super(n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.n.ALL),this.previousVertex=e,this.centerVertex=t,this.nextVertex=i}equals(e){return e instanceof o&&(0,n.p)(this.previousVertex,e.previousVertex)&&(0,n.p)(this.centerVertex,e.centerVertex)&&(0,n.p)(this.nextVertex,e.nextVertex)}}},64053:(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var n=i(93800),r=i(6946),s=i(48602),o=(i(21265),i(50925),i(14746),i(75269));let l=class extends r.default{constructor(e){super(e),this.enabled=!1}};(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"enabled",void 0),l=(0,n._)([(0,o.$)("esri.views.interactive.sketch.SketchLabelOptions")],l);const a=l},65022:(e,t,i)=>{i.d(t,{c:()=>o});i(21265),i(50925);var n=i(89227),r=i(23278),s=i(43536);class o extends s.m{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.n.ALL,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];super(n,s),this.type=e,this.lineStart=t,this.lineEnd=i,this.fadeLeft=o,this.fadeRight=l}equals(e){return e instanceof o&&this.type===e.type&&(0,n.p)(this.lineStart,e.lineStart)&&(0,n.p)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return(0,n.j)(this.lineStart,this.lineEnd)}}},70674:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var n=i(93800),r=i(48602),s=(i(21265),i(50925),i(14746),i(75269)),o=i(21),l=i(57457),a=i(24203),u=i(75215),h=i(33580),p=i(87730);let d=class extends((0,a.dM)((0,u.j)(l.default))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new h.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,n._)([(0,r.MZ)({type:p.A})],d.prototype,"elevationInfo",void 0),(0,n._)([(0,r.MZ)((0,o.C)(h.Y,"graphics"))],d.prototype,"graphics",void 0),(0,n._)([(0,r.MZ)({type:["show","hide"]})],d.prototype,"listMode",void 0),(0,n._)([(0,r.MZ)()],d.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],d.prototype,"type",void 0),(0,n._)([(0,r.MZ)({constructOnly:!0})],d.prototype,"internal",void 0),d=(0,n._)([(0,s.$)("esri.layers.GraphicsLayer")],d);const c=d},70755:(e,t,i)=>{i.d(t,{r:()=>o});i(21265),i(50925);var n=i(89227),r=i(23278),s=i(43536);class o extends s.m{constructor(e,t,i){super(i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.n.ALL),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&(0,n.p)(this.lineStart,e.lineStart)&&(0,n.p)(this.lineEnd,e.lineEnd)}}},74309:(e,t,i)=>{i.d(t,{v:()=>o});var n=i(89227),r=i(23278),s=i(43536);class o extends s.m{constructor(e,t){super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.n.ALL),this.intersectionPoint=e}equals(e){return e instanceof o&&(0,n.p)(this.intersectionPoint,e.intersectionPoint)}}},75644:(e,t,i)=>{i.d(t,{q:()=>r});var n=i(56062);const r={readOnly:!0,get(){return(0,n.c)(this.view)}}},76469:(e,t,i)=>{function n(e,t,i,n){let r=null,s=1e3;"number"==typeof t?(s=t,n=i):(r=t??null,s=i);let o,l=0;const a=()=>{l=0,e.apply(n,o)},u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r&&r.apply(n,t),o=t,s?l||(l=setTimeout(a,s)):a()};return u.remove=()=>{l&&(clearTimeout(l),l=0)},u.forceUpdate=()=>{l&&(clearTimeout(l),a())},u.hasPendingUpdates=()=>!!l,u}i.d(t,{n:()=>n})},87436:(e,t,i)=>{var n;i.d(t,{u:()=>n}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(n||(n={}))},92143:(e,t,i)=>{i.d(t,{IV:()=>_,LF:()=>r,T9:()=>h,Wq:()=>l,d_:()=>s,g2:()=>d,gT:()=>o,hs:()=>p,iT:()=>v,kM:()=>a,l3:()=>u,n0:()=>g,r7:()=>c});var n=i(84190);function r(e){return{value:e}}function s(e,t){return{type:(0,n.t$)(t),value:e,unit:t}}function o(e,t){return{type:(0,n.t$)(t),value:e,unit:t}}function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,n.t$)(t),value:e,unit:t,rotationType:i}}function a(e,t){const i=u(e,t);return"angle"===e.type?l(i,t,e.rotationType):function(e,t){return{type:(0,n.t$)(t),value:e,unit:t}}(i,t)}function u(e,t){return(0,n.oU)(e.value,e.unit,t)}function h(e,t){return null==e?t:null==t||e.value>(0,n.oU)(t.value,t.unit,e.unit)?e:t}function p(e,t){return null==e?null:{...e,value:e.value*t}}function d(e,t,i){if(t===i)return e;switch(i){case"arithmetic":case"geographic":return 90-e}}const c=s(0,"meters"),v=o(0,"square-meters"),_=(l(0,"radians"),l(0,"degrees")),g=l(0,"degrees","geographic")},95095:(e,t,i)=>{i.d(t,{$h:()=>v,Ef:()=>P,IP:()=>g,P1:()=>b,hF:()=>M,jQ:()=>m,rT:()=>w,rZ:()=>n,uR:()=>y});var n,r=i(5839),s=i(92143),o=i(84190),l=i(32006),a=i(98080),u=i(89227),h=i(28473),p=i(18162),d=i(26266),c=i(70576);function v(e,t){if(null==e||null==t)return;const i=_(e,t);return null!=i?(0,s.Wq)(i,"radians","geographic"):void 0}!function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"}(n||(n={}));const _=(()=>{const e=(0,h.vt)(),t=(0,h.vt)();return(i,n)=>((0,u.i)(e,i.x,i.y,i.z??0),(0,u.i)(t,n.x,n.y,n.z??0),g(e,t,i.spatialReference,n.spatialReference))})(),g=(()=>{const e=(0,a.vt)(),t=(0,h.vt)(),i=(0,h.vt)();return(n,r,s,h)=>{if((0,u.p)(n,r))return;const v=(0,d.geodesicCompatibleSpatialReference)(s),_=(0,d.geodesicCompatibleSpatialReference)(h);if(v&&_&&(0,c.aI)(v,_)&&(0,p.F)(n,s,t,v)&&(0,p.F)(r,h,i,_)){const{azimuth:e}=(0,d.inverseGeodeticSolver)(E,t,i,v);return null!=e?(0,o.oU)(e,"degrees","radians"):void 0}e[0]=r[0]-n[0],e[1]=r[1]-n[1];let g=(0,l.g7)(a.JP,e);return e[0]<0&&(g=I-g),g}})();function y(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.Absolute;if(t&&i)switch(r){case n.Absolute:return v(t,i);case n.Relative:return m(f(e,t,i),n.Relative);case n.RelativeBilateral:return m(f(e,t,i),n.RelativeBilateral)}}function f(e,t,i){if(!e||!t||!i)return;const n=_(e,t),r=_(t,i);return null!=n&&null!=r?(0,s.Wq)(r-n,"radians","geographic"):void 0}function m(e,t){if(null!=e)switch(t){case n.Absolute:return b(e);case n.Relative:{const t=M(e);let i=R.normalize(t,0,!0);return-180===i&&(i=180),(0,s.Wq)(i,"degrees","geographic")}case n.RelativeBilateral:{const t=M(e),i=Math.abs(R.normalize(t,0,!0));return(0,s.Wq)(i,"degrees","geographic")}}}function b(e){const t=M(e),i=Z.normalize(t,0,!0);return(0,s.Wq)(i,"degrees","geographic")}const w=(()=>{const e=(0,h.vt)();return function(t,i,n,r,l){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"geodesic";(0,u.c)(e,i);const h=M(l);if("geodesic"===a){const s=(0,d.geodesicCompatibleSpatialReference)(n);if(s&&(0,p.F)(e,n,e,s))return(0,d.directGeodeticSolver)(t,e,h,r,s),t[2]=i[2],!!(0,p.F)(t,s,t,n)}const c=(0,s.g2)(h,"geographic","arithmetic"),v=(0,o.oU)(c,"degrees","radians"),_=i[0]+r*Math.cos(v),g=i[1]+r*Math.sin(v),y=i[2];return(0,u.i)(t,_,g,y),!0}})();function M(e){if(null!=e)return(0,s.g2)(S(e),e.rotationType,"geographic")}function P(e){if(null!=e)return(0,s.g2)(S(e),e.rotationType,"arithmetic")}function S(e){return(0,o.oU)(e.value,e.unit,"degrees")}const E=new d.InverseGeodeticSolverResult,I=2*Math.PI,Z=r.ie,R=new r.hr(-180,180)}}]);