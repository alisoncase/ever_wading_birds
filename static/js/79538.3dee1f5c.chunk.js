"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79538],{79538:(e,t,n)=>{n.d(t,{BV:()=>D,EG:()=>T,Lk:()=>Z,Ll:()=>C,Np:()=>u,R3:()=>b,SO:()=>g,T1:()=>S,UH:()=>d,Wy:()=>w,XR:()=>m,aM:()=>F,fs:()=>v,i0:()=>U,i3:()=>h});var i=n(66845),r=n(95011),o=n(96247),s=n(76983),a=n(73210),l=n(40731);const d=",",u={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},c="percent-of-total",f="field",m={exclude:["median"]},g={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},p=new Set(["integer","small-integer"]);let y=null;const h=["date","date-only","timestamp-offset"];function v(e){return(0,r.isDateField)(e)||(0,r.isDateOnlyField)(e)||(0,r.isTimestampOffsetField)(e)}async function T(e){const{field:t,field2:n,field3:i,normalizationField:r,valueExpression:s}=e;let a=[];if(s){if(!y){const{arcadeUtils:e}=await(0,o.lw)();y=e}a=y.extractFieldNames(s)}return t&&a.push(t),n&&a.push(n),i&&a.push(i),r&&a.push(r),a}function w(e){let t=e.normalizationType;return t||(e.normalizationField?t=f:null!=e.normalizationTotal&&(t=c)),t??void 0}function $(e){return String(e).padStart(2,"0")}function k(e,t,n){let i;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),i=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${$((n?e.getMonth():e.getUTCMonth())+1)}-${$(n?e.getDate():e.getUTCDate())} ${$(n?e.getHours():e.getUTCHours())}:${$(n?e.getMinutes():e.getUTCMinutes())}:${$(n?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function F(e,t,n,i){const{hasQueryEngine:r}=e,o=`(${k(n,Z(e,n),r)} - ${k(t,Z(e,t),r)})`;let s=g[i],a="/";return s<1&&(s=1/s,a="*"),{sqlExpression:1===s?o:`(${o} ${a} ${s})`,sqlWhere:null}}function Z(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,r.isDateField)(n))return"field"}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;for(const n in t)if(t[n].includes(e))return n}function S(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;return e&&("string"==typeof e?t.includes(e)&&(i=e):i=(0,s.q3)(e)),n?i||"gray":i}function b(e,t){const n=t&&e.getField(t);return!!n&&p.has(n.type)}function C(e){return`cast(${e} as float)`}function U(e,t){const{format:n,timeZoneOptions:r,fieldType:o}=t??{};let s,d;if(r&&({timeZone:s,timeZoneName:d}=(0,l.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),o)),"string"==typeof e&&isNaN(Date.parse("time-only"===o?`1970-01-01T${e}Z`:e)))return e;switch(o){case"date-only":{const t=(0,i.J2)(n||"short-date");return"string"==typeof e?(0,i.iS)(e,{...t}):(0,i.Yq)(e,{...t,timeZone:a.n$})}case"time-only":{const t=(0,i.J2)(n||"short-time");return"string"==typeof e?(0,i.F8)(e,t):(0,i.Yq)(e,{...t,timeZone:a.n$})}case"timestamp-offset":{if(!s&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0,o=t?{...t,timeZone:s,timeZoneName:d}:void 0;return"string"==typeof e?(0,i.Ey)(e,o):(0,i.Yq)(e,o)}default:{const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:s,timeZoneName:d}:void 0)}}}}}]);