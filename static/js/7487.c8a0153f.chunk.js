"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[7487,79538],{7487:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(93800),r=n(79953),o=n(31923),l=n(48602),s=(n(21265),n(50925),n(14746),n(75269)),a=n(41327),u=n(76713);let d=class extends u.A{constructor(e){super(e),this._expressionTrackingHandles=new Map,this.id=(0,o.c)().toString(),this.type="group"}initialize(){this.addHandles([(0,r.watch)((()=>[this.visible,this.inputs]),(e=>{let[t]=e;const{inputs:n}=this,i=!!t&&void 0;for(const r of n)(0,a.rf)(r)&&(r.required=i)}),{initial:!0,equals:(e,t)=>t[0]===e[0]&&t[1]===e[1]})])}destroy(){for(const e of this._expressionTrackingHandles.values())e.remove()}get initialState(){return this.element.initialState||"expanded"}get inputs(){return this._get("inputs")}set inputs(e){this.removeAllHandles(),e&&this.addHandles(e.map((e=>(0,r.watch)((()=>e.visible),(()=>this._dirtyEvaluatedVisibilityExpression()))))),this._set("inputs",e)}get open(){return"expanded"===this.initialState}set open(e){this._override("open",e)}get visible(){return!1!==this.evaluatedVisibilityExpression&&this.inputs&&this.inputs.some((e=>e.visible))}_dirtyEvaluatedVisibilityExpression(){const{element:e}=this;e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};(0,i._)([(0,l.MZ)()],d.prototype,"id",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"initialState",null),(0,i._)([(0,l.MZ)()],d.prototype,"inputs",null),(0,i._)([(0,l.MZ)()],d.prototype,"open",null),(0,i._)([(0,l.MZ)()],d.prototype,"type",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"visible",null),d=(0,i._)([(0,s.$)("esri.widgets.FeatureForm.GroupInput")],d);const m=d},39652:(e,t,n)=>{function i(e){const{attributes:t,sourceLayer:n}=e??{},i=n&&"displayField"in n?n.displayField:null,r=i?t?.[i]:null,o=null!=r?JSON.stringify(r):null,l=e?.getObjectId()?.toString();return o||l||""}n.d(t,{R:()=>i})},41327:(e,t,n)=>{n.d(t,{Au:()=>x,CU:()=>R,Et:()=>v,Gq:()=>M,H1:()=>D,HG:()=>w,Iy:()=>Z,Kl:()=>J,Kn:()=>G,LZ:()=>V,TN:()=>F,U3:()=>Y,Ve:()=>q,XI:()=>N,bx:()=>O,cU:()=>_,k_:()=>T,lB:()=>P,l_:()=>j,n4:()=>z,nT:()=>b,oc:()=>U,qG:()=>k,rf:()=>g,s9:()=>L,t6:()=>C,tM:()=>H,vp:()=>S,wr:()=>E});n(88677);var i=n(62631),r=n(7951),o=n(82301),l=n(50925),s=n(56612),a=n(96299),u=n(7249),d=n(95011),m=n(78076),c=n(79538),p=n(53826),f=n(82368),y=n(39652),h=n(99961);const g=e=>"field"===e?.type,v=e=>"group"===e?.type,b=e=>"relationship"===e?.type,T=e=>"text"===e.type,x=e=>"utilityNetworkAssociations"===e.type,O=e=>!v(e)&&null!=e.group,E=e=>e.reduce(((e,t)=>v(t)?[...e,...t.inputs]:[...e,t]),[]),Z=e=>E(e).filter(g),_=e=>E(e).filter(b),F=e=>E(e).filter(x),N=e=>null!=e&&(w(e,"combo-box")||w(e,"radio-buttons")),w=(e,t)=>null!=e&&e.input?.type===t,M=e=>{let{domain:t,inputType:n="text-box",dataType:i}=e;return"number"===i&&"text-box"===n&&(!t||"coded-value"!==t.type)};function S(e,t){const{title:n,feature:i}=e??{};return n||(i?(0,y.R)(i):null)||t||""}function V(e){const{attributes:t,fieldsIndex:n,label:r,timeZone:o}=e;if(!t||"object"!=typeof t)return r;const l=Object.keys(t).filter((e=>(0,s.mk)(r,e))),a=l.map((e=>t[e])),u=l.map((e=>n.get(e))).filter(i.Ru);return function(e,t){return(0,s.HC)((0,s.HC)(e,(e=>`{${e.toLowerCase()}}`)),Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t.toLowerCase(),n]}))))}(r,q({values:a,fields:u,timeZone:o}))}const $="expression/",A="expr/",I="field/";function U(e){const[t,n]=e.split($);return""===t&&n?n:(l.A.getLogger("esri.widgets.FeatureForm/featureFormUtils").error("extractExpressionNameFromString:invalid-input",`The string ${e} is not a valid expression reference of the form '${$}/expressionName'`),"")}function C(e){return`${$}${e}`}function D(e){return`${I}${e}`}function L(e){return e.startsWith($)}function k(e){return e.startsWith(A)}function q(e){const{fields:t,values:n}=e,i=e.timeZone??void 0,r=t.map(((e,t)=>{let r=n[t];if(e.domain&&"coded-value"===e.domain.type){const t=e.domain.codedValues.find((e=>e.code===r));t?.name&&(r=t.name)}return((0,c.fs)(e)||(0,d.isTimeOnlyField)(e))&&(r=(0,p.ZP)(e,r,{timeZone:i,...(0,p.ZT)(e)})),[e.name,r]}));return Object.fromEntries(r)}const R=e=>{const t={typeFieldName:null,types:[]};return e?((0,m.Sv)(e)?(t.typeFieldName=e.parent?.subtypeField,t.types=e.parent?.subtypes??[]):"subtype-group"===e.type||"feature"===e.type&&e.subtypes?.length?(t.typeFieldName=e.subtypeField,t.types=e.subtypes??[]):"types"in e&&e.types&&(t.typeFieldName=e.typeIdField,t.types=e.types.map((e=>{let{id:t,name:n,domains:i}=e;return{code:t,name:n,domains:i}}))),null!=t.typeFieldName&&(t.typeFieldName=e.getField(t.typeFieldName)?.name??t.typeFieldName),t):t},H=(e,t,n)=>{const{dataType:i,error:r,minLength:o}=e,l=t?.validationErrors;if(!l||!r)return null;if(r===f.gK.CANNOT_BE_EMPTY)return l.cannotBeNull;if(r===u.Mh.VALUE_OUT_OF_RANGE||r===d.NumericRangeValidationError.OUT_OF_RANGE){const{field:t,range:r}=e,o={type:"date",intlOptions:{timeZone:"date"===t.type&&n?n:void 0,...(0,p.ZT)(t)}},s=(0,f.hQ)(r,l);return(0,h.V)(s,r,{format:{max:"date"===i?o:null!=r.max&&(0,f.qn)(r.max)?f.Qv:f.PA,min:"date"===i?o:null!=r.min&&(0,f.qn)(r.min)?f.Qv:f.PA}})}return r===u.Mh.INVALID_CODED_VALUE?l.invalidCodedValue:r===d.TypeValidationError.INVALID_TYPE?l.invalidType:r===f.gK.TOO_SHORT?(0,h.V)(l.tooShort,{min:o}):(f.gK.TOO_LONG,null)},j=e=>{if(!e)return;const t=e.layer,n=t&&"geometryType"in t?t.geometryType:void 0,i=e.geometry?.type;return"polyline"===i||"polyline"===n?"line":"mesh"===i||"mesh"===n||"multipatch"===n?"cube":"multipoint"===i||"multipoint"===n?"point":i||n||"table"},z=e=>{const t=[];if(e.formTemplate){const{description:n,title:i}=e.formTemplate;e.fields?.forEach((e=>{const r=i&&(0,s.mk)(i,e.name),o=n&&(0,s.mk)(n,e.name);(r||o)&&t.push(e.name)}))}return t};function P(e,t){const n=t??("formTemplate"in e&&e.formTemplate);return!!n&&(n.elements?.filter(a.jt)??[]).some((t=>{let{fieldName:n}=t;return!e.fieldsIndex.get(n)}))}function G(e,t){return null==e||t.onValue!==e&&t.offValue!==e}function J(e,t){switch(t.objectType){case"any":return!0;case"null":return null==e;case"code":return e===t.codedValue?.code;case"range":return null!=e&&null!=t.minValue&&null!=t.maxValue&&+e>=t.minValue&&+e<=t.maxValue;default:return(0,r.Xb)(t.objectType),!1}}function Y(e,t,n){const i=(0,m.fV)(e),r=i?.find((e=>e.code===n));if(!r)return!1;const l=i?.find((e=>e.code===t));return!(0,o.equalsShallow)(r.defaultValues,l?.defaultValues)&&Object.values(r.defaultValues).some((e=>null!=e))}},53826:(e,t,n)=>{n.d(t,{Ng:()=>E,OM:()=>g,Q0:()=>T,T8:()=>b,ZP:()=>O,ZT:()=>x,eX:()=>F,fD:()=>M,fb:()=>f,fl:()=>p,iP:()=>w,oh:()=>Z,rX:()=>S,sH:()=>y,yk:()=>V});n(88677),n(21265);var i=n(74719),r=n(64682),o=n(66845),l=n(72520),s=n(69943),a=n(73210),u=n(51536),d=n(12711);const m=a.n$,c={date:null,time:null,timeZoneOffset:null},p=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),f="latn",y=new Set(["date-only","time-only","timestamp-offset"]),h=e=>"valueAsDate"in e;function g(e){return{locale:(0,d.JK)(),numberingSystem:f,zone:e??m}}function v(e,t){return null==e?null:u.c9.fromMillis(e,g(t))}function b(e,t){if(null==e||!(0,s.Kg)(e)||""===e){if(t){const e=u.c9.local({zone:t});return{date:null,time:null,timeZoneOffset:e.isValid?e.offset.toString():null}}return c}const n=u.c9.fromISO(e,{setZone:!0});return{date:n.toFormat(l.mo,g()),time:n.toFormat(l.Uq.HMS_MS,g()),timeZoneOffset:n.offset.toString()}}function T(e,t){if(null==e||!(0,s.Et)(e)||isNaN(e))return c;const n=v(e,t);return n?{date:n.toFormat(l.mo,g(t)),time:n.toFormat(l.Fj,g(t))}:c}function x(e){switch(e.type){case"date":default:return(0,o.J2)("short-date-short-time");case"date-only":return(0,o.J2)("short-date");case"time-only":return(0,o.J2)("short-time");case"timestamp-offset":return{...(0,o.J2)("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function O(e,t,n){if(!e||null==t)return null;switch(e.type){case"date":return(0,o.Yq)(t,n);case"date-only":return(0,o.iS)(t,n);case"time-only":return(0,o.F8)(t,n);case"timestamp-offset":return(0,o.Ey)(t,n);default:return null}}function E(e){const{dateComponent:t,defaultTimeZone:n,timeComponent:i,timeZoneComponent:r,oldValue:o}=e;if(!t?.value)return null;const{year:s,month:d,day:m}=u.c9.fromFormat(t.value,l.mo),{hour:c,minute:p,second:f,millisecond:y}=_(i,a.n$)??u.c9.now(),h=b(o,n),g=r?.value?parseInt(r.value,10):null!=h.timeZoneOffset?parseInt(h.timeZoneOffset,10):(new Date).getTimezoneOffset(),v=u.mQ.instance(g),T=u.c9.fromObject({year:s,month:d,day:m,hour:c,minute:p,second:f,millisecond:y},{zone:v});return T.isValid?T.toISO({includeOffset:!0}):null}function Z(e){const{dateComponent:t,timeComponent:n,timeZone:i,max:r,min:o,oldValue:l}=e,s=_(t,i);let a=!!e.applyRange;if(!s)return null;let d=null;if(null!=n?.value){const e=_(n,i),t=Date.now(),o=null!=r&&r<t?r:t,l=u.c9.fromMillis(o,g(i)),a=s||l,{year:m,month:c,day:p}=a,{hour:f,minute:y,second:h,millisecond:v}=e||l;d=a.set({year:m,month:c,day:p,hour:f,minute:y,second:h,millisecond:v})}else{const e=v(N({value:l??Date.now(),max:r,min:o}),i),{year:t,month:n,day:u}=s,{hour:m,minute:c,second:p,millisecond:f}=e;a=!0,d=s.set({year:t,month:n,day:u,hour:m,minute:c,second:p,millisecond:f})}if(!d.isValid)return null;const m=d.toMillis();return a?N({value:m,max:r,min:o}):m}function _(e,t){if(null==e?.value||Array.isArray(e.value))return null;let n=null;return n=h(e)?u.c9.fromFormat(e.value,l.mo,g(t)):(0,l.UE)(e.value),n?.isValid?n:null}function F(e){const{max:t,min:n,value:i}=e;return!isNaN(i)&&!(null!=t&&i>t)&&!(null!=n&&i<n)}function N(e){const{max:t,min:n,value:i}=e;return null!=t&&null!=n?(0,r.qE)(i,n,t):null!=t&&i>t?t:null!=n&&i<n?n:i}function w(e){if(!e)return"";const t=e.split(".").at(0);if(!t||t.length<1)throw new i.default("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const n=t.split(":"),r=new Array(3);for(let i=0;i<3;i++){const e=n.at(i)??"";r[i]=e.padStart(2,"0")}return r.join(":")}function M(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return w(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function S(e){return!!e&&"object"==typeof e&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function V(e){const{type:t,range:n,value:i}=e;if(null==i||!n||i===n.min||i===n.max)return!0;if("date"===t)return F({value:i,min:n.min,max:n.max});const{rawMax:r,rawMin:o}=n;let s=null,a=null,u=null;switch(t){case"date-only":s=(0,l.Xi)(r),a=(0,l.Xi)(o),u=(0,l.Xi)(i);break;case"time-only":s=(0,l.UE)(r),a=(0,l.UE)(o),u=(0,l.UE)(i);break;case"timestamp-offset":s=(0,l.gz)(r),a=(0,l.gz)(o),u=(0,l.gz)(i)}return!u||F({value:u.valueOf(),min:a?.valueOf(),max:s?.valueOf()})}},76713:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(93800),r=n(6946),o=n(48602),l=(n(21265),n(50925),n(14746),n(75269)),s=n(41327);let a=class extends r.default{constructor(e){super(e),this.element=null,this.feature=null,this.layer=null,this.timeZone=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){return this.getFormattedLabel(this.element?.description)}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return null!=e?!!e.lastEvaluatedValue:null}get label(){return this.getFormattedLabel(this.element?.label)}get updating(){return!1}get visible(){return null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element}getFormattedLabel(e){const{feature:t,layer:n,timeZone:i}=this;return null==n||null==e?e:(0,s.LZ)({label:e,attributes:t.attributes,fieldsIndex:n.fieldsIndex,timeZone:i})}};(0,i._)([(0,o.MZ)({readOnly:!0})],a.prototype,"description",null),(0,i._)([(0,o.MZ)({constructOnly:!0})],a.prototype,"element",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"evaluatedVisibilityExpression",null),(0,i._)([(0,o.MZ)()],a.prototype,"feature",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"label",null),(0,i._)([(0,o.MZ)()],a.prototype,"layer",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"timeZone",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"type",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"updating",null),(0,i._)([(0,o.MZ)()],a.prototype,"visible",null),(0,i._)([(0,o.MZ)()],a.prototype,"visibilityExpressionExecutor",void 0),a=(0,i._)([(0,l.$)("esri.widgets.FeatureForm.InputBase")],a);const u=a},79538:(e,t,n)=>{n.d(t,{BV:()=>_,EG:()=>b,Lk:()=>Z,Ll:()=>w,Np:()=>d,R3:()=>N,SO:()=>f,T1:()=>F,UH:()=>u,Wy:()=>T,XR:()=>p,aM:()=>E,fs:()=>v,i0:()=>M,i3:()=>g});var i=n(66845),r=n(95011),o=n(96247),l=n(76983),s=n(73210),a=n(40731);const u=",",d={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},m="percent-of-total",c="field",p={exclude:["median"]},f={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},y=new Set(["integer","small-integer"]);let h=null;const g=["date","date-only","timestamp-offset"];function v(e){return(0,r.isDateField)(e)||(0,r.isDateOnlyField)(e)||(0,r.isTimestampOffsetField)(e)}async function b(e){const{field:t,field2:n,field3:i,normalizationField:r,valueExpression:l}=e;let s=[];if(l){if(!h){const{arcadeUtils:e}=await(0,o.lw)();h=e}s=h.extractFieldNames(l)}return t&&s.push(t),n&&s.push(n),i&&s.push(i),r&&s.push(r),s}function T(e){let t=e.normalizationType;return t||(e.normalizationField?t=c:null!=e.normalizationTotal&&(t=m)),t??void 0}function x(e){return String(e).padStart(2,"0")}function O(e,t,n){let i;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),i=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${x((n?e.getMonth():e.getUTCMonth())+1)}-${x(n?e.getDate():e.getUTCDate())} ${x(n?e.getHours():e.getUTCHours())}:${x(n?e.getMinutes():e.getUTCMinutes())}:${x(n?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function E(e,t,n,i){const{hasQueryEngine:r}=e,o=`(${O(n,Z(e,n),r)} - ${O(t,Z(e,t),r)})`;let l=f[i],s="/";return l<1&&(l=1/l,s="*"),{sqlExpression:1===l?o:`(${o} ${s} ${l})`,sqlWhere:null}}function Z(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,r.isDateField)(n))return"field"}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;for(const n in t)if(t[n].includes(e))return n}function F(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;return e&&("string"==typeof e?t.includes(e)&&(i=e):i=(0,l.q3)(e)),n?i||"gray":i}function N(e,t){const n=t&&e.getField(t);return!!n&&y.has(n.type)}function w(e){return`cast(${e} as float)`}function M(e,t){const{format:n,timeZoneOptions:r,fieldType:o}=t??{};let l,u;if(r&&({timeZone:l,timeZoneName:u}=(0,a.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),o)),"string"==typeof e&&isNaN(Date.parse("time-only"===o?`1970-01-01T${e}Z`:e)))return e;switch(o){case"date-only":{const t=(0,i.J2)(n||"short-date");return"string"==typeof e?(0,i.iS)(e,{...t}):(0,i.Yq)(e,{...t,timeZone:s.n$})}case"time-only":{const t=(0,i.J2)(n||"short-time");return"string"==typeof e?(0,i.F8)(e,t):(0,i.Yq)(e,{...t,timeZone:s.n$})}case"timestamp-offset":{if(!l&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0,o=t?{...t,timeZone:l,timeZoneName:u}:void 0;return"string"==typeof e?(0,i.Ey)(e,o):(0,i.Yq)(e,o)}default:{const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:l,timeZoneName:u}:void 0)}}}},82368:(e,t,n)=>{n.d(t,{$$:()=>x,D_:()=>c,Gd:()=>m,Kx:()=>i,PA:()=>g,Po:()=>p,Qv:()=>v,gK:()=>r,hQ:()=>T,jl:()=>y,of:()=>d,qn:()=>b,zU:()=>f});var i,r,o,l=n(96299),s=n(7249),a=n(95011),u=n(53826);(o=i||(i={})).Text="text",o.Number="number",o.Date="date",o.Unsupported="unsupported",function(e){e.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"}(r||(r={}));const d=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}};function m(e,t){const{dataType:n,domain:i,field:o,maxLength:l,minLength:d,range:m,required:c}=t;if(null==e)return c?r.CANNOT_BE_EMPTY:null;if("text"===n&&"string"==typeof e){if(d>-1&&e.length<d)return r.TOO_SHORT;if(l>-1&&e.length>l)return r.TOO_LONG}return"date"!==n||(0,u.yk)({type:o.type,range:m,value:e})?i?(0,s.wb)(o,e,i):(0,a.validateFieldValue)(o,e)??(0,s.wb)(o,e):a.NumericRangeValidationError.OUT_OF_RANGE}function c(e,t){return!(!p(e)||!p(t))||e===t}function p(e){return null==e||""===e}function f(e){let{dataType:t,field:n,input:r}=e;if(t===i.Date)return-1;const o=h(n.length);if(!r||!(0,l.AI)(r))return o;const s=h(r.maxLength);return-1===s?o:-1===o?s:Math.min(o,s)}function y(e){let{dataType:t,field:n,input:r}=e;if(t===i.Date)return-1;if(!r||!(0,l.AI)(r))return-1;const o=h(r.minLength);if(o<0)return-1;const s=h(n.length);return s>-1&&s<o?-1:o}function h(e){return"number"==typeof e&&e>-1?e:-1}const g={type:"number"},v={type:"number",intlOptions:{notation:"scientific"}};function b(e){return e>=1e7||e<=-1e7}function T(e,t){return null!=e.max&&null!=e.min?t.outsideRange:null!=e.max?t.outsideRangeMax:t.outsideRangeMin}const x=e=>e&&!Number.isNaN(e.valueOf())}}]);