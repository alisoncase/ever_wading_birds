"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[22573],{22573:(t,e,r)=>{r.r(e),r.d(e,{assetMapFromAssetMapsJSON:()=>M,extractMesh:()=>d,meshFeatureSetFromJSON:()=>g});var o=r(79625),n=r(50925),a=r(45622),s=r(12560),i=r(26848),l=r(93321),u=r(81336),c=r(26936),f=r(87520),p=r(47423);const h=()=>n.A.getLogger("esri.rest.support.meshFeatureSet");function g(t,e,r){const n=r.features;r.features=[],delete r.geometryType;const a=f.default.fromJSON(r);if(a.geometryType="mesh",!r.assetMaps)return a;const s=M(e,r.assetMaps),i=t.sourceSpatialReference??l.default.WGS84,u=r.globalIdFieldName,{outFields:c}=t,p=null!=c&&c.length>0?(h=c.includes("*")?null:new Set(c),t=>{let{attributes:e}=t;if(!e)return{};if(!h)return e;for(const r in e)h.has(r)||delete e[r];return e}):()=>({});var h;for(const l of n){const t=d(l,u,i,e,s);a.features.push(new o.default({geometry:t,attributes:p(l)}))}return a}function d(t,e,r,o,n){const a=t.attributes[e],l=n.get(a);if(null==l||!t.geometry)return null;const c=(0,p.V)(t.attributes,r,o.transformFieldRoles),f=s.default.fromJSON(t.geometry);f.spatialReference=r;const h=(0,p.f)(t.attributes,o.transformFieldRoles),g=r.isGeographic?"local":"georeferenced",d=function(t){const e=Array.from(t.files.values()),r=new Array;for(const o of e){if(o.status!==m.COMPLETED)return null;const t=new Array;for(const e of o.parts){if(!e)return null;t.push(new u.Bq(e.url,e.hash))}r.push(new u.Qp(o.name,o.mimeType,t))}return r}(l);return d?i.default.createWithExternalSource(c,d,{extent:f,transform:h,vertexSpace:g,unitConversionDisabled:!0}):i.default.createIncomplete(c,{extent:f,transform:h,vertexSpace:g})}var m,y;function M(t,e){const r=new Map;for(const o of e){const e=o.parentGlobalId;if(null==e)continue;const n=o.assetName,s=o.assetType,i=o.assetHash,l=o.assetURL,u=o.conversionStatus,f=o.seqNo,p=(0,c.Fm)(s,t.supportedFormats);if(!p){h().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${s}, but it does not list it as a supported type`);continue}const g=(0,a.tE)(r,e,(()=>({files:new Map})));(0,a.tE)(g.files,n,(()=>({name:n,type:s,mimeType:p,status:v(u),parts:[]}))).parts[f]={hash:i,url:l}}return r}function v(t){switch(t){case"COMPLETED":case"SUBMITTED":return m.COMPLETED;case"INPROGRESS":return m.PENDING;default:return m.FAILED}}(y=m||(m={}))[y.FAILED=0]="FAILED",y[y.PENDING=1]="PENDING",y[y.COMPLETED=2]="COMPLETED"},47423:(t,e,r)=>{r.d(e,{V:()=>a,f:()=>s});var o=r(75400),n=r(53409);function a(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new o.default({x:t[r.originX],y:t[r.originY],z:t[r.originZ],spatialReference:e})}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return new n.default({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}const i={originX:"originX",originY:"originY",originZ:"originZ",translationX:"translationX",translationY:"translationY",translationZ:"translationZ",scaleX:"scaleX",scaleY:"scaleY",scaleZ:"scaleZ",rotationX:"rotationX",rotationY:"rotationY",rotationZ:"rotationZ",rotationDeg:"rotationDeg"}},53409:(t,e,r)=>{r.r(e),r.d(e,{default:()=>m});var o,n=r(93800),a=r(19455),s=r(48602),i=(r(21265),r(50925),r(14746),r(75269)),l=r(87752),u=r(10382),c=r(21369),f=r(66509),p=r(28473),h=r(21465);let g=o=class extends a.A{constructor(t){super(t),this.translation=(0,p.vt)(),this.rotationAxis=(0,p.ci)(h.up),this.rotationAngle=0,this.scale=(0,p.fA)(1,1,1)}get rotation(){return(0,h.i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,p.o8)((0,h.yo)(t)),this.rotationAngle=(0,h.g7)(t)}get localMatrix(){const t=(0,u.vt)();return(0,c.x8)(d,(0,h.yo)(this.rotation),(0,h.$I)(this.rotation)),(0,l.o1)(t,d,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.B8)((0,u.vt)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,l.t2)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,p.o8)(this.translation),rotationAxis:(0,p.o8)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,p.o8)(this.scale)};return new o(t)}};(0,n._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"translation",void 0),(0,n._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"rotationAxis",void 0),(0,n._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],g.prototype,"rotationAngle",void 0),(0,n._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"scale",void 0),(0,n._)([(0,s.MZ)()],g.prototype,"rotation",null),(0,n._)([(0,s.MZ)()],g.prototype,"localMatrix",null),(0,n._)([(0,s.MZ)()],g.prototype,"localMatrixInverse",null),g=o=(0,n._)([(0,i.$)("esri.geometry.support.MeshTransform")],g);const d=(0,f.vt)(),m=g}}]);