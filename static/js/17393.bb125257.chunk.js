"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[17393,44827,53685,79906],{6135:(e,t,n)=>{n.d(t,{$4:()=>M,O0:()=>w,O1:()=>k,Sw:()=>C,eH:()=>g,rc:()=>b});var o=n(21772),l=n(88102),r=n(23060),i=n(76612),a=n(16804),s=n(44827);const c="picture-fill",u="simple-fill",f="simple-line",h="simple-marker",m="text",d="cim",y=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),p=new i.q(1e3);function g(e){const t=e.style;let n=null;if(e)switch(e.type){case h:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,o.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):n=e.color;break;case c:n={type:"pattern",src:e.url,width:(0,a.Lz)(e.width)*e.xscale,height:(0,a.Lz)(e.height)*e.yscale,x:(0,a.Lz)(e.xoffset),y:(0,a.Lz)(e.yoffset)};break;case m:n=e.color;break;case d:n=(0,s.getCIMSymbolColor)(e)}return n}function b(e,t){const n=e+"-"+t;return void 0!==p.get(n)?Promise.resolve(p.get(n)):(0,r.default)(e,{responseType:"image"}).then((e=>{const o=e.data,l=o.naturalWidth,r=o.naturalHeight,i=document.createElement("canvas");i.width=l,i.height=r;const a=i.getContext("2d");a.fillStyle=t,a.fillRect(0,0,l,r),a.globalCompositeOperation="destination-in",a.drawImage(o,0,0);const s=i.toDataURL();return p.put(n,s),s}))}function M(e){if(!e)return null;let t=null;switch(e.type){case u:case c:case h:t=M(e.outline);break;case f:{const n=(0,a.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:k(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,a.Lz)(e.miterLimit):e.join},t.dashArray=w(t).join(",")||"none");break}default:t=null}return t}function w(e){if(!e?.style)return[];const{dashArray:t,style:n,width:o}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const l=o??0,r=y.has(n)?y.get(n).map((e=>e*l)):[];if("butt"!==e.cap)for(const[i,a]of r.entries())r[i]=i%2==1?a+l:Math.max(a-l,1);return r}const k=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),C=new l.default([128,128,128])},26903:(e,t,n)=>{n.d(t,{Al:()=>c,NZ:()=>u,Vb:()=>l,af:()=>f,rK:()=>h});var o=n(32195);const l="arial-unicode-ms",r="woff2",i=new Map,a=new Set;class s{constructor(e,t){this.fontFace=e,this.promise=t}}async function c(e){const t=m(e),n=h(e),l=i.get(t);if(l)return l.promise;const c=new FontFace(e.family,`url('${o.default.fontsUrl}/woff2/${n}.${r}') format('${r}')`,{style:e.style,weight:e.weight}),u=document.fonts;if(u.has(c)&&"loading"===c.status)return c.loaded;const f=c.load().then((()=>(u.add(c),c)));return i.set(t,new s(c,f)),a.add(c),f}function u(e){return a.has(e)}function f(e){if(!e)return l;const t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}function h(e){const t=d(e)+y(e);return f(e.family)+(t.length>0?t:"-regular")}function m(e){const t=d(e)+y(e);return(e.family||l)+(t.length>0?t:"-regular")}function d(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function y(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}},44827:(e,t,n)=>{n.r(t),n.d(t,{applyCIMSymbolColor:()=>m,applyCIMSymbolRotation:()=>p,getCIMSymbolColor:()=>u,getCIMSymbolRotation:()=>y,getCIMSymbolSize:()=>r,getCIMSymbolType:()=>g,scaleCIMMarker:()=>s,scaleCIMSymbol:()=>a,scaleCIMSymbolTo:()=>i});var o=n(88102),l=n(61154);function r(e){const t=(0,l.lW)(e);if("CIMTextSymbol"===t?.type)return t.height??0;let n=0;if(t?.symbolLayers)for(const o of t.symbolLayers)(0,l.MM)(o)&&null!=o.size&&o.size>n?n=o.size:(0,l.mA)(o)&&null!=o.width&&o.width>n?n=o.width:(0,l.jn)(o);return n}function i(e,t,n){if(!e)return;const o=(0,l.lW)(e),i=r(e);0!==i?a(o,t/i,!1,n):function(e,t){if(e)if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":n.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":n.width=t}}else e.height=t}(o,t)}function a(e,t,n,o){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)c(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":s(n,t,o);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!o?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":a(n.lineSymbol,t,!0,{...o,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const e of n.effects)c(e,t)}}else null!=e.height&&(e.height*=t)}function s(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,l.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const o of e.markerGraphics)e.scaleSymbolsProportionally||a(o.symbol,t,!0,n)}function c(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function u(e){const t=[];return f((0,l.lW)(e),t),t.length?new o.default((0,l.e6)(t[0])):null}function f(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const o="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const r of n.symbolLayers)if(!(r.colorLocked||o&&((0,l.mA)(r)||(0,l.MM)(r)&&r.markerPlacement&&(0,l.zr)(r.markerPlacement))))switch(r.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":r.tintColor&&h(t,r.tintColor);break;case"CIMVectorMarker":r.markerGraphics?.forEach((e=>{f(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":h(t,r.color);break;case"CIMHatchFill":f(r.lineSymbol,t)}}function h(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function m(e,t,n){t instanceof o.default||(t=new o.default(t));const r=(0,l.lW)(e);r&&d(r,t,n)}function d(e,t,n){if(!e)return;let o;o="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===o?.type;if(o?.symbolLayers)for(const i of o.symbolLayers){if(i.colorLocked)continue;if(r)if(n){const{layersToColor:e}=n;if(((0,l.mA)(i)||(0,l.MM)(i)&&i.markerPlacement&&(0,l.zr)(i.markerPlacement))&&"fill"===e||(0,l.jn)(i)&&"outline"===e)continue}else if((0,l.mA)(i)||(0,l.MM)(i)&&i.markerPlacement&&(0,l.zr)(i.markerPlacement))continue;const e=t.toArray();switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor=e;break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{d(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":i.color=e;break;case"CIMHatchFill":d(i.lineSymbol,t,n)}}}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,l.lW)(e);if("CIMTextSymbol"===n?.type||"CIMPointSymbol"===n?.type){const e=n.angle;return null!=e&&t?360-e:e??0}return 0}function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=(0,l.lW)(e);if(n&&(t=360-t),"CIMTextSymbol"!==o?.type){if("CIMPointSymbol"===o?.type&&o.symbolLayers){const e=t-(o.angle||0);for(const t of o.symbolLayers)if((0,l.MM)(t)){let n=t.rotation||0;t.rotateClockwise?n-=e:n+=e,t.rotation=n}o.angle=t}}else o.angle=t}function g(e){const t=(0,l.lW)(e);if(!t)return null;switch(t.type){case"CIMPointSymbol":return"CIMPointSymbol";case"CIMLineSymbol":return"CIMLineSymbol";case"CIMPolygonSymbol":return"CIMPolygonSymbol";case"CIMTextSymbol":return"CIMTextSymbol";case"CIMMeshSymbol":return"CIMMeshSymbol";default:return null}}},46572:(e,t,n)=>{n.r(t),n.d(t,{getContrastingBackgroundTheme:()=>l});var o=n(53685);function l(e,t){return(0,o.A)(e,t)}},53685:(e,t,n)=>{n.d(t,{A:()=>E,previewSymbol2D:()=>A});var o=n(88102),l=n(2925),r=n(74719),i=n(26903),a=n(16804),s=n(73532),c=n(6135),u=n(41182),f=n(25826),h=n(67747);const m="picture-fill",d="picture-marker",y="simple-fill",p="simple-line",g="simple-marker",b="text",M="Aa",w=u.CB.size,k=u.CB.maxSize,C=u.CB.maxOutlineSize,S=u.CB.lineWidth,L=225,x=document.createElement("canvas");function I(e,t,n){if("polygon"===e.type){const o=e.extent,l=0===o.width?1:o.width,r=0===o.height?1:o.height;e=(0,s.wp)({originPosition:"upperLeft",scale:[l/t,r/n],translate:[o.xmin,o.ymax]},{},e);let i="";for(let t=0;t<e.rings.length;t++){const n=e.rings[t];for(let e=0;e<n.length;e++){const t=n[e][0],o=n[e][1];let l="";0===e?(l=`M${t.toString()} ${o.toString()}`,""!==i&&(l=` ${l}`),i+=l):e===n.length-1?(l=`l${t.toString()} ${o.toString()} Z`,""!==i&&(l=` ${l}`),i+=l):(l=`l${t.toString()} ${o.toString()}`,""!==i&&(l=` ${l}`),i+=l)}}return i}if("polyline"===e.type){const o=e.extent,l=0===o.width?1:o.width,r=0===o.height?1:o.height;e=(0,s.QE)({originPosition:"upperLeft",scale:[l/t,r/n],translate:[o.xmin,o.ymax]},{},e);let i="";for(let t=0;t<e.paths.length;t++){const n=e.paths[t];for(let e=0;e<n.length;e++){const t=n[e][0],o=n[e][1];let l="";0===e?(l=`M${t.toString()} ${o.toString()}`,""!==i&&(l=` ${l}`),i+=l):(l=`l${t.toString()} ${o.toString()}`,""!==i&&(l=` ${l}`),i+=l)}}return i}return""}function z(e,t){const n=x.getContext("2d"),o=[];t&&(t.weight&&o.push(t.weight),t.size&&o.push(t.size+"px"),t.family&&o.push(t.family)),n.font=o.join(" ");const{width:l,actualBoundingBoxLeft:r,actualBoundingBoxRight:i,actualBoundingBoxAscent:a,actualBoundingBoxDescent:s}=n.measureText(e);return{width:Math.ceil(Math.max(l,r+i)),height:Math.ceil(a+s),x:Math.floor(r),y:Math.floor((a-s)/2)}}function P(e){const t=e?.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,a.Lz)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,a.Lz)(t.height):null}}function v(e,t){return e>t?"dark":"light"}async function A(e,t){const{shapeDescriptor:n,size:o,renderOptions:l,outputSize:s}=function(e,t){const n="number"==typeof t?.size?t?.size:null,o=null!=n?(0,a.Lz)(n):null,l=null!=t?.maxSize?(0,a.Lz)(t.maxSize):null;let r="angle"in e?e.angle:null;null!=t?.rotation&&(r=(r??0)+t.rotation);const i=(0,c.eH)(e);let s=(0,c.$4)(e);"dark"!==E(e,245)||t?.ignoreWhiteSymbols||(s={width:.75,...s,color:"#bdc3c7"});let f=null;const h={shape:null,fill:i,stroke:s,offset:[0,0]};s?.width&&(s.width=Math.min(s.width,C));const L=s?.width||0;let x=null!=t?.size&&(null==t?.scale||t?.scale),v=0,A=0,T=!1;switch(e.type){case g:{const n=e.style,{width:i,height:s}=P(t);let c=i===s&&null!=i?i:null!=o?o:Math.min((0,a.Lz)(e.size),l||k);if(!0===t?.useMarkerSymbolSize&&null!==i&&null!==s){const t=Math.min((0,a.Lz)(e.size),l||k);c=t>i&&t>s?Math.min(i,s):t}switch(v=c,A=c,n){case"circle":h.shape={type:"circle",cx:0,cy:0,r:.5*c},x||(v+=L,A+=L);break;case"cross":h.shape={type:"path",path:[{command:"M",values:[0,.5*A]},{command:"L",values:[v,.5*A]},{command:"M",values:[.5*v,0]},{command:"L",values:[.5*v,A]}]};break;case"diamond":h.shape={type:"path",path:[{command:"M",values:[0,.5*A]},{command:"L",values:[.5*v,0]},{command:"L",values:[v,.5*A]},{command:"L",values:[.5*v,A]},{command:"Z",values:[]}]},x||(v+=L,A+=L);break;case"square":h.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[v,0]},{command:"L",values:[v,A]},{command:"L",values:[0,A]},{command:"Z",values:[]}]},x||(v+=L,A+=L),r&&(T=!0);break;case"triangle":h.shape={type:"path",path:[{command:"M",values:[.5*v,0]},{command:"L",values:[v,A]},{command:"L",values:[0,A]},{command:"Z",values:[]}]},x||(v+=L,A+=L),r&&(T=!0);break;case"x":h.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[v,A]},{command:"M",values:[v,0]},{command:"L",values:[0,A]}]},r&&(T=!0);break;case"path":h.shape={type:"path",path:e.path||""},x||(v+=L,A+=L),r&&(T=!0),x=!0}break}case p:{const{width:e,height:n}=P(t),l=(0,c.O0)(s).reduce(((e,t)=>e+t),0),r=l&&Math.ceil(S/l),i=n??o??L,a=e??(l*r||S);if(x=!0,"polyline"===t?.geometry?.type&&t?.geometry?.extent){v=a,A=n??v;const e=1e3,o=.15*e;f=[v,A],A=f[0]>f[1]?e*f[1]/f[0]:e,v=f[0]>f[1]?e:e*f[0]/f[1],s?.width&&(s.width=s.width*e/(f[1]>f[0]?f[1]:f[0]),s.width>o&&(s.width=o)),h.shape={type:"path",path:I(t.geometry,v,A)}}else v=null!=t?.maxSize?Math.min(a,t.maxSize):a,A=i,s&&(s.width=i),h.shape={type:"path",path:[{command:"M",values:[i/2,A/2]},{command:"L",values:[v-i/2,A/2]}]};break}case m:case y:{const e="object"==typeof t?.symbolConfig&&!!t?.symbolConfig?.isSquareFill,{width:n,height:l}=P(t);v=!e&&n!==l||null==n?null!=o?o:w:n,A=!e&&n!==l||null==l?v:l,x||(v+=L,A+=L),x=!0,t?.geometry?.extent&&"polygon"===t?.geometry?.type?(f=[v,A],A=f[0]>f[1]?1e3*f[1]/f[0]:1e3,v=f[0]>f[1]?1e3:1e3*f[0]/f[1],h.shape={type:"path",path:I(t.geometry,v,A)}):h.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[v,0]},{command:"L",values:[v,A]},{command:"L",values:[0,A]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:u.nq.fill[0];break}case d:{const n=Math.min((0,a.Lz)(e.width),l||k),i=Math.min((0,a.Lz)(e.height),l||k),{width:s,height:c}=P(t),u=s===c&&null!=s?s:null!=o?o:Math.max(n,i),f=e.width/e.height;v=f<=1?Math.ceil(u*f):u,A=f<=1?u:Math.ceil(u/f),h.shape={type:"image",x:-Math.round(v/2),y:-Math.round(A/2),width:v,height:A,src:e.url||""},r&&(T=!0);break}case b:{const n=e,r=t?.overrideText||n.text||M,i=n.font,{width:s,height:c}=P(t),u=null!=c?c:null!=o?o:Math.min((0,a.Lz)(i.size),l||k),{width:f,height:m}=z(r,{weight:i.weight,size:u,family:i.family}),d=/[\uE600-\uE6FF]/.test(r);v=s??(d?u:f),A=d?u:m;let y=.5*(d?u:m);d&&(y+=5),h.shape={type:"text",text:r,x:n.xoffset||0,y:n.yoffset||y,align:"middle",alignBaseline:n.verticalAlignment,decoration:i&&i.decoration,rotated:n.rotated,kerning:n.kerning},h.font=i&&{size:u,style:i.style,decoration:i.decoration,weight:i.weight,family:i.family};break}}return{shapeDescriptor:h,size:[v,A],outputSize:f,renderOptions:{node:t?.node,scale:x,opacity:t?.opacity,rotations:[r],useRotationSize:T,effectView:t?.effectView,ariaLabel:t?.ariaLabel}}}(e,t);if(!n.shape)throw new r.default("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,t){const n=t.fill,o=e.color;if("pattern"===n?.type&&o&&e.type!==m){const e=await(0,c.rc)(n.src,o.toCss(!0));n.src=e,t.fill=n}}(e,n),await async function(e,t,n,o){if(!("font"in e)||!e.font||"text"!==t.shape.type)return;try{await(0,i.Al)(e.font)}catch{}const{width:l,height:r}=P(o);if(!/[\uE600-\uE6FF]/.test(t.shape.text)){const{width:i,height:a,x:s,y:c}=z(t.shape.text,{weight:t.font?.weight,size:t.font?.size,family:t.font?.family});n[0]=l??i,n[1]=r??a,t.shape.x=s,t.shape.y=c;let u="angle"in e?e.angle:null;if(null!=o?.rotation&&(u=(u??0)+o.rotation),u){const e=u*(Math.PI/180),t=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));n[1]=n[0]*t+n[1]*o}}}(e,n,o,t);const L=[[n]];if("object"==typeof t?.symbolConfig&&t?.symbolConfig?.applyColorModulation){const e=.6*o[0];L.unshift([{...n,offset:[-e,0],fill:(0,u.QC)(n.fill,-.3)}]),L.push([{...n,offset:[e,0],fill:(0,u.QC)(n.fill,.3)}]),o[0]+=2*e,l.scale=!1}"text"===e.type&&function(e,t,n,o,l){if(null!=e.haloColor&&null!=e.haloSize){l.masking??=n.map((()=>[]));const r=(0,a.Lz)(e.haloSize);o[0]+=r,o[1]+=r,n.unshift([{...t,fill:null,stroke:{color:e.haloColor,width:2*r,join:"round",cap:"round"}}]),l.masking.unshift([{shape:{type:"rect",x:0,y:0,width:o[0]+2*h.y7,height:o[1]+2*h.y7},fill:[255,255,255],stroke:null},{...t,fill:[0,0,0,0],stroke:null}])}null==e.backgroundColor&&null==e.borderLineColor||(o[0]+=2*h.y7,o[1]+=2*h.y7,n.unshift([{shape:{type:"rect",x:0,y:0,width:o[0],height:o[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:(0,a.Lz)(e.borderLineSize)}}]),l.masking?.unshift([]))}(e,n,L,o,l);const x=(0,f.fz)(L,o,l);if(s&&x){const e="img"===x.nodeName.toLowerCase()?x:x.firstChild;"svg"===e.nodeName.toLowerCase()&&e.setAttribute("viewBox",`0 0 ${o[0].toString()} ${o[1].toString()}`),e.setAttribute("width",s[0].toString()),e.setAttribute("height",s[1].toString()),s.length>2&&(e.style.setProperty("padding-left",s[2]?.toString()+"px"),e.style.setProperty("padding-right",s[2]?.toString()+"px"),e.style.setProperty("padding-top",s[3]?.toString()+"px"),e.style.setProperty("padding-bottom",s[3]?.toString()+"px"),e.style.setProperty("box-sizing","border-box"))}return x}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;const n=(0,c.eH)(e),r=(0,c.$4)(e),i=!n||"type"in n?null:new o.default(n),a=r?.color?new o.default(r?.color):null,s=i?v((0,l.Ws)(i),t):null,u=a?v((0,l.Ws)(a),t):null;return u?s?s===u?s:t>=L?"light":"dark":u:s}},73532:(e,t,n)=>{n.d(t,{$X:()=>v,B2:()=>i,Gy:()=>L,IE:()=>r,P5:()=>A,Q1:()=>l,QE:()=>I,SW:()=>z,Tr:()=>P,VV:()=>o,wp:()=>x});n(78629);function o(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function l(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:n,translate:o}=e,l=n[0]??1,r=n[1]??1;return{originPosition:"lowerLeft",scale:[l,"lowerLeft"===t?r:-r,n[2]??1,n[3]??1],translate:[o[0]??0,o[1]??0,o[2]??0,o[3]??0]}}function r(e,t){let{scale:n,translate:o}=e;return Math.round((t-o[0])/n[0])}function i(e,t){let{scale:n,translate:o}=e;return Math.round((t-o[1])/n[1])}function a(e,t){let{scale:n,translate:o}=e;return Math.round(((t??0)-o[2])/n[2])}function s(e,t){let{scale:n,translate:o}=e;return t?Math.round((t-o[3])/n[3]):0}function c(e,t){return e&&t?m:e&&!t?f:!e&&t?h:u}const u=(e,t)=>{const n=[];if(!t.length)return null;const o=t[0];let l=r(e,o[0]),a=i(e,o[1]);n.push([l,a]);for(let s=1;s<t.length;s++){const[o,c]=t[s],u=r(e,o),f=i(e,c);u===l&&f===a||n.push([u-l,f-a]),l=u,a=f}return n},f=(e,t)=>{const n=[];if(!t.length)return null;const o=t[0];let l=r(e,o[0]),s=i(e,o[1]),c=a(e,o[2]);n.push([l,s,c]);for(let u=1;u<t.length;u++){const[o,f,h]=t[u],m=r(e,o),d=i(e,f),y=a(e,h);m===l&&d===s&&y===c||n.push([m-l,d-s,y]),l=m,s=d,c=y}return n},h=(e,t)=>{const n=[];if(!t.length)return null;const o=t[0];let l=r(e,o[0]),a=i(e,o[1]),c=s(e,o[2]);n.push([l,a,c]);for(let u=1;u<t.length;u++){const[o,f,h]=t[u],m=r(e,o),d=i(e,f),y=s(e,h);m===l&&d===a&&y===c||n.push([m-l,d-a,y]),l=m,a=d,c=y}return n},m=(e,t)=>{const n=[];if(!t.length)return null;const o=t[0];let l=r(e,o[0]),c=i(e,o[1]),u=a(e,o[2]),f=s(e,o[3]);n.push([l,c,u,f]);for(let h=1;h<t.length;h++){const[o,m,d,y]=t[h],p=r(e,o),g=i(e,m),b=a(e,d),M=s(e,y);p===l&&g===c&&b===u&&M===f||n.push([p-l,g-c,b,M]),l=p,c=g,u=b,f=M}return n};function d(e,t){let{scale:n,translate:o}=e;return t*n[0]+o[0]}function y(e,t){let{scale:n,translate:o}=e;return t*n[1]+o[1]}function p(e,t){let{scale:n,translate:o}=e;return(t??0)*n[2]+o[2]}function g(e,t){let{scale:n,translate:o}=e;return t?t*n[3]+o[3]:0}function b(e,t){return e&&t?C:e&&!t?w:!e&&t?k:M}const M=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const o=t[0];let l=d(e,o[0]),r=y(e,o[1]);n[0]=[l,r];const{scale:i,originPosition:a}=e,s=i[0],c="lowerLeft"===a?i[1]:-i[1];for(let u=1;u<t.length;u++){const[e,o]=t[u];l+=s*e,r+=c*o,n[u]=[l,r]}return n},w=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const o=t[0];let l=d(e,o[0]),r=y(e,o[1]);n[0]=[l,r,p(e,o[2])];const{scale:i,originPosition:a}=e,s=i[0],c="lowerLeft"===a?i[1]:-i[1];for(let u=1;u<t.length;u++){const[o,i,a]=t[u];l+=s*o,r+=c*i,n[u]=[l,r,p(e,a)]}return n},k=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const o=t[0];let l=d(e,o[0]),r=y(e,o[1]);n[0]=[l,r,g(e,o[2])];const{scale:i,originPosition:a}=e,s=i[0],c="lowerLeft"===a?i[1]:-i[1];for(let u=1;u<t.length;u++){const[o,i,a]=t[u];l+=s*o,r+=c*i,n[u]=[l,r,g(e,a)]}return n},C=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const o=t[0];let l=d(e,o[0]),r=y(e,o[1]);n[0]=[l,r,p(e,o[2]),g(e,o[3])];const{scale:i,originPosition:a}=e,s=i[0],c="lowerLeft"===a?i[1]:-i[1];for(let u=1;u<t.length;u++){const[o,i,a,f]=t[u];l+=s*o,r+=c*i,n[u]=[l,r,p(e,a),g(e,f)]}return n};function S(e,t,n){const o=new Array(n.length);for(let l=0;l<n.length;l++)o[l]=t(e,n[l]);return o}function L(e,t,n){const o=l(e);return t.x=r(o,n.x),t.y=i(o,n.y),null!=n.z&&(t.z=a(o,n.z)),null!=n.m&&(t.m=s(o,n.m)),t}function x(e,t,n){const o=function(e,t,n,o){const l=[],r=c(n,o);for(let i=0;i<t.length;i++){const n=r(e,t[i]);n&&n.length>=3&&l.push(n)}return l.length?l:null}(l(e),n.rings,n.hasZ,n.hasM);return o?(t.rings=o,t.hasZ=n.hasZ??!1,t.hasM=n.hasM??!1,t):null}function I(e,t,n){const o=function(e,t,n,o){const l=[],r=c(n,o);for(let i=0;i<t.length;i++){const n=r(e,t[i]);n&&n.length>=2&&l.push(n)}return l.length?l:null}(l(e),n.paths,n.hasZ,n.hasM);return o?(t.paths=o,t.hasZ=n.hasZ??!1,t.hasM=n.hasM??!1,t):null}function z(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n?.hasZ??!1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n?.hasM??!1;if(null!=n){const i=l(e);t.points=b(o,r)(i,n.points),t.hasZ=o,t.hasM=r}return t}function P(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!=n?.z,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!=n?.m;if(null==n)return t;const i=l(e);return t.x=d(i,n.x),t.y=y(i,n.y),o&&(t.z=p(i,n.z)),r&&(t.m=g(i,n.m)),t}function v(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n?.hasZ??!1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n?.hasM??!1;if(null!=n){const i=l(e);t.rings=S(i,b(o,r),n.rings),t.hasZ=o,t.hasM=r}return t}function A(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n?.hasZ??!1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n?.hasM??!1;if(null!=n){const i=l(e);t.paths=S(i,b(o,r),n.paths),t.hasZ=o,t.hasM=r}return t}},79906:(e,t,n)=>{n.d(t,{$d:()=>d,GG:()=>L,N7:()=>y,Sx:()=>p,UQ:()=>S,cJ:()=>g,di:()=>x,dt:()=>b,f3:()=>I,k_:()=>m});var o=n(88102),l=n(58828),r=(n(21265),n(16804)),i=n(28473),a=n(22250),s=n(44827),c=n(6135),u=n(76945),f=n(38602);const h=new o.default("white");function m(e){if(!e)return 0;if((0,f.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,r.PN)((0,c.$4)(e)?.width)}function d(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function y(e){return e.resource?.href??""}function p(e,t){if(!e)return null;let n=null;return(0,f.wk)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new o.default(n):null}(e):(0,f.$y)(e)&&(n="cim"===e.type?(0,s.getCIMSymbolColor)(e):e.color?new o.default(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new o.default(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new o.default(t)),(0,f.wk)(e)?function(e,t,n){const o=e.symbolLayers;if(!o)return;const l=e=>g(t=t??e??(null!=n?h:null),n);o.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=l(e.color);else{const t=null!=e.material?e.material.color:null,o=l(t);null==e.material?e.material=new u.N({color:o}):e.material.color=o,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n))}}))}(e,t,n):(0,f.$y)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function M(e,t){const o=e.symbolLayers;o&&await(0,l.jJ)(o,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=w(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=k(t,i.Un,[e.width,void 0,e.height]);e.width=C(t[0],e.width,1,n),e.height=C(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:o,symbolSize:l}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(28897).then(n.bind(n,28897)),o=await t(e,10),{width:l,height:r,depth:i}=e,a=[l,i,r];let s=1;for(let n=0;n<3;n++){const e=a[n];if(null!=e){s=e/o[n];break}}for(let n=0;n<3;n++)null==a[n]&&(a[n]=o[n]*s);return{resourceSize:o,symbolSize:a}}(e),r=k(t,o,l);e.width=C(t[0],l[0],o[0],r),e.depth=C(t[1],l[1],o[1],r),e.height=C(t[2],l[2],o[2],r)}(e,t)}}(e,t)))}function w(e){for(const t of e)if("number"==typeof t)return t;return null}function k(e,t,n){for(let o=0;o<3;o++){const l=e[o];switch(l){case"symbol-value":{const e=n[o];return null!=e?e/t[o]:1}case"proportional":break;default:if(l&&t[o])return l/t[o]}}return 1}function C(e,t,n,o){switch(e){case"proportional":return n*o;case"symbol-value":return null!=t?t:n;default:return e}}async function S(e,t){if(e&&t)return(0,f.wk)(e)?M(e,t):void((0,f.$y)(e)&&function(e,t){const n=w(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function L(e,t,n){if(e&&null!=t)if((0,f.wk)(e)){const o=e.symbolLayers;o&&o.forEach((e=>{if("object"===e.type)switch(n){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,f.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function x(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.zu)(t)}function I(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}}}]);