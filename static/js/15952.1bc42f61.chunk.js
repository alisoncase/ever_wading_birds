"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[13938,15952,40663,63044,93571,95644],{2925:(e,n,a)=>{a.d(n,{$:()=>k,IB:()=>u,Iy:()=>J,KV:()=>A,N2:()=>S,QP:()=>H,RH:()=>C,Vl:()=>D,Ws:()=>I,ZD:()=>M,_L:()=>L,bJ:()=>V,e$:()=>E,f6:()=>R,hw:()=>O,pW:()=>T,pf:()=>q,rs:()=>x,sn:()=>N,we:()=>$});var r=a(88102),i=a(62631),t=a(82301),l=a(64682),s=a(60548),o=a(24646);function u(e){return"r"in e&&"g"in e&&"b"in e}function c(e){return"h"in e&&"s"in e&&"v"in e}function p(e){return"l"in e&&"a"in e&&"b"in e}function f(e){return"l"in e&&"c"in e&&"h"in e}const d=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],m=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function h(e,n){const a=[];let r,i;if(e[0].length!==n.length)throw new Error("dimensions do not match");const t=e.length,l=e[0].length;let s=0;for(r=0;r<t;r++){for(s=0,i=0;i<l;i++)s+=e[r][i]*n[i];a.push(s)}return a}function g(e){const n=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),a=h(d,n);return{x:100*a[0],y:100*a[1],z:100*a[2]}}function y(e){const n=h(m,[e.x/100,e.y/100,e.z/100]).map((e=>{const n=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(n,0))}));return{r:Math.round(255*n[0]),g:Math.round(255*n[1]),b:Math.round(255*n[2])}}function w(e){const n=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*n[1]-16,a:500*(n[0]-n[1]),b:200*(n[1]-n[2])}}function b(e){const n=e.l,a=[(n+16)/116+e.a/500,(n+16)/116,(n+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*a[0],y:100*a[1],z:108.883*a[2]}}function v(e){return function(e){const n=e.l,a=e.a,r=e.b,i=Math.sqrt(a*a+r*r);let t=Math.atan2(r,a);return t=t>0?t:t+2*Math.PI,{l:n,c:i,h:t}}(w(g(e)))}function z(e){return y(b(function(e){const n=e.l,a=e.c,r=e.h;return{l:n,a:a*Math.cos(r),b:a*Math.sin(r)}}(e)))}function k(e){return u(e)?e:f(e)?z(e):p(e)?function(e){return y(b(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?y(e):c(e)?function(e){const n=(e.h+360)%360/60,a=e.s/100,r=e.v/100*255,i=r*a,t=i*(1-Math.abs(n%2-1));let l;switch(Math.floor(n)){case 0:l={r:i,g:t,b:0};break;case 1:l={r:t,g:i,b:0};break;case 2:l={r:0,g:i,b:t};break;case 3:l={r:0,g:t,b:i};break;case 4:l={r:t,g:0,b:i};break;case 5:case 6:l={r:i,g:0,b:t};break;default:l={r:0,g:0,b:0}}return l.r=Math.round(l.r+r-i),l.g=Math.round(l.g+r-i),l.b=Math.round(l.b+r-i),l}(e):e}function S(e){return c(e)?e:function(e){const n=e.r,a=e.g,r=e.b,i=Math.max(n,a,r),t=i-Math.min(n,a,r);let l=i,s=0===t?0:i===n?(a-r)/t%6:i===a?(r-n)/t+2:(n-a)/t+4,o=0===t?0:t/l;return s<0&&(s+=6),s*=60,o*=100,l*=100/255,{h:s,s:o,v:l}}(k(e))}function M(e){return p(e)?e:function(e){return w(g(e))}(k(e))}function C(e){return f(e)?e:v(k(e))}function x(e){return B(e).isBright?"light":"dark"}function B(e){let{r:n,g:a,b:i,a:t}=e;return t<1&&(n=Math.round(t*n+255*(1-t)),a=Math.round(t*a+255*(1-t)),i=Math.round(t*i+255*(1-t))),new r.default({r:n,g:a,b:i})}function I(e,n){const{r:a,g:r,b:i}=n?.ignoreAlpha?e:B(e);return.2126*a+.7152*r+.0722*i}var T,F;function V(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.High;return I(e,{ignoreAlpha:!0})>n?new r.default([0,0,0,e.a]):new r.default([255,255,255,e.a])}function E(e,n){const a=M(e);a.l*=1-n;const r=k(a),i=e.clone();return i.setColor(r),i.a=e.a,i}function L(e,n){const a=e.clone();return a.a*=n,a}function D(e,n){const a=S(e);a.s*=n;const r=k(a),i=e.clone();return i.setColor(r),i.a=e.a,i}function H(e){return r.default.toUnitRGBA(e)}function O(e,n){return e===n||null!=e&&e.equals(n)}function $(e,n){return e===n||null!=e&&null!=n&&(0,s.e)(e,n)}function q(e){return(0,o.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function A(e){return e[0]??=0,e[1]??=0,e[2]??=0,e}function N(e){return e.length=4,A(e),e[3]??=1,(0,l.qE)(e[3],0,1),e}function R(e,n){const a=r.default.toUnitRGBA(e);return a[3]*=n,a}function J(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===e.length||n<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new r.default(e):e))).length||1===n){const a=[],r=e[0];for(let e=0;e<n;e++)a.push(r.clone());return a}if(a.shuffle&&(e=(0,i.k4)((0,t.clone)(e),a.seed)),e.length>=n){const a=[],r=(e.length-1)/(n-1);for(let i=0;i<n;i++){const n=Math.round(i*r);a.push(e[n].clone())}return a}return function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[],t=e.length-1,l=Math.ceil((n-e.length)/t);e:for(let i=0;i<t;i++){const t=e[i],s=e[i+1];for(let i=1;i<=l;i++){const o=i/(l+1);if(r.push(_(t,s,o,a)),r.length+e.length===n)break e}}return[...e.map((e=>e.clone())),...(0,i.k4)(r,a.seed??1)]}(e,n,a)}(F=T||(T={}))[F.Low=160]="Low",F[F.High=225]="High";const P=(e,n)=>{const a=Math.floor(10*n())-5;return Math.min(255,Math.max(0,e+a))};function _(e,n,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const l=e.r,s=e.g,o=e.b,u=n.r,c=n.g,p=n.b,f=Math.round(l+(u-l)*a),d=Math.round(s+(c-s)*a),m=Math.round(o+(p-o)*a);if(!t.offset)return new r.default([f,d,m]);const h=(0,i.Mo)(t.seed);return new r.default([P(f,h),P(d,h),P(m,h)])}},15952:(e,n,a)=>{a.r(n),a.d(n,{createRenderer:()=>F,regenerateRenderer:()=>V,updateRenderer:()=>T});var r=a(2925),i=a(74719),t=a(82301),l=a(53957),s=a(45023),o=a(31696),u=a(75967),c=a(70183),p=a(66787),f=a(5926),d=a(40663),m=a(39569),h=a(85151),g=a(2938),y=a(87048),w=a(79906);const b=new Set(["equal-interval","natural-breaks","quantile"]),v=new Set(["HH","HL","LH","LL"]),z={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]},k={2:["L","H"],3:["L","M","H"],4:["L","M1","M2","H"]},S=e=>({minValue:e.minValue,maxValue:e.maxValue});async function M(e){if(!(e?.layer&&e.view&&e.field1&&e.field2))throw new i.default("relationship-renderer:missing-parameters","'layer', 'view', 'field1' and 'field2' parameters are required");e.forBinning&&(0,h.p)(e,"relationship-renderer");const n={...e,layer:e.layer,field1:e.field1,field2:e.field2};if(n.symbolType??="2d",n.defaultSymbolEnabled??=!0,n.classificationMethod??="quantile",n.numClasses??=3,n.focus??=null,!b.has(n.classificationMethod))throw new i.default("relationship-renderer:invalid-parameters",`classification method ${n.classificationMethod} is not supported`);if(n.numClasses<2||n.numClasses>4)throw new i.default("relationship-renderer:invalid-parameters","'numClasses' must be 2, 3 or 4");if(e.focus&&!v.has(e.focus))throw new i.default("relationship-renderer:invalid-parameters","'focus' must be 'HH', 'HL', 'LH', 'LL' or null");const a=e.forBinning?g.Mi:g.J4,r=(0,g.Jg)(n.layer,a,e.forBinning);if(!r)throw new i.default("relationship-renderer:invalid-parameters","'layer' must be one of these types: "+(0,g.Ho)(a).join(", "));const t=null!=n.signal?{signal:n.signal}:null;await r.load(t);const l=r.geometryType,s=n.symbolType.includes("3d");if(n.outlineOptimizationEnabled="polygon"===l&&n.outlineOptimizationEnabled,n.sizeOptimizationEnabled=("point"===l||"multipoint"===l||"polyline"===l)&&n.sizeOptimizationEnabled,"mesh"===l)n.symbolType="3d-volumetric",n.colorMixMode=n.colorMixMode||"replace",n.edgesType=n.edgesType||"none";else{if("3d-volumetric-uniform"===n.symbolType&&"point"!==l)throw new i.default("relationship-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(s&&"polygon"===l)throw new i.default("relationship-renderer:not-supported","3d symbols are not supported for polygon layers");if(n.symbolType.includes("3d-volumetric")&&(!n.view||"3d"!==n.view.type))throw new i.default("relationship-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'")}const{field1:o,field2:u}=n,c=[o.field,u.field];o.normalizationField&&c.push(o.normalizationField),u.normalizationField&&c.push(u.normalizationField);const p=(0,m.MH)(r,c,"relationship-renderer:invalid-parameters");if(p)throw p;return{...n,layer:r}}function C(e,n){const a=(0,t.clone)(z[e]);return(0,y.flatten2DArray)(a,n)}function x(e,n,a,r){const{field:i,normalizationField:t}=e,{field:l,normalizationField:s}=n,o=a.map((e=>[e.minValue,e.maxValue])),u=r.map((e=>[e.minValue,e.maxValue])),c=o.length,p=k[c];return`\n  var field1 = $feature['${i}'];\n  var field2 = $feature['${l}'];\n  var hasNormField1 = ${t?"true":"false"};\n  var hasNormField2 = ${s?"true":"false"};\n  var normField1 = ${t?`$feature['${t}']`:"null"};\n  var normField2 = ${s?`$feature['${s}']`:"null"};\n\n  if (\n    IsEmpty(field1) ||\n    IsEmpty(field2) ||\n    (hasNormField1 && (IsEmpty(normField1) || normField1 == 0)) ||\n    (hasNormField2 && (IsEmpty(normField2) || normField2 == 0))\n  ) {\n    return null;\n  }\n\n  var value1 = IIf(hasNormField1, (field1 / normField1), field1);\n  var value2 = IIf(hasNormField2, (field2 / normField2), field2);\n\n  var breaks1 = ${JSON.stringify(o)};\n  var breaks2 = ${JSON.stringify(u)};\n  var classCodes = ${JSON.stringify(p)};\n\n  function getClassCode(value, breaks) {\n    var code = null;\n\n    for (var i in breaks) {\n      var info = breaks[i];\n      if (value >= info[0] && value <= info[1]) {\n        code = classCodes[i];\n        break;\n      }\n    }\n\n    return code;\n  }\n\n  var code1 = getClassCode(value1, breaks1);\n  var code2 = getClassCode(value2, breaks2);\n\n  var classValue = IIf(IsEmpty(code1) || IsEmpty(code2), null, code1 + code2);\n  return classValue;\n  `}async function B(e,n,a){const r=await(0,l.ud)("esri/smartMapping/t9n/smartMapping"),{basemap:t,classificationMethod:c,field1:p,field2:d,focus:h,numClasses:g,signal:w}=e,b=e.layer,v=n.classBreakInfos,z=a.classBreakInfos;if(g!==v.length||v.length!==z.length)throw new i.default("relationship-renderer:error","incompatible class breaks");const k=function(e,n){return C(e,n).map((e=>({value:e,count:0})))}(g,h),S=x(e.field1,e.field2,v,z),M=(await async function(e){let n=e.relationshipScheme,a=null,r=null;const i=await(0,m.Ib)(e.basemap,e.view);if(a=null!=i.basemapId?i.basemapId:null,r=null!=i.basemapTheme?i.basemapTheme:null,n)return{scheme:(0,y.cloneScheme)(n),basemapId:a,basemapTheme:r};const t=(0,y.getSchemes)({basemapTheme:r,geometryType:e.geometryType,theme:e.theme,worldScale:e.worldScale,view:e.view});return t&&(n=t.primaryScheme,a=t.basemapId,r=t.basemapTheme),{scheme:n,basemapId:a,basemapTheme:r}}({basemap:t,geometryType:b.geometryType,theme:"default",relationshipScheme:e.relationshipScheme,worldScale:!!e.symbolType?.includes("3d-volumetric"),view:e.view})).scheme,B=await(0,f.createRenderer)({layer:b,basemap:t,valueExpression:S,valueExpressionTitle:r.relationship.legendTitle,numTypes:-1,sortEnabled:!1,defaultSymbolEnabled:e.defaultSymbolEnabled,typeScheme:{colors:(0,y.getColors)(M,g,h),...M},statistics:{uniqueValueInfos:k},legendOptions:e.legendOptions,outlineOptimizationEnabled:e.outlineOptimizationEnabled,sizeOptimizationEnabled:e.sizeOptimizationEnabled,symbolType:e.symbolType,colorMixMode:e.colorMixMode,edgesType:e.edgesType,filter:e.filter,view:e.view,signal:w}),I=B.renderer,T=I.uniqueValueInfos,F=r.relationship;for(const i of T??[])i.label=F[i.value];const V=new s.default({type:"relationship",classificationMethod:c,numClasses:g,focus:h,field1:new u.K({field:p.field,normalizationField:p.normalizationField,label:p.label,classBreakInfos:v.map((e=>{let{minValue:n,maxValue:a}=e;return new o.n({minValue:n,maxValue:a})}))}),field2:new u.K({field:d.field,normalizationField:d.normalizationField,label:d.label,classBreakInfos:z.map((e=>{let{minValue:n,maxValue:a}=e;return new o.n({minValue:n,maxValue:a})}))})});return I.authoringInfo=V,{renderer:I,classBreaks:{field1:n,field2:a},uniqueValueInfos:B.uniqueValueInfos,relationshipScheme:M,basemapId:B.basemapId,basemapTheme:B.basemapTheme}}async function I(e){const{layer:n,classificationMethod:a,field1:r,field2:t,numClasses:l,filter:s,view:o,signal:u}=e,c={layer:n,classificationMethod:a,field:r.field,normalizationField:r.normalizationField,normalizationType:r.normalizationField?"field":null,minValue:r.minValue,maxValue:r.maxValue,analyzeData:!(null!=r.minValue&&null!=r.maxValue),numClasses:l,filter:s,view:o,signal:u},p={layer:n,classificationMethod:a,field:t.field,normalizationField:t.normalizationField,normalizationType:t.normalizationField?"field":null,minValue:t.minValue,maxValue:t.maxValue,analyzeData:!(null!=t.minValue&&null!=t.maxValue),numClasses:l,filter:s,view:o,signal:u},[f,d]=await Promise.all([(0,m.Pv)(c),(0,m.Pv)(p)]);if(!f||!d)throw new i.default("relationship-renderer:error","error when calculating class breaks");return{field1:f.result,field2:d.result}}async function T(e){const n=await async function(e){if(!e?.renderer||!e.numClasses)throw new i.default("update-relationship-renderer:missing-parameters","'renderer' and 'numClasses' parameters are required");const{field1:n,field2:a,renderer:r,numClasses:t,colors:l}=e,s=t**2;if((n||a)&&!(n&&a&&n.field&&a.field))throw new i.default("update-relationship-renderer:missing-parameters","'field1' and 'field2' parameters are required");if(n&&!n.classBreakInfos||a&&!a.classBreakInfos)throw new i.default("update-relationship-renderer:missing-parameters","'field1.classBreakInfos' and 'field2.classBreakInfos' are required");if(!r.authoringInfo)throw new i.default("update-relationship-renderer:missing-parameters","'renderer.authoringInfo' is required");if(r.uniqueValueInfos?.length!==s)throw new i.default("update-relationship-renderer:invalid-parameters",`Renderer must have ${s} unique value infos to support ${t} classes`);if(l&&l.length!==s)throw new i.default("update-relationship-renderer:invalid-parameters",`The scheme must have ${s} colors`);return e}(e),{field1:a,field2:t,renderer:l,numClasses:c,focus:p,colors:f}=n,d=l.clone();d.valueExpression=x(a,t,a.classBreakInfos,t.classBreakInfos);const m=d.uniqueValueInfos??[];if(function(e,n,a){const r=C(n,a);e.sort(((e,n)=>{const a=r.indexOf(e.value),i=r.indexOf(n.value);let t=0;return a<i?t=-1:a>i&&(t=1),t}))}(m,c,p),f){const e=(0,r.Iy)(f,f.length);m.forEach(((n,a)=>(0,w.dt)(n.symbol,e[a])))}return function(e,n){e.authoringInfo??=new s.default;const a=e.authoringInfo;a.numClasses=n.numClasses,a.focus=n.focus||null,a.focus||delete a.focus;const{field1:r,field2:i}=n;a.field1=new u.K({field:r.field,normalizationField:r.normalizationField,label:r.label,classBreakInfos:r.classBreakInfos.map((e=>new o.n(S(e))))}),a.field2=new u.K({field:i.field,normalizationField:i.normalizationField,label:i.label,classBreakInfos:i.classBreakInfos.map((e=>new o.n(S(e))))}),e.authoringInfo=a}(d,n),d}async function F(e){const n=await M(e),{field1:a,field2:r}=await I(n);return B(n,a,r)}async function V(e){const{creatorParameters:n,view:a,signal:r,filter:t,renderer:l}=await async function(e){const n="regenerate-relationship-renderer";await(0,d.AC)(e,n);const a=await(0,d.mE)(e),r=(0,d.UJ)(a);if(!r||!["relationship","relationship-size"].includes(r))throw new i.default(`${n}:invalid-parameters`,"Renderer is invalid");const{layer:t,forBinning:l,filter:s,view:o,signal:u}=e,c=(0,d.DW)(a),p=(0,d.Rv)(a),{field1:f,field2:m,classificationMethod:h,focus:g,numClasses:y}=a.authoringInfo,w={field:f.field,normalizationField:f.normalizationField,label:f.label},b={field:m.field,normalizationField:m.normalizationField,label:m.label},v=await M({layer:t,field1:w,field2:b,classificationMethod:h,numClasses:y,focus:g,outlineOptimizationEnabled:c,sizeOptimizationEnabled:p,forBinning:l,filter:s,view:o,signal:u});return{...e,creatorParameters:v,renderer:a}}(e),{layer:s,field1:o,field2:u,numClasses:f,focus:h,outlineOptimizationEnabled:g,sizeOptimizationEnabled:y}=n,{field1:w,field2:b}=await I(n),[v,z,k]=await Promise.all([T({field1:{...o,classBreakInfos:w.classBreakInfos},field2:{...u,classBreakInfos:b.classBreakInfos},renderer:l,numClasses:f,focus:h}),g?(0,c.A)({layer:s,view:a,signal:r,filter:t}).catch(m.ou):null,y?(0,p.default)({layer:s,view:a,signal:r,filter:t}).catch(m.ou):null]);return(0,d.ke)(v,z?.visualVariables,d._i),(0,d.ke)(v,k?.minSize,d.kc),{renderer:v}}},28245:(e,n,a)=>{a.d(n,{bG:()=>l,Ty:()=>o,YJ:()=>u,Fq:()=>c,vt:()=>s});var r=a(82301),i=a(79538);class t{constructor(e){const{name:n,label:a,description:r,schemes:t}=e;this.name=n,this.label=a,this.description=r,this.schemes=t;const l=e.basemapGroups||i.Np;let s=[];Object.keys(l).forEach((e=>{s=s.concat(l[e])})),this.supportedBasemaps=s,this.basemapGroups=l}isBasemapSupported(e){const n=(0,i.T1)(e,this.supportedBasemaps);return!(!n||!this.supportedBasemaps.includes(n))}getRawSchemes(e){const{basemapId:n,basemapTheme:a}=function(e,n,a){let r=null,t=null;if(n&&(r=(0,i.T1)(n,e,!1),r)){const e=(0,i.BV)(r);null!=e&&(t=e)}return!r&&a&&(r="dark"===a?"dark-gray":"gray",t=a),r||t||(r="gray",t="light"),{basemapId:r,basemapTheme:t}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let t=a;if(n){const e=(0,i.BV)(n,this.basemapGroups);null!=e&&(t=e)}let l=e.geometryType;"multipoint"===l?l="point":"mesh"===l&&(l="polygon");const s=this.schemes[l]||this.schemes.default;return{schemesInfo:(0,r.clone)(s[t]),basemapId:n,basemapTheme:a}}}function l(e){const n=e.themeDictionary,a=new Map;for(const r in n){const e=n[r];a.set(r,new t(e))}return a}function s(e,n){const a=[];return e.forEach((e=>{e.isBasemapSupported(n)&&a.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),a}function o(e,n){if(!e)return;if(!n)return;let a=null;const r=[n.primaryScheme,...n.secondarySchemes];for(const i of r)if(i.name?.toLowerCase()===e.toLowerCase()){a=i;break}return a}function u(e,n,a){if(!e&&!n)return[];if(!a)return[];const r=!e?.length,i=!n?.length,t=[a.primaryScheme,...a.secondarySchemes],l=[];for(const s of t){const a=!!r||e.some((e=>s.tags.includes(e))),t=!i&&n.some((e=>s.tags.includes(e)));a&&!t&&l.push(s)}return l}function c(e){const n=e.theme;if(n)return n.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},30178:(e,n,a)=>{a.r(n),a.d(n,{default:()=>w});var r=a(74719),i=a(11099),t=a(46176),l=a(85151),s=a(2938);const o=500,u=1e8,c=1280,p=12,f=30,d=15;async function m(e){const{view:n,sampleSize:a}=e;if(!e||!e.layer)throw new r.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!n)throw new r.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,l.p)(e,"scale-range");const{layer:i,...t}=e,u=e.forBinning?s.Mi:s.J4,c=(0,s.Jg)(i,u,e.forBinning);if(!c)throw new r.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,s.Ho)(u).join(", "));const p={layerAdapter:c,...t};p.sampleSize=a||o,await(n?.when());const f=null!=p.signal?{signal:p.signal}:null;return await c.load(f),p}function h(e,n,a){const r=function(e,n){const a=p,r=c/4,i=f,t=c/4,l=d,s=c/2;let o=0,u=0,m=0,h=0;switch(e){case"point":case"multipoint":{const e=n;o=e.avgMinDistance??0,u=a,m=e.minDistance??0,h=r;break}case"polyline":{const e=n;o=e.avgLength??0,u=i,m=e.minLength??0,h=t;break}case"polygon":{const e=n;o=e.avgSize??0,u=l,m=e.minSize??0,h=s;break}}return{resolutionForMinScale:o>0?o/u:null,resolutionForMaxScale:m>0?m/h:null}}(e.geometryType,n),t=a?.spatialReference||e.layer.spatialReference;return{minScale:(0,i.gB)(r.resolutionForMinScale??0,t),maxScale:(0,i.gB)(r.resolutionForMaxScale??0,t)}}function g(e,n){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const r=e.constraints.effectiveLODs,i=a?r:r.slice().reverse();let t=null;for(const e of i)if(!(a?e.scale>n:e.scale<n)){t=e;break}return t}}function y(e,n,a,i){const{view:t,snapToLOD:l,layerAdapter:s}=e;if(l&&t){const e=g(t,n),r=g(t,a,!1);n=e?e.scale:n,a=r?r.scale:a}if(n<a)throw new r.default("scale-range:invalid","calculated minScale is less than maxScale.");return a>n/2&&(a=Math.floor(a/2)),n>u&&(n=0),"polygon"!==s.geometryType&&(a=0),{minScale:Math.ceil(n),maxScale:Math.floor(a),spatialStatistics:i}}async function w(e){const n=await m(e),{view:a,sampleSize:i,layerAdapter:l,signal:s,filter:o}=n,u=await l.getSampleFeatures({view:a,sampleSize:i,returnGeometry:!0,filter:o,signal:s},"json");if(!u?.length)throw new r.default("scale-range:insufficient-info","No features are available to calculate statistics");const c=await(0,t.A)({features:u,geometryType:l.geometryType}),{minScale:p,maxScale:f}=h(l,c,a);return y(n,p,f,c)}},40663:(e,n,a)=>{a.d(n,{AC:()=>i,DW:()=>o,Hj:()=>z,Ih:()=>h,Jy:()=>p,OW:()=>y,Rv:()=>u,UJ:()=>s,_i:()=>c,d8:()=>d,fs:()=>f,kc:()=>m,ke:()=>v,mE:()=>t,wx:()=>l});var r=a(74719);async function i(e,n){const{layer:a,view:i,forBinning:t,filter:l}=e;if(!a||!i)throw new r.default(`${n}:missing-parameters`,"'layer' and 'view' parameters are required");await a.load();const s="featureReduction"in a?a.featureReduction:null;if(t){if("binning"!==s?.type)throw new r.default(`${n}:invalid-parameters`,"'layer' must have 'featureReduction' property defined with 'binning' type when 'forBinning' parameter is true");if(l)throw new r.default(`${n}:invalid-parameters`,"'filter' parameter is not supported when 'forBinning' parameter is true")}return e}async function t(e){const{layer:n,forBinning:a,renderer:i}=e;await n.load();const t="featureReduction"in n?n.featureReduction:null,l=i?.clone()??(a&&"binning"===t?.type?t?.renderer?.clone():"renderer"in n?n.renderer?.clone():null);if(!l)throw new r.default("get-renderer-to-update:invalid-parameters","renderer not available");return l}function l(e,n,a){const r=e?.authoringInfo?.visualVariables;return r?.find((e=>"reference-size"===a?e.type===n&&"reference-size"===e.theme:e.type===n))}function s(e){if(!e)return null;const n=e.type,a="visualVariables"in e?e.visualVariables:null,r=a?.find(h),i=a?.find(y),t=e.authoringInfo,s=l(e,"color"),o=l(e,"size"),u=l(e,"size","reference-size");if("class-breaks"===n){if("univariate-color-size"===t?.type)return"univariate-color-size";if(r)return i?o?.units?"color-size-age":s?.units?"color-age-size":"color-size":s?.units?"color-age":u?"color-size":"color-continuous";if(i)return o?.units?"size-age":"size-continuous";if(e.classBreakInfos.length>1)return"class-breaks-color"===t?.type?"color-class-breaks":"class-breaks-size"===t?.type?"size-class-breaks":null;if(u)return"size-continuous"}return"unique-value"===n?e.valueExpression?"predominance"===t?.type?"predominance":"relationship"===t?.type?i||u?"relationship-size":"relationship":i||u?"type-size":"type":i?o?.units?"type-size-age":"type-size":u?"type-size":"type":"pie-chart"===n?"pie-chart":"dot-density"===n?"dot-density":null}function o(e){return!!e.visualVariables?.some(w)}function u(e){return!!e.visualVariables?.some(b)}function c(e){return e?.findIndex(w)??-1}function p(e){return e?.findIndex(y)??-1}function f(e){return e?.findIndex(h)??-1}function d(e){return e?.findIndex(g)??-1}function m(e){return e?.findIndex(b)??-1}function h(e){return"color"===e.type}function g(e){return"opacity"===e.type}function y(e){return"size"===e.type&&"outline"!==e.target&&"$view.scale"!==e.valueExpression}function w(e){return"size"===e.type&&"outline"===e.target}function b(e){return"size"===e.type&&"$view.scale"===e.valueExpression&&"outline"!==e.target&&Array.isArray(e.stops)}function v(e,n,a){const r=e.visualVariables,i=a(r);if(!n||Array.isArray(n)&&!n.length)return;Array.isArray(n)||(n=[n]);const t=n.map((e=>e.clone()));r?i>-1?r.splice(i,1,...t):r.push(...t):e.visualVariables=t}function z(e,n,a){const r=n?.visualVariables.find((e=>e.type===a)),i=l(e,a);i&&r&&(i.minSliderValue=r.minSliderValue,i.maxSliderValue=r.maxSliderValue,"size"===a&&"reference-size"===i.theme&&(i.sizeStops=r.sizeStops?.map((e=>e.clone())),i.referenceSizeScale=r.referenceSizeScale))}},42648:(e,n,a)=>{a.d(n,{_J:()=>u,_t:()=>o});var r=a(16804),i=a(79538);const t=i.Np.light,l=i.Np.dark;function s(e,n){return e.r===n.r&&e.g===n.g&&e.b===n.b}function o(e,n){let a=0;if(e.length===n.length){let r=e.every(((e,a)=>s(e,n[a])));r?a=1:(r=e.slice().reverse().every(((e,a)=>s(e,n[a]))),r&&(a=-1))}return a}function u(e,n){return Math.ceil(function(e){const n=e.width,a=e.height;let i=e.pixelSizeAt(e.toMap((0,r.tc)(.5*n,.5*a),{exclude:[]}));if(i<=0&&(i=e.pixelSizeAt(e.toMap((0,r.tc)(.5*n,.95*a),{exclude:[]})),i<=0&&"camera"in e)){const n=e.camera.position.clone();n.z=0,i=2*e.pixelSizeAt(n)}return i}(n)*(0,r.Lz)((0,r.cr)(e)))}},66787:(e,n,a)=>{a.r(n),a.d(n,{default:()=>k});a(21265);var r=a(74719),i=a(16804),t=a(11099),l=a(56563),s=a(81467),o=a(30178),u=a(85151),c=a(2938);const p=1e8,f=1128.497176,d=591657527.591555,m=[10,8,4,2],h=[100,100,60,30],g=[2,1,.75,.5],y=[32,18,12,6],w=[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.51696399994,scale:295828763.795777},{level:2,resolution:39135.75848200009,scale:147914381.897889},{level:3,resolution:19567.87924099992,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];function b(e,n){const{view:a}=e;if(!a)throw new r.default("scale-range:invalid-parameters","'view' is required");const i=n.minScale||p,t=a.constraints&&"effectiveLODs"in a.constraints&&a.constraints.effectiveLODs||w,l=[];for(let r=0;r<t.length;r++){if(t[r].scale>i)continue;const e=Number(r),n=[e-3,e,e+3,e+6];for(const a of n)a>-1&&a<t.length&&l.push(t[a].scale);break}return l.sort(((e,n)=>e-n))}function v(e,n){const{view:a,layerAdapter:i}=e;if(!a)throw new r.default("scale-range:invalid-parameters","'view' is required");const l=i.fullExtent,s=i.minScale||f,o=i.maxScale||d,u=n.minScale||0,c=n.maxScale||0;let p=null!=l?(0,t.X_)(a,l):0;return p=p<s&&p>o?p:0,{scales:[s,o,u,c,p].map(Math.round).sort(((e,n)=>e-n)).filter(((e,n,a)=>!!e&&a.indexOf(e)===n)).filter(((e,n,a)=>!n||Math.abs(e-a[n-1])>5)),fullExtentScale:p}}function z(e,n){const{spatialStatistics:a,minScale:t,maxScale:o}=n;if(!("avgSize"in a)||!a.avgSize)throw new r.default("size-range:insufficient-info","average polygon size is invalid");const u=a.avgSize,{view:c}=e;if(!c)throw new r.default("scale-range:invalid-parameters","'view' is required");const{resolution:p,scale:f}=c,d=p/f,{scales:m,fullExtentScale:h}=v(e,{minScale:t,maxScale:o}),g=[],y=[];return m.forEach(((e,n)=>{const{min:a,max:r}=function(e,n){const a=Math.ceil(e/n);let r=Math.ceil(a/4);r<4?r=4:r>16&&(r=16);const i=5*r;return{min:r,max:i<50?50:i}}(u,d*e),t=m.indexOf(h),l=t>-1&&n>t?2:1;g.push(new s.default({value:e,size:(0,i.PN)(a/l)})),y.push(new s.default({value:e,size:(0,i.PN)(r/l)}))})),{minSize:new l.default({valueExpression:"$view.scale",stops:g}),maxSize:new l.default({valueExpression:"$view.scale",stops:y})}}async function k(e){const n=await async function(e){const{view:n}=e;if(!(e&&n&&e.layer))throw new r.default("size-range:missing-parameters","'view' and 'layer' parameters are required");e.forBinning&&(0,u.p)(e,"size-range");const{layer:a,...i}=e,t=e.forBinning?c.Mi:c.J4,l=(0,c.Jg)(a,t,e.forBinning);if(!l)throw new r.default("size-range:invalid-parameters","'layer' must be one of these types: "+(0,c.Ho)(t).join(", "));const s={layerAdapter:l,...i,view:n};await n.when();const o=null!=s.signal?{signal:s.signal}:null;await l.load(o);const p=l.geometryType;if("point"!==p&&"multipoint"!==p&&"polyline"!==p&&"polygon"!==p)throw new r.default("size-range:not-supported",`sizeRange is not supported for geometryType: ${p}`);return s}(e),{view:a,layerAdapter:t,signal:p,filter:f}=n,d=await(0,o.default)({layer:t,view:a,signal:p,filter:f});switch(t.geometryType){case"point":case"multipoint":return function(e,n){const{minScale:a,maxScale:t}=n,o=b(e,{minScale:a,maxScale:t});if(!o.length)throw new r.default("scale-range:insufficient-info","not enough scale values");return{minSize:new l.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new s.default({value:e,size:(0,i.PN)(m[n])})))}),maxSize:new l.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new s.default({value:e,size:(0,i.PN)(h[n])})))})}}(n,d);case"polyline":return function(e,n){const{minScale:a,maxScale:t}=n,o=b(e,{minScale:a,maxScale:t});if(!o.length)throw new r.default("scale-range:insufficient-info","not enough scale values");return{minSize:new l.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new s.default({value:e,size:(0,i.PN)(g[n])})))}),maxSize:new l.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new s.default({value:e,size:(0,i.PN)(y[n])})))})}}(n,d);case"polygon":return z(n,d);case"mesh":case"multipatch":return null}return null}},87048:(e,n,a)=>{a.r(n),a.d(n,{cloneScheme:()=>y,flatten2DArray:()=>w,flipColors:()=>v,getColors:()=>b,getMatchingSchemes:()=>z,getSchemeByName:()=>h,getSchemes:()=>m,getSchemesByTag:()=>g,getThemes:()=>d});var r=a(88102),i=a(62631),t=a(82301),l=a(43073),s=a(28245),o=a(42648);const u={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},c={lightBasemaps:{primary:"relationship-blue-orange-brown",secondary:["relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green","relationship-blue-red-pink","relationship-blue-green-brightgreen","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal"]},darkBasemaps:{primary:"relationship-blue-green-brightgreen",secondary:["relationship-blue-red-pink","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal","relationship-blue-orange-brown","relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green"]}},p="#aaaaaa",f=(0,s.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features based on relationship between two attributes.",schemes:{point:{light:{common:{noDataColor:p,outline:u.light,size:"8px"},primary:c.lightBasemaps.primary,secondary:c.lightBasemaps.secondary},dark:{common:{noDataColor:p,outline:u.darker,size:"8px"},primary:c.darkBasemaps.primary,secondary:c.darkBasemaps.secondary}},polyline:{light:{common:{noDataColor:p,width:"2px"},primary:c.lightBasemaps.primary,secondary:c.lightBasemaps.secondary},dark:{common:{noDataColor:p,width:"2px"},primary:c.darkBasemaps.primary,secondary:c.darkBasemaps.secondary}},polygon:{light:{common:{noDataColor:p,outline:u.light,fillOpacity:.8},primary:c.lightBasemaps.primary,secondary:c.lightBasemaps.secondary},dark:{common:{noDataColor:p,outline:u.dark,fillOpacity:.8},primary:c.darkBasemaps.primary,secondary:c.darkBasemaps.secondary}}}}}});function d(e){return(0,s.vt)(f,e)}function m(e){const n=(0,s.Fq)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:f.get("default")});if(!n)return;const{schemesInfo:a,basemapId:r,basemapTheme:t}=n,l={...e,basemap:r};return{primaryScheme:C(l,a.primary,a.common),secondarySchemes:a.secondary.map((e=>C(l,e,a.common))).filter(i.Ru),basemapId:r,basemapTheme:t}}function h(e){return(0,s.Ty)(e.name,m(e))}function g(e){return(0,s.YJ)(e.includedTags,e.excludedTags,m(e))}function y(e){if(!e)return;const n={...e};return n.colorsForClassBreaks=n.colorsForClassBreaks.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new r.default(e)))))}))),n.tags=[...n.tags],n.noDataColor&&(n.noDataColor=new r.default(n.noDataColor)),"outline"in n&&n.outline&&(n.outline={color:n.outline.color&&new r.default(n.outline.color),width:n.outline.width}),n}function w(e,n){e=(0,t.clone)(e);let a=[];const r=(n||"HH").split(""),i=r[0],l=r[1];"L"===i&&e.reverse();const s="H"===l;return e.forEach((e=>{s&&e.reverse(),a=a.concat(e)})),a}function b(e,n,a){let i;return e.colorsForClassBreaks.some((e=>(e.numClasses===n&&(i=e.colors),!!i))),i=i?.map((e=>e.map((e=>new r.default(e))))),i?w(i,a):null}function v(e,n){const a=n?e:y(e);return a.colorsForClassBreaks.forEach((e=>{const n=e.colors.reverse(),a=[];for(let r=0;r<e.numClasses;r++){const e=[];n.forEach((n=>{e.push(n[r])})),a.push(e)}e.colors=a})),a}function z(e){const n=e.theme||"default",a=e.geometryType,r=e.colors,i=e.numClasses,t=f.get(n);if(!t)return[];const l=t.supportedBasemaps,s=[];return l.forEach((e=>{const t=m({theme:n,basemap:e,geometryType:a});if(t){let e=M(t.primaryScheme,r,i);e&&s.push(e),t.secondarySchemes.forEach((n=>{e=M(n,r,i),e&&s.push(e)}))}})),s}function k(e,n,a,r){let i;const t=b(e,a,r);return t&&1===(0,o._t)(n,t)&&(i=e),i}function S(e,n,a,r){let i,t=1;do{i=k(e,n,a,r),i||(e=v(e),t++)}while(!i&&t<=4);return i}function M(e,n,a){return S(e,n,a,"HH")||S(e,n,a,"HL")||S(e,n,a,"LH")||S(e,n,a,"LL")}function C(e,n,a){const i="mesh"!==e.geometryType&&e.worldScale?e.view:null,t=l.A[n],s=e.theme||"default";if(!t)return;const u=s+"/"+e.basemap+"/"+n,c=[];for(const r in t)if("stops"!==r&&"name"!==r&&"tags"!==r){const e=+r,n=t[r];c.push({numClasses:e,colors:n})}switch(e.geometryType){case"point":case"multipoint":{const e=a;return function(e,n){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new r.default(e.noDataColor),outline:{color:new r.default(e.outline.color),width:e.outline.width},size:n?(0,o._J)(e.size,n):e.size,opacity:e.opacity}}({id:u,name:t.name,tags:t.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,outline:e.outline,size:e.size},i)}case"polyline":{const e=a;return function(e,n){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new r.default(e.noDataColor),opacity:e.opacity,width:n?(0,o._J)(e.width,n):e.width}}({id:u,name:t.name,tags:t.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,width:e.width},i)}case"polygon":{const e=a;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new r.default(e.noDataColor),outline:{color:new r.default(e.outline.color),width:e.outline.width},opacity:e.opacity}}({id:u,name:t.name,tags:t.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline})}case"mesh":{const e=a;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new r.default(e.noDataColor),opacity:e.opacity}}({id:u,name:t.name,tags:t.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity})}}}function x(e){return e.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new r.default(e)))))})))}}}]);