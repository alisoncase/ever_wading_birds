"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[25084,59579,88824],{605:(e,t,r)=>{r.d(t,{_:()=>n});class n{constructor(e,t,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=e,this.count=t,this.type=r,this.offset=n,this.stride=i,this.normalized=s,this.divisor=o}}},22131:(e,t,r)=>{var n;function i(e){return e===n.POSITION}r.d(t,{b:()=>i,r:()=>n}),function(e){e.POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.ROTATION="rotation",e.TANGENT="tangent",e.OFFSET="offset",e.PERSPECTIVEDIVIDE="perspectiveDivide",e.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",e.LENGTH="length",e.PREVPOSITION="prevPosition",e.NEXTPOSITION="nextPosition",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.INSTANCEMODELORIGINHI="instanceModelOriginHi",e.INSTANCEMODELORIGINLO="instanceModelOriginLo",e.INSTANCEMODEL="instanceModel",e.INSTANCEMODELNORMAL="instanceModelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMAL2COMPRESSED="normal2Compressed",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.START_UP="startUp",e.END_UP="endUp",e.EXTRUDE="extrude",e.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(n||(n={}))},25084:(e,t,r)=>{r.d(t,{EdgeInputBufferLayout:()=>o,In:()=>d,gr:()=>l,vG:()=>u,vJ:()=>a,wO:()=>c});var n=r(66458),i=r(98876),s=r(22131);const o=(0,i.BP)().vec3f(s.r.POSITION).u16(s.r.COMPONENTINDEX).freeze(),a=(0,i.BP)().vec2u8(s.r.SIDENESS).freeze(),c=(0,n.U)(a),l=(0,i.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),d=(0,i.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).vec2i16(s.r.NORMAL2COMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),u=new Map([[s.r.POSITION0,0],[s.r.POSITION1,1],[s.r.COMPONENTINDEX,2],[s.r.VARIANTOFFSET,3],[s.r.VARIANTSTROKE,4],[s.r.VARIANTEXTENSION,5],[s.r.NORMALCOMPRESSED,6],[s.r.NORMAL2COMPRESSED,7],[s.r.SIDENESS,8]])},28983:(e,t,r)=>{r.d(t,{b:()=>s});var n=r(64682),i=r(55239);function s(e,t,r){const s=Array.isArray(e),d=s?e.length/t:e.byteLength/(4*t),u=s?e:new Uint32Array(e,0,d*t),h=r?.minReduction??0,f=r?.originalIndices||null,p=f?f.length:0,g=r?.componentOffsets||null;let y=0;if(g)for(let n=0;n<g.length-1;n++){const e=g[n+1]-g[n];e>y&&(y=e)}else y=d;const A=Math.floor(1.1*y)+1;(null==l||l.length<2*A)&&(l=new Uint32Array((0,n.cU)(2*A)));for(let n=0;n<2*A;n++)l[n]=0;let E=0;const _=!!g&&!!f,w=_?p:d;let v=(0,i.my)(d);const S=new Uint32Array(p),m=1.96;let I=0!==h?Math.ceil(4*m*m/(h*h)*h*(1-h)):w,O=1,N=g?g[1]:w;for(let n=0;n<w;n++){if(n===I){const e=1-E/n;if(e+m*Math.sqrt(e*(1-e)/n)<h)return null;I*=2}if(n===N){for(let e=0;e<2*A;e++)l[e]=0;if(f)for(let e=g[O-1];e<g[O];e++)S[e]=v[f[e]];N=g[++O]}const e=_?f[n]:n,r=e*t,i=c(u,r,t);let s=i%A,a=E;for(;0!==l[2*s+1];){if(l[2*s]===i){const e=l[2*s+1]-1;if(o(u,r,e*t,t)){a=v[e];break}}s++,s>=A&&(s-=A)}a===E&&(l[2*s]=i,l[2*s+1]=e+1,E++),v[e]=a}if(0!==h&&1-E/d<h)return null;if(_){for(let e=g[O-1];e<S.length;e++)S[e]=v[f[e]];v=(0,i.Dg)(S)}const T=s?new Array(E):new Uint32Array(E*t);E=0;for(let n=0;n<w;n++)v[n]===E&&(a(u,(_?f[n]:n)*t,T,E*t,t),E++);if(f&&!_){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=v[f[t]];v=(0,i.Dg)(e)}return{buffer:Array.isArray(T)?T:T.buffer,indices:v,uniqueCount:E}}function o(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function a(e,t,r,n,i){for(let s=0;s<i;s++)r[n+s]=e[t+s]}function c(e,t,r){let n=0;for(let i=0;i<r;i++)n=e[t+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let l=null},34431:(e,t,r)=>{r.d(t,{L:()=>i,s:()=>s});var n=r(98876);function i(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:new n.l5(e.layout)}}function s(e){return new n.q3(e.layout).createView(e.buffer)}},40684:(e,t,r)=>{r.d(t,{C:()=>o});var n=r(72248),i=r(10252),s=r(73530);class o extends i.w{constructor(e){super({...e,constraint:new n.i7(e.targetPoint)})}get hints(){return[new s._(this.targetPoint,this.isDraped,this.domain)]}}},46576:(e,t,r)=>{r.d(t,{AK:()=>a,Wz:()=>o,oe:()=>i,p_:()=>s});var n=r(25048);function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e<=n.y9?t?new Array(e).fill(0):new Array(e):new Float32Array(e)}function s(e){return Array.isArray(e)?e.length<n.y9?e:new Float32Array(e):e.length<n.y9?Array.from(e):e}function o(e){return(Array.isArray(e)?e.length:e.byteLength/8)<=n.y9?Array.from(e):new Float32Array(e)}function a(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}},55239:(e,t,r)=>{r.d(t,{BF:()=>p,Dg:()=>i,EH:()=>f,JH:()=>o,my:()=>s,tM:()=>d});var n=r(25048);function i(e){if(Array.isArray(e)){if(e.length<n.y9)return e}else if(e.length<n.y9)return Array.from(e);let t=!0,r=!0;return e.some(((e,n)=>(t=t&&0===e,r=r&&e===n,!t&&!r))),t?f(e.length):r?d(e.length):(0,n.iu)(e)&&e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?e:function(e){let t=!0;for(const r of e){if(r>=65536)return(0,n.iu)(e)?e:new Uint32Array(e);r>=256&&(t=!1)}return t?new Uint8Array(e):new Uint16Array(e)}(e)}function s(e){return e<=n.y9?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}function o(e){return e<=n.y9?new Array(e):new Uint32Array(e)}let a=u(131072);const c=[0],l=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function d(e){return 1===e?c:e<n.y9?Array.from(new Uint16Array(l.buffer,0,e)):e<l.length?new Uint16Array(l.buffer,0,e):(e>a.length&&(a=u(Math.max(2*a.length,e))),new Uint32Array(a.buffer,0,e))}function u(e){const t=new Uint32Array(e);for(let r=0;r<t.length;r++)t[r]=r;return t}let h=new Uint8Array(65536);function f(e){if(1===e)return c;if(e<n.y9)return new Array(e).fill(0);if(e>h.length){const t=Math.max(2*h.length,e);h=new Uint8Array(t)}return new Uint8Array(h.buffer,0,e)}function p(){a=u(131072),h=new Uint8Array(65536)}},57888:(e,t,r)=>{r.d(t,{U:()=>a});var n=r(25048),i=r(74125),s=r(34431),o=r(88824);class a extends i.B{constructor(e){super("EdgeProcessingWorker","extract",{extract:e=>[e.dataBuffer],extractComponentsEdgeLocations:e=>[e.dataBuffer],extractEdgeLocations:e=>[e.dataBuffer]},e)}async process(e,t,r){return r?(0,o.o6)(e):function(e){return{regular:{instancesData:(0,s.s)(e.regular.instancesData),lodInfo:{lengths:new Float32Array(e.regular.lodInfo.lengths)}},silhouette:{instancesData:(0,s.s)(e.silhouette.instancesData),lodInfo:{lengths:new Float32Array(e.silhouette.lodInfo.lengths)}},averageEdgeLength:e.averageEdgeLength}}(await this.invoke(new c(e),t))}async extractEdgeLocations(e,t){const r=await this.invokeMethod("extractEdgeLocations",new c(e),t);return(0,s.s)(r)}async extractComponentsEdgeLocations(e,t){const r=await this.invokeMethod("extractComponentsEdgeLocations",new c(e),t);return(0,s.s)(r)}}class c{constructor(e){this.dataBuffer=e.data.buffer,this.writerSettings=e.writerSettings,this.skipDeduplicate=e.skipDeduplicate,this.indices=(0,n.iu)(e.indices)?e.indices.buffer:e.indices,this.indicesType=(0,n.iu)(e.indices)?(0,n.XJ)(e.indices)?"Uint32Array":"Uint16Array":"Array",this.indicesLength=e.indicesLength}}},59579:(e,t,r)=>{r.r(t),r.d(t,{SceneLayerSnappingSource:()=>I});var n=r(93800),i=r(6946),s=r(62631),o=r(49959),a=r(48602),c=(r(21265),r(50925),r(75269)),l=r(42198),d=r(17741),u=(r(14746),r(15492)),h=r(57888),f=r(28473),p=r(74125),g=r(89476),y=r(49281),A=r(58373),E=r(40684);let _=class extends i.default{constructor(e){super(e),this.availability=0,this._ids=new Set}destroy(){this._workerHandle.destroy(),this._workerHandle=null}initialize(){this._workerHandle=new w(this.schedule,{fetchAllEdgeLocations:(e,t)=>this._fetchAllEdgeLocations(e,t)})}async fetchCandidates(e,t){const r=e.coordinateHelper,{point:n}=e,i=v;this.renderCoordsHelper.toRenderCoords(n,r.spatialReference,i);const s=e.distance,o="number"==typeof s?s:s.distance,a=await this._workerHandle.invoke({bounds:(0,g.f)(i[0],i[1],i[2],o),returnEdge:e.returnEdge,returnVertex:"none"!==e.vertexMode},t);return a.candidates.sort(((e,t)=>e.distance-t.distance)),a.candidates.map((e=>this._convertCandidate(r,e)))}async add(e,t){this._ids.add(e.id),await this._workerHandle.invokeMethod("add",e,t)}async remove(e,t){this._ids.delete(e.id),await this._workerHandle.invokeMethod("remove",e,t)}_convertCandidate(e,t){switch(t.type){case"edge":return new A.z({objectId:t.objectId,targetPoint:(0,y.de)(this._convertRenderCoordinate(e,t.target)),edgeStart:this._convertRenderCoordinate(e,t.start),edgeEnd:this._convertRenderCoordinate(e,t.end),isDraped:!1});case"vertex":return new E.C({objectId:t.objectId,targetPoint:(0,y.de)(this._convertRenderCoordinate(e,t.target)),isDraped:!1})}}_convertRenderCoordinate(e,t){let{spatialReference:r}=e;const n=(0,f.vt)();return this.renderCoordsHelper.fromRenderCoords(t,n,r),(0,y._7)(n)}async _fetchAllEdgeLocations(e,t){const r=[],n=[];for(const{id:i,uid:s}of e.components)this._ids.has(i)&&r.push((async()=>{const e=await this.fetchEdgeLocations(i,t.signal),r=e.locations.buffer;return n.push(r),{id:i,uid:s,objectIds:e.objectIds,locations:r,origin:e.origin,type:e.type}})());return{result:{components:(await Promise.all(r)).filter((e=>{let{id:t}=e;return this._ids.has(t)}))},transferList:n}}};(0,n._)([(0,a.MZ)({constructOnly:!0})],_.prototype,"renderCoordsHelper",void 0),(0,n._)([(0,a.MZ)({constructOnly:!0})],_.prototype,"fetchEdgeLocations",void 0),(0,n._)([(0,a.MZ)({constructOnly:!0})],_.prototype,"schedule",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],_.prototype,"availability",void 0),_=(0,n._)([(0,c.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorkerHandle")],_);class w extends p.B{constructor(e,t){super("SceneLayerSnappingSourceWorker","fetchCandidates",{},e,{strategy:"dedicated",client:t})}}const v=(0,f.vt)();let S=class extends i.default{get updating(){return this._updatingHandles.updating}constructor(e){super(e),this.availability=1,this._updatingHandles=new u.U,this._abortController=new AbortController}destroy(){this._tracker=(0,d.xt)(this._tracker),this._abortController=(0,d.DC)(this._abortController),this._updatingHandles.destroy()}initialize(){const{view:e}=this,t=e.resourceController;this._edgeWorker=new h.U(m(t)),this._workerHandle=new _({renderCoordsHelper:this.view.renderCoordsHelper,schedule:m(t),fetchEdgeLocations:async(e,t)=>{if(null==this._tracker)throw new Error("tracker-not-initialized");return this._tracker.fetchEdgeLocations(e,this._edgeWorker,t)}}),this._updatingHandles.addPromise(this._setupLayerView()),this.addHandles([(0,l.DQ)(this._workerHandle),(0,l.DQ)(this._edgeWorker)])}async fetchCandidates(e,t){return this._workerHandle.fetchCandidates(e,t)}refresh(){}async _setupLayerView(){if(this.destroyed)return;const e=this._abortController?.signal,t=await this.getLayerView();null==t||(0,o.isAborted)(e)||(this._tracker=t.trackSnappingSources({add:(t,r)=>{this._updatingHandles.addPromise(this._workerHandle.add({id:t,bounds:r},e))},remove:t=>{this._updatingHandles.addPromise(this._workerHandle.remove({id:t},e))}}))}};function m(e){return t=>e.immediate.schedule(t)}(0,n._)([(0,a.MZ)({constructOnly:!0})],S.prototype,"getLayerView",void 0),(0,n._)([(0,a.MZ)({constructOnly:!0})],S.prototype,"view",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],S.prototype,"updating",null),(0,n._)([(0,a.MZ)({readOnly:!0})],S.prototype,"availability",void 0),S=(0,n._)([(0,c.$)("esri.views.interactive.snapping.featureSources.I3SSnappingSource")],S);let I=class extends i.default{get updating(){return this._i3sSources.some((e=>e.updating))}constructor(e){super(e),this.availability=1,this._i3sSources=[]}destroy(){this._i3sSources.forEach((e=>e.destroy())),this._i3sSources.length=0}initialize(){const{view:e}=this,t=this.layerSource.layer;this._i3sSources="building-scene"===t.type?this._getBuildingSceneI3SSources(e,t):[this._getSceneLayerI3SSource(e,t)]}async fetchCandidates(e,t){const r=await Promise.all(this._i3sSources.map((r=>r.fetchCandidates(e,t))));return(0,o.throwIfAborted)(t),r.flat()}refresh(){this._i3sSources.forEach((e=>e.refresh()))}_getBuildingSceneI3SSources(e,t){return t.allSublayers.toArray().map((r=>"building-component"===r.type?new S({getLayerView:async()=>(await e.whenLayerView(t)).whenSublayerView(r),view:e}):null)).filter(s.Ru)}_getSceneLayerI3SSource(e,t){return new S({getLayerView:async()=>{const r=await e.whenLayerView(t);return"scene-layer-graphics-3d"===r.type?void 0:r},view:e})}};(0,n._)([(0,a.MZ)({constructOnly:!0})],I.prototype,"layerSource",void 0),(0,n._)([(0,a.MZ)({constructOnly:!0})],I.prototype,"view",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],I.prototype,"updating",null),(0,n._)([(0,a.MZ)({readOnly:!0})],I.prototype,"availability",void 0),I=(0,n._)([(0,c.$)("esri.views.interactive.snapping.featureSources.SceneLayerSnappingSource")],I)},62749:(e,t,r)=>{r.d(t,{K:()=>c});var n=r(64682),i=r(15899),s=r(89227),o=r(28473);const a=-1;function c(e,t,r){const n=e.vertices.position,i=e.vertices.componentIndex,o=g.position0,c=g.position1,u=g.faceNormal0,f=g.faceNormal1,{edges:p,normals:y}=d(e),A=p.length/4,E=t.allocate(A);let _=0;const w=A,m=r?.allocate(w);let O=0,N=0,T=0;h.length=0;for(let a=0;a<A;++a){const e=4*a;n.getVec(p.data[e],o),n.getVec(p.data[e+1],c);const t=h.pushNew();t.index=4*a,t.length=(0,s.j)(o,c)}h.sort(((e,t)=>t.length-e.length));const L=new Array,b=new Array;h.forAll((e=>{let{length:d,index:h}=e;const A=p.data[h],w=p.data[h+1],M=p.data[h+2],R=p.data[h+3],C=R===a;if(n.getVec(A,o),n.getVec(w,c),C){const e=3*M;(0,s.i)(u,y.data[e],y.data[e+1],y.data[e+2]),(0,s.c)(f,u),g.componentIndex=i.get(A),g.cosAngle=(0,s.f)(u,f)}else{let e=3*M;if((0,s.i)(u,y.data[e],y.data[e+1],y.data[e+2]),e=3*R,(0,s.i)(f,y.data[e],y.data[e+1],y.data[e+2]),g.componentIndex=i.get(A),g.cosAngle=(0,s.f)(u,f),function(e,t){return e.cosAngle>t}(g,S))return;g.cosAngle<-.9999&&(0,s.c)(f,u)}N+=d,T++,C||function(e,t){return e.cosAngle<t}(g,I)?(t.write(E,_++,g),L.push(d)):l(g,v)&&(m&&r&&r.write(m,O++,g),b.push(d))}));const M=new Float32Array(L.reverse()),R=new Float32Array(b.reverse()),C=m&&r?{instancesData:m.slice(0,O),lodInfo:{lengths:R}}:void 0;return{regular:{instancesData:E.slice(0,_),lodInfo:{lengths:M}},silhouette:C,averageEdgeLength:N/T}}function l(e,t){const r=(0,n.XM)(e.cosAngle);return(0,s.o)(A,e.position1,e.position0),r*((0,s.f)((0,s.e)(y,e.faceNormal0,e.faceNormal1),A)>0?-1:1)>t}function d(e){const t=e.faces.length/3,r=e.faces,n=e.neighbors,i=e.vertices.position;f.length=p.length=0;for(let o=0;o<t;o++){const e=3*o,t=n[e],c=n[e+1],l=n[e+2],d=r[e],u=r[e+1],h=r[e+2];i.getVec(d,E),i.getVec(u,_),i.getVec(h,w),(0,s.d)(_,_,E),(0,s.d)(w,w,E),(0,s.e)(E,_,w),(0,s.n)(E,E),p.pushArray(E),(t===a||d<u)&&(f.push(d),f.push(u),f.push(o),f.push(t)),(c===a||u<h)&&(f.push(u),f.push(h),f.push(o),f.push(c)),(l===a||h<d)&&(f.push(h),f.push(d),f.push(o),f.push(l))}return{edges:f,normals:p}}class u{constructor(){this.index=0,this.length=0}}const h=new i.A({allocator:e=>e||new u,deallocator:null}),f=new i.A({deallocator:null}),p=new i.A({deallocator:null}),g=new class{constructor(){this.position0=(0,o.vt)(),this.position1=(0,o.vt)(),this.faceNormal0=(0,o.vt)(),this.faceNormal1=(0,o.vt)(),this.componentIndex=0,this.cosAngle=0}},y=(0,o.vt)(),A=(0,o.vt)(),E=(0,o.vt)(),_=(0,o.vt)(),w=(0,o.vt)(),v=(0,n.kU)(4),S=Math.cos(v),m=(0,n.kU)(35),I=Math.cos(m)},65496:(e,t,r)=>{r.d(t,{T:()=>A,k:()=>E});var n=r(14746),i=r(89227),s=r(28473),o=r(66458),a=r(75093),c=r(25084);class l{updateSettings(e){this.settings=e,this._edgeHashFunction=e.reducedPrecision?p:f}write(e,t,r){w.seed=this._edgeHashFunction(r);const n=w.getIntRange(0,255),i=w.getIntRange(0,this.settings.variants-1),s=w.getFloat(),o=255*(.5*function(e,t){return Math.abs(e)**t*Math.sign(e)}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,n),e.variantStroke.set(t,i),e.variantExtension.set(t,o)}}const d=new Float32Array(6),u=new Uint32Array(d.buffer),h=new Uint32Array(1);function f(e){return d[0]=e.position0[0],d[1]=e.position0[1],d[2]=e.position0[2],d[3]=e.position1[0],d[4]=e.position1[1],d[5]=e.position1[2],h[0]=31*(31*(31*(31*(31*(166811+u[0])+u[1])+u[2])+u[3])+u[4])+u[5],h[0]}function p(e){const t=d;t[0]=y(e.position0[0]),t[1]=y(e.position0[1]),t[2]=y(e.position0[2]),t[3]=y(e.position1[0]),t[4]=y(e.position1[1]),t[5]=y(e.position1[2]),h[0]=5381;for(let r=0;r<u.length;r++)h[0]=31*h[0]+u[r];return h[0]}const g=1e4;function y(e){return Math.round(e*g)/g}class A{constructor(){this._commonWriter=new l}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return c.gr.createBuffer(e)}write(e,t,r){this._commonWriter.write(e,t,r),(0,i.g)(_,r.faceNormal0,r.faceNormal1),(0,i.n)(_,_);const{typedBuffer:n,typedBufferStride:s}=e.normalCompressed;(0,a.aT)(n,t,_[0],_[1],_[2],s)}}A.Layout=c.gr,A.glLayout=(0,o.U)(c.gr,1);class E{constructor(){this._commonWriter=new l}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return c.In.createBuffer(e)}write(e,t,r){this._commonWriter.write(e,t,r);{const{typedBuffer:n,typedBufferStride:i}=e.normalCompressed;(0,a.aT)(n,t,r.faceNormal0[0],r.faceNormal0[1],r.faceNormal0[2],i)}{const{typedBuffer:n,typedBufferStride:i}=e.normal2Compressed;(0,a.aT)(n,t,r.faceNormal1[0],r.faceNormal1[1],r.faceNormal1[2],i)}}}E.Layout=c.In,E.glLayout=(0,o.U)(c.In,1);const _=(0,s.vt)(),w=new n.A},66458:(e,t,r)=>{r.d(t,{U:()=>s});var n=r(92156),i=r(605);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=e.stride;return Array.from(e.fields.keys()).map((n=>{const s=e.fields.get(n),a=s.constructor.ElementCount,c=o(s.constructor.ElementType),l=s.offset,d=s.optional?.glNormalized??!1;return new i._(n,a,c,l,r,d,t)}))}function o(e){const t=a[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const a={u8:n.pe.UNSIGNED_BYTE,u16:n.pe.UNSIGNED_SHORT,u32:n.pe.UNSIGNED_INT,i8:n.pe.BYTE,i16:n.pe.SHORT,i32:n.pe.INT,f32:n.pe.FLOAT}},73530:(e,t,r)=>{r.d(t,{_:()=>s});var n=r(89227),i=r(43536);class s extends i.m{constructor(e,t,r){super(t,r),this.point=e}equals(e){return e instanceof s&&(0,n.p)(this.point,e.point)}}},74125:(e,t,r)=>{r.d(t,{B:()=>c});var n=r(62631),i=r(42198),s=r(50925),o=r(49959),a=r(34037);class c{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this._mainMethod=t,this._transferLists=r,this._listeners=[],this._promise=(0,a.ho)(e,{...i,schedule:n}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,i.hasInitialize&&this.broadcast({},"initialize");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>s.A.getLogger("esri.core.workers.WorkerHandle").error(`Failed to initialize ${e} worker: ${t}`)))}on(e,t){const r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),(0,i.hA)((()=>{r.removed=!0,(0,n.TF)(this._listeners,r),this._thread&&null!=r.threadHandle&&r.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const n=this._transferLists[e],i=n?n(t):[];return this._thread.invoke(e,t,{transferList:i,signal:r})}return this._promise?this._promise.then((()=>((0,o.throwIfAborted)(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}},75093:(e,t,r)=>{r.d(t,{Tz:()=>l,_l:()=>c,aT:()=>o,fA:()=>a});var n=r(64682),i=r(89227),s=r(28473);r(46576);function o(e,t,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;const o=1/(Math.abs(r)+Math.abs(n)+Math.abs(i)),a=r*o,c=n*o,l=i<=0?(a>=0?1:-1)*(1-Math.abs(c)):a,u=i<=0?(c>=0?1:-1)*(1-Math.abs(a)):c,h=t*s;e[h]=d(l),e[h+1]=d(u)}function a(e){const t=e.length/3,r=new Int16Array(2*t);let n=0;for(let i=0;i<t;++i)o(r,i,e[n++],e[n++],e[n++]);return r}function c(e,t){const r=e.length/3,n=new Int16Array(2*r);let a=0;const c=(0,s.vt)();for(let s=0;s<r;++s)c[0]=e[a++],c[1]=e[a++],c[2]=e[a++],(0,i.q)(c,c,t),o(n,s,c[0],c[1],c[2]);return n}function l(e,t,r){const n=r*(arguments.length>3&&void 0!==arguments[3]?arguments[3]:2),s=u(t[n]),o=u(t[n+1]),a=1-Math.abs(s)-Math.abs(o);e[2]=a,a<0?(e[0]=(s>=0?1:-1)*(1-Math.abs(o)),e[1]=(o>=0?1:-1)*(1-Math.abs(s))):(e[0]=s,e[1]=o),(0,i.n)(e,e)}function d(e){return(0,n.qE)(Math.round(32767*e),-32767,32767)}function u(e){return(0,n.qE)(e/32767,-1,1)}},88824:(e,t,r)=>{r.d(t,{o6:()=>d,extractComponentsEdgeLocationsLayout:()=>y,hx:()=>u,Jb:()=>g});var n=r(28983);function i(e,t,r){const n=t/3,i=new Uint32Array(r+1),s=new Uint32Array(r+1),o=(e,t)=>{e<t?i[e+1]++:s[t+1]++};for(let A=0;A<n;A++){const t=e[3*A],r=e[3*A+1],n=e[3*A+2];o(t,r),o(r,n),o(n,t)}let a=0,c=0;for(let A=0;A<r;A++){const e=i[A+1],t=s[A+1];i[A+1]=a,s[A+1]=c,a+=e,c+=t}const l=new Uint32Array(6*n),d=i[r],u=(e,t,r)=>{if(e<t){const n=i[e+1]++;l[2*n]=t,l[2*n+1]=r}else{const n=s[t+1]++;l[2*d+2*n]=e,l[2*d+2*n+1]=r}};for(let A=0;A<n;A++){const t=e[3*A],r=e[3*A+1],n=e[3*A+2];u(t,r,A),u(r,n,A),u(n,t,A)}const h=(e,t)=>{const r=2*e,n=t-e;for(let i=1;i<n;i++){const e=l[r+2*i],t=l[r+2*i+1];let n=i-1;for(;n>=0&&l[r+2*n]>e;n--)l[r+2*n+2]=l[r+2*n],l[r+2*n+3]=l[r+2*n+1];l[r+2*n+2]=e,l[r+2*n+3]=t}};for(let A=0;A<r;A++)h(i[A],i[A+1]),h(d+s[A],d+s[A+1]);const f=new Int32Array(3*n),p=(t,r)=>t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1,g=(e,t)=>{const r=p(e,t);f[3*t+r]=-1},y=(e,t,r,n)=>{const i=p(e,t);f[3*t+i]=n;const s=p(r,n);f[3*n+s]=t};for(let A=0;A<r;A++){let e=i[A];const t=i[A+1];let r=s[A];const n=s[A+1];for(;e<t&&r<n;){const t=l[2*e],n=l[2*d+2*r];t===n?(y(A,l[2*e+1],n,l[2*d+2*r+1]),e++,r++):t<n?(g(A,l[2*e+1]),e++):(g(n,l[2*d+2*r+1]),r++)}for(;e<t;)g(A,l[2*e+1]),e++;for(;r<n;)g(l[2*d+2*r],l[2*d+2*r+1]),r++}return f}var s=r(98876),o=r(22131),a=r(25084),c=r(65496),l=r(62749);function d(e){const t=u(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return f.updateSettings(e.writerSettings),p.updateSettings(e.writerSettings),(0,l.K)(t,f,p)}function u(e,t,r,s){if(t){const t=i(r,s,e.count);return new h(r,s,t,e)}const o=(0,n.b)(e.buffer,e.stride/4,{originalIndices:r,originalIndicesLength:s}),c=i(o.indices,s,o.uniqueCount);return{faces:o.indices,facesLength:o.indices.length,neighbors:c,vertices:a.EdgeInputBufferLayout.createView(o.buffer)}}class h{constructor(e,t,r,n){this.faces=e,this.facesLength=t,this.neighbors=r,this.vertices=n}}const f=new c.T,p=new c.k,g=(0,s.BP)().vec3f(o.r.POSITION0).vec3f(o.r.POSITION1),y=(0,s.BP)().vec3f(o.r.POSITION0).vec3f(o.r.POSITION1).u16(o.r.COMPONENTINDEX)},89893:(e,t,r)=>{r.d(t,{Cv:()=>u,L:()=>d,MX:()=>c,O_:()=>l,kL:()=>h,vA:()=>a,zH:()=>f});var n=r(98080),i=r(60548);const s=(0,r(24646).vt)();class o{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion";if(!e){const e=new Error(t).stack;throw new o(`${t} at ${e}`)}}function c(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))}function l(e,t,r,n){let i,s=(r[0]-e[0])/t[0],o=(n[0]-e[0])/t[0];s>o&&(i=s,s=o,o=i);let a=(r[1]-e[1])/t[1],c=(n[1]-e[1])/t[1];if(a>c&&(i=a,a=c,c=i),s>c||a>o)return!1;a>s&&(s=a),c<o&&(o=c);let l=(r[2]-e[2])/t[2],d=(n[2]-e[2])/t[2];return l>d&&(i=l,l=d,d=i),!(s>d||l>o)&&(d<o&&(o=d),!(o<0))}function d(e,t,r,i,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,n.vt)();const a=(i[s]-r[s])*(t[0]-e[0])-(i[0]-r[0])*(t[s]-e[s]),c=(i[0]-r[0])*(e[s]-r[s])-(i[s]-r[s])*(e[0]-r[0]);if(0===a)return!1;const l=c/a;return o[0]=e[0]+l*(t[0]-e[0]),o[1]=e[s]+l*(t[s]-e[s]),!0}function u(e,t,r,n,o){s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=1,(0,i.t)(s,s,t),o.length>2&&(o[2]=-s[2]),(0,i.t)(s,s,r),a(0!==s[3]),o[0]=s[0]/s[3],o[1]=s[1]/s[3],o[2]=s[2]/s[3],o[0]=(.5*o[0]+.5)*n[2]+n[0],o[1]=(.5*o[1]+.5)*n[3]+n[1]}function h(e,t){return Math.log(e)/Math.log(t)}function f(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}},97928:(e,t,r)=>{function n(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}r.d(t,{GJ:()=>n})},98876:(e,t,r)=>{r.d(t,{BP:()=>c,l5:()=>l,q3:()=>a});var n=r(76517),i=r(97928),s=r(89893);class o{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const r of e.fields.keys()){const t=e.fields.get(r);this[r]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new o(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.count;const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}return this}get cachedMemory(){return this.byteLength}dispose(){}}class a{constructor(e){this._stride=0,this._lastAligned=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach((e=>this._fields.set(e[0],{...e[1],constructor:h(e[1].constructor)}))))}freeze(){return this}vec2f(e,t){return this._appendField(e,n.gH,t),this}vec2f64(e,t){return this._appendField(e,n.si,t),this}vec3f(e,t){return this._appendField(e,n.xs,t),this}vec3f64(e,t){return this._appendField(e,n.Xm,t),this}vec4f(e,t){return this._appendField(e,n.Eq,t),this}vec4f64(e,t){return this._appendField(e,n.Aj,t),this}mat3f(e,t){return this._appendField(e,n.jZ,t),this}mat3f64(e,t){return this._appendField(e,n.j0,t),this}mat4f(e,t){return this._appendField(e,n.Sx,t),this}mat4f64(e,t){return this._appendField(e,n.E$,t),this}vec4u8(e,t){return this._appendField(e,n.XP,t),this}f32(e,t){return this._appendField(e,n.Y$,t),this}f64(e,t){return this._appendField(e,n.qB,t),this}u8(e,t){return this._appendField(e,n.SL,t),this}u16(e,t){return this._appendField(e,n.h,t),this}i8(e,t){return this._appendField(e,n.bf,t),this}vec2i8(e,t){return this._appendField(e,n.D6,t),this}vec2i16(e,t){return this._appendField(e,n.mJ,t),this}vec2u8(e,t){return this._appendField(e,n.LC,t),this}vec4u16(e,t){return this._appendField(e,n.Uz,t),this}u32(e,t){return this._appendField(e,n.P,t),this}_appendField(e,t,r){if(this._fields.has(e))return void(0,s.vA)(!1,`${e} already added to vertex buffer layout`);const n=t.ElementCount*(0,i.GJ)(t.ElementType),o=this._stride;this._stride+=n,this._fields.set(e,{size:n,constructor:t,offset:o,optional:r})}createBuffer(e){return new o(this,e)}createView(e){return new o(this,e)}clone(){const e=new a;return e._stride=this._stride,e._fields=new Map,this._fields.forEach(((t,r)=>e._fields.set(r,t))),e.BufferType=this.BufferType,e}get stride(){if(this._lastAligned!==this._fields.size){let e=1;this._fields.forEach((t=>e=Math.max(e,(0,i.GJ)(t.constructor.ElementType)))),this._stride=Math.floor((this._stride+e-1)/e)*e,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}function c(){return new a}class l{constructor(e){this.fields=new Array,e.fields.forEach(((e,t)=>{const r={...e,constructor:u(e.constructor)};this.fields.push([t,r])})),this.stride=e.stride}}const d=[n.Y$,n.gH,n.xs,n.Eq,n.jZ,n.Sx,n.qB,n.si,n.Xm,n.Aj,n.j0,n.E$,n.SL,n.LC,n.eI,n.XP,n.h,n.Yi,n.nS,n.Uz,n.P,n.An,n.H$,n.ml,n.bf,n.D6,n.m8,n.TX,n.Qt,n.mJ,n.Vp,n.E7,n.My,n.UL,n.zD,n.Y4];function u(e){return`${e.ElementType}_${e.ElementCount}`}function h(e){return f.get(e)}const f=new Map;d.forEach((e=>f.set(u(e),e)))}}]);