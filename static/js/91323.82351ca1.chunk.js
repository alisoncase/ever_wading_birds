"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79538,91323],{79538:(e,t,a)=>{a.d(t,{BV:()=>q,EG:()=>v,Lk:()=>x,Ll:()=>D,Np:()=>u,R3:()=>E,SO:()=>p,T1:()=>$,UH:()=>d,Wy:()=>b,XR:()=>c,aM:()=>z,fs:()=>y,i0:()=>F,i3:()=>w});var n=a(66845),i=a(95011),s=a(96247),r=a(76983),o=a(73210),l=a(40731);const d=",",u={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},f="percent-of-total",m="field",c={exclude:["median"]},p={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},g=new Set(["integer","small-integer"]);let h=null;const w=["date","date-only","timestamp-offset"];function y(e){return(0,i.isDateField)(e)||(0,i.isDateOnlyField)(e)||(0,i.isTimestampOffsetField)(e)}async function v(e){const{field:t,field2:a,field3:n,normalizationField:i,valueExpression:r}=e;let o=[];if(r){if(!h){const{arcadeUtils:e}=await(0,s.lw)();h=e}o=h.extractFieldNames(r)}return t&&o.push(t),a&&o.push(a),n&&o.push(n),i&&o.push(i),o}function b(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=f)),t??void 0}function k(e){return String(e).padStart(2,"0")}function T(e,t,a){let n;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),n=`TIMESTAMP'${a?e.getFullYear():e.getUTCFullYear()}-${k((a?e.getMonth():e.getUTCMonth())+1)}-${k(a?e.getDate():e.getUTCDate())} ${k(a?e.getHours():e.getUTCHours())}:${k(a?e.getMinutes():e.getUTCMinutes())}:${k(a?e.getSeconds():e.getUTCSeconds())}'`):n=e,n}function z(e,t,a,n){const{hasQueryEngine:i}=e,s=`(${T(a,x(e,a),i)} - ${T(t,x(e,t),i)})`;let r=p[n],o="/";return r<1&&(r=1/r,o="*"),{sqlExpression:1===r?s:`(${s} ${o} ${r})`,sqlWhere:null}}function x(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const a=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,i.isDateField)(a))return"field"}}function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;for(const a in t)if(t[a].includes(e))return a}function $(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;return e&&("string"==typeof e?t.includes(e)&&(n=e):n=(0,r.q3)(e)),a?n||"gray":n}function E(e,t){const a=t&&e.getField(t);return!!a&&g.has(a.type)}function D(e){return`cast(${e} as float)`}function F(e,t){const{format:a,timeZoneOptions:i,fieldType:s}=t??{};let r,d;if(i&&({timeZone:r,timeZoneName:d}=(0,l.hv)(i.layerTimeZone,i.datesInUnknownTimezone,i.viewTimeZone,(0,n.J2)(a||"short-date-short-time"),s)),"string"==typeof e&&isNaN(Date.parse("time-only"===s?`1970-01-01T${e}Z`:e)))return e;switch(s){case"date-only":{const t=(0,n.J2)(a||"short-date");return"string"==typeof e?(0,n.iS)(e,{...t}):(0,n.Yq)(e,{...t,timeZone:o.n$})}case"time-only":{const t=(0,n.J2)(a||"short-time");return"string"==typeof e?(0,n.F8)(e,t):(0,n.Yq)(e,{...t,timeZone:o.n$})}case"timestamp-offset":{if(!r&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=a||i?(0,n.J2)(a||"short-date-short-time"):void 0,s=t?{...t,timeZone:r,timeZoneName:d}:void 0;return"string"==typeof e?(0,n.Ey)(e,s):(0,n.Yq)(e,s)}default:{const t=a||i?(0,n.J2)(a||"short-date-short-time"):void 0;return(0,n.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:r,timeZoneName:d}:void 0)}}}},85151:(e,t,a)=>{a.d(t,{p:()=>s,z:()=>i});var n=a(74719);const i="aggregateCount";function s(e,t){if(!e.view)throw new n.default(`${t}:missing-parameters`,"'view' parameter is required for binning");if(e.sqlExpression)throw new n.default(`${t}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if("3d"===e.view.type)throw new n.default(`${t}:invalid-parameters`,"3d view is not supported for binning")}},91323:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(74719),i=a(70934),s=a(85151),r=a(79538),o=a(2938);const l=5;async function d(e){const{layerAdapter:t,...a}=await async function(e){if(!e?.layer||!e.field&&!e.valueExpression)throw new n.default("class-breaks:missing-parameters","'layer' and 'field' or 'valueExpression' parameters are required");if(e.valueExpression&&!e.view)throw new n.default("class-breaks:missing-parameters","View is required when 'valueExpression' is specified");e.forBinning&&(0,s.p)(e,"class-breaks");const{layer:t,...a}=e,d=e.forBinning?o.Mi:o.J4,u=(0,o.Jg)(t,d,e.forBinning);if(!u)throw new n.default("class-breaks:invalid-parameters","'layer' must be one of these types: "+(0,o.Ho)(d).join(", "));const f={layerAdapter:u,...a};f.normalizationType=(0,r.Wy)(f),f.numClasses=f.numClasses||l;const m=null!=f.signal?{signal:f.signal}:null;await u.load(m);const c=f.field,p=f.minValue,g=f.maxValue,h=null!=p||null!=g,w=f.classificationMethod,y="percent-of-total"===f.normalizationType,v=!1!==f.analyzeData,b=c?u.getField(c):null,k=await(0,r.EG)({field:f.field,normalizationField:f.normalizationField,valueExpression:f.valueExpression}),T=(0,i.MH)(u,k,"class-breaks:invalid-parameters");if(T)throw T;if(b){const e=(0,i.hw)(u,b,"class-breaks:invalid-parameters");if(e)throw e}if(f.valueExpression&&f.normalizationType)throw new n.default("class-breaks:invalid-parameters","Normalization is not allowed when 'valueExpression' is specified");if(h)if(v){if(y&&null==f.normalizationTotal)throw new n.default("class-breaks:missing-parameters","'normalizationTotal' is required when 'normalizationType' is 'precent-of-total' and 'minValue', 'maxValue' are specified")}else{if(null==p||null==g)throw new n.default("class-breaks:missing-parameters","Both 'minValue' and 'maxValue' are required when 'analyzeData' is false");if(p>=g)throw new n.default("class-breaks:invalid-parameters","'minValue' should be less than 'maxValue'");if(w&&"equal-interval"!==w)throw new n.default("class-breaks:invalid-parameters","'classificationMethod' other than 'equal-interval' is not allowed when 'analyzeData' is false");if(y&&null==f.normalizationTotal)throw new n.default("class-breaks:missing-parameters","'normalizationTotal' is required when 'normalizationType' is 'precent-of-total' and 'analyzeData' is false")}else if(!v)throw new n.default("class-breaks:missing-parameters","Both 'minValue' and 'maxValue' are required when 'analyzeData' is false");f.filter&&!f.filter.spatialRelationship&&(f.filter.spatialRelationship="intersects");const z=(0,i.Wk)(f.filter,"class-breaks:invalid-parameters");if(z)throw z;return f}(e);return t.classBreaks(a)}}}]);