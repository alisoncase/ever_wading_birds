"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[17508],{17508:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(93800),r=n(6946),o=n(49959),l=n(48602),s=(n(21265),n(50925),n(14746),n(75269)),u=n(35920),a=n(82368);let d=class extends r.default{constructor(e){super(e),this._stagedForDelete=!1,this.feature=null,this.initialFeature=null,this.submittable=!1,this.displayTitle=null,this.isAssociation=!1,this._debouncedRefreshDisplayTitle=(0,o.debounce)(this._refreshDisplayTitle.bind(this),100)}get attributesModified(){return!function(e,t){const n=e??{},i=t??{},r=new Set(Object.keys(n));(0,u.FB)(r,Object.keys(i));for(const o of r){const e=n[o],t=i[o];if(!(0,a.D_)(e,t))return!1}return!0}(this.initialFeature?.attributes,this.feature?.attributes)}get geometryModified(){return this._stringifyGeometry(this.feature)!==this._stringifyGeometry(this.initialFeature)}get stagedForDelete(){return this._stagedForDelete}get modified(){return this.attributesModified||this.geometryModified||this._stagedForDelete}set timeZone(e){this._set("timeZone",e),(0,o.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}stageDelete(){this._stagedForDelete=!0}unstageDelete(){this._stagedForDelete=!1}trackChanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.feature;this.initialFeature=e?.clone(),(0,o.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}updateAttributes(e){const{feature:t}=this;t&&(t.attributes=e,this.notifyChange("attributesModified")),(0,o.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}updateGeometry(e){const{feature:t}=this;t&&(t.geometry=e,this.notifyChange("geometryModified"))}_stringifyGeometry(e){const t=e?.geometry;return function(e){return null==e?null:JSON.stringify(e)}("mesh"===t?.type?{transform:t.transform,vertexSpace:t.vertexSpace}:t)}async _refreshDisplayTitle(e){const t=this.feature,n=t?.sourceLayer;if(!n||!("getFeatureTitle"in n))return;const i=await n.getFeatureTitle(t,{fetchMissingFields:!1,timeZone:this.timeZone});e.aborted||(this.displayTitle=""===i?null:i)}};(0,i._)([(0,l.MZ)()],d.prototype,"_stagedForDelete",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"attributesModified",null),(0,i._)([(0,l.MZ)()],d.prototype,"feature",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"geometryModified",null),(0,i._)([(0,l.MZ)()],d.prototype,"initialFeature",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"modified",null),(0,i._)([(0,l.MZ)()],d.prototype,"submittable",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"displayTitle",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"isAssociation",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"timeZone",null),d=(0,i._)([(0,s.$)("esri.widgets.Editor.Edits")],d);const f=d},53826:(e,t,n)=>{n.d(t,{Ng:()=>M,OM:()=>g,Q0:()=>b,T8:()=>_,ZP:()=>T,ZT:()=>O,eX:()=>F,fD:()=>S,fb:()=>h,fl:()=>c,iP:()=>E,oh:()=>Z,rX:()=>x,sH:()=>y,yk:()=>N});n(88677),n(21265);var i=n(74719),r=n(64682),o=n(66845),l=n(72520),s=n(69943),u=n(73210),a=n(51536),d=n(12711);const f=u.n$,m={date:null,time:null,timeZoneOffset:null},c=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),h="latn",y=new Set(["date-only","time-only","timestamp-offset"]),p=e=>"valueAsDate"in e;function g(e){return{locale:(0,d.JK)(),numberingSystem:h,zone:e??f}}function v(e,t){return null==e?null:a.c9.fromMillis(e,g(t))}function _(e,t){if(null==e||!(0,s.Kg)(e)||""===e){if(t){const e=a.c9.local({zone:t});return{date:null,time:null,timeZoneOffset:e.isValid?e.offset.toString():null}}return m}const n=a.c9.fromISO(e,{setZone:!0});return{date:n.toFormat(l.mo,g()),time:n.toFormat(l.Uq.HMS_MS,g()),timeZoneOffset:n.offset.toString()}}function b(e,t){if(null==e||!(0,s.Et)(e)||isNaN(e))return m;const n=v(e,t);return n?{date:n.toFormat(l.mo,g(t)),time:n.toFormat(l.Fj,g(t))}:m}function O(e){switch(e.type){case"date":default:return(0,o.J2)("short-date-short-time");case"date-only":return(0,o.J2)("short-date");case"time-only":return(0,o.J2)("short-time");case"timestamp-offset":return{...(0,o.J2)("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function T(e,t,n){if(!e||null==t)return null;switch(e.type){case"date":return(0,o.Yq)(t,n);case"date-only":return(0,o.iS)(t,n);case"time-only":return(0,o.F8)(t,n);case"timestamp-offset":return(0,o.Ey)(t,n);default:return null}}function M(e){const{dateComponent:t,defaultTimeZone:n,timeComponent:i,timeZoneComponent:r,oldValue:o}=e;if(!t?.value)return null;const{year:s,month:d,day:f}=a.c9.fromFormat(t.value,l.mo),{hour:m,minute:c,second:h,millisecond:y}=D(i,u.n$)??a.c9.now(),p=_(o,n),g=r?.value?parseInt(r.value,10):null!=p.timeZoneOffset?parseInt(p.timeZoneOffset,10):(new Date).getTimezoneOffset(),v=a.mQ.instance(g),b=a.c9.fromObject({year:s,month:d,day:f,hour:m,minute:c,second:h,millisecond:y},{zone:v});return b.isValid?b.toISO({includeOffset:!0}):null}function Z(e){const{dateComponent:t,timeComponent:n,timeZone:i,max:r,min:o,oldValue:l}=e,s=D(t,i);let u=!!e.applyRange;if(!s)return null;let d=null;if(null!=n?.value){const e=D(n,i),t=Date.now(),o=null!=r&&r<t?r:t,l=a.c9.fromMillis(o,g(i)),u=s||l,{year:f,month:m,day:c}=u,{hour:h,minute:y,second:p,millisecond:v}=e||l;d=u.set({year:f,month:m,day:c,hour:h,minute:y,second:p,millisecond:v})}else{const e=v(w({value:l??Date.now(),max:r,min:o}),i),{year:t,month:n,day:a}=s,{hour:f,minute:m,second:c,millisecond:h}=e;u=!0,d=s.set({year:t,month:n,day:a,hour:f,minute:m,second:c,millisecond:h})}if(!d.isValid)return null;const f=d.toMillis();return u?w({value:f,max:r,min:o}):f}function D(e,t){if(null==e?.value||Array.isArray(e.value))return null;let n=null;return n=p(e)?a.c9.fromFormat(e.value,l.mo,g(t)):(0,l.UE)(e.value),n?.isValid?n:null}function F(e){const{max:t,min:n,value:i}=e;return!isNaN(i)&&!(null!=t&&i>t)&&!(null!=n&&i<n)}function w(e){const{max:t,min:n,value:i}=e;return null!=t&&null!=n?(0,r.qE)(i,n,t):null!=t&&i>t?t:null!=n&&i<n?n:i}function E(e){if(!e)return"";const t=e.split(".").at(0);if(!t||t.length<1)throw new i.default("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const n=t.split(":"),r=new Array(3);for(let i=0;i<3;i++){const e=n.at(i)??"";r[i]=e.padStart(2,"0")}return r.join(":")}function S(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return E(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function x(e){return!!e&&"object"==typeof e&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function N(e){const{type:t,range:n,value:i}=e;if(null==i||!n||i===n.min||i===n.max)return!0;if("date"===t)return F({value:i,min:n.min,max:n.max});const{rawMax:r,rawMin:o}=n;let s=null,u=null,a=null;switch(t){case"date-only":s=(0,l.Xi)(r),u=(0,l.Xi)(o),a=(0,l.Xi)(i);break;case"time-only":s=(0,l.UE)(r),u=(0,l.UE)(o),a=(0,l.UE)(i);break;case"timestamp-offset":s=(0,l.gz)(r),u=(0,l.gz)(o),a=(0,l.gz)(i)}return!a||F({value:a.valueOf(),min:u?.valueOf(),max:s?.valueOf()})}},82368:(e,t,n)=>{n.d(t,{$$:()=>O,D_:()=>m,Gd:()=>f,Kx:()=>i,PA:()=>g,Po:()=>c,Qv:()=>v,gK:()=>r,hQ:()=>b,jl:()=>y,of:()=>d,qn:()=>_,zU:()=>h});var i,r,o,l=n(96299),s=n(7249),u=n(95011),a=n(53826);(o=i||(i={})).Text="text",o.Number="number",o.Date="date",o.Unsupported="unsupported",function(e){e.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"}(r||(r={}));const d=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}};function f(e,t){const{dataType:n,domain:i,field:o,maxLength:l,minLength:d,range:f,required:m}=t;if(null==e)return m?r.CANNOT_BE_EMPTY:null;if("text"===n&&"string"==typeof e){if(d>-1&&e.length<d)return r.TOO_SHORT;if(l>-1&&e.length>l)return r.TOO_LONG}return"date"!==n||(0,a.yk)({type:o.type,range:f,value:e})?i?(0,s.wb)(o,e,i):(0,u.validateFieldValue)(o,e)??(0,s.wb)(o,e):u.NumericRangeValidationError.OUT_OF_RANGE}function m(e,t){return!(!c(e)||!c(t))||e===t}function c(e){return null==e||""===e}function h(e){let{dataType:t,field:n,input:r}=e;if(t===i.Date)return-1;const o=p(n.length);if(!r||!(0,l.AI)(r))return o;const s=p(r.maxLength);return-1===s?o:-1===o?s:Math.min(o,s)}function y(e){let{dataType:t,field:n,input:r}=e;if(t===i.Date)return-1;if(!r||!(0,l.AI)(r))return-1;const o=p(r.minLength);if(o<0)return-1;const s=p(n.length);return s>-1&&s<o?-1:o}function p(e){return"number"==typeof e&&e>-1?e:-1}const g={type:"number"},v={type:"number",intlOptions:{notation:"scientific"}};function _(e){return e>=1e7||e<=-1e7}function b(e,t){return null!=e.max&&null!=e.min?t.outsideRange:null!=e.max?t.outsideRangeMax:t.outsideRangeMin}const O=e=>e&&!Number.isNaN(e.valueOf())}}]);