"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[52566,95329],{12010:(t,e,n)=>{n.d(e,{N:()=>i});const i={absolute:"absolute-direction",relative:"relative-direction"}},46910:(t,e,n)=>{n.d(e,{A3:()=>I,D5:()=>$,GC:()=>u,L5:()=>Z,Nr:()=>S,X3:()=>D,hw:()=>T,m6:()=>P,oZ:()=>y,zX:()=>g});var i=n(5839),o=n(1278),s=n(92143),r=n(52566),l=n(23224),a=n(95095);const c=1,d=6;function u(t,e){return{angleRelative:p,direction:h,directionRelative:f,directionRelativeBilateral:v,latitudeDecimalDegrees:m,longitudeDecimalDegrees:_,area:(n,i)=>(0,o.Jd)(t,n,i??e.area),length:(n,i,s)=>(0,o.ix)(t,n,i??e.length,s),lengthRelative:(n,i)=>(0,o.yh)(t,n,i??e.length),totalLength:(n,i)=>(0,o.ix)(t,n,i??e.length),verticalLength:(n,i)=>(0,o.Oo)(t,n,i??e.verticalLength),verticalLengthRelative:(n,i)=>(0,o.OM)(t,n,i??e.verticalLength),percentage:k,scalar:M,scale:x}}function p(t){return(0,l.ZV)(t,{signDisplay:"exceptZero",...C(c)})}function h(t){return(0,o.Nk)(t,t.rotationType,c)}function f(t){const e=(0,a.hF)(t);return(0,l.ZV)(e,{style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:e>0?"never":"exceptZero",...C(c)})}function v(t){return(0,o.Nk)(t,t.rotationType,c)}function _(t){return w(t,A)}function m(t){return w(t,O)}function g(t){return b(t,A)}function y(t){return b(t,O)}function w(t,e){return(0,o.Nk)((0,s.kM)(t,"degrees"),"geographic",d,e,!1)}function b(t,e){const n=e.normalize((0,s.kM)(t,"degrees").value,void 0,!1);return M((0,s.LF)(n),d)}function k(t){return(0,l.ZV)(t.value,{style:"percent"})}function x(t){return(0,l.ZV)(t,{style:"percent",maximumFractionDigits:0})}function M(t,e){return(0,l.ZV)(t.value,C(e))}function C(t){return{minimumFractionDigits:t,maximumFractionDigits:t}}function T(t){let{createQuantity:e,sanitize:n}=t;return(t,i)=>{if(null==t)return null;n&&(t=n(t));const o=(0,l.$J)(t);return null==o?null:e(o,i)}}function $(t){return t.replaceAll(/[*^~\xb0\xba]/g,"")}const K=t=>{let e=`[-+]?[0-9${t.thousands}]+`;return""!==t.decimal&&(e+=`${t.decimal}[0-9]+`),new RegExp(`^(${e}\\s*)${t.separator}(\\s*${e})$`,"i")},E=[];for(const R of[",","\\|","\\s+"])for(const t of["\\.",",",""])for(const e of["",",","\\.","\u202f","\\s+"])R!==t&&R!==e&&t!==e&&E.push({separator:R,decimal:t,thousands:e,pattern:K({decimal:t,thousands:e,separator:R})});function S(t){for(const{decimal:e,thousands:n,pattern:i}of E){i.lastIndex=0;const o=t.match(i);if(!o)continue;const r=(0,l.$J)(L(o[1],e,n)),a=(0,l.$J)(L(o[2],e,n));if(null!=r&&null!=a)return{x:(0,s.LF)(r),y:(0,s.LF)(a)}}return null}function L(t,e,n){let i=t.replaceAll(/[\s+]/g,"");return""!==n&&(i=i.replaceAll(n,"")),""!==e&&(i=i.replaceAll(e,".")),i}function D(t){if(!t||null!=(0,l.$J)(t)||!(0,r.isLoaded)())return null;const e=(0,r.fromLatitudeLongitude)(t),n=P(e?.latitude),i=P(e?.longitude);return null!=i&&null!=n?{latitude:n,longitude:i}:null}function Z(t){return P((0,r.fromLongitude)(t))}function I(t){return P((0,r.fromLatitude)(t))}function P(t){return null!=t?(0,s.Wq)(t,"degrees","geographic"):null}const A=new i.hr(-180,180),O=new i.hr(-90,90)},52566:(t,e,n)=>{n.r(e),n.d(e,{fromLatitude:()=>h,fromLatitudeLongitude:()=>u,fromLongitude:()=>p,fromMgrs:()=>f,fromUsng:()=>v,fromUtm:()=>_,isLoaded:()=>a,isSupported:()=>c,load:()=>d,toLatitudeLongitude:()=>m,toMgrs:()=>g,toUsng:()=>y,toUtm:()=>w});var i=n(74719),o=n(93205),s=n(75400),r=n(93321),l=n(23224);function a(){return(0,o.i)()}function c(){return(0,o.b)()}function d(){return(0,o.l)()}function u(t,e){const n=[];t=(t=(t=t.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("\u2032","'")).replaceAll("\u2033",'"');const i=b(e);return o.c.dmsToGeog(i,1,[t],n)?new s.default(n[0][0],n[0][1],e||r.default.WGS84):null}function p(t){return t&&a()?(0,l.$J)(t)??u(`0\xb0 0' 0" N | ${t}`)?.longitude??u(`0 | ${t}`)?.longitude??null:null}function h(t){return t&&a()?(0,l.$J)(t)??u(`${t} | 0\xb0 0' 0" E`)?.latitude??u(`${t} | 0`)?.latitude??null:null}function f(t,e,n){const i=[],l=k(n);if(-1===l)return console.warn(`invalid conversionMode: ${n}`),null;const a=b(e);return o.d.mgrsToGeogExtended(a,1,[t],l,i)?new s.default(i[0][0],i[0][1],e||r.default.WGS84):null}function v(t,e){const n=[];!e&&/\(.+27/.test(t)&&(e=r.default.GCS_NAD_1927);const i=b(e);return o.e.usngToGeog(i,1,[t],n)?new s.default(n[0][0],n[0][1],e||r.default.WGS84):null}function _(t,e,n){const i=[],l=x(n);if(-1===l)return console.warn(`invalid conversionMode: ${n}`),null;const a=b(e);return o.f.utmToGeog(a,1,[t],l,i)?new s.default(i[0][0],i[0][1],e||r.default.WGS84):null}function m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=[[t.x,t.y]],s=[],r=b(t.spatialReference);let l=0;switch(e){case"dd":l=o.c.geogToDd(r,1,i,n,s);break;case"ddm":l=o.c.geogToDdm(r,1,i,n,s);break;case"dms":l=o.c.geogToDms(r,1,i,n,s);break;default:return console.warn(`invalid format: ${e}`),null}return l?s[0]:null}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=[[t.x,t.y]],r=[],l=b(t.spatialReference);let a=k(e);return-1===a?(console.warn(`invalid conversionMode: ${e}`),null):(i&&(a|=o.d.PE_MGRS_ADD_SPACES),o.d.geogToMgrsExtended(l,1,s,n,!1,a,r)?r[0]:null)}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[[t.x,t.y]],s=[],r=b(t.spatialReference);return o.e.geogToUsng(r,1,i,e,!1,n,s)?s[0]:null}function w(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[[t.x,t.y]],s=[],r=b(t.spatialReference);let l=x(e);return-1===l?(console.warn(`invalid conversionMode: ${e}`),null):(n&&(l|=o.f.PE_UTM_OPTS_ADD_SPACES),o.f.geogToUtm(r,1,i,l,s)?s[0]:null)}function b(t){let e=null;if(t||(t=r.default.WGS84),t.wkid){if(e=o.P.geogcs(t.wkid),!e)throw new i.default("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!t.wkt2&&!t.wkt)throw new i.default("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(e=o.P.fromString(o.a.PE_TYPE_GEOGCS,t.wkt2||t.wkt),!e)throw new i.default("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return e}function k(t){let e=-1;switch(t){case"automatic":e=o.d.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":e=o.d.PE_MGRS_STYLE_NEW|o.d.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":e=o.d.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":e=o.d.PE_MGRS_STYLE_OLD|o.d.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":e=o.d.PE_MGRS_STYLE_OLD}return e}function x(t){let e=-1;switch(t){case"latitude-band-indicators":e=o.f.PE_UTM_OPTS_NONE;break;case"north-south-indicators":e=o.f.PE_UTM_OPTS_NS}return e}},95329:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Mt});var i=n(93800),o=n(58448),s=n(63160),r=n(17741),l=n(79953),a=n(16804),c=n(48602),d=(n(21265),n(50925),n(14746),n(75269)),u=n(5619);const p="esri-tooltip",h=`${p}-content`,f=`${p}-content--input`,v=`${p}-content__header`,_=`${p}-content__header__spacer`,m=`${p}-content__header__actions`,g=`${p}-draw-header-actions`,y=`${p}-table`,w=`${p}-help-message`,b=`${p}-help-message__text`,k=`${p}-help-message__icon`;n(74719);var x=n(27811),M=n(17745),C=n(87118);const T=`${p}-field`,$={base:T,inputMode:`${T}--input`,title:`${T}__title`,value:`${T}__value`};let K=class extends x.default{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return(0,C.K)("div",{class:this.classes({[$.base]:!0,[$.inputMode]:"input"===this.mode})},(0,C.K)("div",{class:$.title,key:"title"},this.title),(0,C.K)("div",{class:$.value,key:"value"},this.value))}};(0,i._)([(0,c.MZ)()],K.prototype,"hidden",void 0),(0,i._)([(0,c.MZ)()],K.prototype,"mode",void 0),(0,i._)([(0,c.MZ)()],K.prototype,"title",void 0),(0,i._)([(0,c.MZ)()],K.prototype,"value",void 0),K=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.components.TooltipField")],K);const E={base:`${p}-value-by-value`};let S=class extends x.default{constructor(){super(...arguments),this.divider="\xd7"}render(){return(0,C.K)("div",{class:E.base},(0,C.K)("span",null,this.left),(0,C.K)("span",null,this.divider),(0,C.K)("span",null,this.right))}};(0,i._)([(0,c.MZ)()],S.prototype,"left",void 0),(0,i._)([(0,c.MZ)()],S.prototype,"divider",void 0),(0,i._)([(0,c.MZ)()],S.prototype,"right",void 0),S=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.components.ValueByValue")],S);var L=n(15564),D=n(13561),Z=n(49959),I=n(7187),P=n(6579),A=n(84190),O=n(56062),R=n(4542),V=n(46910),F=n(49403),N=n(76697);const U=Symbol("dragHandles");let G=class extends x.default{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transitionInfo=null,this._mode="feedback",this._getFormatters=(0,D.B)(V.GC),this._onHeaderPointerDown=t=>{const e=t.target;e instanceof HTMLElement&&"calcite-button"!==e?.tagName?.toLowerCase()&&(this.removeHandles(U),e.setPointerCapture(t.pointerId),this.tooltip.onDragStart(t.clientX,t.clientY),this.addHandles([(0,s.on)(e,"pointermove",(t=>{let{clientX:e,clientY:n}=t;this.tooltip.onDrag(e,n)})),(0,s.on)(e,["pointerup","pointercancel"],(n=>{this.removeHandles(U),e.releasePointerCapture(t.pointerId),this.tooltip.onDragEnd()})),(0,s.on)(e,"touchstart",(t=>t.preventDefault()))],U))},this._onDiscard=()=>{this.destroyed||(this.tooltip.emit("discard"),this.info.clearInputValues(),this.exitInputMode())},this._onCommit=(t,e)=>{if(this.destroyed)return;if(this.tooltip.emit("commit",{type:e}),"commit-and-exit"===e)return void this.exitInputMode();if("commit-on-blur"===e)return;const n=this._getFocusableElements(),i=n.length,o=n.indexOf(t);if(-1===o)return void this.exitInputMode();const s=((o+("commit-and-next"===e?1:-1))%i+i)%i;z(n.at(s))},this._onKeyDown=t=>{switch(t.code){case R.ac.next:return this._onNextKey(t);case R.ac.discard:return t.stopPropagation(),this._onDiscard()}}}get mode(){return this._mode}get _displayUnits(){const{displayUnits:t}=this.info.sketchOptions.values,e=(0,O.c)(this.tooltip.view);return{length:t.length??e,verticalLength:t.verticalLength??e,area:t.area??e}}get _inputUnitInfos(){const t=this._messagesUnits,e=e=>({unit:e,abbreviation:(0,P.Cq)(t,e,"abbr")}),{inputUnits:n}=this.info.sketchOptions.values,i=(0,O.c)(this.tooltip.view),o=n.length??i,s=n.verticalLength??i,r=n.area??i;return{length:e((0,A.wL)(o)),verticalLength:e((0,A.m5)(s)),area:e((0,A.tW)(r)),angle:e("degrees")}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){const{visibleElements:t}=this.info.sketchOptions.tooltips,e=this._renderedContent,n=this._renderedActions,i=this._renderedHelpMessage,o=e.length>0,s=o||!!i,r="input"===this.mode;return(0,C.K)("div",{class:(0,M.Ly)(h,r&&f),onkeydown:this._onKeyDown,tabIndex:-1},r&&s&&t.header?(0,C.K)("div",{class:v,"data-testid":"tooltip-header",key:"header",onpointerdown:this._onHeaderPointerDown},(0,C.K)("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),n.length>0?(0,C.K)(C.w,null,(0,C.K)("div",{class:_,key:"spacer"}),(0,C.K)("div",{class:m,key:"actions"},n)):null):null,o?(0,C.K)("div",{class:y,key:"content"},...e):null,i)}destroy(){this._focusAbortController.abort(),this._transitionInfo?.transition.skipTransition()}_renderActions(){return null}loadDependencies(){return(0,F.W)({button:()=>Promise.resolve().then(n.bind(n,20423)),icon:()=>Promise.resolve().then(n.bind(n,92439)),input:()=>n.e(46138).then(n.bind(n,46138))})}async enterInputMode(t,e){try{await this._transitionTo("input",e),await this._focusField(t)}catch(n){(0,Z.throwIfNotAbortError)(n)}}async exitInputMode(){let{focusOnView:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{container:e,info:n}=this;n.clearInputValues();const i=t?e?.closest(".esri-view")?.querySelector(".esri-view-surface"):null;await this._transitionTo("feedback"),i instanceof HTMLElement&&i.focus()}catch(p){(0,Z.throwIfNotAbortError)(p)}}_onNextKey(t){const e=this._getFocusableElements(),n=e.at(0),i=e.at(-1);n&&i&&(t.shiftKey?document.activeElement===n&&(t.preventDefault(),t.stopPropagation(),z(i)):document.activeElement===i&&(t.preventDefault(),t.stopPropagation(),z(n)))}get _renderedContent(){return Y(this._renderContent())}get _renderedActions(){return Y(this._renderActions())}get _renderedHelpMessage(){const{sketchOptions:t,visibleElements:e}=this.info;if(!e.helpMessage)return null;const n=t.tooltips.helpMessage??this._defaultHelpMessage;if(!n)return null;const i=t.tooltips.helpMessageIcon??"information";return(0,C.K)("div",{class:w,key:"help-message"},i?(0,C.K)("calcite-icon",{class:k,icon:i,scale:"s"}):null,(0,C.K)("div",{class:b},n))}get _defaultHelpMessage(){const{helpMessage:t,viewType:e}=this.info;if(null==t)return null;const n="3d"===e?"helpMessages3d":"helpMessages2d";return this._messagesTooltip?.sketch?.[n]?.[t]}async _focusField(t){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;const{signal:e}=this._focusAbortController;await this._waitForInputs(),(0,Z.throwIfAborted)(e);const n=this._getFocusableInputs(),i=t?n.find((e=>e.getAttribute("data-field-name")===t)):n.at(0);await z(i)}async _transitionTo(t,e){if(this._mode===t&&!this._transitionInfo)return;if(this._transitionInfo?.mode===t)return this._transitionInfo.transition.finished;this._transitionInfo?.transition.skipTransition();const n=async()=>{this.destroyed||(this._mode=t,await(0,I.waitTick)(),this.destroyed||(this.renderNow(),await(0,I.waitTick)(),this.destroyed||e?.()))};if(!this.domNode?.firstChild||!document.startViewTransition||(0,L.O)())return void await n();this.autoRenderingEnabled=!1;const i=this._transitionInfo={transition:document.startViewTransition((async()=>{this.destroyed||i!==this._transitionInfo||(this.autoRenderingEnabled=!0,await n())})),mode:t};try{await i.transition.finished}finally{i===this._transitionInfo&&(this._transitionInfo=null)}}async _waitForInputs(){const t=()=>Array.from(this.domNode?.querySelectorAll("calcite-input")??[]);for(;0===t().length;)await(0,Z.after)(X);await(0,I.waitAnimationFrame)()}_getFocusableInputs(){return Array.from(this.domNode?.querySelectorAll("calcite-input:not([read-only]):not([disabled])")??[])}_getFocusableElements(){const t=this.domNode?.querySelector(`.${g}`);return[...Array.from(t?.querySelectorAll(`.${m} calcite-button:not([disabled])`)??[]),...this._getFocusableInputs()]}};async function z(t){await(t?.setFocus())}function Y(t){return(Array.isArray(t)?t:[t]).flat(10).filter((t=>!!t))}(0,i._)([(0,N.G)("esri/core/t9n/Units"),(0,c.MZ)()],G.prototype,"_messagesUnits",void 0),(0,i._)([(0,N.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,c.MZ)()],G.prototype,"_messagesTooltip",void 0),(0,i._)([(0,c.MZ)()],G.prototype,"info",void 0),(0,i._)([(0,c.MZ)()],G.prototype,"tooltip",void 0),(0,i._)([(0,c.MZ)()],G.prototype,"_mode",void 0),(0,i._)([(0,c.MZ)()],G.prototype,"mode",null),(0,i._)([(0,c.MZ)()],G.prototype,"_displayUnits",null),(0,i._)([(0,c.MZ)()],G.prototype,"_inputUnitInfos",null),(0,i._)([(0,c.MZ)()],G.prototype,"_formatters",null),(0,i._)([(0,c.MZ)()],G.prototype,"fieldContext",null),(0,i._)([(0,c.MZ)()],G.prototype,"_renderedContent",null),(0,i._)([(0,c.MZ)()],G.prototype,"_renderedActions",null),(0,i._)([(0,c.MZ)()],G.prototype,"_renderedHelpMessage",null),(0,i._)([(0,c.MZ)()],G.prototype,"_defaultHelpMessage",null),G=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContent")],G);const X=20;let H=class extends G{_renderContent(){const{area:t,radius:e,xSize:n,ySize:i,visibleElements:o}=this.info,s=this._messagesTooltip.sketch,r=this._formatters;return(0,C.K)(C.w,null,o.radius&&null!=e?(0,C.K)(K,{title:s.radius,value:r.length(e)}):null,o.size&&null!=n&&null!=i?(0,C.K)(K,{title:s.size,value:(0,C.K)(S,{left:r.length(n),right:r.length(i)})}):null,o.area?(0,C.K)(K,{title:s.area,value:r.area(t)}):null)}};H=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],H);const W=`${p}-editable-field`,B={base:W,inputMode:`${W}--input`,feedbackMode:`${W}--feedback`,readOnly:`${W}--read-only`,locked:`${W}--locked`,title:`${W}__title`,value:`${W}__value`,valueContent:`${W}__value__content`,valueContentReadOnly:`${W}__value__content--read-only`,lockIcon:`${W}__lock-icon`,input:`${W}__input`,inputWrapper:`${W}__input-wrapper`,inputMessage:`${W}__input-message`,inputSuffix:`${W}__input-suffix`,button:`${W}__button`},q="lock",J="unlock";let j=class extends x.default{constructor(){super(...arguments),this._input=null,this._lock=null,this._onLockClick=()=>{this.field.toggleLock(this.context)},this._onLockAfterCreate=t=>{this._lock=t},this._onLockAfterRemoved=()=>{this._lock=null},this._onKeyDown=t=>{t.key===R.ac.discard&&"input"===this.mode&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=t=>{const e=this._input;if(e)switch(t.key){case R.ac.commit:return this.field.onCommit("commit-and-exit",e,this.context);case R.ac.next:{t.preventDefault(),t.stopPropagation();const n=t.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(n,e,this.context)}}},this._onInput=t=>{this.field.onInput(t.currentTarget.value)},this._onInputBlur=t=>{const e=this._input;e&&t.relatedTarget!==this._lock&&this.field.onCommit("commit-on-blur",e,this.context)},this._selectText=()=>{const t=()=>{this._input===document.activeElement&&this._input?.selectText()};t(),(0,I.waitAnimationFrame)().then(t)},this._onAfterCreate=t=>{this._input=t,t.addEventListener("paste",this._onPaste),t.addEventListener("beforeinput",this._onBeforeInput)},this._onAfterRemoved=t=>{t.removeEventListener("paste",this._onPaste),t.removeEventListener("beforeinput",this._onBeforeInput)},this._onPaste=t=>{const e=t.clipboardData?.getData("text");e&&null!=this.field.parse(e,this.context)&&(t.stopPropagation(),this.field.onInput(e))},this._onBeforeInput=t=>{("historyUndo"===t.inputType||"historyRedo"===t.inputType)&&!this.field.dirty&&t.preventDefault()}}initialize(){this.addHandles((0,l.watch)((()=>this._rawDisplayValue),(()=>{const{committed:t,inputValue:e}=this.field;t||e||this._input!==document.activeElement||this._selectText()})))}loadDependencies(){return(0,F.W)({button:()=>Promise.resolve().then(n.bind(n,20423)),icon:()=>Promise.resolve().then(n.bind(n,92439)),input:()=>n.e(46138).then(n.bind(n,46138)),"input-message":()=>n.e(60380).then(n.bind(n,60380))})}render(){const{field:t,mode:e}=this,n="input"===e,{locked:i,readOnly:o}=t;return(0,C.K)("div",{class:this.classes({[B.base]:!0,[B.feedbackMode]:"feedback"===e,[B.inputMode]:"input"===e,[B.locked]:i,[B.readOnly]:o})},(0,C.K)("div",{class:B.title,key:"title"},this._title),(0,C.K)("div",{class:B.value,key:"value",onkeydown:this._onKeyDown},n?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||Q}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){const{title:t}=this.field;return"string"==typeof t?t:t(this.context)}get _messages(){return this.context?.messages.sketch??{}}_renderValueFeedbackMode(){return(0,C.K)(C.w,null,(0,C.K)("div",{class:B.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&"input"!==this.mode?(0,C.K)("calcite-icon",{class:B.lockIcon,icon:q,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return(0,C.K)("div",{class:this.classes(B.valueContent,B.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){const{field:t}=this,e=this._messages,{name:n,invalid:i}=t;return(0,C.K)(C.w,null,(0,C.K)("div",{class:B.inputWrapper,key:"value-input"},(0,C.K)("calcite-input",{afterCreate:this._onAfterCreate,afterRemoved:this._onAfterRemoved,class:B.input,"data-field-name":n,"data-testid":`tooltip-field-${n}`,key:"input",onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:i?"invalid":"idle",type:"text",value:this._rawDisplayValue??Q,onCalciteInputInput:this._onInput}),i?(0,C.K)("calcite-input-message",{class:B.inputMessage,scale:"s",status:"invalid"},e.invalidValue):null),(0,C.K)("div",{class:B.inputSuffix,key:"suffix"},this._suffix),this._renderedLockButton)}get _renderedLockButton(){const{name:t,locked:e,lockable:n}=this.field;if(!n)return(0,C.K)("div",{key:"no-lock-button"});const i=this._messages,o=e?i.unlockConstraint:i.lockConstraint;return(0,C.K)("calcite-button",{afterCreate:this._onLockAfterCreate,afterRemoved:this._onLockAfterRemoved,alignment:"center",appearance:"transparent",class:B.button,"data-testid":`tooltip-field-${t}-lock`,iconStart:e?q:J,key:"lock-button",kind:"neutral",label:o,onclick:this._onLockClick,scale:"s",tabIndex:-1,title:o})}};(0,i._)([(0,c.MZ)()],j.prototype,"field",void 0),(0,i._)([(0,c.MZ)()],j.prototype,"context",void 0),(0,i._)([(0,c.MZ)()],j.prototype,"mode",void 0),(0,i._)([(0,c.MZ)()],j.prototype,"_input",void 0),(0,i._)([(0,c.MZ)()],j.prototype,"_lock",void 0),(0,i._)([(0,c.MZ)()],j.prototype,"_formattedValue",null),(0,i._)([(0,c.MZ)()],j.prototype,"_rawDisplayValue",null),(0,i._)([(0,c.MZ)()],j.prototype,"_suffix",null),(0,i._)([(0,c.MZ)()],j.prototype,"_title",null),(0,i._)([(0,c.MZ)()],j.prototype,"_messages",null),(0,i._)([(0,c.MZ)()],j.prototype,"_renderedLockButton",null),j=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.components.TooltipEditableField")],j);const Q="\u2014";function tt(t){const e=t.fields.filter((t=>!0===t?.visible));return 0===e.length?null:(0,C.K)(C.w,null,e.map((e=>(0,C.K)(j,{context:t.context,field:e,key:e.id,mode:t.mode}))))}let et=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,C.K)(tt,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:n})}};et=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],et);let nt=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{elevation:i,visibleElements:o}=e;return(0,C.K)(tt,{context:t,fields:[o.coordinates?e.effectiveX:void 0,o.coordinates?e.effectiveY:void 0,o.elevation?i:void 0],mode:n})}};nt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],nt);var it=n(12010);let ot=class extends x.default{constructor(t){super(t),this.visibleElements={}}render(){return(0,C.K)("div",{class:g},this._isElementVisible("direction")?(0,C.K)(st,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return(0,F.W)({button:()=>Promise.resolve().then(n.bind(n,20423)),dropdown:()=>n.e(41631).then(n.bind(n,41631)),"dropdown-item":()=>n.e(54055).then(n.bind(n,54055)),"dropdown-group":()=>n.e(90553).then(n.bind(n,90553))})}_isElementVisible(t){return this.visibleElements?.[t]??this.sketchOptions.tooltips.visibleElements[t]}};function st(t){const{directionMode:e}=t.sketchOptions.values,n=t.messages?.sketch,i=n?.directionModeSelect?.title,o="absolute",s="relative";return(0,C.K)("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:e=>{const n=e.currentTarget.selectedItems?.[0]?.getAttribute("data-mode");t.sketchOptions.values.directionMode=n??"absolute"}},(0,C.K)("calcite-button",{alignment:"end",appearance:"transparent",iconStart:it.N[e],kind:"neutral",label:i,scale:"s",slot:"trigger",title:i}),(0,C.K)("calcite-dropdown-group",{selectionMode:"single"},(0,C.K)("calcite-dropdown-item",{"data-mode":s,"data-testid":"tooltip-direction-mode-relative",iconStart:it.N.relative,key:"relative",selected:e===s},n?.directionModeSelect?.relative),(0,C.K)("calcite-dropdown-item",{"data-mode":o,"data-testid":"tooltip-direction-mode-absolute",iconStart:it.N.absolute,key:"absolute",selected:e===o},n?.directionModeSelect?.absolute)))}(0,i._)([(0,N.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,c.MZ)()],ot.prototype,"messages",void 0),(0,i._)([(0,c.MZ)()],ot.prototype,"sketchOptions",void 0),(0,i._)([(0,c.MZ)()],ot.prototype,"visibleElements",void 0),ot=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.components.DrawHeaderActions")],ot);let rt=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{xyMode:i,visibleElements:o}=e;return(0,C.K)(tt,{context:t,fields:[..."direction-distance"===i?[o.direction?e.direction:void 0,o.distance?e.distance:void 0]:[o.coordinates?e.effectiveX:void 0,o.coordinates?e.effectiveY:void 0],o.elevation?e.elevation:void 0,o.area?e.area:void 0],mode:n})}_renderActions(){const{xyMode:t,sketchOptions:e}=this.info;return(0,C.K)(ot,{sketchOptions:e,visibleElements:{direction:"direction-distance"===t}})}};rt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],rt);let lt=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{xyMode:i,visibleElements:o}=e;return(0,C.K)(tt,{context:t,fields:[..."direction-distance"===i?[o.direction?e.direction:void 0,o.distance?e.distance:void 0]:[o.coordinates?e.effectiveX:void 0,o.coordinates?e.effectiveY:void 0],o.elevation?e.elevation:void 0,o.totalLength?e.totalLength:void 0],mode:n})}_renderActions(){const{xyMode:t,sketchOptions:e}=this.info;return(0,C.K)(ot,{sketchOptions:e,visibleElements:{direction:"direction-distance"===t}})}};lt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],lt);let at=class extends G{_renderContent(){const{area:t,xSize:e,ySize:n,visibleElements:i}=this.info,o=this._messagesTooltip.sketch,s=this._formatters;return(0,C.K)(C.w,null,i.size&&null!=e&&null!=n?(0,C.K)(K,{title:o.size,value:(0,C.K)(S,{left:s.length(e),right:s.length(n)})}):null,i.area?(0,C.K)(K,{title:o.area,value:s.area(t)}):null)}};at=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],at);let ct=class extends G{_renderContent(){const{angle:t,visibleElements:e}=this.info,n=this._messagesTooltip.sketch;return(0,C.K)(C.w,null,e.rotation?(0,C.K)(K,{title:n.rotation,value:this._formatters.angleRelative(t)}):null)}};ct=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],ct);let dt=class extends G{_renderContent(){const t=this.info,{visibleElements:e}=t,n=this._messagesTooltip.sketch,i=this._formatters;return(0,C.K)(C.w,null,e.size?(0,C.K)(K,{title:n.size,value:(0,C.K)(S,{left:i.length(t.xSize),right:i.length(t.ySize)})}):null,e.scale?(0,C.K)(K,{title:n.scale,value:(0,C.K)(S,{left:i.scale(t.xScale),right:i.scale(t.yScale)})}):null)}};dt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],dt);let ut=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,C.K)(tt,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0],mode:n})}};ut=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],ut);let pt=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,C.K)(tt,{context:t,fields:[i.distance?e.distance:void 0,i.area?e.area:void 0,i.totalLength?e.totalLength:void 0],mode:n})}};pt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],pt);let ht=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,C.K)(tt,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.area&&"polygon"===e.geometryType?e.area:null,i.totalLength&&"polyline"===e.geometryType?e.totalLength:null],mode:n})}};ht=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],ht);let ft=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,C.K)(tt,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:n})}};ft=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],ft);let vt=class extends G{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,C.K)(tt,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.size?e.size:void 0],mode:n})}};vt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],vt);let _t=class extends G{_renderContent(){const{info:t}=this,{visibleElements:e}=t,n=this._messagesTooltip.sketch,i=this._formatters;return(0,C.K)(C.w,null,e.distance?(0,C.K)(K,{title:n.distance,value:i.length(t.distance)}):null)}};_t=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentTranslate")],_t);let mt=class extends G{_renderContent(){const{distance:t,elevation:e,area:n,totalLength:i,visibleElements:o}=this.info,s=this._messagesTooltip.sketch,r=this._formatters;return(0,C.K)(C.w,null,o.distance?(0,C.K)(K,{title:s.distance,value:r.length(t)}):null,o.elevation&&null!=e?.actual?(0,C.K)(K,{title:s.elevation,value:r.verticalLength(e.actual)}):null,o.area&&null!=n?(0,C.K)(K,{title:s.area,value:r.area(n)}):null,o.totalLength&&null!=i?(0,C.K)(K,{title:s.totalLength,value:r.length(i)}):null)}};mt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],mt);let gt=class extends G{_renderContent(){const{info:t}=this,{visibleElements:e}=t,n=this._messagesTooltip.sketch,i=this._formatters;return(0,C.K)(C.w,null,e.distance?(0,C.K)(K,{title:n.distance,value:i.length(t.distance)}):null)}};gt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],gt);let yt=class extends G{_renderContent(){const{info:t}=this,{visibleElements:e}=t,n=this._messagesTooltip.sketch;return(0,C.K)(C.w,null,e.distance?(0,C.K)(K,{title:n.distance,value:this._formatters.verticalLengthRelative(t.distance)}):null)}};yt=(0,i._)([(0,d.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],yt);const wt={base:`${p}`,ltr:`${p}--ltr`,rtl:`${p}--rtl`,debug:`${p}--debug`};let bt=class extends o.A.EventedAccessor{constructor(t){super(t),this.info=null,this.options=null,this.position=null,this.content=null,this._focused=!1,this.outerContainer=document.createElement("div"),this.debug=!1,this._lastPosition=null,this._rtl=!1,this._prevXY=[0,0]}initialize(){const{outerContainer:t}=this;this.addHandles([(0,l.watch)((()=>this.view.overlay?.surface),(e=>{t.remove(),e?.appendChild(t),this._rtl=(0,M.V8)(e)}),l.syncAndInitial),(0,l.watch)((()=>this.info),((e,n)=>{if(null!=this.content&&null!=e&&null!=n&&e.type===n.type)this.content.info=e;else{(0,r.pR)(this.content);const n=function(t,e){if(null==e)return null;const n=document.createElement("div");switch(e.type){case"draw-point":case"draw-multipoint":return new nt({tooltip:t,info:e,container:n});case"draw-polygon":return new rt({tooltip:t,info:e,container:n});case"draw-polyline":return new lt({tooltip:t,info:e,container:n});case"draw-mesh":return new et({tooltip:t,info:e,container:n});case"draw-rectangle":return new at({tooltip:t,info:e,container:n});case"draw-circle":return new H({tooltip:t,info:e,container:n});case"extent-rotate":return new ct({tooltip:t,info:e,container:n});case"extent-scale":return new dt({tooltip:t,info:e,container:n});case"move-point":return new ut({tooltip:t,info:e,container:n});case"selected-vertex":return new ht({tooltip:t,info:e,container:n});case"transform-point":return new vt({tooltip:t,info:e,container:n});case"transform-mesh":return new ft({tooltip:t,info:e,container:n});case"translate":return new _t({tooltip:t,info:e,container:n});case"translate-vertex":return new mt({tooltip:t,info:e,container:n});case"translate-z":return new yt({tooltip:t,info:e,container:n});case"translate-xy":return new gt({tooltip:t,info:e,container:n});case"reshape-edge-offset":return new pt({tooltip:t,info:e,container:n})}}(this,e);n?(this.content=n,n.container&&t.appendChild(n.container),this.exitInputMode()):this.content=null}}),l.syncAndInitial),(0,l.watch)((()=>({container:this.outerContainer,style:this._outerContainerStyle})),(t=>{let{container:e,style:n}=t;Object.assign(e.style,n)}),l.initial),(0,l.watch)((()=>({outerContainer:this.outerContainer,placement:this.effectivePlacement,effectiveOffset:this._effectiveOffset,rtl:this._rtl,debug:this.debug})),(t=>{let{outerContainer:e,placement:n,effectiveOffset:i,rtl:o,debug:s}=t;const{classList:r}=e;r.add(wt.base),r.toggle(wt.rtl,o),r.toggle(wt.ltr,!o),r.toggle(wt.debug,s),this.outerContainer.style.setProperty("--offset",`${i}px`),(0,u.hY)(e),function(t,e){let{classList:n}=t;kt.forEach((t=>n.remove(t))),n.add(xt(e))}(e,n)}),l.initial),(0,l.when)((()=>"feedback"===this.mode),(()=>{this.position=null,this._clearOverride("effectivePlacement")}),l.sync),(0,s.on)(this.outerContainer,"paste",(t=>{this.emit("paste",t)})),(0,s.on)(this.outerContainer,["focusin","focusout"],(()=>{setTimeout((()=>{this._focused=this.content?.container?.contains(document.activeElement)??!1}))}))])}destroy(){this.info=null,this.content=(0,r.pR)(this.content),this.outerContainer.remove()}get mode(){return this.content?.mode??"feedback"}get focused(){return this._focused}get visible(){return"none"!==this._outerContainerStyle.display}get contentContainer(){return this.content?.container}get effectivePlacement(){const t=this.options?.placement;return"auto"===t?"bottom-end":t??"bottom-end"}get _screenPoint(){const{inputManager:t}=this.view;return t?.multiTouchActive?null:t?.latestPointerLocation}get _effectiveOffset(){return this.options?.offset??20}get _outerContainerStyle(){const t=this.position??this._screenPoint;return this._lastPosition=(0,a.y8)(t),null!=t&&null!=this.content?{display:"block",transform:`translate(${Math.round(t.x)}px, ${Math.round(t.y)}px)`}:{display:"none",transform:"none"}}clear(){this.info=null}async enterInputMode(t){const e=this.position??this._lastPosition??this._screenPoint,n=this.position=(0,a.y8)(e),{effectivePlacement:i}=this;this._override("effectivePlacement",i);await(this.content?.enterInputMode(t,(()=>{n&&(this.position=function(t,e,n,i){if(!t||!i.container)return e;const o=t.getBoundingClientRect(),{left:s,top:r}=i.container.getBoundingClientRect();let{x:l,y:c}=e;const d=o.left-s-n;d<0&&(l-=d);const u=o.right-s+n-i.width;u>0&&(l-=u);const p=o.top-r-n;p<0&&(c-=p);const h=o.bottom-r+n-i.height;return h>0&&(c-=h),(0,a.tc)(l,c)}(this.contentContainer,n,this._effectiveOffset,this.view),Object.assign(this.outerContainer.style,this._outerContainerStyle))})))}async exitInputMode(t){await(this.content?.exitInputMode(t))}onDragStart(t,e){this._prevXY=[t,e]}onDrag(t,e){const n=t-this._prevXY[0],i=e-this._prevXY[1];this._prevXY=[t,e];const{position:o}=this;if(o){const{view:s}=this,r=t-s.position[0],l=e-s.position[1];if(r<0||r>s.width||l<0||l>s.height-16)return;this.position=(0,a.tc)(o.x+n,o.y+i)}}onDragEnd(){this._prevXY=[0,0]}};(0,i._)([(0,c.MZ)({nonNullable:!0})],bt.prototype,"view",void 0),(0,i._)([(0,c.MZ)()],bt.prototype,"info",void 0),(0,i._)([(0,c.MZ)()],bt.prototype,"options",void 0),(0,i._)([(0,c.MZ)()],bt.prototype,"position",void 0),(0,i._)([(0,c.MZ)()],bt.prototype,"content",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"mode",null),(0,i._)([(0,c.MZ)()],bt.prototype,"_focused",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"focused",null),(0,i._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"outerContainer",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"contentContainer",null),(0,i._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"effectivePlacement",null),(0,i._)([(0,c.MZ)()],bt.prototype,"debug",void 0),(0,i._)([(0,c.MZ)()],bt.prototype,"_lastPosition",void 0),(0,i._)([(0,c.MZ)()],bt.prototype,"_screenPoint",null),(0,i._)([(0,c.MZ)()],bt.prototype,"_rtl",void 0),(0,i._)([(0,c.MZ)()],bt.prototype,"_effectiveOffset",null),(0,i._)([(0,c.MZ)()],bt.prototype,"_outerContainerStyle",null),bt=(0,i._)([(0,d.$)("esri.views.interactive.Tooltip")],bt);const kt=["top","bottom","leading","trailing"].flatMap((t=>[xt(`${t}-start`),xt(t),xt(`${t}-end`)]));function xt(t){return`${wt.base}--${t}`}const Mt=bt}}]);