"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[92189],{1149:(t,e,o)=>{o.d(e,{A:()=>u});var r=o(93800),i=o(88102),s=o(6946),n=o(48602),a=(o(21265),o(50925),o(14746),o(75269)),l=(o(63860),o(61977));o(62053);const h={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let d=class extends s.default{get position(){return[this.x,this.y]}set position(t){this._set("x",t[0]),this._set("y",t[1])}get _textShadowColor(){const{textColor:t,backgroundColor:e}=this,o=e.clone();return o.a*=t.a,o}get _textShadow(){const t=this._textShadowColor.toCss(!0);return`0 0 ${this._textShadowSize}px ${t}`}get padding(){return.5*this.fontSize}get borderRadius(){return this.padding}set borderRadius(t){this._overrideIfSome("borderRadius",t)}constructor(t){super(t),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.isDecoration=!0,this.backgroundColor=new i.default([0,0,0,.6]),this.textColor=new i.default([255,255,255]),this._textShadowSize=1}render(){return(0,l.h)("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this.padding+"px",borderRadius:this.borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,"");t.font=`${this.fontSize}px ${e}`;const{padding:o,borderRadius:r}=this,i=t.measureText(this.text).width,s=""!==this.text?this.fontSize:0,n=c[this.anchor];t.textAlign="center",t.textBaseline="middle";const a=i+2*o,l=s+2*o,h=this.x+n.x*a,d=this.y+n.y*l;this._roundedRect(t,h,d,a,l,r),t.fillStyle=this.backgroundColor.toCss(!0),t.fill();const p=this.x+(n.x+.5)*a,u=this.y+(n.y+.5)*l;this._renderTextShadow(t,this.text,p,u),t.fillStyle=this.textColor.toCss(!0),t.fillText(this.text,p,u)}_renderTextShadow(t,e,o,r){t.lineJoin="miter",t.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/p.length})`;const i=this._textShadowSize;for(const[s,n]of p)t.fillText(e,o+i*s,r+i*n)}_roundedRect(t,e,o,r,i,s){s=Math.min(s,i/2,r/2),t.beginPath(),t.moveTo(e,o+s),t.arcTo(e,o,e+s,o,s),t.lineTo(e+r-s,o),t.arcTo(e+r,o,e+r,o+s,s),t.lineTo(e+r,o+i-s),t.arcTo(e+r,o+i,e+r-s,o+i,s),t.lineTo(e+s,o+i),t.arcTo(e,o+i,e,o+i-s,s),t.closePath()}_cssClasses(){const t={"esri-text-overlay-item":!0};let e;for(e in h)t[h[e]]=this.anchor===e;return t}};(0,r._)([(0,n.MZ)()],d.prototype,"x",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"y",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"position",null),(0,r._)([(0,n.MZ)()],d.prototype,"text",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"fontSize",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"anchor",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"visible",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"isDecoration",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"backgroundColor",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"textColor",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"_textShadowSize",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"_textShadowColor",null),(0,r._)([(0,n.MZ)()],d.prototype,"_textShadow",null),(0,r._)([(0,n.MZ)()],d.prototype,"padding",null),(0,r._)([(0,n.MZ)()],d.prototype,"borderRadius",null),d=(0,r._)([(0,a.$)("esri.views.overlay.TextOverlayItem")],d);const c={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},p=[];{const t=16;for(let e=0;e<360;e+=360/t)p.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}const u=d},20561:(t,e,o)=>{o.d(e,{t:()=>p});var r=o(87752),i=o(10382),s=o(89227),n=o(28473),a=o(24646),l=o(75075),h=o(72530),d=o(60984),c=o(23664);class p extends l.X{constructor(t,e){super(t),this._hasExternalMaterial=!1,this._hasExternalMaterial=null!=e,this._material=null!=e?e:new c.W({width:1,color:(0,a.fA)(1,0,1,1),stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerWidth:1,hasPolygonOffset:!1,renderOccluded:d.m$.OccludeAndTransparent,isDecoration:!!t.isDecoration,writeDepth:!0}),this.applyProperties(t)}setGeometryFromPoint(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const o=(0,n.vt)();this.view.renderCoordsHelper.toRenderCoords(t,o)&&this.setGeometryFromRenderSpacePoint(o,e)}setGeometryFromRenderSpacePoint(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.geometry=[[[t[0]-e,t[1],t[2]],[t[0]+e,t[1],t[2]]],[[t[0],t[1]-e,t[2]],[t[0],t[1]+e,t[2]]],[[t[0],t[1],t[2]-e],[t[0],t[1],t[2]+e]]]}setGeometryFromExtent(t){const e=this.view.spatialReference,o=(0,n.vt)(),r=(0,n.vt)(),i=100,a=[];(0,s.i)(o,t[0],t[1],i),this.view.renderCoordsHelper.toRenderCoords(o,e,r),a.push([r[0],r[1],r[2]]),(0,s.i)(o,t[2],t[1],i),this.view.renderCoordsHelper.toRenderCoords(o,e,r),a.push([r[0],r[1],r[2]]),(0,s.i)(o,t[2],t[3],i),this.view.renderCoordsHelper.toRenderCoords(o,e,r),a.push([r[0],r[1],r[2]]),(0,s.i)(o,t[0],t[3],i),this.view.renderCoordsHelper.toRenderCoords(o,e,r),a.push([r[0],r[1],r[2]]),(0,s.i)(o,t[0],t[1],i),this.view.renderCoordsHelper.toRenderCoords(o,e,r),a.push([r[0],r[1],r[2]]),(0,s.i)(o,t[0],t[1],i),this.view.renderCoordsHelper.toRenderCoords(o,e,r),a.push([r[0],r[1],r[2]]),this.geometry=[a]}setGeometryFromFrustum(t){const e=[];t.lines.forEach((t=>{e.push([t.origin[0],t.origin[1],t.origin[2]]),e.push([t.endpoint[0],t.endpoint[1],t.endpoint[2]])})),this.geometry=[e]}setGeometryFromBoundedPlane(t){const e=[],o=t.origin,r=t.basis1,i=t.basis2,s=.5,a=(0,n.vt)(),l=(0,n.vt)(),h=(0,n.vt)(),d=(0,n.vt)();a[0]=o[0]-r[0]*s-i[0]*s,a[1]=o[1]-r[1]*s-i[1]*s,a[2]=o[2]-r[2]*s-i[2]*s,l[0]=o[0]-r[0]*s+i[0]*s,l[1]=o[1]-r[1]*s+i[1]*s,l[2]=o[2]-r[2]*s+i[2]*s,h[0]=o[0]+r[0]*s+i[0]*s,h[1]=o[1]+r[1]*s+i[1]*s,h[2]=o[2]+r[2]*s+i[2]*s,d[0]=o[0]+r[0]*s-i[0]*s,d[1]=o[1]+r[1]*s-i[1]*s,d[2]=o[2]+r[2]*s-i[2]*s,e.push([a[0],a[1],a[2]]),e.push([l[0],l[1],l[2]]),e.push([h[0],h[1],h[2]]),e.push([d[0],d[1],d[2]]),e.push([a[0],a[1],a[2]]),this.geometry=[e]}setGeometryFromSegment(t){const e=t.endRenderSpace;this.transform=(0,r.kN)(u,e);const{points:o}=t.createRenderGeometry(e,this.view.renderCoordsHelper);this.geometry=[o]}setGeometryFromSegments(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.uY;this.transform=(0,r.kN)(u,e),this.geometry=t.map((t=>t.createRenderGeometry(e,this.view.renderCoordsHelper).points))}getTransformedGeometry(){return null==this._geometry?null:this._geometry.map((t=>t.map((t=>(0,s.t)((0,n.vt)(),t,this.transform)))))}get renderOccluded(){return this._material.parameters.renderOccluded}set renderOccluded(t){this._material.setParameters({renderOccluded:t})}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this.recreateGeometry()}get width(){return this._material.parameters.width}set width(t){this._material.setParameters({width:t})}get color(){return this._material.parameters.color}set color(t){const e=1===t[3];this._material.setParameters({color:t,writeDepth:e})}get innerWidth(){return this._material.parameters.innerWidth}set innerWidth(t){this._material.setParameters({innerWidth:t})}get innerColor(){return this._material.parameters.innerColor}set innerColor(t){this._material.setParameters({innerColor:t})}get stipplePattern(){return this._material.parameters.stipplePattern}set stipplePattern(t){null!=this._material&&this._material.setParameters({stipplePattern:t})}get stippleOffColor(){return this._material.parameters.stippleOffColor}set stippleOffColor(t){this._material.setParameters({stippleOffColor:t})}get stipplePreferContinuous(){return this._material.parameters.stipplePreferContinuous}set stipplePreferContinuous(t){this._material.setParameters({stipplePreferContinuous:t})}get falloff(){return this._material.parameters.falloff}set falloff(t){this._material.setParameters({falloff:t})}get polygonOffset(){return this._material.parameters.hasPolygonOffset}set polygonOffset(t){this._material.setParameters({hasPolygonOffset:t})}createExternalResources(){}destroyExternalResources(){}createGeometries(t){for(const e of(0,h.z)(this.geometry)){const o=(0,h.t)(this._material,e);t.addGeometry(o)}}forEachExternalMaterial(t){this._hasExternalMaterial||t(this._material)}}const u=(0,i.vt)()},26905:(t,e,o)=>{o.d(e,{P:()=>l});var r=o(93800),i=o(42198),s=o(20620),n=o(48602),a=(o(21265),o(50925),o(14746),o(75269));const l=t=>{let e=class extends(s.A.EsriPromiseMixin(t)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(t){this._userInteractive=t}get updating(){return!1}get visible(){return null==this.parent||this.parent.visible&&!this.parent.suspended}set visible(t){this._overrideIfSome("visible",t)}forceInteractiveForViewModel(){return this._interactiveViewModelCount++,(0,i.hA)((()=>this._interactiveViewModelCount--))}};return(0,r._)([(0,n.MZ)({constructOnly:!0})],e.prototype,"parent",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],e.prototype,"view",void 0),(0,r._)([(0,n.MZ)({type:Boolean})],e.prototype,"interactive",null),(0,r._)([(0,n.MZ)()],e.prototype,"_userInteractive",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],e.prototype,"updating",null),(0,r._)([(0,n.MZ)()],e.prototype,"visible",null),(0,r._)([(0,n.MZ)()],e.prototype,"_interactiveViewModelCount",void 0),e=(0,r._)([(0,a.$)("esri.views.3d.analysis.AnalysisView3D")],e),e}},30834:(t,e,o)=>{o.d(e,{C:()=>d,J:()=>c});var r=o(89227),i=o(28473),s=o(96913),n=o(54671),a=o(18162),l=o(1696),h=o(11741);class d{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.vt)(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.vt)();this.startRenderSpace=t,this.endRenderSpace=e,this.type="euclidean"}eval(t,e,o){return(0,r.m)(e,this.startRenderSpace,this.endRenderSpace,t),o&&((0,r.d)(o,this.endRenderSpace,this.startRenderSpace),(0,r.n)(o,o)),e}createRenderGeometry(t,e){const o=[],i=[],s=(e,s)=>{const n=u;(0,r.d)(n,e,t),o.push([n[0],n[1],n[2]]),i.push([s[0],s[1],s[2]])},n=e.worldUpAtPosition(this.eval(.5,p),l.rq.get());return s(this.startRenderSpace,n),s(this.endRenderSpace,n),{points:o,normals:i}}static fromPositionAndVector(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,r.h)(p,e,o),(0,r.g)(p,t,p),new d((0,i.o8)(t),(0,i.o8)(p))}}class c{_projectIn(t,e){this._project?(0,a.F)(t,this.renderSpatialReference,e,this._pcpf):(0,r.c)(e,t)}constructor(t,e,o){this.startRenderSpace=t,this.endRenderSpace=e,this.renderSpatialReference=o,this.type="geodesic",this._start=(0,i.vt)(),this._end=(0,i.vt)(),this._pcpf=(0,n.lO)(o),this._project=(0,s.canProjectWithoutEngine)(o,this._pcpf),this._projectIn(t,this._start),this._projectIn(e,this._end)}eval(t,e,o){if(this._project)if(o){const i=u;(0,h.is)(this._start,this._end,t,e,i),(0,r.g)(_,e,i),(0,a.F)(e,this._pcpf,e,this.renderSpatialReference),(0,a.F)(_,this._pcpf,_,this.renderSpatialReference),(0,r.d)(o,_,e),(0,r.n)(o,o)}else(0,h.nu)(this._start,this._end,t,e),(0,a.F)(e,this._pcpf,e,this.renderSpatialReference);else(0,r.m)(e,this._start,this._end,t),o&&((0,r.d)(o,this._end,this._start),(0,r.n)(o,o));return e}createRenderGeometry(t,e){const o=[],i=[],s=(e,s)=>{const n=_;(0,r.d)(n,e,t),o.push([n[0],n[1],n[2]]),i.push([s[0],s[1],s[2]])};for(let r=0;r<128;++r){const t=r/127,o=p,i=u;this.eval(t,o),e.worldUpAtPosition(o,i),s(o,i)}return{points:o,normals:i}}}const p=(0,i.vt)(),u=(0,i.vt)(),_=(0,i.vt)()},38319:(t,e,o)=>{o.d(e,{W:()=>s});var r=o(60984),i=o(30051);class s extends r.im{intersect(t,e,o,r,s,n){return(0,i.Uy)(t,o,r,s,void 0,n)}}},61977:(t,e,o)=>{o.d(e,{h:()=>s});let r=t=>({vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}),i=(t,e,o)=>{for(let s=0,n=e.length;s<n;s++){let n=e[s];Array.isArray(n)?i(t,n,o):null!=n&&!1!==n&&("string"==typeof n&&(n=r(n)),o.push(n))}};function s(t,e,o){if(Array.isArray(e))o=e,e=void 0;else if(e&&("string"==typeof e||e.hasOwnProperty("vnodeSelector"))||o&&("string"==typeof o||o.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let r,s;return o&&1===o.length&&"string"==typeof o[0]?r=o[0]:o&&(s=[],i(t,o,s),0===s.length&&(s=void 0)),{vnodeSelector:t,properties:e,children:s,text:""===r?void 0:r,domNode:null}}},66983:(t,e,o)=>{o.d(e,{B:()=>s,V:()=>n});var r=o(96913),i=o(96504);function s(t,e,o){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=(0,r.tryProjectWithZConversion)(t,e);return null==n?null:(n.hasZ&&!s||null==o||(n.z=(0,i.R1)(o,n)??0),n)}function n(t,e,o){o.warnOnce(`Failed to project analysis geometry (id: '${t.id}'), projection from spatial reference (wkid: '${e.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}},72530:(t,e,o)=>{o.d(e,{t:()=>f,z:()=>y});var r=o(32006),i=o(98080),s=o(24646),n=o(30142),a=o(68693),l=o(66028),h=o(46576),d=o(55239),c=o(51064),p=o(65069),u=o(69291),_=o(25735),m=o(22131);function f(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=[],f=e.mapPositions;!function(t,e){const{attributeData:{position:o},removeDuplicateStartEnd:r}=t,i=function(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}(o)&&r,s=o.length/3-(i?1:0),n=new Array(2*(s-1)),a=i?o.slice(0,-3):o;let l=0;for(let h=0;h<s-1;h++)n[l++]=h,n[l++]=h+1;e.push([m.r.POSITION,new p.n(a,n,3,i)])}(e,i);const y=i[0][1].data,x=i[0][1].indices.length,w=(0,d.EH)(x);return function(t,e,o){if(null!=t.attributeData.colorFeature)return;const r=t.attributeData.color;e.push([m.r.COLOR,new p.n(r??s.Un,o,4)])}(e,i,w),function(t,e,o){null==t.attributeData.sizeFeature&&e.push([m.r.SIZE,new p.n([t.attributeData.size??1],o,1,!0)])}(e,i,w),function(t,e,o){t.attributeData.normal&&e.push([m.r.NORMAL,new p.n(t.attributeData.normal,o,3)])}(e,i,w),function(t,e,o){null!=t.attributeData.colorFeature&&e.push([m.r.COLORFEATUREATTRIBUTE,new p.n([t.attributeData.colorFeature],o,1,!0)])}(e,i,w),function(t,e,o){null!=t.attributeData.sizeFeature&&e.push([m.r.SIZEFEATUREATTRIBUTE,new p.n([t.attributeData.sizeFeature],o,1,!0)])}(e,i,w),function(t,e,o){null!=t.attributeData.opacityFeature&&e.push([m.r.OPACITYFEATUREATTRIBUTE,new p.n([t.attributeData.opacityFeature],o,1,!0)])}(e,i,w),function(t,e,o){if(null==t.overlayInfo||t.overlayInfo.renderCoordsHelper.viewingMode!==c.RT.Global||!t.overlayInfo.spatialReference.isGeographic)return;const i=(0,l.jh)(o.length),s=(0,n.tO)(t.overlayInfo.spatialReference);for(let r=0;r<i.length;r+=3)(0,a.RC)(o,r,i,r,s);const d=o.length/3,u=(0,h.oe)(d+1);let _=g,f=v,y=0,x=0;(0,r.hZ)(_,i[x++],i[x++]),x++,u[0]=0;for(let n=1;n<d+1;++n)n===d&&(x=0),(0,r.hZ)(f,i[x++],i[x++]),x++,y+=(0,r.xg)(_,f),u[n]=y,[_,f]=[f,_];e.push([m.r.DISTANCETOSTART,new p.n(u,e[0][1].indices,1,!0)])}(e,i,y),new _.V(t,i,f,u.X.Line,o)}const g=(0,i.vt)(),v=(0,i.vt)();function y(t,e){if(null==t||0===t.length)return[];const o=[];return t.forEach((t=>{const r=t.length,i=(0,l.jh)(3*r);t.forEach(((t,e)=>{i[3*e]=t[0],i[3*e+1]=t[1],i[3*e+2]=t[2]}));const s={attributeData:{position:i,normal:e},removeDuplicateStartEnd:!1};o.push(s)})),o}},79678:(t,e,o)=>{o.d(e,{Xq:()=>a,wk:()=>n});const r={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},i={dash:r.dash,"dash-dot":[...r.dash,...r.dot],dot:r.dot,"long-dash":r["long-dash"],"long-dash-dot":[...r["long-dash"],...r.dot],"long-dash-dot-dot":[...r["long-dash"],...r.dot,...r.dot],none:null,"short-dash":r["short-dash"],"short-dash-dot":[...r["short-dash"],...r["short-dot"]],"short-dash-dot-dot":[...r["short-dash"],...r["short-dot"],...r["short-dot"]],"short-dot":r["short-dot"],solid:null},s=8;function n(t){return{pattern:[t,t],pixelRatio:2}}function a(t){return"style"===t?.type?function(t){return null!=t?function(t,e){return null==t?t:{pattern:t.slice(),pixelRatio:e}}(i[t],s):null}(t.style):null}},82321:(t,e,o)=>{o.d(e,{N:()=>w,R:()=>C});var r=o(88102),i=o(90834),s=o(79953),n=o(16804),a=o(32006),l=o(89227),h=o(28473),d=o(40147),c=o(49979),p=o(93800),u=o(6946),_=o(48602),m=(o(21265),o(50925),o(14746),o(75269)),f=(o(63860),o(61977));o(62053);let g=class extends u.default{get startPosition(){return[this.startX,this.startY]}set startPosition(t){this._set("startX",t[0]),this._set("startY",t[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(t){this._set("endX",t[0]),this._set("endY",t[1])}constructor(t){super(t),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const t=this.color;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`}get _lineCap(){return"round"}render(){const{height:t,left:e,top:o,width:r,x1:i,x2:s,y1:n,y2:a}=this._calculateCoordinates(v),l=`stroke: ${this._strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this._lineCap};`;return(0,f.h)("div",{classes:{"esri-line-overlay-item":!0},styles:{left:e+"px",top:o+"px",width:r+"px",height:t+"px",visibility:this.visible?"visible":"hidden"}},[(0,f.h)("svg",{width:r,height:t},[(0,f.h)("line",{x1:i,y1:n,x2:s,y2:a,style:l})])])}renderCanvas(t){if(!this.visible)return;t.strokeStyle=this._strokeStyle,t.lineWidth=this.width,t.lineCap=this._lineCap;const e=this._calculateCoordinates(v);t.beginPath(),t.moveTo(e.left+e.x1,e.top+e.y1),t.lineTo(e.left+e.x2,e.top+e.y2),t.stroke()}_calculateCoordinates(t){const e=Math.min(this.startX,this.endX),o=Math.max(this.startX,this.endX),r=Math.min(this.startY,this.endY),i=Math.max(this.startY,this.endY),s=this.width;return t.left=e-s,t.top=r-s,t.width=o-e+2*s,t.height=Math.max(20,i-r+2*s),t.x1=this.startX-e+s,t.y1=this.startY-r+s,t.x2=this.endX-e+s,t.y2=this.endY-r+s,t}};(0,p._)([(0,_.MZ)()],g.prototype,"startX",void 0),(0,p._)([(0,_.MZ)()],g.prototype,"startY",void 0),(0,p._)([(0,_.MZ)()],g.prototype,"endX",void 0),(0,p._)([(0,_.MZ)()],g.prototype,"endY",void 0),(0,p._)([(0,_.MZ)()],g.prototype,"startPosition",null),(0,p._)([(0,_.MZ)()],g.prototype,"endPosition",null),(0,p._)([(0,_.MZ)()],g.prototype,"width",void 0),(0,p._)([(0,_.MZ)()],g.prototype,"color",void 0),(0,p._)([(0,_.MZ)()],g.prototype,"visible",void 0),(0,p._)([(0,_.MZ)()],g.prototype,"isDecoration",void 0),(0,p._)([(0,_.MZ)({readOnly:!0})],g.prototype,"_strokeStyle",null),g=(0,p._)([(0,m.$)("esri.views.overlay.LineOverlayItem")],g);const v={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0},y=g;var x=o(1149);class w extends c.B{constructor(t){super(t),this._handles=new i.default,this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text="-",this._fontSize=14,this._backgroundColor=new r.default([0,0,0,.6]),this._calloutColor=new r.default([0,0,0,.5]),this._textColor=new r.default([255,255,255]),this._distance=25,this._anchor="right",this.updatePositionOnCameraMove=!0,this.applyProperties(t)}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this.updateLabelPosition()}get isDecoration(){return this._isDecoration}set isDecoration(t){this._isDecoration=t,this._textItem&&(this._textItem.isDecoration=t),this._calloutItem&&(this._calloutItem.isDecoration=t)}get textItem(){return this._textItem}get text(){return this._text}set text(t){this._text=t,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.attached&&(this._textItem.fontSize=this._fontSize)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t,this.attached&&(this._textItem.backgroundColor=this._backgroundColor)}get calloutColor(){return this._calloutColor}set calloutColor(t){this._calloutColor=t,this.attached&&(this._calloutItem.color=this._calloutColor.toRgba())}get textColor(){return this._textColor}set textColor(t){this._textColor=t,this.attached&&(this._textItem.textColor=this._textColor)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this.updateLabelPosition())}get anchor(){return this._anchor}set anchor(t){this._anchor!==t&&(this._anchor=t,this.updateLabelPosition())}get _camera(){return this.view.state.cssCamera}overlaps(t){return!!this.attached&&this.textItem.visible&&t.textItem.visible&&!!this.view.overlay?.overlaps(this._textItem,t.textItem)}updateLabelPosition(){if(!this.attached)return;this._showText=!1,this._showCallout=!1;const{geometry:t,view:e,visible:o}=this;if(null!=t&&e._stage)switch(t.type){case"point":if(!this._computeLabelPositionFromPoint(t.point,A))break;if(t.callout){const e=this._camera,o=t.callout.distance;(0,a.WQ)(O,O,[0,t.callout.offset]),e.renderToScreen(O,A),(0,a.hZ)(T,0,1),(0,a.hs)(T,T,o),(0,a.WQ)(T,T,O),e.renderToScreen(T,D),this._showCallout=this._updatePosition(A,D)}else this._textItem.position=[A[0],A[1]],this._textItem.anchor="center";this._showText=!0;break;case"corner":if(!this._computeLabelPositionFromCorner(t,this._distance,A,D))break;this._showCallout=this._updatePosition(A,D),this._showText=!0;break;case"segment":{if(!this._computeLabelPositionFromSegment(t,this._distance,this._anchor,A,D))break;this._showText=!0;const e=this._updatePosition(A,D);this._showCallout=!1!==t.callout&&e,this._showCallout||(this._textItem.anchor="center")}}this.updateVisibility(o)}_computeLabelPositionFromPoint(t,e){const o=this._camera;return o.projectToRenderScreen(t,Z),!(Z[2]<0||Z[2]>1)&&(o.renderToScreen(Z,e),!0)}_computeLabelPositionFromCorner(t,e,o,r){if(!t)return!1;const i=this._camera;return b(t.left,1,i,M),(0,a.ze)(M,M),b(t.right,0,i,I),(0,a.WQ)(T,M,I),(0,a.ze)(T,T),(0,a.S8)(T,T),i.projectToRenderScreen(t.left.endRenderSpace,Z),!(Z[2]<0||Z[2]>1)&&(i.renderToScreen(Z,o),(0,a.hs)(T,T,e),(0,a.WQ)(T,T,Z),i.renderToScreen(T,r),!0)}_computeLabelPositionFromSegment(t,e,o,r,i){if(!t)return!1;const s=t.segment,n=this._camera;(0,d.Q)(s.startRenderSpace,s.endRenderSpace,n,M),(0,a.hZ)(T,-M[1],M[0]);let l=!1;switch(o){case"top":l=T[1]<0;break;case"bottom":l=T[1]>0;break;case"left":l=T[0]>0;break;case"right":l=T[0]<0}if(l&&(0,a.ze)(T,T),0===(0,a.Bw)(T))switch(o){case"top":T[1]=1;break;case"bottom":T[1]=-1;break;case"left":T[0]=-1;break;case"right":T[0]=1}return s.eval(F[t.sampleLocation],k),n.projectToRenderScreen(k,Z),!(Z[2]<0||Z[2]>1)&&(n.renderToScreen(Z,r),(0,a.hs)(T,T,e),(0,a.WQ)(T,T,Z),n.renderToScreen(T,i),!0)}_updatePosition(t,e){if(e){const o=e[0]-t[0],r=e[1]-t[1];return this._textItem.position=[e[0],e[1]],this._textItem.anchor=Math.abs(o)>Math.abs(r)?o>0?"left":"right":r>0?"top":"bottom",this._calloutItem.startPosition=[t[0],t[1]],this._calloutItem.endPosition=[e[0],e[1]],!0}return this._textItem.position=[t[0],t[1]],this._textItem.anchor="center",!1}createResources(){this._textItem=new x.A({visible:!0,text:this._text,fontSize:this._fontSize,backgroundColor:this._backgroundColor,textColor:this._textColor,isDecoration:this._isDecoration}),this._calloutItem=new y({color:this._calloutColor.toRgba(),visible:!0,width:2,isDecoration:this._isDecoration}),this.updateLabelPosition(),this.view.overlay?.items.addMany([this._textItem,this._calloutItem]),this.updatePositionOnCameraMove&&this._handles.add((0,s.watch)((()=>this.view.state.camera),(()=>this.updateLabelPosition())))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(t){this._textItem.visible=this._showText&&t,this._calloutItem.visible=this._showCallout&&t}}function b(t,e,o,r){return t.eval(e,S,R),(0,l.g)(P,S,R),(0,d.Q)(S,P,o,r)}function C(t){switch(t){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right"}}const S=(0,h.vt)(),P=(0,h.vt)(),R=(0,h.vt)(),M=(0,n.QG)(),I=(0,n.QG)(),T=(0,n.QG)(),k=(0,h.vt)(),Z=(0,n.r_)(),O=(0,n.QG)(),A=(0,n.gs)(),D=(0,n.gs)(),F={start:0,center:.5,end:1}}}]);