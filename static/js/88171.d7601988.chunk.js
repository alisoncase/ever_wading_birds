"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[16453,44827,51623,78196,79538,79906,88171],{6135:(e,t,n)=>{n.d(t,{$4:()=>w,O0:()=>A,O1:()=>M,Sw:()=>C,eH:()=>g,rc:()=>b});var o=n(21772),l=n(88102),r=n(23060),i=n(76612),a=n(16804),s=n(44827);const c="picture-fill",u="simple-fill",f="simple-line",m="simple-marker",d="text",p="cim",y=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),h=new i.q(1e3);function g(e){const t=e.style;let n=null;if(e)switch(e.type){case m:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,o.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):n=e.color;break;case c:n={type:"pattern",src:e.url,width:(0,a.Lz)(e.width)*e.xscale,height:(0,a.Lz)(e.height)*e.yscale,x:(0,a.Lz)(e.xoffset),y:(0,a.Lz)(e.yoffset)};break;case d:n=e.color;break;case p:n=(0,s.getCIMSymbolColor)(e)}return n}function b(e,t){const n=e+"-"+t;return void 0!==h.get(n)?Promise.resolve(h.get(n)):(0,r.default)(e,{responseType:"image"}).then((e=>{const o=e.data,l=o.naturalWidth,r=o.naturalHeight,i=document.createElement("canvas");i.width=l,i.height=r;const a=i.getContext("2d");a.fillStyle=t,a.fillRect(0,0,l,r),a.globalCompositeOperation="destination-in",a.drawImage(o,0,0);const s=i.toDataURL();return h.put(n,s),s}))}function w(e){if(!e)return null;let t=null;switch(e.type){case u:case c:case m:t=w(e.outline);break;case f:{const n=(0,a.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:M(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,a.Lz)(e.miterLimit):e.join},t.dashArray=A(t).join(",")||"none");break}default:t=null}return t}function A(e){if(!e?.style)return[];const{dashArray:t,style:n,width:o}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const l=o??0,r=y.has(n)?y.get(n).map((e=>e*l)):[];if("butt"!==e.cap)for(const[i,a]of r.entries())r[i]=i%2==1?a+l:Math.max(a-l,1);return r}const M=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),C=new l.default([128,128,128])},16453:(e,t,n)=>{n.d(t,{G9:()=>u,getRampStops:()=>a,vt:()=>f,y0:()=>c});var o=n(88102),l=n(78196);const r=new o.default([64,64,64]);function i(e,t){const n=[],o=e.length-1;return 5===e.length?n.push(0,2,4):n.push(0,o),e.map(((e,r)=>n.includes(r)?(0,l.Dd)(e,r,o,t):null))}async function a(e,t,o){let l=!1,r=[],a=[];if(e.stops){const t=e.stops;r=t.map((e=>e.value)),l=t.some((e=>!!e.label)),l&&(a=t.map((e=>e.label)))}const c=r[0],u=r[r.length-1];if(null==c&&null==u)return null;const f=l?null:i(r,o);return(await Promise.all(r.map((async(o,r)=>({value:o,color:"opacity"===e.type?await s(o,e,t):(await Promise.resolve().then(n.bind(n,71237))).getColor(e,o),label:l?a[r]:f?.[r]??""}))))).reverse()}async function s(e,t,l){const i=new o.default(l??r),a=(await Promise.resolve().then(n.bind(n,71237))).getOpacity(t,e);return null!=a&&(i.a=a),i}function c(e){let t=!1,n=[],o=[];n=e.map((e=>e.value)),t=e.some((e=>!!e.label)),t&&(o=e.map((e=>e.label??"")));const l=n[0],r=n[n.length-1];if(null==l&&null==r)return null;const a=t?null:i(n);return n.map(((n,l)=>({value:n,color:u(n,e),label:t?o[l]:a?.[l]??""}))).reverse()}function u(e,t){const{startIndex:n,endIndex:l,weight:r}=function(e,t){let n=0,o=t.length-1;return t.some(((t,l)=>e<t.value?(o=l,!0):(n=l,!1))),{startIndex:n,endIndex:o,weight:(e-t[n].value)/(t[o].value-t[n].value)}}(e,t);if(n===l)return t[n].color;const i=o.default.blendColors(t[n].color,t[l].color,r);return new o.default(i)}function f(e,t){let n=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach(((l,r)=>{0===r?n.push({value:t.max,color:new o.default(l.toColor),label:"high"}):n.push({value:null,color:new o.default(l.toColor),label:""}),r===e.colorRamps.length-1?n.push({value:t.min,color:new o.default(l.fromColor),label:"low"}):n.push({value:null,color:new o.default(l.fromColor),label:""})}));else{let l,r;e&&"algorithmic"===e.type?(l=e.fromColor,r=e.toColor):(l=[0,0,0,1],r=[255,255,255,1]),n=[{value:t.max,color:new o.default(r),label:"high"},{value:t.min,color:new o.default(l),label:"low"}]}return n}},22420:(e,t,n)=>{n.d(t,{GP:()=>m,LI:()=>u,lc:()=>s,u5:()=>c});n(88677);var o=n(23224);const l=/^-?(\d+)(\.(\d+))?$/i;function r(e,t){return e-t}function i(e,t){let n,o;return n=Number(e.toFixed(t)),n<e?o=n+1/10**t:(o=n,n-=1/10**t),n=Number(n.toFixed(t)),o=Number(o.toFixed(t)),[n,o]}function a(e,t,n,o,l){const r=c(e,t,n,o),i=null==r.previous||r.previous<=l,a=null==r.next||r.next<=l;return i&&a||r.previous+r.next<=2*l}function s(e){const t=String(e),n=t.match(l);if(n?.[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(t.toLowerCase().includes("e")){const e=t.split("e"),n=e[0],o=e[1];if(n&&o){const e=Number(n);let t=Number(o);const l=t>0;l||(t=Math.abs(t));const r=s(e);return l?(r.integer+=t,t>r.fractional?r.fractional=0:r.fractional-=t):(r.fractional+=t,t>r.integer?r.integer=1:r.integer-=t),r}}return{integer:0,fractional:0}}function c(e,t,n,o){const l={previous:null,next:null};if(null!=n){const o=e-n,r=t-n-o;l.previous=Math.floor(Math.abs(100*r/o))}if(null!=o){const n=o-e,r=o-t-n;l.next=Math.floor(Math.abs(100*r/n))}return l}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.slice(),{tolerance:o=2,strictBounds:l=!1,indexes:c=n.map(((e,t)=>t))}=t;c.sort(r);for(let r=0;r<c.length;r++){const e=c[r],t=n[e],u=0===e?null:n[e-1],f=e===n.length-1?null:n[e+1],m=s(t).fractional;if(m){let s,c=0,d=!1;for(;c<=m&&!d;){const e=i(t,c);s=l&&0===r?e[1]:e[0],d=a(t,s,u,f,o),c++}d&&(n[e]=s)}}return n}const f={maximumFractionDigits:20};function m(e){return(0,o.ZV)(e,f)}},44827:(e,t,n)=>{n.r(t),n.d(t,{applyCIMSymbolColor:()=>d,applyCIMSymbolRotation:()=>h,getCIMSymbolColor:()=>u,getCIMSymbolRotation:()=>y,getCIMSymbolSize:()=>r,getCIMSymbolType:()=>g,scaleCIMMarker:()=>s,scaleCIMSymbol:()=>a,scaleCIMSymbolTo:()=>i});var o=n(88102),l=n(61154);function r(e){const t=(0,l.lW)(e);if("CIMTextSymbol"===t?.type)return t.height??0;let n=0;if(t?.symbolLayers)for(const o of t.symbolLayers)(0,l.MM)(o)&&null!=o.size&&o.size>n?n=o.size:(0,l.mA)(o)&&null!=o.width&&o.width>n?n=o.width:(0,l.jn)(o);return n}function i(e,t,n){if(!e)return;const o=(0,l.lW)(e),i=r(e);0!==i?a(o,t/i,!1,n):function(e,t){if(e)if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":n.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":n.width=t}}else e.height=t}(o,t)}function a(e,t,n,o){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)c(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":s(n,t,o);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!o?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":a(n.lineSymbol,t,!0,{...o,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const e of n.effects)c(e,t)}}else null!=e.height&&(e.height*=t)}function s(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,l.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const o of e.markerGraphics)e.scaleSymbolsProportionally||a(o.symbol,t,!0,n)}function c(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function u(e){const t=[];return f((0,l.lW)(e),t),t.length?new o.default((0,l.e6)(t[0])):null}function f(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const o="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const r of n.symbolLayers)if(!(r.colorLocked||o&&((0,l.mA)(r)||(0,l.MM)(r)&&r.markerPlacement&&(0,l.zr)(r.markerPlacement))))switch(r.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":r.tintColor&&m(t,r.tintColor);break;case"CIMVectorMarker":r.markerGraphics?.forEach((e=>{f(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":m(t,r.color);break;case"CIMHatchFill":f(r.lineSymbol,t)}}function m(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function d(e,t,n){t instanceof o.default||(t=new o.default(t));const r=(0,l.lW)(e);r&&p(r,t,n)}function p(e,t,n){if(!e)return;let o;o="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===o?.type;if(o?.symbolLayers)for(const i of o.symbolLayers){if(i.colorLocked)continue;if(r)if(n){const{layersToColor:e}=n;if(((0,l.mA)(i)||(0,l.MM)(i)&&i.markerPlacement&&(0,l.zr)(i.markerPlacement))&&"fill"===e||(0,l.jn)(i)&&"outline"===e)continue}else if((0,l.mA)(i)||(0,l.MM)(i)&&i.markerPlacement&&(0,l.zr)(i.markerPlacement))continue;const e=t.toArray();switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor=e;break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{p(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":i.color=e;break;case"CIMHatchFill":p(i.lineSymbol,t,n)}}}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,l.lW)(e);if("CIMTextSymbol"===n?.type||"CIMPointSymbol"===n?.type){const e=n.angle;return null!=e&&t?360-e:e??0}return 0}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=(0,l.lW)(e);if(n&&(t=360-t),"CIMTextSymbol"!==o?.type){if("CIMPointSymbol"===o?.type&&o.symbolLayers){const e=t-(o.angle||0);for(const t of o.symbolLayers)if((0,l.MM)(t)){let n=t.rotation||0;t.rotateClockwise?n-=e:n+=e,t.rotation=n}o.angle=t}}else o.angle=t}function g(e){const t=(0,l.lW)(e);if(!t)return null;switch(t.type){case"CIMPointSymbol":return"CIMPointSymbol";case"CIMLineSymbol":return"CIMLineSymbol";case"CIMPolygonSymbol":return"CIMPolygonSymbol";case"CIMTextSymbol":return"CIMTextSymbol";case"CIMMeshSymbol":return"CIMMeshSymbol";default:return null}}},78196:(e,t,n)=>{n.d(t,{Dd:()=>u,E2:()=>f,Zo:()=>d,_l:()=>y,getDateFormatOptions:()=>p,kC:()=>c,l5:()=>s,uM:()=>m});var o=n(87431),l=n(95011),r=n(22420),i=n(79538),a=n(99071);const s="<",c=">";function u(e,t,n,o){let l="";return 0===t?l=`${s} `:t===n&&(l=`${c} `),l+(o?(0,i.i0)(e,o):(0,r.GP)(e))}const f=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function m(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;let o=null,l=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;o=t.stops[0].value,l=t.stops[t.stops.length-1].value}const r=null!=o&&null!=l?o+(l-o)/2:0,{getColor:i}=await Promise.resolve().then(n.bind(n,71237));return i(t,r)??null}async function d(e,t){const n=e.trailCap,o=e.trailWidth||1,l=t||await m(e)||e.color;return new a.default({cap:n,color:l,width:o})}function p(e,t,n){const r=function(e,t){if(!t.field)return null;if("featureReduction"in e)switch(e.featureReduction?.type){case"cluster":case"binning":{const n=e.featureReduction.fields.find((e=>{let{name:n}=e;return n.toLowerCase()===t.field.toLowerCase()}));return n&&"getField"in e?e.getField(n.onStatisticField):null}}return"getField"in e?e.getField?.(t.field):null}(e,t);if(!r||!(0,i.fs)(r)&&!(0,l.isTimeOnlyField)(r))return null;let a=function(e,t){const n="popupTemplate"in e?e.popupTemplate?.fieldInfos:null;if(n?.length&&t)return n.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))?.format?.dateFormat}(e,r.name);if(!a&&"date"===r.type){let e=0,n=0;t.stops?(e=t.stops?.at(0)?.value??e,n=t.stops?.at(-1)?.value??n):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,n=t.maxDataValue??n),a=n-e>2*o.vf.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:a,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function y(e){if("authoringInfo"in e)return e.authoringInfo?.visualVariables?.find((e=>{let{theme:t}=e;return"reference-size"===t}))}},79538:(e,t,n)=>{n.d(t,{BV:()=>v,EG:()=>w,Lk:()=>I,Ll:()=>E,Np:()=>u,R3:()=>x,SO:()=>p,T1:()=>S,UH:()=>c,Wy:()=>A,XR:()=>d,aM:()=>k,fs:()=>b,i0:()=>P,i3:()=>g});var o=n(66845),l=n(95011),r=n(96247),i=n(76983),a=n(73210),s=n(40731);const c=",",u={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},f="percent-of-total",m="field",d={exclude:["median"]},p={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},y=new Set(["integer","small-integer"]);let h=null;const g=["date","date-only","timestamp-offset"];function b(e){return(0,l.isDateField)(e)||(0,l.isDateOnlyField)(e)||(0,l.isTimestampOffsetField)(e)}async function w(e){const{field:t,field2:n,field3:o,normalizationField:l,valueExpression:i}=e;let a=[];if(i){if(!h){const{arcadeUtils:e}=await(0,r.lw)();h=e}a=h.extractFieldNames(i)}return t&&a.push(t),n&&a.push(n),o&&a.push(o),l&&a.push(l),a}function A(e){let t=e.normalizationType;return t||(e.normalizationField?t=m:null!=e.normalizationTotal&&(t=f)),t??void 0}function M(e){return String(e).padStart(2,"0")}function C(e,t,n){let o;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),o=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${M((n?e.getMonth():e.getUTCMonth())+1)}-${M(n?e.getDate():e.getUTCDate())} ${M(n?e.getHours():e.getUTCHours())}:${M(n?e.getMinutes():e.getUTCMinutes())}:${M(n?e.getSeconds():e.getUTCSeconds())}'`):o=e,o}function k(e,t,n,o){const{hasQueryEngine:l}=e,r=`(${C(n,I(e,n),l)} - ${C(t,I(e,t),l)})`;let i=p[o],a="/";return i<1&&(i=1/i,a="*"),{sqlExpression:1===i?r:`(${r} ${a} ${i})`,sqlWhere:null}}function I(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,l.isDateField)(n))return"field"}}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;for(const n in t)if(t[n].includes(e))return n}function S(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=null;return e&&("string"==typeof e?t.includes(e)&&(o=e):o=(0,i.q3)(e)),n?o||"gray":o}function x(e,t){const n=t&&e.getField(t);return!!n&&y.has(n.type)}function E(e){return`cast(${e} as float)`}function P(e,t){const{format:n,timeZoneOptions:l,fieldType:r}=t??{};let i,c;if(l&&({timeZone:i,timeZoneName:c}=(0,s.hv)(l.layerTimeZone,l.datesInUnknownTimezone,l.viewTimeZone,(0,o.J2)(n||"short-date-short-time"),r)),"string"==typeof e&&isNaN(Date.parse("time-only"===r?`1970-01-01T${e}Z`:e)))return e;switch(r){case"date-only":{const t=(0,o.J2)(n||"short-date");return"string"==typeof e?(0,o.iS)(e,{...t}):(0,o.Yq)(e,{...t,timeZone:a.n$})}case"time-only":{const t=(0,o.J2)(n||"short-time");return"string"==typeof e?(0,o.F8)(e,t):(0,o.Yq)(e,{...t,timeZone:a.n$})}case"timestamp-offset":{if(!i&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||l?(0,o.J2)(n||"short-date-short-time"):void 0,r=t?{...t,timeZone:i,timeZoneName:c}:void 0;return"string"==typeof e?(0,o.Ey)(e,r):(0,o.Yq)(e,r)}default:{const t=n||l?(0,o.J2)(n||"short-date-short-time"):void 0;return(0,o.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:i,timeZoneName:c}:void 0)}}}},79906:(e,t,n)=>{n.d(t,{$d:()=>p,GG:()=>I,N7:()=>y,Sx:()=>h,UQ:()=>k,cJ:()=>g,di:()=>v,dt:()=>b,f3:()=>S,k_:()=>d});var o=n(88102),l=n(58828),r=(n(21265),n(16804)),i=n(28473),a=n(22250),s=n(44827),c=n(6135),u=n(76945),f=n(38602);const m=new o.default("white");function d(e){if(!e)return 0;if((0,f.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,r.PN)((0,c.$4)(e)?.width)}function p(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function y(e){return e.resource?.href??""}function h(e,t){if(!e)return null;let n=null;return(0,f.wk)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new o.default(n):null}(e):(0,f.$y)(e)&&(n="cim"===e.type?(0,s.getCIMSymbolColor)(e):e.color?new o.default(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new o.default(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new o.default(t)),(0,f.wk)(e)?function(e,t,n){const o=e.symbolLayers;if(!o)return;const l=e=>g(t=t??e??(null!=n?m:null),n);o.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=l(e.color);else{const t=null!=e.material?e.material.color:null,o=l(t);null==e.material?e.material=new u.N({color:o}):e.material.color=o,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n))}}))}(e,t,n):(0,f.$y)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function w(e,t){const o=e.symbolLayers;o&&await(0,l.jJ)(o,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=A(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=M(t,i.Un,[e.width,void 0,e.height]);e.width=C(t[0],e.width,1,n),e.height=C(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:o,symbolSize:l}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(28897).then(n.bind(n,28897)),o=await t(e,10),{width:l,height:r,depth:i}=e,a=[l,i,r];let s=1;for(let n=0;n<3;n++){const e=a[n];if(null!=e){s=e/o[n];break}}for(let n=0;n<3;n++)null==a[n]&&(a[n]=o[n]*s);return{resourceSize:o,symbolSize:a}}(e),r=M(t,o,l);e.width=C(t[0],l[0],o[0],r),e.depth=C(t[1],l[1],o[1],r),e.height=C(t[2],l[2],o[2],r)}(e,t)}}(e,t)))}function A(e){for(const t of e)if("number"==typeof t)return t;return null}function M(e,t,n){for(let o=0;o<3;o++){const l=e[o];switch(l){case"symbol-value":{const e=n[o];return null!=e?e/t[o]:1}case"proportional":break;default:if(l&&t[o])return l/t[o]}}return 1}function C(e,t,n,o){switch(e){case"proportional":return n*o;case"symbol-value":return null!=t?t:n;default:return e}}async function k(e,t){if(e&&t)return(0,f.wk)(e)?w(e,t):void((0,f.$y)(e)&&function(e,t){const n=A(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function I(e,t,n){if(e&&null!=t)if((0,f.wk)(e)){const o=e.symbolLayers;o&&o.forEach((e=>{if("object"===e.type)switch(n){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,f.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function v(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.zu)(t)}function S(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}},88171:(e,t,n)=>{n.r(t),n.d(t,{calculateDateFormatInterval:()=>S,createClassBreakLabel:()=>I,createColorStops:()=>k,createUniqueValueLabel:()=>x,dateFormatIntervalOptions:()=>g,getAttribute:()=>E,getAttributes:()=>L,getColorsForRendererValues:()=>C,getColorsFromRenderer:()=>A,setLabelsForClassBreaks:()=>v,timelineDateFormatOptions:()=>b});var o=n(62631),l=n(50925),r=n(45622),i=n(66845),a=n(95011),s=n(22420),c=n(88311),u=n(79538),f=n(79906),m=n(16453),d=n(94848);const p=()=>l.A.getLogger("esri.renderers.support.utils"),y={lte:"<=",gte:">=",lt:"<",gt:">",pct:"%",ld:"\u2013"},h={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},g={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"},b=(0,i.J2)("short-date");async function w(e,t,n){(0,r.tE)(e,t,(()=>[])).push(...n)}async function A(e){const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables)for(const n of e.visualVariables)if(T(n)){const e=(await(0,m.getRampStops)(n)??[]).map((e=>e.color));await w(t,n.field||n.valueExpression,e)}if("heatmap"===e.type){const n=(0,d.Y)(e).map((e=>e.color));await w(t,e.field||e.valueExpression,n)}else if("pie-chart"===e.type){for(const n of e.attributes)await w(t,n.field||n.valueExpression,[n.color]);await w(t,"default",[e?.othersCategory?.color,(0,f.Sx)(e.backgroundFillSymbol,null)])}else if("dot-density"===e.type){for(const n of e.attributes)await w(t,n.field||n.valueExpression,[n.color]);await w(t,"default",[e.backgroundColor])}else if("unique-value"===e.type)if("predominance"===e.authoringInfo?.type)for(const n of e.uniqueValueInfos??[])await w(t,n.value.toString(),[(0,f.Sx)(n.symbol,null)]);else{const n=(e.uniqueValueInfos??[]).map((e=>(0,f.Sx)(e.symbol,null))),{field:o,field2:l,field3:r,valueExpression:i}=e;(o||i)&&await w(t,o||i,n),l&&await w(t,l,n),r&&await w(t,r,n)}else if("class-breaks"===e.type){const n=e.classBreakInfos.map((e=>(0,f.Sx)(e.symbol,null))),{field:o,valueExpression:l}=e;await w(t,o??l,n)}else"simple"===e.type&&await w(t,"default",[(0,f.Sx)(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await w(t,"default",[(0,f.Sx)(e.defaultSymbol,null)]),t.forEach(((e,n)=>{const l=(0,o.Am)(e.filter(Boolean),((e,t)=>JSON.stringify(e)===JSON.stringify(t)));t.set(n,l)})),t}async function M(e,t,n){const o=(0,r.tE)(e,t,(()=>new Map));for(const l of n)o.set(l.value,l.color)}async function C(e){const t=new Map;if(!e)return t;if("unique-value"!==e.type||e.authoringInfo?.type)if("class-breaks"===e.type){const n=e.classBreakInfos.map((e=>({value:e.minValue,color:(0,f.Sx)(e.symbol,null)}))).reverse(),{field:o,valueExpression:l}=e;await M(t,o??l,n)}else"simple"===e.type&&await M(t,"default",[{value:"default",color:(0,f.Sx)(e.symbol,null)}]);else{const n=(e.uniqueValueInfos??[]).map((e=>({value:e.value,color:(0,f.Sx)(e.symbol,null)}))),{field:o,field2:l,field3:r,valueExpression:i,fieldDelimiter:a}=e,s=[o,l,r].filter(Boolean).join(a||"");(s||i)&&await M(t,s||i,n)}if("defaultSymbol"in e&&e.defaultSymbol&&await M(t,"default",[{value:"default",color:(0,f.Sx)(e.defaultSymbol,null)}]),"visualVariables"in e&&e.visualVariables){const n=e.visualVariables.filter((e=>"color"===e.type));for(const e of n){const n=await(0,m.getRampStops)(e)??[];await M(t,e.field||e.valueExpression,n)}}return t}function k(e){const{values:t,colors:n,labelIndexes:o,isDate:l}=e;return t.map(((e,r)=>{let a=null;if(!o||o.includes(r)){const n=l?(0,i.Yq)(e):(0,s.GP)(e);n&&(a=function(e,t,n){let o="";return 0===t?o=y.lt+" ":t===n&&(o=y.gt+" "),o+e}(n,r,t.length-1))}return new c.default({value:e,color:n[r],label:a})}))}function I(e){let t=e.minValue,n=e.maxValue;const o=e.isFirstBreak?"":y.gt+" ",l="percent-of-total"===e.normalizationType?y.pct:"";return t=null==t?"":(0,s.GP)(t),n=null==n?"":(0,s.GP)(n),o+t+l+" "+y.ld+" "+n+l}function v(e){const t=e.classBreakInfos,n=e.normalizationType;let o=[];if(t?.length)if("standard-deviation"!==e.classificationMethod)if(e.round){o.push(t[0].minValue);for(const e of t)o.push(e.maxValue);o=(0,s.LI)(o),t.forEach(((e,t)=>{e.label=I({minValue:0===t?o[0]:o[t],maxValue:o[t+1],isFirstBreak:0===t,normalizationType:n})}))}else t.forEach(((e,t)=>{e.label=I({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===t,normalizationType:n})}));else p().warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.")}function S(e){const t=e.map((e=>new Date(e))),n=t.length;let o=1/0,l=null;for(let r=0;r<n-1;r++){const e=t[r];let i=1/0,a=null;for(let o=r+1;o<n;o++){const n=t[o],l=(e.getFullYear()!==n.getFullYear()?"year":e.getMonth()!==n.getMonth()&&"month")||e.getDate()!==n.getDate()&&"day"||e.getHours()!==n.getHours()&&"hour"||e.getMinutes()!==n.getMinutes()&&"minute"||e.getSeconds()!==n.getSeconds()&&"second"||"millisecond",r=h[l];r<i&&(i=r,a=l)}i<o&&(o=i,l=a)}return l}function x(e){const{value:t,domain:n,fieldInfo:o,dateFormatOptions:l}=e;let r=String(t);const i=n&&"codedValues"in n&&n.codedValues?n.getName(t):null;return i?r=i:null!=t&&o&&((0,u.fs)(o)||(0,a.isTimeOnlyField)(o))?r=(0,u.i0)(t,l??{fieldType:o.type}):"number"==typeof t&&(r=(0,s.GP)(t)),r}function E(e,t){return"normalizationField"in e&&e.normalizationField?function(e,t){return{type:"normalized-field",field:e,normalizationField:t}}(e.field,e.normalizationField):"field"in e&&e.field?P(e.field):"valueExpression"in e&&e.valueExpression?function(e,t,n){return{type:"expression",expression:e,title:t,returnType:n}}(e.valueExpression,e.valueExpressionTitle,t):null}function P(e){return{type:"field",field:e}}function L(e,t){const n=[];if("class-breaks"===e.type||"heatmap"===e.type)n.push(E(e,"number"));else if("unique-value"===e.type){const t=e.authoringInfo;if(t&&"relationship"===t.type){if(t.field1&&t.field2){const e=t.field1.field,o=t.field2.field,l=t.field1.normalizationField,r=t.field2.normalizationField;n.push(E({field:e,normalizationField:l})),n.push(E({field:o,normalizationField:r}))}}else{const t=e.uniqueValueInfos?.[0];let o=null;if(t?.value){const e=typeof t.value;"string"!==e&&"number"!==e||(o=e)}n.push(E(e,o)),[e.field2,e.field3].forEach((e=>e&&n.push(P(e))))}}else"attributes"in e&&e.attributes?.forEach((e=>n.push(E(e,"number"))));const l=t?t(e):"visualVariables"in e?e.visualVariables:null;return l&&l.forEach((e=>n.push(E(e,"number")))),(0,o.Am)(n.filter(o.Ru),((e,t)=>"field"===e.type&&"field"===t.type?e.field===t.field:"normalized-field"===e.type&&"normalized-field"===t.type?e.field===t.field&&e.normalizationField===t.normalizationField:"expression"===e.type&&"expression"===t.type&&e.expression===t.expression))}function T(e){return"color"===e.type}},94848:(e,t,n)=>{n.d(t,{Y:()=>l});var o=n(54823);function l(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter((e=>e.color?.a>0));let n=t.length-1;if(t[0]){const e=t[n];e&&1!==e.ratio&&(t.push(new o.default({ratio:1,color:e.color})),n++)}return t.map(((t,o)=>{let l="";return 0===o?l=e.legendOptions?.minLabel||"low":o===n&&(l=e.legendOptions?.maxLabel||"high"),{color:t.color,label:l,ratio:t.ratio}})).reverse()}}}]);