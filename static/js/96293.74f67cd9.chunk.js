"use strict";(self.webpackChunkever_wading_birds=self.webpackChunkever_wading_birds||[]).push([[79538,96293],{76118:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var i=n(74719),r=n(70934),o=n(85151),a=n(2938);async function s(e){const{layerAdapter:t,...n}=await async function(e){if(!(e&&e.layer&&e.view&&e.fields))throw new i.default("predominant-categories:missing-parameters","'layer', 'view' and 'fields' parameters are required");e.forBinning&&(0,o.p)(e,"predominant-categories");const{layer:t,...n}=e,s=e.forBinning?a.Mi:a.G3,l=(0,a.Jg)(t,s,e.forBinning);if(!l)throw new i.default("predominant-categories:invalid-parameters","'layer' must be one of these types: "+(0,a.Ho)(s).join(", "));const d={layerAdapter:l,...n};await Promise.all([d.view.when(),l.load({signal:d.signal})]);const u=(0,r.MH)(l,d.fields,"predominant-categories:invalid-parameters");if(u)throw u;return d}(e);return t.predominantCategories(n)}},79538:(e,t,n)=>{n.d(t,{BV:()=>Z,EG:()=>w,Lk:()=>F,Ll:()=>D,Np:()=>u,R3:()=>C,SO:()=>m,T1:()=>q,UH:()=>d,Wy:()=>$,XR:()=>g,aM:()=>k,fs:()=>v,i0:()=>S,i3:()=>h});var i=n(66845),r=n(95011),o=n(96247),a=n(76983),s=n(73210),l=n(40731);const d=",",u={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},f="percent-of-total",c="field",g={exclude:["median"]},m={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},p=new Set(["integer","small-integer"]);let y=null;const h=["date","date-only","timestamp-offset"];function v(e){return(0,r.isDateField)(e)||(0,r.isDateOnlyField)(e)||(0,r.isTimestampOffsetField)(e)}async function w(e){const{field:t,field2:n,field3:i,normalizationField:r,valueExpression:a}=e;let s=[];if(a){if(!y){const{arcadeUtils:e}=await(0,o.lw)();y=e}s=y.extractFieldNames(a)}return t&&s.push(t),n&&s.push(n),i&&s.push(i),r&&s.push(r),s}function $(e){let t=e.normalizationType;return t||(e.normalizationField?t=c:null!=e.normalizationTotal&&(t=f)),t??void 0}function T(e){return String(e).padStart(2,"0")}function b(e,t,n){let i;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),i=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${T((n?e.getMonth():e.getUTCMonth())+1)}-${T(n?e.getDate():e.getUTCDate())} ${T(n?e.getHours():e.getUTCHours())}:${T(n?e.getMinutes():e.getUTCMinutes())}:${T(n?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function k(e,t,n,i){const{hasQueryEngine:r}=e,o=`(${b(n,F(e,n),r)} - ${b(t,F(e,t),r)})`;let a=m[i],s="/";return a<1&&(a=1/a,s="*"),{sqlExpression:1===a?o:`(${o} ${s} ${a})`,sqlWhere:null}}function F(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,r.isDateField)(n))return"field"}}function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;for(const n in t)if(t[n].includes(e))return n}function q(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;return e&&("string"==typeof e?t.includes(e)&&(i=e):i=(0,a.q3)(e)),n?i||"gray":i}function C(e,t){const n=t&&e.getField(t);return!!n&&p.has(n.type)}function D(e){return`cast(${e} as float)`}function S(e,t){const{format:n,timeZoneOptions:r,fieldType:o}=t??{};let a,d;if(r&&({timeZone:a,timeZoneName:d}=(0,l.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),o)),"string"==typeof e&&isNaN(Date.parse("time-only"===o?`1970-01-01T${e}Z`:e)))return e;switch(o){case"date-only":{const t=(0,i.J2)(n||"short-date");return"string"==typeof e?(0,i.iS)(e,{...t}):(0,i.Yq)(e,{...t,timeZone:s.n$})}case"time-only":{const t=(0,i.J2)(n||"short-time");return"string"==typeof e?(0,i.F8)(e,t):(0,i.Yq)(e,{...t,timeZone:s.n$})}case"timestamp-offset":{if(!a&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0,o=t?{...t,timeZone:a,timeZoneName:d}:void 0;return"string"==typeof e?(0,i.Ey)(e,o):(0,i.Yq)(e,o)}default:{const t=n||r?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:a,timeZoneName:d}:void 0)}}}},85151:(e,t,n)=>{n.d(t,{p:()=>o,z:()=>r});var i=n(74719);const r="aggregateCount";function o(e,t){if(!e.view)throw new i.default(`${t}:missing-parameters`,"'view' parameter is required for binning");if(e.sqlExpression)throw new i.default(`${t}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if("3d"===e.view.type)throw new i.default(`${t}:invalid-parameters`,"3d view is not supported for binning")}}}]);